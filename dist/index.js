// @bun
var g0=Object.defineProperty;var _1=(K,w)=>{for(var b in w)g0(K,b,{get:w[b],enumerable:!0,configurable:!0,set:(I)=>w[b]=()=>I})};var q4=function(K,w,b,I){var W=arguments.length,P=W<3?w:I===null?I=Object.getOwnPropertyDescriptor(w,b):I,O;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")P=Reflect.decorate(K,w,b,I);else for(var M=K.length-1;M>=0;M--)if(O=K[M])P=(W<3?O(P):W>3?O(w,b,P):O(w,b))||P;return W>3&&P&&Object.defineProperty(w,b,P),P},S4=(K,w)=>(b,I)=>w(b,I,K);var Z4={};_1(Z4,{ETokenAudiences:()=>P6});var P6;((w)=>w.SYSTEM="https://api-guard.booljs.com")(P6||={});var G2={};_1(G2,{service:()=>A0,guardMetadata:()=>Z0,guardClient:()=>c0,authState:()=>k0});var k0=Symbol.for("__boolGuard::authState"),Z0=Symbol.for("__boolGuard::guardMetadata"),A0=Symbol.for("__boolGuard::authService"),c0=Symbol.for("__boolGuard::guardClient");var u0=(K)=>(w,b)=>{Reflect.defineMetadata(G2.guardMetadata,K,w.constructor,b)};var C0=Object.create,{getPrototypeOf:x0,defineProperty:m1,getOwnPropertyNames:o0}=Object,r0=Object.prototype.hasOwnProperty,O1=(K,w,b)=>{b=K!=null?C0(x0(K)):{};let I=w||!K||!K.__esModule?m1(b,"default",{value:K,enumerable:!0}):b;for(let W of o0(K))if(!r0.call(I,W))m1(I,W,{get:()=>K[W],enumerable:!0});return I},m=(K,w)=>()=>(w||K((w={exports:{}}).exports,w),w.exports),y0=(K,w)=>{for(var b in w)m1(K,b,{get:w[b],enumerable:!0,configurable:!0,set:(I)=>w[b]=()=>I})},_0=import.meta.require,d1=m(()=>{/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var K;(function(w){(function(b){var I=typeof globalThis==="object"?globalThis:typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:J(),W=P(w);if(typeof I.Reflect<"u")W=P(I.Reflect,W);if(b(W,I),typeof I.Reflect>"u")I.Reflect=w;function P(N,G){return function(Y,X){if(Object.defineProperty(N,Y,{configurable:!0,writable:!0,value:X}),G)G(Y,X)}}function O(){try{return Function("return this;")()}catch(N){}}function M(){try{return(0,eval)("(function() { return this; })()")}catch(N){}}function J(){return O()||M()}})(function(b,I){var W=Object.prototype.hasOwnProperty,P=typeof Symbol==="function",O=P&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",M=P&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",J=typeof Object.create==="function",N={__proto__:[]}instanceof Array,G=!J&&!N,Y={create:J?function(){return l2(Object.create(null))}:N?function(){return l2({__proto__:null})}:function(){return l2({})},has:G?function(z,q){return W.call(z,q)}:function(z,q){return q in z},get:G?function(z,q){return W.call(z,q)?z[q]:void 0}:function(z,q){return z[q]}},X=Object.getPrototypeOf(Function),h=typeof Map==="function"&&typeof Map.prototype.entries==="function"?Map:A1(),D=typeof Set==="function"&&typeof Set.prototype.entries==="function"?Set:n4(),Q=typeof WeakMap==="function"?WeakMap:c1(),v=P?Symbol.for("@reflect-metadata:registry"):void 0,S=t2(),H=a2(S);function L(z,q,R,c){if(!_(R)){if(!a(z))throw TypeError();if(!t(q))throw TypeError();if(!t(c)&&!_(c)&&!V2(c))throw TypeError();if(V2(c))c=void 0;return R=p(R),K2(z,q,R,c)}else{if(!a(z))throw TypeError();if(!P2(q))throw TypeError();return y(z,q)}}b("decorate",L);function $(z,q){function R(c,o){if(!t(c))throw TypeError();if(!_(o)&&!D2(o))throw TypeError();j2(z,q,c,o)}return R}b("metadata",$);function F(z,q,R,c){if(!t(R))throw TypeError();if(!_(c))c=p(c);return j2(z,q,R,c)}b("defineMetadata",F);function x(z,q,R){if(!t(q))throw TypeError();if(!_(R))R=p(R);return J2(z,q,R)}b("hasMetadata",x);function V(z,q,R){if(!t(q))throw TypeError();if(!_(R))R=p(R);return b2(z,q,R)}b("hasOwnMetadata",V);function C(z,q,R){if(!t(q))throw TypeError();if(!_(R))R=p(R);return X2(z,q,R)}b("getMetadata",C);function k(z,q,R){if(!t(q))throw TypeError();if(!_(R))R=p(R);return E2(z,q,R)}b("getOwnMetadata",k);function u(z,q){if(!t(z))throw TypeError();if(!_(q))q=p(q);return l(z,q)}b("getMetadataKeys",u);function r(z,q){if(!t(z))throw TypeError();if(!_(q))q=p(q);return U2(z,q)}b("getOwnMetadataKeys",r);function e(z,q,R){if(!t(q))throw TypeError();if(!_(R))R=p(R);if(!t(q))throw TypeError();if(!_(R))R=p(R);var c=N4(q,R,!1);if(_(c))return!1;return c.OrdinaryDeleteMetadata(z,q,R)}b("deleteMetadata",e);function y(z,q){for(var R=z.length-1;R>=0;--R){var c=z[R],o=c(q);if(!_(o)&&!V2(o)){if(!P2(o))throw TypeError();q=o}}return q}function K2(z,q,R,c){for(var o=z.length-1;o>=0;--o){var I2=z[o],U=I2(q,R,c);if(!_(U)&&!V2(U)){if(!t(U))throw TypeError();c=U}}return c}function J2(z,q,R){var c=b2(z,q,R);if(c)return!0;var o=Y2(q);if(!V2(o))return J2(z,o,R);return!1}function b2(z,q,R){var c=N4(q,R,!1);if(_(c))return!1;return c2(c.OrdinaryHasOwnMetadata(z,q,R))}function X2(z,q,R){var c=b2(z,q,R);if(c)return E2(z,q,R);var o=Y2(q);if(!V2(o))return X2(z,o,R);return}function E2(z,q,R){var c=N4(q,R,!1);if(_(c))return;return c.OrdinaryGetOwnMetadata(z,q,R)}function j2(z,q,R,c){var o=N4(R,c,!0);o.OrdinaryDefineOwnMetadata(z,q,R,c)}function l(z,q){var R=U2(z,q),c=Y2(z);if(c===null)return R;var o=l(c,q);if(o.length<=0)return R;if(R.length<=0)return o;var I2=new D,U=[];for(var B=0,j=R;B<j.length;B++){var Z=j[B],A=I2.has(Z);if(!A)I2.add(Z),U.push(Z)}for(var g=0,f=o;g<f.length;g++){var Z=f[g],A=I2.has(Z);if(!A)I2.add(Z),U.push(Z)}return U}function U2(z,q){var R=N4(z,q,!1);if(!R)return[];return R.OrdinaryOwnMetadataKeys(z,q)}function g2(z){if(z===null)return 1;switch(typeof z){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return z===null?1:6;default:return 6}}function _(z){return z===void 0}function V2(z){return z===null}function x2(z){return typeof z==="symbol"}function t(z){return typeof z==="object"?z!==null:typeof z==="function"}function A2(z,q){switch(g2(z)){case 0:return z;case 1:return z;case 2:return z;case 3:return z;case 4:return z;case 5:return z}var R=q===3?"string":q===5?"number":"default",c=M2(z,O);if(c!==void 0){var o=c.call(z,R);if(t(o))throw TypeError();return o}return F2(z,R==="default"?"number":R)}function F2(z,q){if(q==="string"){var R=z.toString;if(i(R)){var c=R.call(z);if(!t(c))return c}var o=z.valueOf;if(i(o)){var c=o.call(z);if(!t(c))return c}}else{var o=z.valueOf;if(i(o)){var c=o.call(z);if(!t(c))return c}var I2=z.toString;if(i(I2)){var c=I2.call(z);if(!t(c))return c}}throw TypeError()}function c2(z){return!!z}function o2(z){return""+z}function p(z){var q=A2(z,3);if(x2(q))return q;return o2(q)}function a(z){return Array.isArray?Array.isArray(z):z instanceof Object?z instanceof Array:Object.prototype.toString.call(z)==="[object Array]"}function i(z){return typeof z==="function"}function P2(z){return typeof z==="function"}function D2(z){switch(g2(z)){case 3:return!0;case 4:return!0;default:return!1}}function z2(z,q){return z===q||z!==z&&q!==q}function M2(z,q){var R=z[q];if(R===void 0||R===null)return;if(!i(R))throw TypeError();return R}function T2(z){var q=M2(z,M);if(!i(q))throw TypeError();var R=q.call(z);if(!t(R))throw TypeError();return R}function L2(z){return z.value}function Q2(z){var q=z.next();return q.done?!1:q}function r2(z){var q=z.return;if(q)q.call(z)}function Y2(z){var q=Object.getPrototypeOf(z);if(typeof z!=="function"||z===X)return q;if(q!==X)return q;var R=z.prototype,c=R&&Object.getPrototypeOf(R);if(c==null||c===Object.prototype)return q;var o=c.constructor;if(typeof o!=="function")return q;if(o===z)return q;return o}function d2(){var z;if(!_(v)&&typeof I.Reflect<"u"&&!(v in I.Reflect)&&typeof I.Reflect.defineMetadata==="function")z=Z1(I.Reflect);var q,R,c,o=new Q,I2={registerProvider:U,getProvider:j,setProvider:A};return I2;function U(g){if(!Object.isExtensible(I2))throw Error("Cannot add provider to a frozen registry.");switch(!0){case z===g:break;case _(q):q=g;break;case q===g:break;case _(R):R=g;break;case R===g:break;default:if(c===void 0)c=new D;c.add(g);break}}function B(g,f){if(!_(q)){if(q.isProviderFor(g,f))return q;if(!_(R)){if(R.isProviderFor(g,f))return q;if(!_(c)){var d=T2(c);while(!0){var n=Q2(d);if(!n)return;var N2=L2(n);if(N2.isProviderFor(g,f))return r2(d),N2}}}}if(!_(z)&&z.isProviderFor(g,f))return z;return}function j(g,f){var d=o.get(g),n;if(!_(d))n=d.get(f);if(!_(n))return n;if(n=B(g,f),!_(n)){if(_(d))d=new h,o.set(g,d);d.set(f,n)}return n}function Z(g){if(_(g))throw TypeError();return q===g||R===g||!_(c)&&c.has(g)}function A(g,f,d){if(!Z(d))throw Error("Metadata provider not registered.");var n=j(g,f);if(n!==d){if(!_(n))return!1;var N2=o.get(g);if(_(N2))N2=new h,o.set(g,N2);N2.set(f,d)}return!0}}function t2(){var z;if(!_(v)&&t(I.Reflect)&&Object.isExtensible(I.Reflect))z=I.Reflect[v];if(_(z))z=d2();if(!_(v)&&t(I.Reflect)&&Object.isExtensible(I.Reflect))Object.defineProperty(I.Reflect,v,{enumerable:!1,configurable:!1,writable:!1,value:z});return z}function a2(z){var q=new Q,R={isProviderFor:function(Z,A){var g=q.get(Z);if(_(g))return!1;return g.has(A)},OrdinaryDefineOwnMetadata:U,OrdinaryHasOwnMetadata:o,OrdinaryGetOwnMetadata:I2,OrdinaryOwnMetadataKeys:B,OrdinaryDeleteMetadata:j};return S.registerProvider(R),R;function c(Z,A,g){var f=q.get(Z),d=!1;if(_(f)){if(!g)return;f=new h,q.set(Z,f),d=!0}var n=f.get(A);if(_(n)){if(!g)return;if(n=new h,f.set(A,n),!z.setProvider(Z,A,R)){if(f.delete(A),d)q.delete(Z);throw Error("Wrong provider for target.")}}return n}function o(Z,A,g){var f=c(A,g,!1);if(_(f))return!1;return c2(f.has(Z))}function I2(Z,A,g){var f=c(A,g,!1);if(_(f))return;return f.get(Z)}function U(Z,A,g,f){var d=c(g,f,!0);d.set(Z,A)}function B(Z,A){var g=[],f=c(Z,A,!1);if(_(f))return g;var d=f.keys(),n=T2(d),N2=0;while(!0){var Y4=Q2(n);if(!Y4)return g.length=N2,g;var s2=L2(Y4);try{g[N2]=s2}catch(h2){try{r2(n)}finally{throw h2}}N2++}}function j(Z,A,g){var f=c(A,g,!1);if(_(f))return!1;if(!f.delete(Z))return!1;if(f.size===0){var d=q.get(A);if(!_(d)){if(d.delete(g),d.size===0)q.delete(d)}}return!0}}function Z1(z){var{defineMetadata:q,hasOwnMetadata:R,getOwnMetadata:c,getOwnMetadataKeys:o,deleteMetadata:I2}=z,U=new Q,B={isProviderFor:function(j,Z){var A=U.get(j);if(!_(A)&&A.has(Z))return!0;if(o(j,Z).length){if(_(A))A=new D,U.set(j,A);return A.add(Z),!0}return!1},OrdinaryDefineOwnMetadata:q,OrdinaryHasOwnMetadata:R,OrdinaryGetOwnMetadata:c,OrdinaryOwnMetadataKeys:o,OrdinaryDeleteMetadata:I2};return B}function N4(z,q,R){var c=S.getProvider(z,q);if(!_(c))return c;if(R){if(S.setProvider(z,q,H))return H;throw Error("Illegal state.")}return}function A1(){var z={},q=[],R=function(){function B(j,Z,A){this._index=0,this._keys=j,this._values=Z,this._selector=A}return B.prototype["@@iterator"]=function(){return this},B.prototype[M]=function(){return this},B.prototype.next=function(){var j=this._index;if(j>=0&&j<this._keys.length){var Z=this._selector(this._keys[j],this._values[j]);if(j+1>=this._keys.length)this._index=-1,this._keys=q,this._values=q;else this._index++;return{value:Z,done:!1}}return{value:void 0,done:!0}},B.prototype.throw=function(j){if(this._index>=0)this._index=-1,this._keys=q,this._values=q;throw j},B.prototype.return=function(j){if(this._index>=0)this._index=-1,this._keys=q,this._values=q;return{value:j,done:!0}},B}(),c=function(){function B(){this._keys=[],this._values=[],this._cacheKey=z,this._cacheIndex=-2}return Object.defineProperty(B.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),B.prototype.has=function(j){return this._find(j,!1)>=0},B.prototype.get=function(j){var Z=this._find(j,!1);return Z>=0?this._values[Z]:void 0},B.prototype.set=function(j,Z){var A=this._find(j,!0);return this._values[A]=Z,this},B.prototype.delete=function(j){var Z=this._find(j,!1);if(Z>=0){var A=this._keys.length;for(var g=Z+1;g<A;g++)this._keys[g-1]=this._keys[g],this._values[g-1]=this._values[g];if(this._keys.length--,this._values.length--,z2(j,this._cacheKey))this._cacheKey=z,this._cacheIndex=-2;return!0}return!1},B.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=z,this._cacheIndex=-2},B.prototype.keys=function(){return new R(this._keys,this._values,o)},B.prototype.values=function(){return new R(this._keys,this._values,I2)},B.prototype.entries=function(){return new R(this._keys,this._values,U)},B.prototype["@@iterator"]=function(){return this.entries()},B.prototype[M]=function(){return this.entries()},B.prototype._find=function(j,Z){if(!z2(this._cacheKey,j)){this._cacheIndex=-1;for(var A=0;A<this._keys.length;A++)if(z2(this._keys[A],j)){this._cacheIndex=A;break}}if(this._cacheIndex<0&&Z)this._cacheIndex=this._keys.length,this._keys.push(j),this._values.push(void 0);return this._cacheIndex},B}();return c;function o(B,j){return B}function I2(B,j){return j}function U(B,j){return[B,j]}}function n4(){var z=function(){function q(){this._map=new h}return Object.defineProperty(q.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),q.prototype.has=function(R){return this._map.has(R)},q.prototype.add=function(R){return this._map.set(R,R),this},q.prototype.delete=function(R){return this._map.delete(R)},q.prototype.clear=function(){this._map.clear()},q.prototype.keys=function(){return this._map.keys()},q.prototype.values=function(){return this._map.keys()},q.prototype.entries=function(){return this._map.entries()},q.prototype["@@iterator"]=function(){return this.keys()},q.prototype[M]=function(){return this.keys()},q}();return z}function c1(){var z=16,q=Y.create(),R=c();return function(){function j(){this._key=c()}return j.prototype.has=function(Z){var A=o(Z,!1);return A!==void 0?Y.has(A,this._key):!1},j.prototype.get=function(Z){var A=o(Z,!1);return A!==void 0?Y.get(A,this._key):void 0},j.prototype.set=function(Z,A){var g=o(Z,!0);return g[this._key]=A,this},j.prototype.delete=function(Z){var A=o(Z,!1);return A!==void 0?delete A[this._key]:!1},j.prototype.clear=function(){this._key=c()},j}();function c(){var j;do j="@@WeakMap@@"+B();while(Y.has(q,j));return q[j]=!0,j}function o(j,Z){if(!W.call(j,R)){if(!Z)return;Object.defineProperty(j,R,{value:Y.create()})}return j[R]}function I2(j,Z){for(var A=0;A<Z;++A)j[A]=Math.random()*255|0;return j}function U(j){if(typeof Uint8Array==="function"){var Z=new Uint8Array(j);if(typeof crypto<"u")crypto.getRandomValues(Z);else if(typeof msCrypto<"u")msCrypto.getRandomValues(Z);else I2(Z,j);return Z}return I2(Array(j),j)}function B(){var j=U(z);j[6]=j[6]&79|64,j[8]=j[8]&191|128;var Z="";for(var A=0;A<z;++A){var g=j[A];if(A===4||A===6||A===8)Z+="-";if(g<16)Z+="0";Z+=g.toString(16).toLowerCase()}return Z}}function l2(z){return z.__=void 0,delete z.__,z}})})(K||(K={}))}),H4=m((K,w)=>{w.exports=TypeError}),m0=m((K,w)=>{w.exports=_0("util").inspect}),M1=m((K,w)=>{var b=typeof Map==="function"&&Map.prototype,I=Object.getOwnPropertyDescriptor&&b?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,W=b&&I&&typeof I.get==="function"?I.get:null,P=b&&Map.prototype.forEach,O=typeof Set==="function"&&Set.prototype,M=Object.getOwnPropertyDescriptor&&O?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,J=O&&M&&typeof M.get==="function"?M.get:null,N=O&&Set.prototype.forEach,G=typeof WeakMap==="function"&&WeakMap.prototype,Y=G?WeakMap.prototype.has:null,X=typeof WeakSet==="function"&&WeakSet.prototype,h=X?WeakSet.prototype.has:null,D=typeof WeakRef==="function"&&WeakRef.prototype,Q=D?WeakRef.prototype.deref:null,v=Boolean.prototype.valueOf,S=Object.prototype.toString,H=Function.prototype.toString,L=String.prototype.match,$=String.prototype.slice,F=String.prototype.replace,x=String.prototype.toUpperCase,V=String.prototype.toLowerCase,C=RegExp.prototype.test,k=Array.prototype.concat,u=Array.prototype.join,r=Array.prototype.slice,e=Math.floor,y=typeof BigInt==="function"?BigInt.prototype.valueOf:null,K2=Object.getOwnPropertySymbols,J2=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?Symbol.prototype.toString:null,b2=typeof Symbol==="function"&&typeof Symbol.iterator==="object",X2=typeof Symbol==="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===b2?"object":"symbol")?Symbol.toStringTag:null,E2=Object.prototype.propertyIsEnumerable,j2=(typeof Reflect==="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(U){return U.__proto__}:null);function l(U,B){if(U===1/0||U===-1/0||U!==U||U&&U>-1000&&U<1000||C.call(/e/,B))return B;var j=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof U==="number"){var Z=U<0?-e(-U):e(U);if(Z!==U){var A=String(Z),g=$.call(B,A.length+1);return F.call(A,j,"$&_")+"."+F.call(F.call(g,/([0-9]{3})/g,"$&_"),/_$/,"")}}return F.call(B,j,"$&_")}var U2=m0(),g2=U2.custom,_=z2(g2)?g2:null,V2={__proto__:null,double:'"',single:"'"},x2={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};w.exports=function U(B,j,Z,A){var g=j||{};if(L2(g,"quoteStyle")&&!L2(V2,g.quoteStyle))throw TypeError('option "quoteStyle" must be "single" or "double"');if(L2(g,"maxStringLength")&&(typeof g.maxStringLength==="number"?g.maxStringLength<0&&g.maxStringLength!==1/0:g.maxStringLength!==null))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var f=L2(g,"customInspect")?g.customInspect:!0;if(typeof f!=="boolean"&&f!=="symbol")throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(L2(g,"indent")&&g.indent!==null&&g.indent!=="\t"&&!(parseInt(g.indent,10)===g.indent&&g.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(L2(g,"numericSeparator")&&typeof g.numericSeparator!=="boolean")throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var d=g.numericSeparator;if(typeof B>"u")return"undefined";if(B===null)return"null";if(typeof B==="boolean")return B?"true":"false";if(typeof B==="string")return n4(B,g);if(typeof B==="number"){if(B===0)return 1/0/B>0?"0":"-0";var n=String(B);return d?l(B,n):n}if(typeof B==="bigint"){var N2=String(B)+"n";return d?l(B,N2):N2}var Y4=typeof g.depth>"u"?5:g.depth;if(typeof Z>"u")Z=0;if(Z>=Y4&&Y4>0&&typeof B==="object")return c2(B)?"[Array]":"[Object]";var s2=c(g,Z);if(typeof A>"u")A=[];else if(Y2(A,B)>=0)return"[Circular]";function h2(V4,t4,j0){if(t4)A=r.call(A),A.push(t4);if(j0){var W6={depth:g.depth};if(L2(g,"quoteStyle"))W6.quoteStyle=g.quoteStyle;return U(V4,W6,Z+1,A)}return U(V4,g,Z+1,A)}if(typeof B==="function"&&!p(B)){var tK=r2(B),aK=I2(B,h2);return"[Function"+(tK?": "+tK:" (anonymous)")+"]"+(aK.length>0?" { "+u.call(aK,", ")+" }":"")}if(z2(B)){var sK=b2?F.call(String(B),/^(Symbol\(.*\))_[^)]*$/,"$1"):J2.call(B);return typeof B==="object"&&!b2?l2(sK):sK}if(A1(B)){var k4="<"+V.call(String(B.nodeName)),u1=B.attributes||[];for(var d4=0;d4<u1.length;d4++)k4+=" "+u1[d4].name+"="+t(A2(u1[d4].value),"double",g);if(k4+=">",B.childNodes&&B.childNodes.length)k4+="...";return k4+="</"+V.call(String(B.nodeName))+">",k4}if(c2(B)){if(B.length===0)return"[]";var C1=I2(B,h2);if(s2&&!R(C1))return"["+o(C1,s2)+"]";return"[ "+u.call(C1,", ")+" ]"}if(a(B)){var x1=I2(B,h2);if(!("cause"in Error.prototype)&&"cause"in B&&!E2.call(B,"cause"))return"{ ["+String(B)+"] "+u.call(k.call("[cause]: "+h2(B.cause),x1),", ")+" }";if(x1.length===0)return"["+String(B)+"]";return"{ ["+String(B)+"] "+u.call(x1,", ")+" }"}if(typeof B==="object"&&f){if(_&&typeof B[_]==="function"&&U2)return U2(B,{depth:Y4-Z});else if(f!=="symbol"&&typeof B.inspect==="function")return B.inspect()}if(d2(B)){var K6=[];if(P)P.call(B,function(V4,t4){K6.push(h2(t4,B,!0)+" => "+h2(V4,B))});return q("Map",W.call(B),K6,s2)}if(Z1(B)){var w6=[];if(N)N.call(B,function(V4){w6.push(h2(V4,B))});return q("Set",J.call(B),w6,s2)}if(t2(B))return z("WeakMap");if(N4(B))return z("WeakSet");if(a2(B))return z("WeakRef");if(P2(B))return l2(h2(Number(B)));if(M2(B))return l2(h2(y.call(B)));if(D2(B))return l2(v.call(B));if(i(B))return l2(h2(String(B)));if(typeof window<"u"&&B===window)return"{ [object Window] }";if(typeof globalThis<"u"&&B===globalThis||typeof global<"u"&&B===global)return"{ [object globalThis] }";if(!o2(B)&&!p(B)){var o1=I2(B,h2),b6=j2?j2(B)===Object.prototype:B instanceof Object||B.constructor===Object,r1=B instanceof Object?"":"null prototype",I6=!b6&&X2&&Object(B)===B&&X2 in B?$.call(Q2(B),8,-1):r1?"Object":"",E0=b6||typeof B.constructor!=="function"?"":B.constructor.name?B.constructor.name+" ":"",y1=E0+(I6||r1?"["+u.call(k.call([],I6||[],r1||[]),": ")+"] ":"");if(o1.length===0)return y1+"{}";if(s2)return y1+"{"+o(o1,s2)+"}";return y1+"{ "+u.call(o1,", ")+" }"}return String(B)};function t(U,B,j){var Z=j.quoteStyle||B,A=V2[Z];return A+U+A}function A2(U){return F.call(String(U),/"/g,"&quot;")}function F2(U){return!X2||!(typeof U==="object"&&((X2 in U)||typeof U[X2]<"u"))}function c2(U){return Q2(U)==="[object Array]"&&F2(U)}function o2(U){return Q2(U)==="[object Date]"&&F2(U)}function p(U){return Q2(U)==="[object RegExp]"&&F2(U)}function a(U){return Q2(U)==="[object Error]"&&F2(U)}function i(U){return Q2(U)==="[object String]"&&F2(U)}function P2(U){return Q2(U)==="[object Number]"&&F2(U)}function D2(U){return Q2(U)==="[object Boolean]"&&F2(U)}function z2(U){if(b2)return U&&typeof U==="object"&&U instanceof Symbol;if(typeof U==="symbol")return!0;if(!U||typeof U!=="object"||!J2)return!1;try{return J2.call(U),!0}catch(B){}return!1}function M2(U){if(!U||typeof U!=="object"||!y)return!1;try{return y.call(U),!0}catch(B){}return!1}var T2=Object.prototype.hasOwnProperty||function(U){return U in this};function L2(U,B){return T2.call(U,B)}function Q2(U){return S.call(U)}function r2(U){if(U.name)return U.name;var B=L.call(H.call(U),/^function\s*([\w$]+)/);if(B)return B[1];return null}function Y2(U,B){if(U.indexOf)return U.indexOf(B);for(var j=0,Z=U.length;j<Z;j++)if(U[j]===B)return j;return-1}function d2(U){if(!W||!U||typeof U!=="object")return!1;try{W.call(U);try{J.call(U)}catch(B){return!0}return U instanceof Map}catch(B){}return!1}function t2(U){if(!Y||!U||typeof U!=="object")return!1;try{Y.call(U,Y);try{h.call(U,h)}catch(B){return!0}return U instanceof WeakMap}catch(B){}return!1}function a2(U){if(!Q||!U||typeof U!=="object")return!1;try{return Q.call(U),!0}catch(B){}return!1}function Z1(U){if(!J||!U||typeof U!=="object")return!1;try{J.call(U);try{W.call(U)}catch(B){return!0}return U instanceof Set}catch(B){}return!1}function N4(U){if(!h||!U||typeof U!=="object")return!1;try{h.call(U,h);try{Y.call(U,Y)}catch(B){return!0}return U instanceof WeakSet}catch(B){}return!1}function A1(U){if(!U||typeof U!=="object")return!1;if(typeof HTMLElement<"u"&&U instanceof HTMLElement)return!0;return typeof U.nodeName==="string"&&typeof U.getAttribute==="function"}function n4(U,B){if(U.length>B.maxStringLength){var j=U.length-B.maxStringLength,Z="... "+j+" more character"+(j>1?"s":"");return n4($.call(U,0,B.maxStringLength),B)+Z}var A=x2[B.quoteStyle||"single"];A.lastIndex=0;var g=F.call(F.call(U,A,"\\$1"),/[\x00-\x1f]/g,c1);return t(g,"single",B)}function c1(U){var B=U.charCodeAt(0),j={8:"b",9:"t",10:"n",12:"f",13:"r"}[B];if(j)return"\\"+j;return"\\x"+(B<16?"0":"")+x.call(B.toString(16))}function l2(U){return"Object("+U+")"}function z(U){return U+" { ? }"}function q(U,B,j,Z){var A=Z?o(j,Z):u.call(j,", ");return U+" ("+B+") {"+A+"}"}function R(U){for(var B=0;B<U.length;B++)if(Y2(U[B],`
`)>=0)return!1;return!0}function c(U,B){var j;if(U.indent==="\t")j="\t";else if(typeof U.indent==="number"&&U.indent>0)j=u.call(Array(U.indent+1)," ");else return null;return{base:j,prev:u.call(Array(B+1),j)}}function o(U,B){if(U.length===0)return"";var j=`
`+B.prev+B.base;return j+u.call(U,","+j)+`
`+B.prev}function I2(U,B){var j=c2(U),Z=[];if(j){Z.length=U.length;for(var A=0;A<U.length;A++)Z[A]=L2(U,A)?B(U[A],U):""}var g=typeof K2==="function"?K2(U):[],f;if(b2){f={};for(var d=0;d<g.length;d++)f["$"+g[d]]=g[d]}for(var n in U){if(!L2(U,n))continue;if(j&&String(Number(n))===n&&n<U.length)continue;if(b2&&f["$"+n]instanceof Symbol)continue;else if(C.call(/[^\w$]/,n))Z.push(B(n,U)+": "+B(U[n],U));else Z.push(n+": "+B(U[n],U))}if(typeof K2==="function"){for(var N2=0;N2<g.length;N2++)if(E2.call(U,g[N2]))Z.push("["+B(g[N2])+"]: "+B(U[g[N2]],U))}return Z}}),f0=m((K,w)=>{var b=M1(),I=H4(),W=function(N,G,Y){var X=N,h;for(;(h=X.next)!=null;X=h)if(h.key===G){if(X.next=h.next,!Y)h.next=N.next,N.next=h;return h}},P=function(N,G){if(!N)return;var Y=W(N,G);return Y&&Y.value},O=function(N,G,Y){var X=W(N,G);if(X)X.value=Y;else N.next={key:G,next:N.next,value:Y}},M=function(N,G){if(!N)return!1;return!!W(N,G)},J=function(N,G){if(N)return W(N,G,!0)};w.exports=function(){var N,G={assert:function(Y){if(!G.has(Y))throw new I("Side channel does not contain "+b(Y))},delete:function(Y){var X=N&&N.next,h=J(N,Y);if(h&&X&&X===h)N=void 0;return!!h},get:function(Y){return P(N,Y)},has:function(Y){return M(N,Y)},set:function(Y,X){if(!N)N={next:void 0};O(N,Y,X)}};return G}}),J6=m((K,w)=>{w.exports=Object}),T0=m((K,w)=>{w.exports=Error}),l0=m((K,w)=>{w.exports=EvalError}),p0=m((K,w)=>{w.exports=RangeError}),i0=m((K,w)=>{w.exports=ReferenceError}),e0=m((K,w)=>{w.exports=SyntaxError}),n0=m((K,w)=>{w.exports=URIError}),d0=m((K,w)=>{w.exports=Math.abs}),t0=m((K,w)=>{w.exports=Math.floor}),a0=m((K,w)=>{w.exports=Math.max}),s0=m((K,w)=>{w.exports=Math.min}),Kw=m((K,w)=>{w.exports=Math.pow}),ww=m((K,w)=>{w.exports=Math.round}),bw=m((K,w)=>{w.exports=Number.isNaN||function(b){return b!==b}}),Iw=m((K,w)=>{var b=bw();w.exports=function(I){if(b(I)||I===0)return I;return I<0?-1:1}}),Ww=m((K,w)=>{w.exports=Object.getOwnPropertyDescriptor}),N6=m((K,w)=>{var b=Ww();if(b)try{b([],"length")}catch(I){b=null}w.exports=b}),Pw=m((K,w)=>{var b=Object.defineProperty||!1;if(b)try{b({},"a",{value:1})}catch(I){b=!1}w.exports=b}),Ow=m((K,w)=>{w.exports=function(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function")return!1;if(typeof Symbol.iterator==="symbol")return!0;var b={},I=Symbol("test"),W=Object(I);if(typeof I==="string")return!1;if(Object.prototype.toString.call(I)!=="[object Symbol]")return!1;if(Object.prototype.toString.call(W)!=="[object Symbol]")return!1;var P=42;b[I]=P;for(var O in b)return!1;if(typeof Object.keys==="function"&&Object.keys(b).length!==0)return!1;if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(b).length!==0)return!1;var M=Object.getOwnPropertySymbols(b);if(M.length!==1||M[0]!==I)return!1;if(!Object.prototype.propertyIsEnumerable.call(b,I))return!1;if(typeof Object.getOwnPropertyDescriptor==="function"){var J=Object.getOwnPropertyDescriptor(b,I);if(J.value!==P||J.enumerable!==!0)return!1}return!0}}),Mw=m((K,w)=>{var b=typeof Symbol<"u"&&Symbol,I=Ow();w.exports=function(){if(typeof b!=="function")return!1;if(typeof Symbol!=="function")return!1;if(typeof b("foo")!=="symbol")return!1;if(typeof Symbol("bar")!=="symbol")return!1;return I()}}),S6=m((K,w)=>{w.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null}),D6=m((K,w)=>{var b=J6();w.exports=b.getPrototypeOf||null}),Jw=m((K,w)=>{var b="Function.prototype.bind called on incompatible ",I=Object.prototype.toString,W=Math.max,P="[object Function]",O=function(N,G){var Y=[];for(var X=0;X<N.length;X+=1)Y[X]=N[X];for(var h=0;h<G.length;h+=1)Y[h+N.length]=G[h];return Y},M=function(N,G){var Y=[];for(var X=G||0,h=0;X<N.length;X+=1,h+=1)Y[h]=N[X];return Y},J=function(N,G){var Y="";for(var X=0;X<N.length;X+=1)if(Y+=N[X],X+1<N.length)Y+=G;return Y};w.exports=function(N){var G=this;if(typeof G!=="function"||I.apply(G)!==P)throw TypeError(b+G);var Y=M(arguments,1),X,h=function(){if(this instanceof X){var H=G.apply(this,O(Y,arguments));if(Object(H)===H)return H;return this}return G.apply(N,O(Y,arguments))},D=W(0,G.length-Y.length),Q=[];for(var v=0;v<D;v++)Q[v]="$"+v;if(X=Function("binder","return function ("+J(Q,",")+"){ return binder.apply(this,arguments); }")(h),G.prototype){var S=function(){};S.prototype=G.prototype,X.prototype=new S,S.prototype=null}return X}}),J1=m((K,w)=>{var b=Jw();w.exports=Function.prototype.bind||b}),t1=m((K,w)=>{w.exports=Function.prototype.call}),G6=m((K,w)=>{w.exports=Function.prototype.apply}),Nw=m((K,w)=>{w.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply}),Sw=m((K,w)=>{var b=J1(),I=G6(),W=t1(),P=Nw();w.exports=P||b.call(W,I)}),$6=m((K,w)=>{var b=J1(),I=H4(),W=t1(),P=Sw();w.exports=function(O){if(O.length<1||typeof O[0]!=="function")throw new I("a function is required");return P(b,W,O)}}),Dw=m((K,w)=>{var b=$6(),I=N6(),W;try{W=[].__proto__===Array.prototype}catch(J){if(!J||typeof J!=="object"||!("code"in J)||J.code!=="ERR_PROTO_ACCESS")throw J}var P=!!W&&I&&I(Object.prototype,"__proto__"),O=Object,M=O.getPrototypeOf;w.exports=P&&typeof P.get==="function"?b([P.get]):typeof M==="function"?function(J){return M(J==null?J:O(J))}:!1}),Gw=m((K,w)=>{var b=S6(),I=D6(),W=Dw();w.exports=b?function(P){return b(P)}:I?function(P){if(!P||typeof P!=="object"&&typeof P!=="function")throw TypeError("getProto: not an object");return I(P)}:W?function(P){return W(P)}:null}),$w=m((K,w)=>{var b=Function.prototype.call,I=Object.prototype.hasOwnProperty,W=J1();w.exports=W.call(b,I)}),a1=m((K,w)=>{var b,I=J6(),W=T0(),P=l0(),O=p0(),M=i0(),J=e0(),N=H4(),G=n0(),Y=d0(),X=t0(),h=a0(),D=s0(),Q=Kw(),v=ww(),S=Iw(),H=Function,L=function(p){try{return H('"use strict"; return ('+p+").constructor;")()}catch(a){}},$=N6(),F=Pw(),x=function(){throw new N},V=$?function(){try{return arguments.callee,x}catch(p){try{return $(arguments,"callee").get}catch(a){return x}}}():x,C=Mw()(),k=Gw(),u=D6(),r=S6(),e=G6(),y=t1(),K2={},J2=typeof Uint8Array>"u"||!k?b:k(Uint8Array),b2={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?b:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?b:ArrayBuffer,"%ArrayIteratorPrototype%":C&&k?k([][Symbol.iterator]()):b,"%AsyncFromSyncIteratorPrototype%":b,"%AsyncFunction%":K2,"%AsyncGenerator%":K2,"%AsyncGeneratorFunction%":K2,"%AsyncIteratorPrototype%":K2,"%Atomics%":typeof Atomics>"u"?b:Atomics,"%BigInt%":typeof BigInt>"u"?b:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?b:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?b:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?b:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":W,"%eval%":eval,"%EvalError%":P,"%Float16Array%":typeof Float16Array>"u"?b:Float16Array,"%Float32Array%":typeof Float32Array>"u"?b:Float32Array,"%Float64Array%":typeof Float64Array>"u"?b:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?b:FinalizationRegistry,"%Function%":H,"%GeneratorFunction%":K2,"%Int8Array%":typeof Int8Array>"u"?b:Int8Array,"%Int16Array%":typeof Int16Array>"u"?b:Int16Array,"%Int32Array%":typeof Int32Array>"u"?b:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":C&&k?k(k([][Symbol.iterator]())):b,"%JSON%":typeof JSON==="object"?JSON:b,"%Map%":typeof Map>"u"?b:Map,"%MapIteratorPrototype%":typeof Map>"u"||!C||!k?b:k(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":I,"%Object.getOwnPropertyDescriptor%":$,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?b:Promise,"%Proxy%":typeof Proxy>"u"?b:Proxy,"%RangeError%":O,"%ReferenceError%":M,"%Reflect%":typeof Reflect>"u"?b:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?b:Set,"%SetIteratorPrototype%":typeof Set>"u"||!C||!k?b:k(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?b:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":C&&k?k(""[Symbol.iterator]()):b,"%Symbol%":C?Symbol:b,"%SyntaxError%":J,"%ThrowTypeError%":V,"%TypedArray%":J2,"%TypeError%":N,"%Uint8Array%":typeof Uint8Array>"u"?b:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?b:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?b:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?b:Uint32Array,"%URIError%":G,"%WeakMap%":typeof WeakMap>"u"?b:WeakMap,"%WeakRef%":typeof WeakRef>"u"?b:WeakRef,"%WeakSet%":typeof WeakSet>"u"?b:WeakSet,"%Function.prototype.call%":y,"%Function.prototype.apply%":e,"%Object.defineProperty%":F,"%Object.getPrototypeOf%":u,"%Math.abs%":Y,"%Math.floor%":X,"%Math.max%":h,"%Math.min%":D,"%Math.pow%":Q,"%Math.round%":v,"%Math.sign%":S,"%Reflect.getPrototypeOf%":r};if(k)try{null.error}catch(p){X2=k(k(p)),b2["%Error.prototype%"]=X2}var X2,E2=function p(a){var i;if(a==="%AsyncFunction%")i=L("async function () {}");else if(a==="%GeneratorFunction%")i=L("function* () {}");else if(a==="%AsyncGeneratorFunction%")i=L("async function* () {}");else if(a==="%AsyncGenerator%"){var P2=p("%AsyncGeneratorFunction%");if(P2)i=P2.prototype}else if(a==="%AsyncIteratorPrototype%"){var D2=p("%AsyncGenerator%");if(D2&&k)i=k(D2.prototype)}return b2[a]=i,i},j2={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},l=J1(),U2=$w(),g2=l.call(y,Array.prototype.concat),_=l.call(e,Array.prototype.splice),V2=l.call(y,String.prototype.replace),x2=l.call(y,String.prototype.slice),t=l.call(y,RegExp.prototype.exec),A2=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,F2=/\\(\\)?/g,c2=function(p){var a=x2(p,0,1),i=x2(p,-1);if(a==="%"&&i!=="%")throw new J("invalid intrinsic syntax, expected closing `%`");else if(i==="%"&&a!=="%")throw new J("invalid intrinsic syntax, expected opening `%`");var P2=[];return V2(p,A2,function(D2,z2,M2,T2){P2[P2.length]=M2?V2(T2,F2,"$1"):z2||D2}),P2},o2=function(p,a){var i=p,P2;if(U2(j2,i))P2=j2[i],i="%"+P2[0]+"%";if(U2(b2,i)){var D2=b2[i];if(D2===K2)D2=E2(i);if(typeof D2>"u"&&!a)throw new N("intrinsic "+p+" exists, but is not available. Please file an issue!");return{alias:P2,name:i,value:D2}}throw new J("intrinsic "+p+" does not exist!")};w.exports=function(p,a){if(typeof p!=="string"||p.length===0)throw new N("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof a!=="boolean")throw new N('"allowMissing" argument must be a boolean');if(t(/^%?[^%]*%?$/,p)===null)throw new J("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=c2(p),P2=i.length>0?i[0]:"",D2=o2("%"+P2+"%",a),z2=D2.name,M2=D2.value,T2=!1,L2=D2.alias;if(L2)P2=L2[0],_(i,g2([0,1],L2));for(var Q2=1,r2=!0;Q2<i.length;Q2+=1){var Y2=i[Q2],d2=x2(Y2,0,1),t2=x2(Y2,-1);if((d2==='"'||d2==="'"||d2==="`"||(t2==='"'||t2==="'"||t2==="`"))&&d2!==t2)throw new J("property names with quotes must have matching quotes");if(Y2==="constructor"||!r2)T2=!0;if(P2+="."+Y2,z2="%"+P2+"%",U2(b2,z2))M2=b2[z2];else if(M2!=null){if(!(Y2 in M2)){if(!a)throw new N("base intrinsic for "+p+" exists, but the property is not available.");return}if($&&Q2+1>=i.length){var a2=$(M2,Y2);if(r2=!!a2,r2&&"get"in a2&&!("originalValue"in a2.get))M2=a2.get;else M2=M2[Y2]}else r2=U2(M2,Y2),M2=M2[Y2];if(r2&&!T2)b2[z2]=M2}}return M2}}),B6=m((K,w)=>{var b=a1(),I=$6(),W=I([b("%String.prototype.indexOf%")]);w.exports=function(P,O){var M=b(P,!!O);if(typeof M==="function"&&W(P,".prototype.")>-1)return I([M]);return M}}),X6=m((K,w)=>{var b=a1(),I=B6(),W=M1(),P=H4(),O=b("%Map%",!0),M=I("Map.prototype.get",!0),J=I("Map.prototype.set",!0),N=I("Map.prototype.has",!0),G=I("Map.prototype.delete",!0),Y=I("Map.prototype.size",!0);w.exports=!!O&&function(){var X,h={assert:function(D){if(!h.has(D))throw new P("Side channel does not contain "+W(D))},delete:function(D){if(X){var Q=G(X,D);if(Y(X)===0)X=void 0;return Q}return!1},get:function(D){if(X)return M(X,D)},has:function(D){if(X)return N(X,D);return!1},set:function(D,Q){if(!X)X=new O;J(X,D,Q)}};return h}}),Bw=m((K,w)=>{var b=a1(),I=B6(),W=M1(),P=X6(),O=H4(),M=b("%WeakMap%",!0),J=I("WeakMap.prototype.get",!0),N=I("WeakMap.prototype.set",!0),G=I("WeakMap.prototype.has",!0),Y=I("WeakMap.prototype.delete",!0);w.exports=M?function(){var X,h,D={assert:function(Q){if(!D.has(Q))throw new O("Side channel does not contain "+W(Q))},delete:function(Q){if(M&&Q&&(typeof Q==="object"||typeof Q==="function")){if(X)return Y(X,Q)}else if(P){if(h)return h.delete(Q)}return!1},get:function(Q){if(M&&Q&&(typeof Q==="object"||typeof Q==="function")){if(X)return J(X,Q)}return h&&h.get(Q)},has:function(Q){if(M&&Q&&(typeof Q==="object"||typeof Q==="function")){if(X)return G(X,Q)}return!!h&&h.has(Q)},set:function(Q,v){if(M&&Q&&(typeof Q==="object"||typeof Q==="function")){if(!X)X=new M;N(X,Q,v)}else if(P){if(!h)h=P();h.set(Q,v)}}};return D}:P}),Xw=m((K,w)=>{var b=H4(),I=M1(),W=f0(),P=X6(),O=Bw(),M=O||P||W;w.exports=function(){var J,N={assert:function(G){if(!N.has(G))throw new b("Side channel does not contain "+I(G))},delete:function(G){return!!J&&J.delete(G)},get:function(G){return J&&J.get(G)},has:function(G){return!!J&&J.has(G)},set:function(G,Y){if(!J)J=M();J.set(G,Y)}};return N}}),s1=m((K,w)=>{var b=String.prototype.replace,I=/%20/g,W={RFC1738:"RFC1738",RFC3986:"RFC3986"};w.exports={default:W.RFC3986,formatters:{RFC1738:function(P){return b.call(P,I,"+")},RFC3986:function(P){return String(P)}},RFC1738:W.RFC1738,RFC3986:W.RFC3986}}),U6=m((K,w)=>{var b=s1(),I=Object.prototype.hasOwnProperty,W=Array.isArray,P=function(){var H=[];for(var L=0;L<256;++L)H.push("%"+((L<16?"0":"")+L.toString(16)).toUpperCase());return H}(),O=function(H){while(H.length>1){var L=H.pop(),$=L.obj[L.prop];if(W($)){var F=[];for(var x=0;x<$.length;++x)if(typeof $[x]<"u")F.push($[x]);L.obj[L.prop]=F}}},M=function(H,L){var $=L&&L.plainObjects?{__proto__:null}:{};for(var F=0;F<H.length;++F)if(typeof H[F]<"u")$[F]=H[F];return $},J=function H(L,$,F){if(!$)return L;if(typeof $!=="object"&&typeof $!=="function"){if(W(L))L.push($);else if(L&&typeof L==="object"){if(F&&(F.plainObjects||F.allowPrototypes)||!I.call(Object.prototype,$))L[$]=!0}else return[L,$];return L}if(!L||typeof L!=="object")return[L].concat($);var x=L;if(W(L)&&!W($))x=M(L,F);if(W(L)&&W($))return $.forEach(function(V,C){if(I.call(L,C)){var k=L[C];if(k&&typeof k==="object"&&V&&typeof V==="object")L[C]=H(k,V,F);else L.push(V)}else L[C]=V}),L;return Object.keys($).reduce(function(V,C){var k=$[C];if(I.call(V,C))V[C]=H(V[C],k,F);else V[C]=k;return V},x)},N=function(H,L){return Object.keys(L).reduce(function($,F){return $[F]=L[F],$},H)},G=function(H,L,$){var F=H.replace(/\+/g," ");if($==="iso-8859-1")return F.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(F)}catch(x){return F}},Y=1024,X=function(H,L,$,F,x){if(H.length===0)return H;var V=H;if(typeof H==="symbol")V=Symbol.prototype.toString.call(H);else if(typeof H!=="string")V=String(H);if($==="iso-8859-1")return escape(V).replace(/%u[0-9a-f]{4}/gi,function(K2){return"%26%23"+parseInt(K2.slice(2),16)+"%3B"});var C="";for(var k=0;k<V.length;k+=Y){var u=V.length>=Y?V.slice(k,k+Y):V,r=[];for(var e=0;e<u.length;++e){var y=u.charCodeAt(e);if(y===45||y===46||y===95||y===126||y>=48&&y<=57||y>=65&&y<=90||y>=97&&y<=122||x===b.RFC1738&&(y===40||y===41)){r[r.length]=u.charAt(e);continue}if(y<128){r[r.length]=P[y];continue}if(y<2048){r[r.length]=P[192|y>>6]+P[128|y&63];continue}if(y<55296||y>=57344){r[r.length]=P[224|y>>12]+P[128|y>>6&63]+P[128|y&63];continue}e+=1,y=65536+((y&1023)<<10|u.charCodeAt(e)&1023),r[r.length]=P[240|y>>18]+P[128|y>>12&63]+P[128|y>>6&63]+P[128|y&63]}C+=r.join("")}return C},h=function(H){var L=[{obj:{o:H},prop:"o"}],$=[];for(var F=0;F<L.length;++F){var x=L[F],V=x.obj[x.prop],C=Object.keys(V);for(var k=0;k<C.length;++k){var u=C[k],r=V[u];if(typeof r==="object"&&r!==null&&$.indexOf(r)===-1)L.push({obj:V,prop:u}),$.push(r)}}return O(L),H},D=function(H){return Object.prototype.toString.call(H)==="[object RegExp]"},Q=function(H){if(!H||typeof H!=="object")return!1;return!!(H.constructor&&H.constructor.isBuffer&&H.constructor.isBuffer(H))},v=function(H,L){return[].concat(H,L)},S=function(H,L){if(W(H)){var $=[];for(var F=0;F<H.length;F+=1)$.push(L(H[F]));return $}return L(H)};w.exports={arrayToObject:M,assign:N,combine:v,compact:h,decode:G,encode:X,isBuffer:Q,isRegExp:D,maybeMap:S,merge:J}}),Uw=m((K,w)=>{var b=Xw(),I=U6(),W=s1(),P=Object.prototype.hasOwnProperty,O={brackets:function(S){return S+"[]"},comma:"comma",indices:function(S,H){return S+"["+H+"]"},repeat:function(S){return S}},M=Array.isArray,J=Array.prototype.push,N=function(S,H){J.apply(S,M(H)?H:[H])},G=Date.prototype.toISOString,Y=W.default,X={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:I.encode,encodeValuesOnly:!1,filter:void 0,format:Y,formatter:W.formatters[Y],indices:!1,serializeDate:function(S){return G.call(S)},skipNulls:!1,strictNullHandling:!1},h=function(S){return typeof S==="string"||typeof S==="number"||typeof S==="boolean"||typeof S==="symbol"||typeof S==="bigint"},D={},Q=function S(H,L,$,F,x,V,C,k,u,r,e,y,K2,J2,b2,X2,E2,j2){var l=H,U2=j2,g2=0,_=!1;while((U2=U2.get(D))!==void 0&&!_){var V2=U2.get(H);if(g2+=1,typeof V2<"u")if(V2===g2)throw RangeError("Cyclic object value");else _=!0;if(typeof U2.get(D)>"u")g2=0}if(typeof r==="function")l=r(L,l);else if(l instanceof Date)l=K2(l);else if($==="comma"&&M(l))l=I.maybeMap(l,function(M2){if(M2 instanceof Date)return K2(M2);return M2});if(l===null){if(V)return u&&!X2?u(L,X.encoder,E2,"key",J2):L;l=""}if(h(l)||I.isBuffer(l)){if(u){var x2=X2?L:u(L,X.encoder,E2,"key",J2);return[b2(x2)+"="+b2(u(l,X.encoder,E2,"value",J2))]}return[b2(L)+"="+b2(String(l))]}var t=[];if(typeof l>"u")return t;var A2;if($==="comma"&&M(l)){if(X2&&u)l=I.maybeMap(l,u);A2=[{value:l.length>0?l.join(",")||null:void 0}]}else if(M(r))A2=r;else{var F2=Object.keys(l);A2=e?F2.sort(e):F2}var c2=k?String(L).replace(/\./g,"%2E"):String(L),o2=F&&M(l)&&l.length===1?c2+"[]":c2;if(x&&M(l)&&l.length===0)return o2+"[]";for(var p=0;p<A2.length;++p){var a=A2[p],i=typeof a==="object"&&a&&typeof a.value<"u"?a.value:l[a];if(C&&i===null)continue;var P2=y&&k?String(a).replace(/\./g,"%2E"):String(a),D2=M(l)?typeof $==="function"?$(o2,P2):o2:o2+(y?"."+P2:"["+P2+"]");j2.set(H,g2);var z2=b();z2.set(D,j2),N(t,S(i,D2,$,F,x,V,C,k,$==="comma"&&X2&&M(l)?null:u,r,e,y,K2,J2,b2,X2,E2,z2))}return t},v=function(S){if(!S)return X;if(typeof S.allowEmptyArrays<"u"&&typeof S.allowEmptyArrays!=="boolean")throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof S.encodeDotInKeys<"u"&&typeof S.encodeDotInKeys!=="boolean")throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(S.encoder!==null&&typeof S.encoder<"u"&&typeof S.encoder!=="function")throw TypeError("Encoder has to be a function.");var H=S.charset||X.charset;if(typeof S.charset<"u"&&S.charset!=="utf-8"&&S.charset!=="iso-8859-1")throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var L=W.default;if(typeof S.format<"u"){if(!P.call(W.formatters,S.format))throw TypeError("Unknown format option provided.");L=S.format}var $=W.formatters[L],F=X.filter;if(typeof S.filter==="function"||M(S.filter))F=S.filter;var x;if(S.arrayFormat in O)x=S.arrayFormat;else if("indices"in S)x=S.indices?"indices":"repeat";else x=X.arrayFormat;if("commaRoundTrip"in S&&typeof S.commaRoundTrip!=="boolean")throw TypeError("`commaRoundTrip` must be a boolean, or absent");var V=typeof S.allowDots>"u"?S.encodeDotInKeys===!0?!0:X.allowDots:!!S.allowDots;return{addQueryPrefix:typeof S.addQueryPrefix==="boolean"?S.addQueryPrefix:X.addQueryPrefix,allowDots:V,allowEmptyArrays:typeof S.allowEmptyArrays==="boolean"?!!S.allowEmptyArrays:X.allowEmptyArrays,arrayFormat:x,charset:H,charsetSentinel:typeof S.charsetSentinel==="boolean"?S.charsetSentinel:X.charsetSentinel,commaRoundTrip:!!S.commaRoundTrip,delimiter:typeof S.delimiter>"u"?X.delimiter:S.delimiter,encode:typeof S.encode==="boolean"?S.encode:X.encode,encodeDotInKeys:typeof S.encodeDotInKeys==="boolean"?S.encodeDotInKeys:X.encodeDotInKeys,encoder:typeof S.encoder==="function"?S.encoder:X.encoder,encodeValuesOnly:typeof S.encodeValuesOnly==="boolean"?S.encodeValuesOnly:X.encodeValuesOnly,filter:F,format:L,formatter:$,serializeDate:typeof S.serializeDate==="function"?S.serializeDate:X.serializeDate,skipNulls:typeof S.skipNulls==="boolean"?S.skipNulls:X.skipNulls,sort:typeof S.sort==="function"?S.sort:null,strictNullHandling:typeof S.strictNullHandling==="boolean"?S.strictNullHandling:X.strictNullHandling}};w.exports=function(S,H){var L=S,$=v(H),F,x;if(typeof $.filter==="function")x=$.filter,L=x("",L);else if(M($.filter))x=$.filter,F=x;var V=[];if(typeof L!=="object"||L===null)return"";var C=O[$.arrayFormat],k=C==="comma"&&$.commaRoundTrip;if(!F)F=Object.keys(L);if($.sort)F.sort($.sort);var u=b();for(var r=0;r<F.length;++r){var e=F[r],y=L[e];if($.skipNulls&&y===null)continue;N(V,Q(y,e,C,k,$.allowEmptyArrays,$.strictNullHandling,$.skipNulls,$.encodeDotInKeys,$.encode?$.encoder:null,$.filter,$.sort,$.allowDots,$.serializeDate,$.format,$.formatter,$.encodeValuesOnly,$.charset,u))}var K2=V.join($.delimiter),J2=$.addQueryPrefix===!0?"?":"";if($.charsetSentinel)if($.charset==="iso-8859-1")J2+="utf8=%26%2310003%3B&";else J2+="utf8=%E2%9C%93&";return K2.length>0?J2+K2:""}}),zw=m((K,w)=>{var b=U6(),I=Object.prototype.hasOwnProperty,W=Array.isArray,P={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:b.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1000,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},O=function(D){return D.replace(/&#(\d+);/g,function(Q,v){return String.fromCharCode(parseInt(v,10))})},M=function(D,Q,v){if(D&&typeof D==="string"&&Q.comma&&D.indexOf(",")>-1)return D.split(",");if(Q.throwOnLimitExceeded&&v>=Q.arrayLimit)throw RangeError("Array limit exceeded. Only "+Q.arrayLimit+" element"+(Q.arrayLimit===1?"":"s")+" allowed in an array.");return D},J="utf8=%26%2310003%3B",N="utf8=%E2%9C%93",G=function(D,Q){var v={__proto__:null},S=Q.ignoreQueryPrefix?D.replace(/^\?/,""):D;S=S.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var H=Q.parameterLimit===1/0?void 0:Q.parameterLimit,L=S.split(Q.delimiter,Q.throwOnLimitExceeded?H+1:H);if(Q.throwOnLimitExceeded&&L.length>H)throw RangeError("Parameter limit exceeded. Only "+H+" parameter"+(H===1?"":"s")+" allowed.");var $=-1,F,x=Q.charset;if(Q.charsetSentinel){for(F=0;F<L.length;++F)if(L[F].indexOf("utf8=")===0){if(L[F]===N)x="utf-8";else if(L[F]===J)x="iso-8859-1";$=F,F=L.length}}for(F=0;F<L.length;++F){if(F===$)continue;var V=L[F],C=V.indexOf("]="),k=C===-1?V.indexOf("="):C+1,u,r;if(k===-1)u=Q.decoder(V,P.decoder,x,"key"),r=Q.strictNullHandling?null:"";else u=Q.decoder(V.slice(0,k),P.decoder,x,"key"),r=b.maybeMap(M(V.slice(k+1),Q,W(v[u])?v[u].length:0),function(y){return Q.decoder(y,P.decoder,x,"value")});if(r&&Q.interpretNumericEntities&&x==="iso-8859-1")r=O(String(r));if(V.indexOf("[]=")>-1)r=W(r)?[r]:r;var e=I.call(v,u);if(e&&Q.duplicates==="combine")v[u]=b.combine(v[u],r);else if(!e||Q.duplicates==="last")v[u]=r}return v},Y=function(D,Q,v,S){var H=0;if(D.length>0&&D[D.length-1]==="[]"){var L=D.slice(0,-1).join("");H=Array.isArray(Q)&&Q[L]?Q[L].length:0}var $=S?Q:M(Q,v,H);for(var F=D.length-1;F>=0;--F){var x,V=D[F];if(V==="[]"&&v.parseArrays)x=v.allowEmptyArrays&&($===""||v.strictNullHandling&&$===null)?[]:b.combine([],$);else{x=v.plainObjects?{__proto__:null}:{};var C=V.charAt(0)==="["&&V.charAt(V.length-1)==="]"?V.slice(1,-1):V,k=v.decodeDotInKeys?C.replace(/%2E/g,"."):C,u=parseInt(k,10);if(!v.parseArrays&&k==="")x={0:$};else if(!isNaN(u)&&V!==k&&String(u)===k&&u>=0&&(v.parseArrays&&u<=v.arrayLimit))x=[],x[u]=$;else if(k!=="__proto__")x[k]=$}$=x}return $},X=function(D,Q,v,S){if(!D)return;var H=v.allowDots?D.replace(/\.([^.[]+)/g,"[$1]"):D,L=/(\[[^[\]]*])/,$=/(\[[^[\]]*])/g,F=v.depth>0&&L.exec(H),x=F?H.slice(0,F.index):H,V=[];if(x){if(!v.plainObjects&&I.call(Object.prototype,x)){if(!v.allowPrototypes)return}V.push(x)}var C=0;while(v.depth>0&&(F=$.exec(H))!==null&&C<v.depth){if(C+=1,!v.plainObjects&&I.call(Object.prototype,F[1].slice(1,-1))){if(!v.allowPrototypes)return}V.push(F[1])}if(F){if(v.strictDepth===!0)throw RangeError("Input depth exceeded depth option of "+v.depth+" and strictDepth is true");V.push("["+H.slice(F.index)+"]")}return Y(V,Q,v,S)},h=function(D){if(!D)return P;if(typeof D.allowEmptyArrays<"u"&&typeof D.allowEmptyArrays!=="boolean")throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof D.decodeDotInKeys<"u"&&typeof D.decodeDotInKeys!=="boolean")throw TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(D.decoder!==null&&typeof D.decoder<"u"&&typeof D.decoder!=="function")throw TypeError("Decoder has to be a function.");if(typeof D.charset<"u"&&D.charset!=="utf-8"&&D.charset!=="iso-8859-1")throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof D.throwOnLimitExceeded<"u"&&typeof D.throwOnLimitExceeded!=="boolean")throw TypeError("`throwOnLimitExceeded` option must be a boolean");var Q=typeof D.charset>"u"?P.charset:D.charset,v=typeof D.duplicates>"u"?P.duplicates:D.duplicates;if(v!=="combine"&&v!=="first"&&v!=="last")throw TypeError("The duplicates option must be either combine, first, or last");var S=typeof D.allowDots>"u"?D.decodeDotInKeys===!0?!0:P.allowDots:!!D.allowDots;return{allowDots:S,allowEmptyArrays:typeof D.allowEmptyArrays==="boolean"?!!D.allowEmptyArrays:P.allowEmptyArrays,allowPrototypes:typeof D.allowPrototypes==="boolean"?D.allowPrototypes:P.allowPrototypes,allowSparse:typeof D.allowSparse==="boolean"?D.allowSparse:P.allowSparse,arrayLimit:typeof D.arrayLimit==="number"?D.arrayLimit:P.arrayLimit,charset:Q,charsetSentinel:typeof D.charsetSentinel==="boolean"?D.charsetSentinel:P.charsetSentinel,comma:typeof D.comma==="boolean"?D.comma:P.comma,decodeDotInKeys:typeof D.decodeDotInKeys==="boolean"?D.decodeDotInKeys:P.decodeDotInKeys,decoder:typeof D.decoder==="function"?D.decoder:P.decoder,delimiter:typeof D.delimiter==="string"||b.isRegExp(D.delimiter)?D.delimiter:P.delimiter,depth:typeof D.depth==="number"||D.depth===!1?+D.depth:P.depth,duplicates:v,ignoreQueryPrefix:D.ignoreQueryPrefix===!0,interpretNumericEntities:typeof D.interpretNumericEntities==="boolean"?D.interpretNumericEntities:P.interpretNumericEntities,parameterLimit:typeof D.parameterLimit==="number"?D.parameterLimit:P.parameterLimit,parseArrays:D.parseArrays!==!1,plainObjects:typeof D.plainObjects==="boolean"?D.plainObjects:P.plainObjects,strictDepth:typeof D.strictDepth==="boolean"?!!D.strictDepth:P.strictDepth,strictNullHandling:typeof D.strictNullHandling==="boolean"?D.strictNullHandling:P.strictNullHandling,throwOnLimitExceeded:typeof D.throwOnLimitExceeded==="boolean"?D.throwOnLimitExceeded:!1}};w.exports=function(D,Q){var v=h(Q);if(D===""||D===null||typeof D>"u")return v.plainObjects?{__proto__:null}:{};var S=typeof D==="string"?G(D,v):D,H=v.plainObjects?{__proto__:null}:{},L=Object.keys(S);for(var $=0;$<L.length;++$){var F=L[$],x=X(F,S[F],v,typeof D==="string");H=b.merge(H,x,v)}if(v.allowSparse===!0)return H;return b.compact(H)}}),Lw=m((K,w)=>{var b=Uw(),I=zw(),W=s1();w.exports={formats:W,parse:I,stringify:b}}),yb=O1(d1(),1),Qw={};y0(Qw,{zodSchemaKey:()=>qw,webSocketServerArgsKey:()=>G4,webSocketMessageArgsKey:()=>s4,webSocketKey:()=>W1,webSocketEventKey:()=>Hw,webSocketEventArgumentsKey:()=>Yw,webSocketConnectionArgsKey:()=>$4,webSocketCloseReasonArgsKey:()=>Y6,webSocketCloseCodeArgsKey:()=>Q6,routeModelArgsKey:()=>_2,responseStatusTextArgsKey:()=>p1,responseStatusArgsKey:()=>l1,responseHeadersArgsKey:()=>y2,responseBodyArgsKey:()=>K1,requestHeadersArgsKey:()=>w4,requestHeaderArgsKey:()=>i2,requestBodyArgsKey:()=>B4,requestArgsKey:()=>e2,queryArgsKey:()=>V6,paramsArgsKey:()=>T1,paramArgsKey:()=>X4,moduleKey:()=>a4,middlewareKey:()=>wK,interceptorKey:()=>z6,injectableKey:()=>L6,injectKey:()=>I1,httpServerArgsKey:()=>p2,guardKey:()=>KK,controllerKey:()=>b1,controllerHttpKey:()=>Vw,contextArgsKey:()=>b4,containerKey:()=>D4,configKey:()=>f1,argumentsKey:()=>q2});var q2=Symbol.for("____boolTypescriptCore:arguments__"),Yw=Symbol.for("____boolTypescriptCore:webSocketEventArguments__"),f1=Symbol.for("____boolTypescriptCore:config__"),b1=Symbol.for("____boolTypescriptCore:controller__"),z6=Symbol.for("____boolTypescriptCore:interceptor__"),KK=Symbol.for("____boolTypescriptCore:guard__"),Vw=Symbol.for("____boolTypescriptCore:controller.http__"),I1=Symbol.for("____boolTypescriptCore:inject__"),L6=Symbol.for("____boolTypescriptCore:injectable__"),wK=Symbol.for("____boolTypescriptCore:middleware__"),a4=Symbol.for("____boolTypescriptCore:module__"),D4=Symbol.for("____boolTypescriptCore:container__"),qw=Symbol.for("____boolTypescriptCore:zodSchema__"),W1=Symbol.for("____boolTypescriptCore:webSocket__"),Hw=Symbol.for("____boolTypescriptCore:webSocket:event__"),G4=Symbol.for("____boolTypescriptCore:webSocketArguments:server__"),$4=Symbol.for("____boolTypescriptCore:webSocketArguments:connection__"),s4=Symbol.for("____boolTypescriptCore:webSocketArguments:message__"),Q6=Symbol.for("____boolTypescriptCore:webSocketArguments:closeCode__"),Y6=Symbol.for("____boolTypescriptCore:webSocketArguments:closeReason__"),p2=Symbol.for("____boolTypescriptCore:httpArguments:server__"),w4=Symbol.for("____boolTypescriptCore:httpArguments:requestHeaders__"),i2=Symbol.for("____boolTypescriptCore:httpArguments:requestHeader__"),B4=Symbol.for("____boolTypescriptCore:httpArguments:requestBody__"),T1=Symbol.for("____boolTypescriptCore:httpArguments:params__"),X4=Symbol.for("____boolTypescriptCore:httpArguments:param__"),V6=Symbol.for("____boolTypescriptCore:httpArguments:query__"),e2=Symbol.for("____boolTypescriptCore:httpArguments:request__"),y2=Symbol.for("____boolTypescriptCore:httpArguments:responseHeaders__"),b4=Symbol.for("____boolTypescriptCore:httpArguments:context__"),_2=Symbol.for("____boolTypescriptCore:httpArguments:routeModel__"),K1=Symbol.for("____boolTypescriptCore:httpArguments:responseBody__"),l1=Symbol.for("____boolTypescriptCore:httpArguments:responseStatus__"),p1=Symbol.for("____boolTypescriptCore:httpArguments:responseStatusText__"),q6=(K)=>(w,b,I)=>{if(!b)return;let W=Reflect.getOwnMetadata(q2,w.constructor,b)||{};W[`argumentIndexes.${I}`]={index:I,type:w4,validationSchema:K},Reflect.defineMetadata(q2,W,w.constructor,b)};var N1=(K)=>(w,b,I)=>{if(!b)return;let W=Reflect.getOwnMetadata(q2,w.constructor,b)||{};W[`argumentIndexes.${I}`]={index:I,type:b4,key:K},Reflect.defineMetadata(q2,W,w.constructor,b)},H6=()=>(K,w,b)=>{if(!w)return;let I=Reflect.getOwnMetadata(q2,K.constructor,w)||{};I[`argumentIndexes.${b}`]={index:b,type:_2},Reflect.defineMetadata(q2,I,K.constructor,w)};var F6=()=>(K)=>{if(!("enforce"in K.prototype)||typeof K.prototype.enforce!=="function")return;let w=void 0;return Reflect.defineMetadata(KK,w,K),K};var h6=(K)=>(w,b,I)=>{let W=Reflect.getMetadata(I1,w)||[];W[I]=K,Reflect.defineMetadata(I1,W,w)};var v6=()=>(K)=>{Reflect.defineMetadata(wK,void 0,K)};var _b=Symbol("__bool:webSocket.upgrade__");var u2;(function(K){K.year="year",K.month="month",K.day="day",K.hours="hours",K.minutes="minutes",K.seconds="seconds",K.miliseconds="miliseconds"})(u2||(u2={}));var Fw=(K,w,b=u2.day)=>{let I=K instanceof Date?K:new Date(K);switch(b){case u2.year:I.setFullYear(I.getFullYear()+w);break;case u2.month:I.setMonth(I.getMonth()+w);break;case u2.day:I.setDate(I.getDate()+w);break;case u2.hours:I.setHours(I.getHours()+w);break;case u2.minutes:I.setMinutes(I.getMinutes()+w);break;case u2.seconds:I.setSeconds(I.getSeconds()+w);break;case u2.miliseconds:I.setMilliseconds(I.getMilliseconds()+w);break}return I},hw=O1(Lw(),1),vw=Object.freeze({400:"BAD_REQUEST",401:"UNAUTHORIZED",402:"PAYMENT_REQUIRED",403:"FORBIDDEN",404:"NOT_FOUND",405:"METHOD_NOT_ALLOWED",406:"NOT_ACCEPTABLE",407:"PROXY_AUTHENCATION_REQUIRED",408:"REQUEST_TIMEOUT",409:"CONFLICT",410:"GONE",411:"LENGTH_REQUIRED",412:"PRECONDITION_FAILED",413:"PAYLOAD_TOO_LARGE",414:"URI_TOO_LONG",415:"UNSUPPORTED_MEDIA_TYPE",416:"RANGE_NOT_SATISFIABLE",417:"EXPECTATION_FAILED",418:"IM_A_TEAPOT",421:"MISDIRECTED_REQUEST",422:"UNPROCESSABLE_ENTITY",423:"LOCKED",424:"FAILED_DEPENDENCY",425:"TOO_EARLY_",426:"UPGRAGE_REQUIRED",428:"PRECONDITION_REQUIRED",429:"TOO_MANY_REQUESTS",431:"REQUEST_HEADER_FIELDS_TOO_LARGE",451:"UNAVAILABLE_FOR_LEGAL_REASONS"});class A4 extends Error{httpCode;message;data;constructor({httpCode:K,data:w,message:b}){super();this.httpCode=K,this.message=!b?.trim()?vw[K]:b.trim(),this.data=w}}var Rw=Object.freeze({500:"INTERNAL_SERVER_ERROR",501:"NOT_IMPLEMENTED",502:"BAD_GATEWAY",503:"SERVICE_UNAVAILABLE",504:"GATEWAY_TIMEOUT",505:"HTTP_VERSION_NOT_SUPPORTED",506:"VARIANT_ALSO_NEGOTIATES",507:"INSUFFICIENT_STORAGE",508:"LOOP_DETECTED",510:"NOT_EXTENDED",511:"NETWORK_AUTHENTICATION_REQUIRED"});class bK extends Error{httpCode;message;data;constructor({httpCode:K,data:w,message:b}){super();this.httpCode=K,this.message=!b?.trim()?Rw[K]:b.trim(),this.data=w}}var R6=["GET","HEAD","POST","PUT","DELETE","CONNECT","OPTIONS","TRACE","PATCH"],Ew=(K)=>!!R6.find((w)=>w===K),jw=(K,w=new Headers)=>{if(w.set("Content-Type","application/json"),K instanceof A4||K instanceof bK)return new Response(JSON.stringify(K),{status:K.httpCode,statusText:K.message,headers:w});return new Response(JSON.stringify((()=>{switch(typeof K){case"object":return!(K instanceof Error)?K:{message:K.message,code:K.name,cause:K.cause};case"string":return{message:K};case"number":return{code:K};default:return}})()),{status:500,statusText:"INTERNAL SERVER ERROR",headers:w})},mb=async function(){}.constructor,O6=Object.freeze({black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,gray:90}),M6=Object.freeze({black:40,red:41,green:42,yellow:43,blue:44,magenta:45,cyan:46,white:47,gray:100}),K4=(K,w={})=>{let{color:b,backgroundColor:I,bold:W,underline:P}=w,O="";if(W)O+="\x1B[1m";if(P)O+="\x1B[4m";if(b&&O6[b])O+=`\x1B[${O6[b]}m`;if(I&&M6[I])O+=`\x1B[${M6[I]}m`;return`${O}${K}\x1B[0m`},gw=(K)=>{let{headers:w,method:b}=K,I=w.get("upgrade")?.toLowerCase()||"",W=w.get("connection")?.toLowerCase()||"";return b==="GET"&&I?.toLowerCase()==="websocket"&&W?.toLowerCase().includes("upgrade")};class i1{_staticMap=new Map;_dynamicMap=new Map;_options=void 0;constructor(...K){K.forEach((w)=>{w.staticEntries.forEach(([b,I])=>this.set(b,I,{isStatic:!0,isPassthrough:!0})),w.dynamicEntries.forEach(([b,I])=>this.set(b,I,{isStatic:!1}))})}get(K,w){return!{...this._options,...w}.isStatic?this._dynamicMap.get(K):this._staticMap.get(K)}has(K,w){return!{...this._options,...w}.isStatic?this._dynamicMap.has(K):this._staticMap.has(K)}set(K,w,b){let I={...this._options,...b};if(!I?.isStatic)this._dynamicMap.set(K,w);else if(!this._staticMap.has(K))this._staticMap.set(K,w);else if(!I.isPassthrough)throw Error(`${String(K)} already exists in context static collection.`);return this}setOptions(K){return this._options=K,this}get staticEntries(){return[...this._staticMap.entries()]}get dynamicEntries(){return[...this._dynamicMap.entries()]}}class E6{static rootPattern=":([a-z0-9A-Z_-]{1,})";static innerRootPattern="([a-z0-9A-Z_-]{1,})";alias;#K=new Map;#w;constructor({alias:K}){let w=this._thinAlias(K);this.alias=w,this.#w=new URLPattern({pathname:w,baseURL:"http://www.booljs.com"})}test({pathname:K}){try{return this.#w.test({pathname:this._thinAlias(K),baseURL:"http://www.booljs.com"})}catch(w){return console.error(w),!1}}exec({pathname:K,method:w}){try{let b=this.#K.get(w);if(!b)return null;let I=this.#w.exec({pathname:this._thinAlias(K),baseURL:"http://www.booljs.com"});if(!I)return null;let W=I.pathname.groups;return Object.freeze({parameters:W,model:b})}catch(b){return console.error(b),null}}get({model:K}){if(!this.#K.get("GET"))this.#K.set("GET",K);return this}post({model:K}){if(!this.#K.get("POST"))this.#K.set("POST",K);return this}put({model:K}){if(!this.#K.get("PUT"))this.#K.set("PUT",K);return this}delete({model:K}){if(!this.#K.get("DELETE"))this.#K.set("DELETE",K);return this}connect({model:K}){if(!this.#K.get("CONNECT"))return this.#K.set("CONNECT",K);return this}options({model:K}){if(!this.#K.get("OPTIONS"))return this.#K.set("OPTIONS",K);return this}trace({model:K}){if(!this.#K.get("TRACE"))return this.#K.set("TRACE",K);return this}patch({model:K}){if(!this.#K.get("PATCH"))return this.#K.set("PATCH",K);return this}_thinAlias(K){return K.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}get _fullPath(){return this.alias.split("/").map((K,w)=>{let b=new RegExp(":([a-z0-9A-Z_.-]{1,})(\\(.*?\\))","g");if(!b.test(K)){if(b=new RegExp(":([a-z0-9A-Z_.-]{1,})","g"),!b.test(K))return K;return K.replace(b,(I,W)=>`${I}(.*?)`)}return K}).join("/")}get _filteredPath(){return this.alias.split("/").map((K,w)=>{let b=new RegExp(":([a-z0-9A-Z_.-]{1,})((.*?))","g");if(!b.test(K)){if(b=new RegExp(":([a-z0-9A-Z_.-]{1,})","g"),!b.test(K))return K;return K.replace(b,(I,W)=>"(.*?)")}return K.replace(b,(I,W,P)=>P)}).join("/")}}var kw=E6;class e1{alias;_routes=new Map;constructor({alias:K}){this.alias=this._thinAlias(K)}route(K){let w=this._thinAlias(`${this.alias}/${K}`),b=this._routes.get(w),I=!b?new kw({alias:`${this.alias}/${K}`}):b;if(!b)this._routes.set(w,I);return I}_thinAlias(K){return K.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}get routes(){return this._routes}}class n1{_routers=new Map;add(...K){for(let w of K){if(this._routers.has(w.alias))continue;this._routers.set(w.alias,w)}return this}find({pathname:K,method:w}){for(let b of this._routers.values())for(let I of b.routes.values()){if(!I.test({pathname:K}))continue;let W=I.exec({pathname:K,method:w});if(!W)continue;return W}return null}}var fb=O1(d1(),1);class w1{_mapper=new Map;constructor(...K){K.forEach((w)=>{w.entries.forEach(([b,I])=>{this._mapper.set(b,I)})})}get(K){if(this._mapper.has(K))return this._mapper.get(K);if(typeof K!=="function")return;let w=Reflect.getMetadataKeys(K);if(![L6,b1,wK,KK,z6,W1].some((W)=>w.includes(W)))throw Error("Missing dependency declaration, please check @Injectable() used on dependency(ies).");let b=(Reflect.getOwnMetadata(I1,K)||[]).map((W)=>this.get(W)),I=new K(...b);return this._mapper.set(K,I),I}set(K,w){if(this._mapper.has(K))throw Error(`${String(K)} already exists in injector collection.`);this._mapper.set(K,w)}get entries(){return[...this._mapper.entries()]}}class j6{error;constructor(K){this.error=K}}class g6{eventName;metadata;_context=void 0;constructor({eventName:K,metadata:w}){this.eventName=K,this.metadata=w}bind(K){return this._context=K,this}execute(){if(this._context&&typeof this.metadata.descriptor.value==="function")this.metadata.descriptor.value=this.metadata.descriptor.value.bind(this._context);return Object.freeze({methodName:this.metadata.methodName,descriptor:this.metadata.descriptor,arguments:this.metadata.arguments})}}class IK{rawAlias;alias;routes=[];constructor(K="/"){this.rawAlias=K,this.alias=IK.thinAlias(K)}addRoutes(...K){for(let w of K)if(!this.routes.includes(w))this.routes.push(w);return this}bind(K){for(let w of this.routes)w.bind(K);return this}execute(){let K=new Map;for(let w of this.routes)K.set(`${this.alias}:::${w.eventName}`,w.execute());return K}static thinAlias(K){return K.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}}class P1{rawPrefix;prefix;routers=[];constructor(K="/"){this.rawPrefix=K,this.prefix=P1.thinPrefix(K)}addRouters(...K){for(let w=0;w<K.length;w++)if(!this.routers.includes(K[w]))this.routers.push(K[w]);for(let w of K)if(!this.routers.includes(w))this.routers.push(w);return this}execute(){let K=new Map;for(let w of this.routers){let b=w.execute();for(let[I,W]of b.entries())K.set(`/${P1.thinPrefix(`${this.prefix}/${I}`)}`,W)}return K}static thinPrefix(K){return K.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}}class Zw{classConstructor;options;#K;#w;#b=new w1;#I=new Map;#P;#O=900;#W;constructor(K,w){if(this.classConstructor=K,this.options=w,this.#w=Reflect.getOwnMetadataKeys(K),!this.#w.includes(D4)&&!this.#w.includes(a4))throw Error(`Can not detect! ${K.name} class is not a container or module.`);this.#O=typeof w.static?.cacheTimeInSeconds!=="number"?900:w.static.cacheTimeInSeconds,this.#P=Object.freeze({allowLogsMethods:this.options?.log?.methods||[],staticOption:this.options.static,allowOrigins:!this.options.cors?.origins?["*"]:typeof this.options.cors.origins!=="string"?this.options.cors.origins.includes("*")||this.options.cors.origins.length<1?["*"]:this.options.cors.origins:[this.options.cors.origins!=="*"?this.options.cors.origins:"*"],allowMethods:this.options.cors?.methods||R6,allowCredentials:!this.options.cors?.credentials?!1:!0,allowHeaders:!this.options.cors?.headers||this.options.cors.headers.includes("*")?["*"]:this.options.cors.headers})}useValidator(K){this.#W=K}async preLaunch(){if(this.#K)return this.#K;let K=!this.#w.includes(D4)?void 0:Reflect.getOwnMetadata(D4,this.classConstructor),w=!this.#w.includes(D4)?[this.classConstructor]:K?.modules||[],b=!K?void 0:await this.containerResolution({containerClass:this.classConstructor,options:this.options,extendInjector:this.#b}),I=await Promise.all(w.map((O)=>this.moduleResolution({moduleClass:O,options:this.options,extendInjector:!b?this.#b:b.injector})));if([...new Set(I.map((O)=>O.prefix))].length!==I.length)throw Error("Module prefix should be unique.");let W=new Map;for(let O of I){let M=O.webSocketRouterGroup.execute();for(let[J,N]of M.entries())W.set(J,N)}let P=Object.freeze({containerMetadata:K,modulesConverted:w,resolutedContainer:b,resolutedModules:I,webSocketsMap:W});return this.#K=P,P}async listen(){let{allowLogsMethods:K,allowOrigins:w,allowMethods:b,allowHeaders:I,allowCredentials:W,staticOption:P}=this.#P,{resolutedContainer:O,resolutedModules:M,webSocketsMap:J}=await this.preLaunch(),N=Bun.serve({port:this.options.port,fetch:async(G,Y)=>{let X=performance.now(),h=new URL(G.url),D=hw.parse(h.searchParams.toString(),this.options.queryParser),Q=G.headers.get("origin")||"*",v=G.method.toUpperCase(),S=new Headers,H=new i1().setOptions({isStatic:!0}).set(p2,Y).set(e2,G).set(i2,G.headers).set(y2,S).set(V6,D);try{if(!Ew(v))return this.finalizeResponse(new Response(JSON.stringify({httpCode:405,message:"Method Not Allowed.",data:void 0}),{status:405,statusText:"Method Not Allowed.",headers:S}));let L=gw(G),$;if(L){for(let u of M){let r=u.webSocketHttpRouterGroup.find({pathname:h.pathname,method:v});if(r){$=Object.freeze({route:r,resolution:u});break}}if(!$)return this.finalizeResponse(new Response(JSON.stringify({httpCode:404,message:"Route not found.",data:void 0}),{status:404,statusText:"Not found.",headers:S}));let k=await this.webSocketFetcher({request:G,server:Y},{query:D,responseHeaders:S,route:$.route,moduleResolution:$.resolution});return k instanceof Response?k:void 0}if([...!W?[]:[{key:"Access-Control-Allow-Credentials",value:"true"}],{key:"Access-Control-Allow-Origin",value:w.includes("*")?"*":!w.includes(Q)?w[0]:Q},{key:"Access-Control-Allow-Methods",value:b.join(", ")},{key:"Access-Control-Allow-Headers",value:I.join(", ")}].forEach(({key:k,value:u})=>S.set(k,u)),!b.includes(v))return this.finalizeResponse(new Response(void 0,{status:405,statusText:"Method Not Allowed.",headers:S}));if(G.method.toUpperCase()==="OPTIONS")return this.finalizeResponse(w.includes("*")||w.includes(Q)?new Response(void 0,{status:204,statusText:"No Content.",headers:S}):new Response(void 0,{status:417,statusText:"Expectation Failed.",headers:S}));if(P){let{path:k,headers:u}=P,r=`${k}/${h.pathname}`,e=this.#I.get(r);if(!e){let y=Bun.file(r);if(await y.exists()){if(u)for(let[K2,J2]of Object.entries(u))S.set(K2,J2);return S.set("Content-Type",y.type),this.finalizeResponse(new Response(await y.arrayBuffer(),{status:200,statusText:"SUCCESS",headers:S}))}}else{let y=new Date>e.expiredAt;if(y)this.#I.delete(r);let K2=!y?e.file:Bun.file(r);if(await K2.exists()){if(this.#I.set(r,Object.freeze({expiredAt:Fw(new Date,this.#O,u2.seconds),file:K2})),u)for(let[J2,b2]of Object.entries(u))S.set(J2,b2);return S.set("Content-Type",K2.type),this.finalizeResponse(new Response(await K2.arrayBuffer(),{status:200,statusText:"SUCCESS",headers:S}))}}}for(let k of M){let u=k.controllerRouterGroup.find({pathname:h.pathname,method:v});if(u){$=Object.freeze({route:u,resolution:k});break}}if(O){let{context:k}=await this.httpFetcher({context:H,route:$?.route,resolutedMap:{injector:O.injector,startMiddlewareGroup:O.startMiddlewareGroup,guardGroup:O.guardGroup},options:{isContainer:!0}});H=k}if(!$)H.setOptions({isStatic:!1}).set(l1,404).set(p1,"Not found.").set(K1,JSON.stringify({httpCode:404,message:"Route not found.",data:void 0}));else{let{context:k}=await this.httpFetcher({context:H,route:$.route,resolutedMap:$.resolution});H=k}if(O){let{context:k}=await this.httpFetcher({context:H,resolutedMap:{injector:O.injector,endMiddlewareGroup:O.endMiddlewareGroup},options:{isContainer:!0}});H=k}let F=H.get(y2,{isStatic:!0})||new Headers,x=H.get(K1,{isStatic:!1})||void 0,V=H.get(l1,{isStatic:!1}),C=H.get(p1,{isStatic:!1});return this.serializeResponse({status:typeof V!=="number"?v==="POST"?201:void 0:V,statusText:typeof C!=="string"?void 0:C,headers:F,data:x})}catch(L){return this.options.debug&&console.error(L),this.finalizeResponse(jw(L,S))}finally{if(K){let L=performance.now(),$=K4(h.pathname,{color:"blue"}),F=`${Bun.color("yellow","ansi")}${process.pid}`,x=K4(G.method,{color:"yellow",backgroundColor:"blue"}),V=K4(`${G.headers.get("x-forwarded-for")||G.headers.get("x-real-ip")||Y.requestIP(G)?.address||"<Unknown>"}`,{color:"yellow"}),C=K4(`${Math.round((L-X+Number.EPSILON)*100)/100}ms`,{color:"yellow",backgroundColor:"blue"});K.includes(G.method.toUpperCase())&&console.info(`PID: ${F} - Method: ${x} - IP: ${V} - ${$} - Time: ${C}`)}}},websocket:{open:(G)=>{let Y=`${G.data.pathname}:::open`,X=J.get(Y);if(!X)return;let h=X.arguments||{},D=[];for(let[Q,v]of Object.entries(h))switch(v.type){case $4:D[v.index]=G;break;case G4:D[v.index]=N;break}X.descriptor.value(...D)},close:(G,Y,X)=>{let h=`${G.data.pathname}:::close`,D=J.get(h);if(!D)return;let Q=D.arguments||{},v=[];for(let[S,H]of Object.entries(Q))switch(H.type){case $4:v[H.index]=G;break;case G4:v[H.index]=N;break;case Q6:v[H.index]=Y;break;case Y6:v[H.index]=X;break}D.descriptor.value(...v)},message:(G,Y)=>{let X=`${G.data.pathname}:::message`,h=J.get(X);if(!h)return;let D=h.arguments||{},Q=[];for(let[v,S]of Object.entries(D))switch(S.type){case $4:Q[S.index]=G;break;case s4:Q[S.index]=Y;break;case G4:Q[S.index]=N;break}h.descriptor.value(...Q)},drain:(G)=>{let Y=`${G.data.pathname}:::drain`,X=J.get(Y);if(!X)return;let h=X.arguments||{},D=[];for(let[Q,v]of Object.entries(h))switch(v.type){case $4:D[v.index]=G;break;case G4:D[v.index]=N;break}X.descriptor.value(...D)},ping:(G,Y)=>{let X=`${G.data.pathname}:::ping`,h=J.get(X);if(!h)return;let D=h.arguments||{},Q=[];for(let[v,S]of Object.entries(D))switch(S.type){case $4:Q[S.index]=G;break;case G4:Q[S.index]=N;break;case s4:Q[S.index]=Y;break}h.descriptor.value(...Q)},pong:(G,Y)=>{let X=`${G.data.pathname}:::pong`,h=J.get(X);if(!h)return;let D=h.arguments||{},Q=[];for(let[v,S]of Object.entries(D))switch(S.type){case $4:Q[S.index]=G;break;case G4:Q[S.index]=N;break;case s4:Q[S.index]=Y;break}h.descriptor.value(...Q)}}})}async containerResolution({containerClass:K,options:w,extendInjector:b}){if(!Reflect.getOwnMetadataKeys(K).includes(D4))throw Error(`${K.name} is not a container.`);let I=new w1(b),W=Reflect.getOwnMetadata(D4,K),{loaders:P,middlewares:O,guards:M,dependencies:J,config:N}=W||{},{config:G}=Object.freeze({config:{...typeof w.config!=="function"?w.config:await w.config(),...typeof N!=="function"?typeof N!=="object"?void 0:("key"in N)&&("value"in N)&&typeof N.key==="symbol"?typeof N.value!=="function"?N.value:await N.value():N:await N()}});if(I.set(N&&"key"in N&&"value"in N&&typeof N.key==="symbol"?N.key:f1,G),P){let D=[];for(let[v,S]of Object.entries(P))D.push(async()=>{try{let H=await S({config:G});return console.info(`${K4(" INFO ",{color:"white",backgroundColor:"blue",bold:!0})} Loader [${v}] initialized successfully.`),H}catch(H){throw console.error(`${K4(" WARN ",{color:"yellow",backgroundColor:"red",bold:!0})} Loader [${v}] initialization failed.`),w.debug&&console.error(H),H}});let Q=await Promise.all(D.map((v)=>v()));for(let[v,S]of Q)I.set(v,S)}!J||J.map((D)=>I.get(D));let Y=[],X=[];!O||O.forEach((D)=>{let Q=I.get(D);if(Q.start&&typeof Q.start==="function"){let v=Reflect.getOwnMetadata(q2,D,"start")||{};Y.push(Object.freeze({class:D,funcName:"start",func:Q.start.bind(Q),argumentsMetadata:v}))}if(Q.end&&typeof Q.end==="function"){let v=Reflect.getOwnMetadata(q2,D,"end")||{};X.push(Object.freeze({class:D,funcName:"end",func:Q.end.bind(Q),argumentsMetadata:v}))}});let h=!M?[]:M.map((D)=>{let Q=I.get(D),v=Reflect.getOwnMetadata(q2,D,"enforce")||{};return Object.freeze({class:D,funcName:"enforce",func:Q.enforce.bind(Q),argumentsMetadata:v})});return Object.freeze({injector:I,startMiddlewareGroup:Y,endMiddlewareGroup:X,guardGroup:h})}async moduleResolution({moduleClass:K,options:w,extendInjector:b}){if(!Reflect.getOwnMetadataKeys(K).includes(a4))throw Error(`${K.name} is not a module.`);let I=new w1(b),W=Reflect.getOwnMetadata(a4,K),{loaders:P,middlewares:O,guards:M,interceptors:J,controllers:N,dependencies:G,webSockets:Y,prefix:X,config:h}=W||{},D=`${w.prefix||""}/${X||""}`,{config:Q}=Object.freeze({config:!h?void 0:{...typeof w.config!=="function"?w.config:await w.config(),...typeof h!=="function"?typeof h!=="object"?void 0:("key"in h)&&("value"in h)&&typeof h.key==="symbol"?typeof h.value!=="function"?h.value:await h.value():h:await h()}});if(Q&&I.set(h&&"key"in h&&"value"in h&&typeof h.key==="symbol"?h.key:f1,Q),P){let C=[];for(let[u,r]of Object.entries(P))C.push(async()=>{try{let e=await r({config:Q});return console.info(`${K4(" INFO ",{color:"white",backgroundColor:"blue",bold:!0})} Loader [${u}] initialized successfully.`),e}catch(e){throw console.error(`${K4(" WARN ",{color:"yellow",backgroundColor:"red",bold:!0})} Loader [${u}] initialization failed.`),w.debug&&console.error(e),e}});let k=await Promise.all(C.map((u)=>u()));for(let u=0;u<k.length;u++){let[r,e]=k[u];I.set(r,e)}}!G||G.map((C)=>I.get(C));let v=[],S=[];!O||O.forEach((C)=>{let k=I.get(C);if(k.start&&typeof k.start==="function"){let u=Reflect.getOwnMetadata(q2,C,"start")||{};v.push(Object.freeze({class:C,funcName:"start",func:k.start.bind(k),argumentsMetadata:u}))}if(k.end&&typeof k.end==="function"){let u=Reflect.getOwnMetadata(q2,C,"end")||{};S.push(Object.freeze({class:C,funcName:"end",func:k.end.bind(k),argumentsMetadata:u}))}});let H=!M?[]:M.map((C)=>{let k=I.get(C),u=Reflect.getOwnMetadata(q2,C,"enforce")||{};return Object.freeze({class:C,funcName:"enforce",func:k.enforce.bind(k),argumentsMetadata:u})}),L=[],$=[];!J||J.forEach((C)=>{let k=I.get(C);if(k.open&&typeof k.open==="function"){let u=Reflect.getOwnMetadata(q2,C,"open")||{};L.push(Object.freeze({class:C,funcName:"open",func:k.open.bind(k),argumentsMetadata:u}))}if(k.close&&typeof k.close==="function"){let u=Reflect.getOwnMetadata(q2,C,"close")||{};$.push(Object.freeze({class:C,funcName:"close",func:k.close.bind(k),argumentsMetadata:u}))}});let F=new n1;!N||N.forEach((C)=>this.initControllerInstance({controllerConstructor:C,httpRouterGroup:F,injector:I,prefix:D}));let x=new n1,V=new P1;return Y&&Y.forEach((C)=>this.initWebSocketInstance({webSocketConstructor:C,httpRouterGroup:x,webSocketRouterGroup:V,injector:I,prefix:D})),Object.freeze({prefix:X||"",injector:I,startMiddlewareGroup:v,endMiddlewareGroup:S,guardGroup:H,openInterceptorGroup:L,closeInterceptorGroup:$,controllerRouterGroup:F,webSocketHttpRouterGroup:x,webSocketRouterGroup:V})}async argumentsResolution(K,w,b,I){if(!this.#W)return K;try{let W=await this.#W.validate(K,w,b,I);if(!(W instanceof j6))return W;throw new A4({httpCode:400,message:`Validation at the [${I.toString()}] method fails at positional argument [${b}].`,data:W.error})}catch(W){if(W instanceof A4)throw W;throw new bK({httpCode:500,message:`Validation at the [${I.toString()}] method error at positional argument [${b}].`,data:!(W instanceof Error)?W:[{message:W.message,code:W.name,cause:W.cause}]})}}initControllerInstance({controllerConstructor:K,httpRouterGroup:w,injector:b,prefix:I}){if(!Reflect.getOwnMetadataKeys(K).includes(b1))throw Error(`${K.name} is not a controller.`);let W=b.get(K);if(!W)throw Error("Can not initialize controller.");let P=Reflect.getOwnMetadata(b1,K)||{prefix:"/",httpMetadata:[]},O=new e1({alias:`/${I||""}/${P.prefix}`});return P.httpMetadata.forEach((M)=>{if(typeof M.descriptor.value!=="function")return;let J=O.route(M.path),N=M.descriptor.value.bind(W),G=Object.freeze({class:K,funcName:M.methodName,func:N,argumentsMetadata:M.argumentsMetadata});switch(M.httpMethod){case"GET":return J.get({model:G});case"POST":return J.post({model:G});case"PUT":return J.put({model:G});case"PATCH":return J.patch({model:G});case"DELETE":return J.delete({model:G});case"OPTIONS":return J.options({model:G})}}),w.add(O)}initWebSocketInstance({injector:K,httpRouterGroup:w,prefix:b,webSocketRouterGroup:I,webSocketConstructor:W}){if(!Reflect.getOwnMetadataKeys(W).includes(W1))throw Error(`${W.name} is not a websocket route.`);let P=K.get(W);if(!P)throw Error("Can not initialize webSocket.");let O=Reflect.getOwnMetadata(W1,W)||{prefix:"/",events:[],http:[]},M=`/${b||""}/${O.prefix}`,J=new e1({alias:M});for(let[G,Y]of Object.entries(O.http)){if(typeof Y.descriptor?.value!=="function")continue;let X=J.route(Y.path),h=Y.descriptor.value.bind(P),D=Object.freeze({class:W,funcName:Y.methodName,func:h,argumentsMetadata:Y.argumentsMetadata});switch(Y.httpMethod){case"GET":X.get({model:D});break;case"POST":X.post({model:D});break}}w.add(J);let N=new IK(M);for(let[G,Y]of Object.entries(O.events)){let X=new g6({eventName:G,metadata:Y});N.addRoutes(X)}return N.bind(P),I.addRouters(N),Object.freeze({httpRouterGroup:w,webSocketRouterGroup:I})}serializeResponse({status:K,statusText:w,headers:b,data:I}){let W=b.get("Content-Type")||"text/plain";if(W.includes("application/json"))return this.finalizeResponse(new Response(!I?void 0:I instanceof ReadableStream?I:JSON.stringify(I),{status:!I?204:K,statusText:w,headers:b}));if(W.includes("text/plain")||W.includes("text/html"))return this.finalizeResponse(new Response(!I?void 0:I instanceof ReadableStream?I:String(I),{status:!I?204:K,statusText:w,headers:b}));if(W.includes("application/octet-stream")){if(I instanceof Uint8Array||I instanceof ArrayBuffer||I instanceof Blob||I instanceof ReadableStream)return this.finalizeResponse(new Response(I,{status:K,statusText:w,headers:b}));throw Error("Invalid data type for application/octet-stream")}if(W.includes("multipart/form-data")){if(I instanceof FormData)return this.finalizeResponse(new Response(I,{status:K,statusText:w,headers:b}));throw Error("multipart/form-data requires FormData object")}return this.finalizeResponse(new Response(!I?void 0:String(I),{status:!I?204:K,statusText:w,headers:b}))}finalizeResponse(K){return K.headers.set("X-Powered-By","Bool Typescript"),K}async httpFetcher({context:K,route:w,options:b,resolutedMap:I}){let W={isStatic:!0},P=new i1(...!K?[]:[K]).setOptions(W);if(w)P.set(T1,w.parameters,{isPassthrough:!0}).set(_2,w.model,{isPassthrough:!0});let O=P.get(p2,W)||void 0,M=P.get(e2,W)||void 0,J=P.get(i2,W)||void 0,N=P.get(y2,W)||void 0,G=P.get(T1,W)||void 0,Y=P.get(_2,W)||void 0;if(I){let{startMiddlewareGroup:X,guardGroup:h}=I;if(X)for(let D=0;D<X.length;D++){let Q=[],{func:v,funcName:S,argumentsMetadata:H}=X[D];for(let[L,$]of Object.entries(H))switch($.type){case b4:Q[$.index]=!$.key?P:P.get($.key,W);break;case e2:Q[$.index]=!$.validationSchema?M:await this.argumentsResolution(M,$.validationSchema,$.index,S);break;case B4:Q[$.index]=!$.validationSchema?await M?.[$.parser||"json"]():await this.argumentsResolution(await M?.[$.parser||"json"](),$.validationSchema,$.index,S);break;case w4:Q[$.index]=!$.validationSchema?J:await this.argumentsResolution(J?.toJSON(),$.validationSchema,$.index,S);break;case i2:Q[$.index]=!$.validationSchema?J?.get($.key)||void 0:await this.argumentsResolution(J?.get($.key)||void 0,$.validationSchema,$.index,S);break;case X4:Q[$.index]=!$.validationSchema?G?.[$.key]||void 0:await this.argumentsResolution(G?.[$.key]||void 0,$.validationSchema,$.index,S);break;case _2:Q[$.index]=Y;break;case y2:Q[$.index]=N;break;case p2:Q[$.index]=O;break;default:Q[$.index]=!$.validationSchema?!P.has($.type,W)?void 0:P.get($.type,W):await this.argumentsResolution(!($.type in P)?void 0:P.get($.type,W),$.validationSchema,$.index,S);break}await v(...Q)}if(h)for(let D=0;D<h.length;D++){let Q=[],{func:v,funcName:S,argumentsMetadata:H}=h[D];for(let[$,F]of Object.entries(H))switch(F.type){case e2:Q[F.index]=!F.validationSchema?M:await this.argumentsResolution(M,F.validationSchema,F.index,S);break;case B4:Q[F.index]=!F.validationSchema?await M?.[F.parser||"json"]():await this.argumentsResolution(await M?.[F.parser||"json"](),F.validationSchema,F.index,S);break;case b4:Q[F.index]=!F.key?P:P.get(F.key);break;case w4:Q[F.index]=!F.validationSchema?J:await this.argumentsResolution(J?.toJSON(),F.validationSchema,F.index,S);break;case y2:Q[F.index]=N;break;case i2:Q[F.index]=!F.validationSchema?J?.get(F.key)||void 0:await this.argumentsResolution(J?.get(F.key)||void 0,F.validationSchema,F.index,S);break;case X4:Q[F.index]=!F.validationSchema?G?.[F.key]||void 0:await this.argumentsResolution(G?.[F.key],F.validationSchema,F.index,S);break;case _2:Q[F.index]=Y;break;case p2:Q[F.index]=O;break;default:Q[F.index]=!F.validationSchema?!P.has(F.type)?void 0:P.get(F.type):await this.argumentsResolution(P.get(F.type),F.validationSchema,F.index,S);break}let L=await v(...Q);if(typeof L!=="boolean"||!L)throw new A4({httpCode:401,message:"Unauthorization.",data:void 0})}}if(Y&&!b?.isContainer){if(I&&"openInterceptorGroup"in I&&I.openInterceptorGroup){let{openInterceptorGroup:v}=I;for(let S=0;S<v.length;S++){let H=[],{func:L,funcName:$,argumentsMetadata:F}=v[S];for(let[x,V]of Object.entries(F))switch(V.type){case e2:H[V.index]=!V.validationSchema?M:await this.argumentsResolution(M,V.validationSchema,V.index,$);break;case B4:H[V.index]=!V.validationSchema?await M?.[V.parser||"json"]():await this.argumentsResolution(await M?.[V.parser||"json"](),V.validationSchema,V.index,$);break;case b4:H[V.index]=!V.key?P:P.get(V.key);break;case w4:H[V.index]=!V.validationSchema?J:await this.argumentsResolution(J?.toJSON(),V.validationSchema,V.index,$);break;case i2:H[V.index]=!V.validationSchema?J?.get(V.key)||void 0:await this.argumentsResolution(J?.get(V.key)||void 0,V.validationSchema,V.index,$);break;case y2:H[V.index]=N;break;case X4:H[V.index]=!V.validationSchema?G?.[V.key]||void 0:await this.argumentsResolution(G?.[V.key]||void 0,V.validationSchema,V.index,$);break;case _2:H[V.index]=Y;break;case p2:H[V.index]=O;break;default:H[V.index]=!V.validationSchema?!P.has(V.type)?void 0:P.get(V.type):await this.argumentsResolution(P.get(V.type),V.validationSchema,V.index,$);break}await L(...H)}}let X=[],{func:h,funcName:D,argumentsMetadata:Q}=Y;for(let[v,S]of Object.entries(Q))switch(S.type){case e2:X[S.index]=!S.validationSchema?M:await this.argumentsResolution(M,S.validationSchema,S.index,D);break;case B4:X[S.index]=!S.validationSchema?await M?.[S.parser||"json"]():await this.argumentsResolution(await M?.[S.parser||"json"](),S.validationSchema,S.index,D);break;case b4:X[S.index]=!S.key?P:P.get(S.key);break;case w4:X[S.index]=!S.validationSchema?J:await this.argumentsResolution(J?.toJSON(),S.validationSchema,S.index,D);break;case i2:X[S.index]=!S.validationSchema?J?.get(S.key)||void 0:await this.argumentsResolution(J?.get(S.key)||void 0,S.validationSchema,S.index,D);break;case y2:X[S.index]=N;break;case X4:X[S.index]=!S.validationSchema?G?.[S.key]||void 0:await this.argumentsResolution(G?.[S.key]||void 0,S.validationSchema,S.index,D);break;case _2:X[S.index]=Y;break;case p2:X[S.index]=O;break;default:X[S.index]=!S.validationSchema?!P.has(S.type)?void 0:P.get(S.type):await this.argumentsResolution(P.get(S.type),S.validationSchema,S.index,D);break}if(P.set(K1,await h(...X),{isStatic:!1}),I&&"closeInterceptorGroup"in I&&I.closeInterceptorGroup){let{closeInterceptorGroup:v}=I;for(let S=0;S<v.length;S++){let H=[],{func:L,funcName:$,argumentsMetadata:F}=v[S];for(let[x,V]of Object.entries(F))switch(V.type){case e2:H[V.index]=!V.validationSchema?M:await this.argumentsResolution(M,V.validationSchema,V.index,$);break;case B4:H[V.index]=!V.validationSchema?await M?.[V.parser||"json"]():await this.argumentsResolution(await M?.[V.parser||"json"](),V.validationSchema,V.index,$);break;case b4:H[V.index]=!V.key?P:P.get(V.key);break;case w4:H[V.index]=!V.validationSchema?J:await this.argumentsResolution(J?.toJSON(),V.validationSchema,V.index,$);break;case y2:H[V.index]=P.get(V.type);break;case i2:H[V.index]=!V.validationSchema?J?.get(V.key)||void 0:await this.argumentsResolution(J?.get(V.key)||void 0,V.validationSchema,V.index,$);break;case X4:H[V.index]=!V.validationSchema?G?.[V.key]||void 0:await this.argumentsResolution(G?.[V.key]||void 0,V.validationSchema,V.index,$);break;case _2:H[V.index]=Y;break;case p2:H[V.index]=O;break;default:H[V.index]=!V.validationSchema?!P.has(V.type)?void 0:P.get(V.type):await this.argumentsResolution(P.get(V.type),V.validationSchema,V.index,$);break}await L(...H)}}}if(I){let{endMiddlewareGroup:X}=I;if(X)for(let h=0;h<X.length;h++){let D=[],{func:Q,funcName:v,argumentsMetadata:S}=X[h];for(let[H,L]of Object.entries(S))switch(L.type){case e2:D[L.index]=!L.validationSchema?M:await this.argumentsResolution(M,L.validationSchema,L.index,v);break;case B4:D[L.index]=!L.validationSchema?await M?.[L.parser||"json"]():await this.argumentsResolution(await M?.[L.parser||"json"](),L.validationSchema,L.index,v);break;case b4:D[L.index]=!L.key?P:P.get(L.key);break;case w4:D[L.index]=!L.validationSchema?J:await this.argumentsResolution(J?.toJSON(),L.validationSchema,L.index,v);break;case y2:D[L.index]=P.get(L.type);break;case i2:D[L.index]=!L.validationSchema?J?.get(L.key)||void 0:await this.argumentsResolution(J?.get(L.key)||void 0,L.validationSchema,L.index,v);break;case X4:D[L.index]=!L.validationSchema?G?.[L.key]||void 0:await this.argumentsResolution(G?.[L.key]||void 0,L.validationSchema,L.index,v);break;case _2:D[L.index]=Y;break;case p2:D[L.index]=O;break;default:D[L.index]=!L.validationSchema?!P.has(L.type)?void 0:P.get(L.type):await this.argumentsResolution(!(L.type in P)?void 0:P.get(L.type),L.validationSchema,L.index,v);break}await Q(...D)}}return Object.freeze({context:P})}async webSocketFetcher(K,w){let{request:b,server:I}=K,{query:W,responseHeaders:P,route:{model:O}}=w,M=await O.func(...[I,b,W]);if(typeof M!=="boolean")return this.finalizeResponse(new Response(JSON.stringify({httpCode:500,message:"Can not detect webSocket upgrade result.",data:void 0}),{status:500,statusText:"Internal server error.",headers:P}));if(!M)return this.finalizeResponse(new Response(JSON.stringify({httpCode:500,message:"Can not upgrade.",data:void 0}),{status:500,statusText:"Internal server error.",headers:P}));return M}}var Tb=O1(d1(),1);var WK=()=>N1(G2.authState);var Aw=()=>(K)=>{Reflect.defineMetadata(G2.guardMetadata,void 0,K)};class PK{enforce(K,w){if(Reflect.getOwnMetadataKeys(K.class,K.funcName).includes(G2.guardMetadata))return!w?!1:!0;if(Reflect.getOwnMetadataKeys(K.class).includes(G2.guardMetadata))return!w?!1:!0;return!0}}q4([S4(0,H6()),S4(1,WK())],PK.prototype,"enforce",null),PK=q4([F6()],PK);var S1=new TextEncoder,D1=new TextDecoder;function k6(...K){let w=K.reduce((W,{length:P})=>W+P,0),b=new Uint8Array(w),I=0;for(let W of K)b.set(W,I),I+=W.length;return b}function G1(K){let w=new Uint8Array(K.length);for(let b=0;b<K.length;b++){let I=K.charCodeAt(b);if(I>127)throw TypeError("non-ASCII string encountered in encode()");w[b]=I}return w}function Z6(K){if(Uint8Array.prototype.toBase64)return K.toBase64();let w=32768,b=[];for(let I=0;I<K.length;I+=w)b.push(String.fromCharCode.apply(null,K.subarray(I,I+w)));return btoa(b.join(""))}function A6(K){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(K);let w=atob(K),b=new Uint8Array(w.length);for(let I=0;I<w.length;I++)b[I]=w.charCodeAt(I);return b}function c6(K){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof K==="string"?K:D1.decode(K),{alphabet:"base64url"});let w=K;if(w instanceof Uint8Array)w=D1.decode(w);w=w.replace(/-/g,"+").replace(/_/g,"/");try{return A6(w)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function $1(K){let w=K;if(typeof w==="string")w=S1.encode(w);if(Uint8Array.prototype.toBase64)return w.toBase64({alphabet:"base64url",omitPadding:!0});return Z6(w).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class B1 extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(K,w){super(K,w);this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class C2 extends B1{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class I4 extends B1{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class OK extends B1{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}var m2=(K,w="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${w} must be ${K}`),F4=(K,w)=>K.name===w;function MK(K){return parseInt(K.name.slice(4),10)}function cw(K){switch(K){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}function uw(K,w){if(w&&!K.usages.includes(w))throw TypeError(`CryptoKey does not support this operation, its usages must include ${w}.`)}function u6(K,w,b){switch(w){case"HS256":case"HS384":case"HS512":{if(!F4(K.algorithm,"HMAC"))throw m2("HMAC");let I=parseInt(w.slice(2),10);if(MK(K.algorithm.hash)!==I)throw m2(`SHA-${I}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!F4(K.algorithm,"RSASSA-PKCS1-v1_5"))throw m2("RSASSA-PKCS1-v1_5");let I=parseInt(w.slice(2),10);if(MK(K.algorithm.hash)!==I)throw m2(`SHA-${I}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!F4(K.algorithm,"RSA-PSS"))throw m2("RSA-PSS");let I=parseInt(w.slice(2),10);if(MK(K.algorithm.hash)!==I)throw m2(`SHA-${I}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!F4(K.algorithm,"Ed25519"))throw m2("Ed25519");break}case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":{if(!F4(K.algorithm,w))throw m2(w);break}case"ES256":case"ES384":case"ES512":{if(!F4(K.algorithm,"ECDSA"))throw m2("ECDSA");let I=cw(w);if(K.algorithm.namedCurve!==I)throw m2(I,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}uw(K,b)}function C6(K,w,...b){if(b=b.filter(Boolean),b.length>2){let I=b.pop();K+=`one of type ${b.join(", ")}, or ${I}.`}else if(b.length===2)K+=`one of type ${b[0]} or ${b[1]}.`;else K+=`of type ${b[0]}.`;if(w==null)K+=` Received ${w}`;else if(typeof w==="function"&&w.name)K+=` Received function ${w.name}`;else if(typeof w==="object"&&w!=null){if(w.constructor?.name)K+=` Received an instance of ${w.constructor.name}`}return K}var x6=(K,...w)=>C6("Key must be ",K,...w),JK=(K,w,...b)=>C6(`Key for the ${K} algorithm must be `,w,...b);var NK=(K)=>{if(K?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return K instanceof CryptoKey}catch{return!1}},SK=(K)=>K?.[Symbol.toStringTag]==="KeyObject",DK=(K)=>NK(K)||SK(K);function o6(...K){let w=K.filter(Boolean);if(w.length===0||w.length===1)return!0;let b;for(let I of w){let W=Object.keys(I);if(!b||b.size===0){b=new Set(W);continue}for(let P of W){if(b.has(P))return!1;b.add(P)}}return!0}var Cw=(K)=>typeof K==="object"&&K!==null;function X1(K){if(!Cw(K)||Object.prototype.toString.call(K)!=="[object Object]")return!1;if(Object.getPrototypeOf(K)===null)return!0;let w=K;while(Object.getPrototypeOf(w)!==null)w=Object.getPrototypeOf(w);return Object.getPrototypeOf(K)===w}function r6(K,w){if(K.startsWith("RS")||K.startsWith("PS")){let{modulusLength:b}=w.algorithm;if(typeof b!=="number"||b<2048)throw TypeError(`${K} requires key modulusLength to be 2048 bits or larger`)}}function xw(K){let w,b;switch(K.kty){case"AKP":{switch(K.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":w={name:K.alg},b=K.priv?["sign"]:["verify"];break;default:throw new C2('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(K.alg){case"PS256":case"PS384":case"PS512":w={name:"RSA-PSS",hash:`SHA-${K.alg.slice(-3)}`},b=K.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":w={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${K.alg.slice(-3)}`},b=K.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":w={name:"RSA-OAEP",hash:`SHA-${parseInt(K.alg.slice(-3),10)||1}`},b=K.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new C2('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(K.alg){case"ES256":w={name:"ECDSA",namedCurve:"P-256"},b=K.d?["sign"]:["verify"];break;case"ES384":w={name:"ECDSA",namedCurve:"P-384"},b=K.d?["sign"]:["verify"];break;case"ES512":w={name:"ECDSA",namedCurve:"P-521"},b=K.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":w={name:"ECDH",namedCurve:K.crv},b=K.d?["deriveBits"]:[];break;default:throw new C2('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(K.alg){case"Ed25519":case"EdDSA":w={name:"Ed25519"},b=K.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":w={name:K.crv},b=K.d?["deriveBits"]:[];break;default:throw new C2('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new C2('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:w,keyUsages:b}}async function y6(K){if(!K.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:w,keyUsages:b}=xw(K),I={...K};if(I.kty!=="AKP")delete I.alg;return delete I.use,crypto.subtle.importKey("jwk",I,w,K.ext??(K.d||K.priv?!1:!0),K.key_ops??b)}function _6(K,w,b,I,W){if(W.crit!==void 0&&I?.crit===void 0)throw new K('"crit" (Critical) Header Parameter MUST be integrity protected');if(!I||I.crit===void 0)return new Set;if(!Array.isArray(I.crit)||I.crit.length===0||I.crit.some((O)=>typeof O!=="string"||O.length===0))throw new K('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let P;if(b!==void 0)P=new Map([...Object.entries(b),...w.entries()]);else P=w;for(let O of I.crit){if(!P.has(O))throw new C2(`Extension Header Parameter "${O}" is not recognized`);if(W[O]===void 0)throw new K(`Extension Header Parameter "${O}" is missing`);if(P.get(O)&&I[O]===void 0)throw new K(`Extension Header Parameter "${O}" MUST be integrity protected`)}return new Set(I.crit)}var c4=(K)=>X1(K)&&typeof K.kty==="string",m6=(K)=>K.kty!=="oct"&&(K.kty==="AKP"&&typeof K.priv==="string"||typeof K.d==="string"),f6=(K)=>K.kty!=="oct"&&K.d===void 0&&K.priv===void 0,T6=(K)=>K.kty==="oct"&&typeof K.k==="string";var h4,l6=async(K,w,b,I=!1)=>{h4||=new WeakMap;let W=h4.get(K);if(W?.[b])return W[b];let P=await y6({...w,alg:b});if(I)Object.freeze(K);if(!W)h4.set(K,{[b]:P});else W[b]=P;return P},rw=(K,w)=>{h4||=new WeakMap;let b=h4.get(K);if(b?.[w])return b[w];let I=K.type==="public",W=I?!0:!1,P;if(K.asymmetricKeyType==="x25519"){switch(w){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}P=K.toCryptoKey(K.asymmetricKeyType,W,I?[]:["deriveBits"])}if(K.asymmetricKeyType==="ed25519"){if(w!=="EdDSA"&&w!=="Ed25519")throw TypeError("given KeyObject instance cannot be used for this algorithm");P=K.toCryptoKey(K.asymmetricKeyType,W,[I?"verify":"sign"])}switch(K.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":{if(w!==K.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");P=K.toCryptoKey(K.asymmetricKeyType,W,[I?"verify":"sign"])}}if(K.asymmetricKeyType==="rsa"){let O;switch(w){case"RSA-OAEP":O="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":O="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":O="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":O="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(w.startsWith("RSA-OAEP"))return K.toCryptoKey({name:"RSA-OAEP",hash:O},W,I?["encrypt"]:["decrypt"]);P=K.toCryptoKey({name:w.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:O},W,[I?"verify":"sign"])}if(K.asymmetricKeyType==="ec"){let M=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(K.asymmetricKeyDetails?.namedCurve);if(!M)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(w==="ES256"&&M==="P-256")P=K.toCryptoKey({name:"ECDSA",namedCurve:M},W,[I?"verify":"sign"]);if(w==="ES384"&&M==="P-384")P=K.toCryptoKey({name:"ECDSA",namedCurve:M},W,[I?"verify":"sign"]);if(w==="ES512"&&M==="P-521")P=K.toCryptoKey({name:"ECDSA",namedCurve:M},W,[I?"verify":"sign"]);if(w.startsWith("ECDH-ES"))P=K.toCryptoKey({name:"ECDH",namedCurve:M},W,I?[]:["deriveBits"])}if(!P)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(!b)h4.set(K,{[w]:P});else b[w]=P;return P};async function p6(K,w){if(K instanceof Uint8Array)return K;if(NK(K))return K;if(SK(K)){if(K.type==="secret")return K.export();if("toCryptoKey"in K&&typeof K.toCryptoKey==="function")try{return rw(K,w)}catch(I){if(I instanceof TypeError)throw I}let b=K.export({format:"jwk"});return l6(K,b,w)}if(c4(K)){if(K.k)return c6(K.k);return l6(K,K,w,!0)}throw Error("unreachable")}var v4=(K)=>K?.[Symbol.toStringTag],GK=(K,w,b)=>{if(w.use!==void 0){let I;switch(b){case"sign":case"verify":I="sig";break;case"encrypt":case"decrypt":I="enc";break}if(w.use!==I)throw TypeError(`Invalid key for this operation, its "use" must be "${I}" when present`)}if(w.alg!==void 0&&w.alg!==K)throw TypeError(`Invalid key for this operation, its "alg" must be "${K}" when present`);if(Array.isArray(w.key_ops)){let I;switch(!0){case(b==="sign"||b==="verify"):case K==="dir":case K.includes("CBC-HS"):I=b;break;case K.startsWith("PBES2"):I="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(K):if(!K.includes("GCM")&&K.endsWith("KW"))I=b==="encrypt"?"wrapKey":"unwrapKey";else I=b;break;case(b==="encrypt"&&K.startsWith("RSA")):I="wrapKey";break;case b==="decrypt":I=K.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(I&&w.key_ops?.includes?.(I)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${I}" when present`)}return!0},yw=(K,w,b)=>{if(w instanceof Uint8Array)return;if(c4(w)){if(T6(w)&&GK(K,w,b))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!DK(w))throw TypeError(JK(K,w,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(w.type!=="secret")throw TypeError(`${v4(w)} instances for symmetric algorithms must be of type "secret"`)},_w=(K,w,b)=>{if(c4(w))switch(b){case"decrypt":case"sign":if(m6(w)&&GK(K,w,b))return;throw TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if(f6(w)&&GK(K,w,b))return;throw TypeError("JSON Web Key for this operation must be a public JWK")}if(!DK(w))throw TypeError(JK(K,w,"CryptoKey","KeyObject","JSON Web Key"));if(w.type==="secret")throw TypeError(`${v4(w)} instances for asymmetric algorithms must not be of type "secret"`);if(w.type==="public")switch(b){case"sign":throw TypeError(`${v4(w)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${v4(w)} instances for asymmetric algorithm decryption must be of type "private"`)}if(w.type==="private")switch(b){case"verify":throw TypeError(`${v4(w)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${v4(w)} instances for asymmetric algorithm encryption must be of type "public"`)}};function i6(K,w,b){switch(K.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":yw(K,w,b);break;default:_w(K,w,b)}}function e6(K,w){let b=`SHA-${K.slice(-3)}`;switch(K){case"HS256":case"HS384":case"HS512":return{hash:b,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:b,name:"RSA-PSS",saltLength:parseInt(K.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:b,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:b,name:"ECDSA",namedCurve:w.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:K};default:throw new C2(`alg ${K} is not supported either by JOSE or your javascript runtime`)}}async function n6(K,w,b){if(w instanceof Uint8Array){if(!K.startsWith("HS"))throw TypeError(x6(w,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",w,{hash:`SHA-${K.slice(-3)}`,name:"HMAC"},!1,[b])}return u6(w,K,b),w}var U4=(K)=>Math.floor(K.getTime()/1000),d6=60,t6=d6*60,BK=t6*24,mw=BK*7,fw=BK*365.25,Tw=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function $K(K){let w=Tw.exec(K);if(!w||w[4]&&w[1])throw TypeError("Invalid time period format");let b=parseFloat(w[2]),I=w[3].toLowerCase(),W;switch(I){case"sec":case"secs":case"second":case"seconds":case"s":W=Math.round(b);break;case"minute":case"minutes":case"min":case"mins":case"m":W=Math.round(b*d6);break;case"hour":case"hours":case"hr":case"hrs":case"h":W=Math.round(b*t6);break;case"day":case"days":case"d":W=Math.round(b*BK);break;case"week":case"weeks":case"w":W=Math.round(b*mw);break;default:W=Math.round(b*fw);break}if(w[1]==="-"||w[4]==="ago")return-W;return W}function z4(K,w){if(!Number.isFinite(w))throw TypeError(`Invalid ${K} input`);return w}class XK{#K;constructor(K){if(!X1(K))throw TypeError("JWT Claims Set MUST be an object");this.#K=structuredClone(K)}data(){return S1.encode(JSON.stringify(this.#K))}get iss(){return this.#K.iss}set iss(K){this.#K.iss=K}get sub(){return this.#K.sub}set sub(K){this.#K.sub=K}get aud(){return this.#K.aud}set aud(K){this.#K.aud=K}set jti(K){this.#K.jti=K}set nbf(K){if(typeof K==="number")this.#K.nbf=z4("setNotBefore",K);else if(K instanceof Date)this.#K.nbf=z4("setNotBefore",U4(K));else this.#K.nbf=U4(new Date)+$K(K)}set exp(K){if(typeof K==="number")this.#K.exp=z4("setExpirationTime",K);else if(K instanceof Date)this.#K.exp=z4("setExpirationTime",U4(K));else this.#K.exp=U4(new Date)+$K(K)}set iat(K){if(K===void 0)this.#K.iat=U4(new Date);else if(K instanceof Date)this.#K.iat=z4("setIssuedAt",U4(K));else if(typeof K==="string")this.#K.iat=z4("setIssuedAt",U4(new Date)+$K(K));else this.#K.iat=z4("setIssuedAt",K)}}async function a6(K,w,b){let I=await n6(K,w,"sign");r6(K,I);let W=await crypto.subtle.sign(e6(K,I.algorithm),I,b);return new Uint8Array(W)}class UK{#K;#w;#b;constructor(K){if(!(K instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#K=K}setProtectedHeader(K){if(this.#w)throw TypeError("setProtectedHeader can only be called once");return this.#w=K,this}setUnprotectedHeader(K){if(this.#b)throw TypeError("setUnprotectedHeader can only be called once");return this.#b=K,this}async sign(K,w){if(!this.#w&&!this.#b)throw new I4("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!o6(this.#w,this.#b))throw new I4("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let b={...this.#w,...this.#b},I=_6(I4,new Map([["b64",!0]]),w?.crit,this.#w,b),W=!0;if(I.has("b64")){if(W=this.#w.b64,typeof W!=="boolean")throw new I4('The "b64" (base64url-encode payload) Header Parameter must be a boolean')}let{alg:P}=b;if(typeof P!=="string"||!P)throw new I4('JWS "alg" (Algorithm) Header Parameter missing or invalid');i6(P,K,"sign");let O,M;if(W)O=$1(this.#K),M=G1(O);else M=this.#K,O="";let J,N;if(this.#w)J=$1(JSON.stringify(this.#w)),N=G1(J);else J="",N=new Uint8Array;let G=k6(N,G1("."),M),Y=await p6(K,P),X=await a6(P,Y,G),h={signature:$1(X),payload:O};if(this.#b)h.header=this.#b;if(this.#w)h.protected=J;return h}}class zK{#K;constructor(K){this.#K=new UK(K)}setProtectedHeader(K){return this.#K.setProtectedHeader(K),this}async sign(K,w){let b=await this.#K.sign(K,w);if(b.payload===void 0)throw TypeError("use the flattened module for creating JWS with b64: false");return`${b.protected}.${b.payload}.${b.signature}`}}class U1{#K;#w;constructor(K={}){this.#w=new XK(K)}setIssuer(K){return this.#w.iss=K,this}setSubject(K){return this.#w.sub=K,this}setAudience(K){return this.#w.aud=K,this}setJti(K){return this.#w.jti=K,this}setNotBefore(K){return this.#w.nbf=K,this}setExpirationTime(K){return this.#w.exp=K,this}setIssuedAt(K){return this.#w.iat=K,this}setProtectedHeader(K){return this.#K=K,this}async sign(K,w){let b=new zK(this.#w.data());if(b.setProtectedHeader(this.#K),Array.isArray(this.#K?.crit)&&this.#K.crit.includes("b64")&&this.#K.b64===!1)throw new OK("JWTs MUST NOT use unencoded payload");return b.sign(K,w)}}var LK=Object.freeze({status:"aborted"});function E(K,w,b){function I(M,J){if(!M._zod)Object.defineProperty(M,"_zod",{value:{def:J,constr:O,traits:new Set},enumerable:!1});if(M._zod.traits.has(K))return;M._zod.traits.add(K),w(M,J);let N=O.prototype,G=Object.keys(N);for(let Y=0;Y<G.length;Y++){let X=G[Y];if(!(X in M))M[X]=N[X].bind(M)}}let W=b?.Parent??Object;class P extends W{}Object.defineProperty(P,"name",{value:K});function O(M){var J;let N=b?.Parent?new P:this;I(N,M),(J=N._zod).deferred??(J.deferred=[]);for(let G of N._zod.deferred)G();return N}return Object.defineProperty(O,"init",{value:I}),Object.defineProperty(O,Symbol.hasInstance,{value:(M)=>{if(b?.Parent&&M instanceof b.Parent)return!0;return M?._zod?.traits?.has(K)}}),Object.defineProperty(O,"name",{value:K}),O}var lw=Symbol("zod_brand");class n2 extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class u4 extends Error{constructor(K){super(`Encountered unidirectional transform during encode: ${K}`);this.name="ZodEncodeError"}}var z1={};function k2(K){if(K)Object.assign(z1,K);return z1}var s={};_1(s,{unwrapMessage:()=>C4,uint8ArrayToHex:()=>U9,uint8ArrayToBase64url:()=>B9,uint8ArrayToBase64:()=>M8,stringifyPrimitive:()=>V1,slugify:()=>YK,shallowClone:()=>w8,safeExtend:()=>J9,required:()=>D9,randomString:()=>w9,propertyKeyTypes:()=>qK,promiseAllObject:()=>K9,primitiveTypes:()=>b8,prefixIssues:()=>_4,pick:()=>P9,partial:()=>S9,optionalKeys:()=>HK,omit:()=>O9,objectClone:()=>tw,numKeys:()=>b9,nullish:()=>r4,normalizeParams:()=>T,mergeDefs:()=>P4,merge:()=>N9,jsonStringifyReplacer:()=>E4,joinValues:()=>L1,issue:()=>j4,isPlainObject:()=>L4,isObject:()=>R4,hexToUint8Array:()=>X9,getSizableOrigin:()=>P8,getParsedType:()=>I9,getLengthableOrigin:()=>m4,getEnumValues:()=>x4,getElementAtPath:()=>sw,floatSafeRemainder:()=>K8,finalizeIssue:()=>f2,extend:()=>M9,escapeRegex:()=>Q4,esc:()=>Q1,defineLazy:()=>w2,createTransparentProxy:()=>W9,cloneDef:()=>aw,clone:()=>Z2,cleanRegex:()=>y4,cleanEnum:()=>G9,captureStackTrace:()=>Y1,cached:()=>o4,base64urlToUint8Array:()=>$9,base64ToUint8Array:()=>O8,assignProp:()=>W4,assertNotEqual:()=>iw,assertNever:()=>nw,assertIs:()=>ew,assertEqual:()=>pw,assert:()=>dw,allowsEval:()=>VK,aborted:()=>O4,NUMBER_FORMAT_RANGES:()=>I8,Class:()=>J8,BIGINT_FORMAT_RANGES:()=>W8});function pw(K){return K}function iw(K){return K}function ew(K){}function nw(K){throw Error("Unexpected value in exhaustive check")}function dw(K){}function x4(K){let w=Object.values(K).filter((I)=>typeof I==="number");return Object.entries(K).filter(([I,W])=>w.indexOf(+I)===-1).map(([I,W])=>W)}function L1(K,w="|"){return K.map((b)=>V1(b)).join(w)}function E4(K,w){if(typeof w==="bigint")return w.toString();return w}function o4(K){return{get value(){{let b=K();return Object.defineProperty(this,"value",{value:b}),b}throw Error("cached value already set")}}}function r4(K){return K===null||K===void 0}function y4(K){let w=K.startsWith("^")?1:0,b=K.endsWith("$")?K.length-1:K.length;return K.slice(w,b)}function K8(K,w){let b=(K.toString().split(".")[1]||"").length,I=w.toString(),W=(I.split(".")[1]||"").length;if(W===0&&/\d?e-\d?/.test(I)){let J=I.match(/\d?e-(\d?)/);if(J?.[1])W=Number.parseInt(J[1])}let P=b>W?b:W,O=Number.parseInt(K.toFixed(P).replace(".","")),M=Number.parseInt(w.toFixed(P).replace(".",""));return O%M/10**P}var s6=Symbol("evaluating");function w2(K,w,b){let I=void 0;Object.defineProperty(K,w,{get(){if(I===s6)return;if(I===void 0)I=s6,I=b();return I},set(W){Object.defineProperty(K,w,{value:W})},configurable:!0})}function tw(K){return Object.create(Object.getPrototypeOf(K),Object.getOwnPropertyDescriptors(K))}function W4(K,w,b){Object.defineProperty(K,w,{value:b,writable:!0,enumerable:!0,configurable:!0})}function P4(...K){let w={};for(let b of K){let I=Object.getOwnPropertyDescriptors(b);Object.assign(w,I)}return Object.defineProperties({},w)}function aw(K){return P4(K._zod.def)}function sw(K,w){if(!w)return K;return w.reduce((b,I)=>b?.[I],K)}function K9(K){let w=Object.keys(K),b=w.map((I)=>K[I]);return Promise.all(b).then((I)=>{let W={};for(let P=0;P<w.length;P++)W[w[P]]=I[P];return W})}function w9(K=10){let b="";for(let I=0;I<K;I++)b+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return b}function Q1(K){return JSON.stringify(K)}function YK(K){return K.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}var Y1="captureStackTrace"in Error?Error.captureStackTrace:(...K)=>{};function R4(K){return typeof K==="object"&&K!==null&&!Array.isArray(K)}var VK=o4(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(K){return!1}});function L4(K){if(R4(K)===!1)return!1;let w=K.constructor;if(w===void 0)return!0;if(typeof w!=="function")return!0;let b=w.prototype;if(R4(b)===!1)return!1;if(Object.prototype.hasOwnProperty.call(b,"isPrototypeOf")===!1)return!1;return!0}function w8(K){if(L4(K))return{...K};if(Array.isArray(K))return[...K];return K}function b9(K){let w=0;for(let b in K)if(Object.prototype.hasOwnProperty.call(K,b))w++;return w}var I9=(K)=>{let w=typeof K;switch(w){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(K)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(K))return"array";if(K===null)return"null";if(K.then&&typeof K.then==="function"&&K.catch&&typeof K.catch==="function")return"promise";if(typeof Map<"u"&&K instanceof Map)return"map";if(typeof Set<"u"&&K instanceof Set)return"set";if(typeof Date<"u"&&K instanceof Date)return"date";if(typeof File<"u"&&K instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${w}`)}},qK=new Set(["string","number","symbol"]),b8=new Set(["string","number","bigint","boolean","symbol","undefined"]);function Q4(K){return K.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Z2(K,w,b){let I=new K._zod.constr(w??K._zod.def);if(!w||b?.parent)I._zod.parent=K;return I}function T(K){let w=K;if(!w)return{};if(typeof w==="string")return{error:()=>w};if(w?.message!==void 0){if(w?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");w.error=w.message}if(delete w.message,typeof w.error==="string")return{...w,error:()=>w.error};return w}function W9(K){let w;return new Proxy({},{get(b,I,W){return w??(w=K()),Reflect.get(w,I,W)},set(b,I,W,P){return w??(w=K()),Reflect.set(w,I,W,P)},has(b,I){return w??(w=K()),Reflect.has(w,I)},deleteProperty(b,I){return w??(w=K()),Reflect.deleteProperty(w,I)},ownKeys(b){return w??(w=K()),Reflect.ownKeys(w)},getOwnPropertyDescriptor(b,I){return w??(w=K()),Reflect.getOwnPropertyDescriptor(w,I)},defineProperty(b,I,W){return w??(w=K()),Reflect.defineProperty(w,I,W)}})}function V1(K){if(typeof K==="bigint")return K.toString()+"n";if(typeof K==="string")return`"${K}"`;return`${K}`}function HK(K){return Object.keys(K).filter((w)=>{return K[w]._zod.optin==="optional"&&K[w]._zod.optout==="optional"})}var I8={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},W8={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function P9(K,w){let b=K._zod.def,I=P4(K._zod.def,{get shape(){let W={};for(let P in w){if(!(P in b.shape))throw Error(`Unrecognized key: "${P}"`);if(!w[P])continue;W[P]=b.shape[P]}return W4(this,"shape",W),W},checks:[]});return Z2(K,I)}function O9(K,w){let b=K._zod.def,I=P4(K._zod.def,{get shape(){let W={...K._zod.def.shape};for(let P in w){if(!(P in b.shape))throw Error(`Unrecognized key: "${P}"`);if(!w[P])continue;delete W[P]}return W4(this,"shape",W),W},checks:[]});return Z2(K,I)}function M9(K,w){if(!L4(w))throw Error("Invalid input to extend: expected a plain object");let b=K._zod.def.checks;if(b&&b.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let W=P4(K._zod.def,{get shape(){let P={...K._zod.def.shape,...w};return W4(this,"shape",P),P},checks:[]});return Z2(K,W)}function J9(K,w){if(!L4(w))throw Error("Invalid input to safeExtend: expected a plain object");let b={...K._zod.def,get shape(){let I={...K._zod.def.shape,...w};return W4(this,"shape",I),I},checks:K._zod.def.checks};return Z2(K,b)}function N9(K,w){let b=P4(K._zod.def,{get shape(){let I={...K._zod.def.shape,...w._zod.def.shape};return W4(this,"shape",I),I},get catchall(){return w._zod.def.catchall},checks:[]});return Z2(K,b)}function S9(K,w,b){let I=P4(w._zod.def,{get shape(){let W=w._zod.def.shape,P={...W};if(b)for(let O in b){if(!(O in W))throw Error(`Unrecognized key: "${O}"`);if(!b[O])continue;P[O]=K?new K({type:"optional",innerType:W[O]}):W[O]}else for(let O in W)P[O]=K?new K({type:"optional",innerType:W[O]}):W[O];return W4(this,"shape",P),P},checks:[]});return Z2(w,I)}function D9(K,w,b){let I=P4(w._zod.def,{get shape(){let W=w._zod.def.shape,P={...W};if(b)for(let O in b){if(!(O in P))throw Error(`Unrecognized key: "${O}"`);if(!b[O])continue;P[O]=new K({type:"nonoptional",innerType:W[O]})}else for(let O in W)P[O]=new K({type:"nonoptional",innerType:W[O]});return W4(this,"shape",P),P},checks:[]});return Z2(w,I)}function O4(K,w=0){if(K.aborted===!0)return!0;for(let b=w;b<K.issues.length;b++)if(K.issues[b]?.continue!==!0)return!0;return!1}function _4(K,w){return w.map((b)=>{var I;return(I=b).path??(I.path=[]),b.path.unshift(K),b})}function C4(K){return typeof K==="string"?K:K?.message}function f2(K,w,b){let I={...K,path:K.path??[]};if(!K.message){let W=C4(K.inst?._zod.def?.error?.(K))??C4(w?.error?.(K))??C4(b.customError?.(K))??C4(b.localeError?.(K))??"Invalid input";I.message=W}if(delete I.inst,delete I.continue,!w?.reportInput)delete I.input;return I}function P8(K){if(K instanceof Set)return"set";if(K instanceof Map)return"map";if(K instanceof File)return"file";return"unknown"}function m4(K){if(Array.isArray(K))return"array";if(typeof K==="string")return"string";return"unknown"}function j4(...K){let[w,b,I]=K;if(typeof w==="string")return{message:w,code:"custom",input:b,inst:I};return{...w}}function G9(K){return Object.entries(K).filter(([w,b])=>{return Number.isNaN(Number.parseInt(w,10))}).map((w)=>w[1])}function O8(K){let w=atob(K),b=new Uint8Array(w.length);for(let I=0;I<w.length;I++)b[I]=w.charCodeAt(I);return b}function M8(K){let w="";for(let b=0;b<K.length;b++)w+=String.fromCharCode(K[b]);return btoa(w)}function $9(K){let w=K.replace(/-/g,"+").replace(/_/g,"/"),b="=".repeat((4-w.length%4)%4);return O8(w+b)}function B9(K){return M8(K).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function X9(K){let w=K.replace(/^0x/,"");if(w.length%2!==0)throw Error("Invalid hex string length");let b=new Uint8Array(w.length/2);for(let I=0;I<w.length;I+=2)b[I/2]=Number.parseInt(w.slice(I,I+2),16);return b}function U9(K){return Array.from(K).map((w)=>w.toString(16).padStart(2,"0")).join("")}class J8{constructor(...K){}}var N8=(K,w)=>{K.name="$ZodError",Object.defineProperty(K,"_zod",{value:K._zod,enumerable:!1}),Object.defineProperty(K,"issues",{value:w,enumerable:!1}),K.message=JSON.stringify(w,E4,2),Object.defineProperty(K,"toString",{value:()=>K.message,enumerable:!1})},q1=E("$ZodError",N8),FK=E("$ZodError",N8,{Parent:Error});function hK(K,w=(b)=>b.message){let b={},I=[];for(let W of K.issues)if(W.path.length>0)b[W.path[0]]=b[W.path[0]]||[],b[W.path[0]].push(w(W));else I.push(w(W));return{formErrors:I,fieldErrors:b}}function vK(K,w=(b)=>b.message){let b={_errors:[]},I=(W)=>{for(let P of W.issues)if(P.code==="invalid_union"&&P.errors.length)P.errors.map((O)=>I({issues:O}));else if(P.code==="invalid_key")I({issues:P.issues});else if(P.code==="invalid_element")I({issues:P.issues});else if(P.path.length===0)b._errors.push(w(P));else{let O=b,M=0;while(M<P.path.length){let J=P.path[M];if(M!==P.path.length-1)O[J]=O[J]||{_errors:[]};else O[J]=O[J]||{_errors:[]},O[J]._errors.push(w(P));O=O[J],M++}}};return I(K),b}var H1=(K)=>(w,b,I,W)=>{let P=I?Object.assign(I,{async:!1}):{async:!1},O=w._zod.run({value:b,issues:[]},P);if(O instanceof Promise)throw new n2;if(O.issues.length){let M=new(W?.Err??K)(O.issues.map((J)=>f2(J,P,k2())));throw Y1(M,W?.callee),M}return O.value};var F1=(K)=>async(w,b,I,W)=>{let P=I?Object.assign(I,{async:!0}):{async:!0},O=w._zod.run({value:b,issues:[]},P);if(O instanceof Promise)O=await O;if(O.issues.length){let M=new(W?.Err??K)(O.issues.map((J)=>f2(J,P,k2())));throw Y1(M,W?.callee),M}return O.value};var f4=(K)=>(w,b,I)=>{let W=I?{...I,async:!1}:{async:!1},P=w._zod.run({value:b,issues:[]},W);if(P instanceof Promise)throw new n2;return P.issues.length?{success:!1,error:new(K??q1)(P.issues.map((O)=>f2(O,W,k2())))}:{success:!0,data:P.value}},S8=f4(FK),T4=(K)=>async(w,b,I)=>{let W=I?Object.assign(I,{async:!0}):{async:!0},P=w._zod.run({value:b,issues:[]},W);if(P instanceof Promise)P=await P;return P.issues.length?{success:!1,error:new K(P.issues.map((O)=>f2(O,W,k2())))}:{success:!0,data:P.value}},D8=T4(FK),G8=(K)=>(w,b,I)=>{let W=I?Object.assign(I,{direction:"backward"}):{direction:"backward"};return H1(K)(w,b,W)};var $8=(K)=>(w,b,I)=>{return H1(K)(w,b,I)};var B8=(K)=>async(w,b,I)=>{let W=I?Object.assign(I,{direction:"backward"}):{direction:"backward"};return F1(K)(w,b,W)};var X8=(K)=>async(w,b,I)=>{return F1(K)(w,b,I)};var U8=(K)=>(w,b,I)=>{let W=I?Object.assign(I,{direction:"backward"}):{direction:"backward"};return f4(K)(w,b,W)};var z8=(K)=>(w,b,I)=>{return f4(K)(w,b,I)};var L8=(K)=>async(w,b,I)=>{let W=I?Object.assign(I,{direction:"backward"}):{direction:"backward"};return T4(K)(w,b,W)};var Q8=(K)=>async(w,b,I)=>{return T4(K)(w,b,I)};var Y8=/^[cC][^\s-]{8,}$/,V8=/^[0-9a-z]+$/,q8=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,H8=/^[0-9a-vA-V]{20}$/,F8=/^[A-Za-z0-9]{27}$/,h8=/^[a-zA-Z0-9_-]{21}$/,v8=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/;var R8=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,RK=(K)=>{if(!K)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${K}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)};var E8=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;var L9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function j8(){return new RegExp(L9,"u")}var g8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,k8=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/;var Z8=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,A8=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,c8=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,EK=/^[A-Za-z0-9_-]*$/;var u8=/^\+(?:[0-9]){6,14}[0-9]$/,C8="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",x8=new RegExp(`^${C8}$`);function o8(K){return typeof K.precision==="number"?K.precision===-1?"(?:[01]\\d|2[0-3]):[0-5]\\d":K.precision===0?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${K.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function r8(K){return new RegExp(`^${o8(K)}$`)}function y8(K){let w=o8({precision:K.precision}),b=["Z"];if(K.local)b.push("");if(K.offset)b.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let I=`${w}(?:${b.join("|")})`;return new RegExp(`^${C8}T(?:${I})$`)}var _8=(K)=>{let w=K?`[\\s\\S]{${K?.minimum??0},${K?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${w}$`)};var m8=/^[^A-Z]*$/,f8=/^[^a-z]*$/;var v2=E("$ZodCheck",(K,w)=>{var b;K._zod??(K._zod={}),K._zod.def=w,(b=K._zod).onattach??(b.onattach=[])});var T8=E("$ZodCheckMaxLength",(K,w)=>{var b;v2.init(K,w),(b=K._zod.def).when??(b.when=(I)=>{let W=I.value;return!r4(W)&&W.length!==void 0}),K._zod.onattach.push((I)=>{let W=I._zod.bag.maximum??Number.POSITIVE_INFINITY;if(w.maximum<W)I._zod.bag.maximum=w.maximum}),K._zod.check=(I)=>{let W=I.value;if(W.length<=w.maximum)return;let O=m4(W);I.issues.push({origin:O,code:"too_big",maximum:w.maximum,inclusive:!0,input:W,inst:K,continue:!w.abort})}}),l8=E("$ZodCheckMinLength",(K,w)=>{var b;v2.init(K,w),(b=K._zod.def).when??(b.when=(I)=>{let W=I.value;return!r4(W)&&W.length!==void 0}),K._zod.onattach.push((I)=>{let W=I._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(w.minimum>W)I._zod.bag.minimum=w.minimum}),K._zod.check=(I)=>{let W=I.value;if(W.length>=w.minimum)return;let O=m4(W);I.issues.push({origin:O,code:"too_small",minimum:w.minimum,inclusive:!0,input:W,inst:K,continue:!w.abort})}}),p8=E("$ZodCheckLengthEquals",(K,w)=>{var b;v2.init(K,w),(b=K._zod.def).when??(b.when=(I)=>{let W=I.value;return!r4(W)&&W.length!==void 0}),K._zod.onattach.push((I)=>{let W=I._zod.bag;W.minimum=w.length,W.maximum=w.length,W.length=w.length}),K._zod.check=(I)=>{let W=I.value,P=W.length;if(P===w.length)return;let O=m4(W),M=P>w.length;I.issues.push({origin:O,...M?{code:"too_big",maximum:w.length}:{code:"too_small",minimum:w.length},inclusive:!0,exact:!0,input:I.value,inst:K,continue:!w.abort})}}),p4=E("$ZodCheckStringFormat",(K,w)=>{var b,I;if(v2.init(K,w),K._zod.onattach.push((W)=>{let P=W._zod.bag;if(P.format=w.format,w.pattern)P.patterns??(P.patterns=new Set),P.patterns.add(w.pattern)}),w.pattern)(b=K._zod).check??(b.check=(W)=>{if(w.pattern.lastIndex=0,w.pattern.test(W.value))return;W.issues.push({origin:"string",code:"invalid_format",format:w.format,input:W.value,...w.pattern?{pattern:w.pattern.toString()}:{},inst:K,continue:!w.abort})});else(I=K._zod).check??(I.check=()=>{})}),i8=E("$ZodCheckRegex",(K,w)=>{p4.init(K,w),K._zod.check=(b)=>{if(w.pattern.lastIndex=0,w.pattern.test(b.value))return;b.issues.push({origin:"string",code:"invalid_format",format:"regex",input:b.value,pattern:w.pattern.toString(),inst:K,continue:!w.abort})}}),e8=E("$ZodCheckLowerCase",(K,w)=>{w.pattern??(w.pattern=m8),p4.init(K,w)}),n8=E("$ZodCheckUpperCase",(K,w)=>{w.pattern??(w.pattern=f8),p4.init(K,w)}),d8=E("$ZodCheckIncludes",(K,w)=>{v2.init(K,w);let b=Q4(w.includes),I=new RegExp(typeof w.position==="number"?`^.{${w.position}}${b}`:b);w.pattern=I,K._zod.onattach.push((W)=>{let P=W._zod.bag;P.patterns??(P.patterns=new Set),P.patterns.add(I)}),K._zod.check=(W)=>{if(W.value.includes(w.includes,w.position))return;W.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:w.includes,input:W.value,inst:K,continue:!w.abort})}}),t8=E("$ZodCheckStartsWith",(K,w)=>{v2.init(K,w);let b=new RegExp(`^${Q4(w.prefix)}.*`);w.pattern??(w.pattern=b),K._zod.onattach.push((I)=>{let W=I._zod.bag;W.patterns??(W.patterns=new Set),W.patterns.add(b)}),K._zod.check=(I)=>{if(I.value.startsWith(w.prefix))return;I.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:w.prefix,input:I.value,inst:K,continue:!w.abort})}}),a8=E("$ZodCheckEndsWith",(K,w)=>{v2.init(K,w);let b=new RegExp(`.*${Q4(w.suffix)}$`);w.pattern??(w.pattern=b),K._zod.onattach.push((I)=>{let W=I._zod.bag;W.patterns??(W.patterns=new Set),W.patterns.add(b)}),K._zod.check=(I)=>{if(I.value.endsWith(w.suffix))return;I.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:w.suffix,input:I.value,inst:K,continue:!w.abort})}});var s8=E("$ZodCheckOverwrite",(K,w)=>{v2.init(K,w),K._zod.check=(b)=>{b.value=w.tx(b.value)}});class jK{constructor(K=[]){if(this.content=[],this.indent=0,this)this.args=K}indented(K){this.indent+=1,K(this),this.indent-=1}write(K){if(typeof K==="function"){K(this,{execution:"sync"}),K(this,{execution:"async"});return}let b=K.split(`
`).filter((P)=>P),I=Math.min(...b.map((P)=>P.length-P.trimStart().length)),W=b.map((P)=>P.slice(I)).map((P)=>" ".repeat(this.indent*2)+P);for(let P of W)this.content.push(P)}compile(){let K=Function,w=this?.args,I=[...(this?.content??[""]).map((W)=>`  ${W}`)];return new K(...w,I.join(`
`))}}var w3={major:4,minor:2,patch:1};var S2=E("$ZodType",(K,w)=>{var b;K??(K={}),K._zod.def=w,K._zod.bag=K._zod.bag||{},K._zod.version=w3;let I=[...K._zod.def.checks??[]];if(K._zod.traits.has("$ZodCheck"))I.unshift(K);for(let W of I)for(let P of W._zod.onattach)P(K);if(I.length===0)(b=K._zod).deferred??(b.deferred=[]),K._zod.deferred?.push(()=>{K._zod.run=K._zod.parse});else{let W=(O,M,J)=>{let N=O4(O),G;for(let Y of M){if(Y._zod.def.when){if(!Y._zod.def.when(O))continue}else if(N)continue;let X=O.issues.length,h=Y._zod.check(O);if(h instanceof Promise&&J?.async===!1)throw new n2;if(G||h instanceof Promise)G=(G??Promise.resolve()).then(async()=>{if(await h,O.issues.length===X)return;if(!N)N=O4(O,X)});else{if(O.issues.length===X)continue;if(!N)N=O4(O,X)}}if(G)return G.then(()=>{return O});return O},P=(O,M,J)=>{if(O4(O))return O.aborted=!0,O;let N=W(M,I,J);if(N instanceof Promise){if(J.async===!1)throw new n2;return N.then((G)=>K._zod.parse(G,J))}return K._zod.parse(N,J)};K._zod.run=(O,M)=>{if(M.skipChecks)return K._zod.parse(O,M);if(M.direction==="backward"){let N=K._zod.parse({value:O.value,issues:[]},{...M,skipChecks:!0});if(N instanceof Promise)return N.then((G)=>{return P(G,O,M)});return P(N,O,M)}let J=K._zod.parse(O,M);if(J instanceof Promise){if(M.async===!1)throw new n2;return J.then((N)=>W(N,I,M))}return W(J,I,M)}}K["~standard"]={validate:(W)=>{try{let P=S8(K,W);return P.success?{value:P.data}:{issues:P.error?.issues}}catch(P){return D8(K,W).then((O)=>O.success?{value:O.data}:{issues:O.error?.issues})}},vendor:"zod",version:1}}),R1=E("$ZodString",(K,w)=>{S2.init(K,w),K._zod.pattern=[...K?._zod.bag?.patterns??[]].pop()??_8(K._zod.bag),K._zod.parse=(b,I)=>{if(w.coerce)try{b.value=String(b.value)}catch(W){}if(typeof b.value==="string")return b;return b.issues.push({expected:"string",code:"invalid_type",input:b.value,inst:K}),b}}),W2=E("$ZodStringFormat",(K,w)=>{p4.init(K,w),R1.init(K,w)}),S3=E("$ZodGUID",(K,w)=>{w.pattern??(w.pattern=R8),W2.init(K,w)}),D3=E("$ZodUUID",(K,w)=>{if(w.version){let I={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[w.version];if(I===void 0)throw Error(`Invalid UUID version: "${w.version}"`);w.pattern??(w.pattern=RK(I))}else w.pattern??(w.pattern=RK());W2.init(K,w)}),G3=E("$ZodEmail",(K,w)=>{w.pattern??(w.pattern=E8),W2.init(K,w)}),$3=E("$ZodURL",(K,w)=>{W2.init(K,w),K._zod.check=(b)=>{try{let I=b.value.trim(),W=new URL(I);if(w.hostname){if(w.hostname.lastIndex=0,!w.hostname.test(W.hostname))b.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:w.hostname.source,input:b.value,inst:K,continue:!w.abort})}if(w.protocol){if(w.protocol.lastIndex=0,!w.protocol.test(W.protocol.endsWith(":")?W.protocol.slice(0,-1):W.protocol))b.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:w.protocol.source,input:b.value,inst:K,continue:!w.abort})}if(w.normalize)b.value=W.href;else b.value=I;return}catch(I){b.issues.push({code:"invalid_format",format:"url",input:b.value,inst:K,continue:!w.abort})}}}),B3=E("$ZodEmoji",(K,w)=>{w.pattern??(w.pattern=j8()),W2.init(K,w)}),X3=E("$ZodNanoID",(K,w)=>{w.pattern??(w.pattern=h8),W2.init(K,w)}),U3=E("$ZodCUID",(K,w)=>{w.pattern??(w.pattern=Y8),W2.init(K,w)}),z3=E("$ZodCUID2",(K,w)=>{w.pattern??(w.pattern=V8),W2.init(K,w)}),L3=E("$ZodULID",(K,w)=>{w.pattern??(w.pattern=q8),W2.init(K,w)}),Q3=E("$ZodXID",(K,w)=>{w.pattern??(w.pattern=H8),W2.init(K,w)}),Y3=E("$ZodKSUID",(K,w)=>{w.pattern??(w.pattern=F8),W2.init(K,w)}),V3=E("$ZodISODateTime",(K,w)=>{w.pattern??(w.pattern=y8(w)),W2.init(K,w)}),q3=E("$ZodISODate",(K,w)=>{w.pattern??(w.pattern=x8),W2.init(K,w)}),H3=E("$ZodISOTime",(K,w)=>{w.pattern??(w.pattern=r8(w)),W2.init(K,w)}),F3=E("$ZodISODuration",(K,w)=>{w.pattern??(w.pattern=v8),W2.init(K,w)}),h3=E("$ZodIPv4",(K,w)=>{w.pattern??(w.pattern=g8),W2.init(K,w),K._zod.bag.format="ipv4"}),v3=E("$ZodIPv6",(K,w)=>{w.pattern??(w.pattern=k8),W2.init(K,w),K._zod.bag.format="ipv6",K._zod.check=(b)=>{try{new URL(`http://[${b.value}]`)}catch{b.issues.push({code:"invalid_format",format:"ipv6",input:b.value,inst:K,continue:!w.abort})}}});var R3=E("$ZodCIDRv4",(K,w)=>{w.pattern??(w.pattern=Z8),W2.init(K,w)}),E3=E("$ZodCIDRv6",(K,w)=>{w.pattern??(w.pattern=A8),W2.init(K,w),K._zod.check=(b)=>{let I=b.value.split("/");try{if(I.length!==2)throw Error();let[W,P]=I;if(!P)throw Error();let O=Number(P);if(`${O}`!==P)throw Error();if(O<0||O>128)throw Error();new URL(`http://[${W}]`)}catch{b.issues.push({code:"invalid_format",format:"cidrv6",input:b.value,inst:K,continue:!w.abort})}}});function j3(K){if(K==="")return!0;if(K.length%4!==0)return!1;try{return atob(K),!0}catch{return!1}}var g3=E("$ZodBase64",(K,w)=>{w.pattern??(w.pattern=c8),W2.init(K,w),K._zod.bag.contentEncoding="base64",K._zod.check=(b)=>{if(j3(b.value))return;b.issues.push({code:"invalid_format",format:"base64",input:b.value,inst:K,continue:!w.abort})}});function Q9(K){if(!EK.test(K))return!1;let w=K.replace(/[-_]/g,(I)=>I==="-"?"+":"/"),b=w.padEnd(Math.ceil(w.length/4)*4,"=");return j3(b)}var k3=E("$ZodBase64URL",(K,w)=>{w.pattern??(w.pattern=EK),W2.init(K,w),K._zod.bag.contentEncoding="base64url",K._zod.check=(b)=>{if(Q9(b.value))return;b.issues.push({code:"invalid_format",format:"base64url",input:b.value,inst:K,continue:!w.abort})}}),Z3=E("$ZodE164",(K,w)=>{w.pattern??(w.pattern=u8),W2.init(K,w)});function Y9(K,w=null){try{let b=K.split(".");if(b.length!==3)return!1;let[I]=b;if(!I)return!1;let W=JSON.parse(atob(I));if("typ"in W&&W?.typ!=="JWT")return!1;if(!W.alg)return!1;if(w&&(!("alg"in W)||W.alg!==w))return!1;return!0}catch{return!1}}var A3=E("$ZodJWT",(K,w)=>{W2.init(K,w),K._zod.check=(b)=>{if(Y9(b.value,w.alg))return;b.issues.push({code:"invalid_format",format:"jwt",input:b.value,inst:K,continue:!w.abort})}});var c3=E("$ZodUnknown",(K,w)=>{S2.init(K,w),K._zod.parse=(b)=>b}),u3=E("$ZodNever",(K,w)=>{S2.init(K,w),K._zod.parse=(b,I)=>{return b.issues.push({expected:"never",code:"invalid_type",input:b.value,inst:K}),b}});function b3(K,w,b){if(K.issues.length)w.issues.push(..._4(b,K.issues));w.value[b]=K.value}var C3=E("$ZodArray",(K,w)=>{S2.init(K,w),K._zod.parse=(b,I)=>{let W=b.value;if(!Array.isArray(W))return b.issues.push({expected:"array",code:"invalid_type",input:W,inst:K}),b;b.value=Array(W.length);let P=[];for(let O=0;O<W.length;O++){let M=W[O],J=w.element._zod.run({value:M,issues:[]},I);if(J instanceof Promise)P.push(J.then((N)=>b3(N,b,O)));else b3(J,b,O)}if(P.length)return Promise.all(P).then(()=>b);return b}});function v1(K,w,b,I){if(K.issues.length)w.issues.push(..._4(b,K.issues));if(K.value===void 0){if(b in I)w.value[b]=void 0}else w.value[b]=K.value}function x3(K){let w=Object.keys(K.shape);for(let I of w)if(!K.shape?.[I]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${I}": expected a Zod schema`);let b=HK(K.shape);return{...K,keys:w,keySet:new Set(w),numKeys:w.length,optionalKeys:new Set(b)}}function o3(K,w,b,I,W,P){let O=[],M=W.keySet,J=W.catchall._zod,N=J.def.type;for(let G in w){if(M.has(G))continue;if(N==="never"){O.push(G);continue}let Y=J.run({value:w[G],issues:[]},I);if(Y instanceof Promise)K.push(Y.then((X)=>v1(X,b,G,w)));else v1(Y,b,G,w)}if(O.length)b.issues.push({code:"unrecognized_keys",keys:O,input:w,inst:P});if(!K.length)return b;return Promise.all(K).then(()=>{return b})}var V9=E("$ZodObject",(K,w)=>{if(S2.init(K,w),!Object.getOwnPropertyDescriptor(w,"shape")?.get){let M=w.shape;Object.defineProperty(w,"shape",{get:()=>{let J={...M};return Object.defineProperty(w,"shape",{value:J}),J}})}let I=o4(()=>x3(w));w2(K._zod,"propValues",()=>{let M=w.shape,J={};for(let N in M){let G=M[N]._zod;if(G.values){J[N]??(J[N]=new Set);for(let Y of G.values)J[N].add(Y)}}return J});let W=R4,P=w.catchall,O;K._zod.parse=(M,J)=>{O??(O=I.value);let N=M.value;if(!W(N))return M.issues.push({expected:"object",code:"invalid_type",input:N,inst:K}),M;M.value={};let G=[],Y=O.shape;for(let X of O.keys){let D=Y[X]._zod.run({value:N[X],issues:[]},J);if(D instanceof Promise)G.push(D.then((Q)=>v1(Q,M,X,N)));else v1(D,M,X,N)}if(!P)return G.length?Promise.all(G).then(()=>M):M;return o3(G,N,M,J,I.value,K)}}),r3=E("$ZodObjectJIT",(K,w)=>{V9.init(K,w);let b=K._zod.parse,I=o4(()=>x3(w)),W=(X)=>{let h=new jK(["shape","payload","ctx"]),D=I.value,Q=(L)=>{let $=Q1(L);return`shape[${$}]._zod.run({ value: input[${$}], issues: [] }, ctx)`};h.write("const input = payload.value;");let v=Object.create(null),S=0;for(let L of D.keys)v[L]=`key_${S++}`;h.write("const newResult = {};");for(let L of D.keys){let $=v[L],F=Q1(L);h.write(`const ${$} = ${Q(L)};`),h.write(`
        if (${$}.issues.length) {
          payload.issues = payload.issues.concat(${$}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${F}, ...iss.path] : [${F}]
          })));
        }
        
        
        if (${$}.value === undefined) {
          if (${F} in input) {
            newResult[${F}] = undefined;
          }
        } else {
          newResult[${F}] = ${$}.value;
        }
        
      `)}h.write("payload.value = newResult;"),h.write("return payload;");let H=h.compile();return(L,$)=>H(X,L,$)},P,O=R4,M=!z1.jitless,N=M&&VK.value,G=w.catchall,Y;K._zod.parse=(X,h)=>{Y??(Y=I.value);let D=X.value;if(!O(D))return X.issues.push({expected:"object",code:"invalid_type",input:D,inst:K}),X;if(M&&N&&h?.async===!1&&h.jitless!==!0){if(!P)P=W(w.shape);if(X=P(X,h),!G)return X;return o3([],D,X,h,Y,K)}return b(X,h)}});function I3(K,w,b,I){for(let P of K)if(P.issues.length===0)return w.value=P.value,w;let W=K.filter((P)=>!O4(P));if(W.length===1)return w.value=W[0].value,W[0];return w.issues.push({code:"invalid_union",input:w.value,inst:b,errors:K.map((P)=>P.issues.map((O)=>f2(O,I,k2())))}),w}var y3=E("$ZodUnion",(K,w)=>{S2.init(K,w),w2(K._zod,"optin",()=>w.options.some((W)=>W._zod.optin==="optional")?"optional":void 0),w2(K._zod,"optout",()=>w.options.some((W)=>W._zod.optout==="optional")?"optional":void 0),w2(K._zod,"values",()=>{if(w.options.every((W)=>W._zod.values))return new Set(w.options.flatMap((W)=>Array.from(W._zod.values)));return}),w2(K._zod,"pattern",()=>{if(w.options.every((W)=>W._zod.pattern)){let W=w.options.map((P)=>P._zod.pattern);return new RegExp(`^(${W.map((P)=>y4(P.source)).join("|")})$`)}return});let b=w.options.length===1,I=w.options[0]._zod.run;K._zod.parse=(W,P)=>{if(b)return I(W,P);let O=!1,M=[];for(let J of w.options){let N=J._zod.run({value:W.value,issues:[]},P);if(N instanceof Promise)M.push(N),O=!0;else{if(N.issues.length===0)return N;M.push(N)}}if(!O)return I3(M,W,K,P);return Promise.all(M).then((J)=>{return I3(J,W,K,P)})}});var _3=E("$ZodIntersection",(K,w)=>{S2.init(K,w),K._zod.parse=(b,I)=>{let W=b.value,P=w.left._zod.run({value:W,issues:[]},I),O=w.right._zod.run({value:W,issues:[]},I);if(P instanceof Promise||O instanceof Promise)return Promise.all([P,O]).then(([J,N])=>{return W3(b,J,N)});return W3(b,P,O)}});function gK(K,w){if(K===w)return{valid:!0,data:K};if(K instanceof Date&&w instanceof Date&&+K===+w)return{valid:!0,data:K};if(L4(K)&&L4(w)){let b=Object.keys(w),I=Object.keys(K).filter((P)=>b.indexOf(P)!==-1),W={...K,...w};for(let P of I){let O=gK(K[P],w[P]);if(!O.valid)return{valid:!1,mergeErrorPath:[P,...O.mergeErrorPath]};W[P]=O.data}return{valid:!0,data:W}}if(Array.isArray(K)&&Array.isArray(w)){if(K.length!==w.length)return{valid:!1,mergeErrorPath:[]};let b=[];for(let I=0;I<K.length;I++){let W=K[I],P=w[I],O=gK(W,P);if(!O.valid)return{valid:!1,mergeErrorPath:[I,...O.mergeErrorPath]};b.push(O.data)}return{valid:!0,data:b}}return{valid:!1,mergeErrorPath:[]}}function W3(K,w,b){if(w.issues.length)K.issues.push(...w.issues);if(b.issues.length)K.issues.push(...b.issues);if(O4(K))return K;let I=gK(w.value,b.value);if(!I.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(I.mergeErrorPath)}`);return K.value=I.data,K}var m3=E("$ZodEnum",(K,w)=>{S2.init(K,w);let b=x4(w.entries),I=new Set(b);K._zod.values=I,K._zod.pattern=new RegExp(`^(${b.filter((W)=>qK.has(typeof W)).map((W)=>typeof W==="string"?Q4(W):W.toString()).join("|")})$`),K._zod.parse=(W,P)=>{let O=W.value;if(I.has(O))return W;return W.issues.push({code:"invalid_value",values:b,input:O,inst:K}),W}});var f3=E("$ZodTransform",(K,w)=>{S2.init(K,w),K._zod.parse=(b,I)=>{if(I.direction==="backward")throw new u4(K.constructor.name);let W=w.transform(b.value,b);if(I.async)return(W instanceof Promise?W:Promise.resolve(W)).then((O)=>{return b.value=O,b});if(W instanceof Promise)throw new n2;return b.value=W,b}});function P3(K,w){if(K.issues.length&&w===void 0)return{issues:[],value:void 0};return K}var T3=E("$ZodOptional",(K,w)=>{S2.init(K,w),K._zod.optin="optional",K._zod.optout="optional",w2(K._zod,"values",()=>{return w.innerType._zod.values?new Set([...w.innerType._zod.values,void 0]):void 0}),w2(K._zod,"pattern",()=>{let b=w.innerType._zod.pattern;return b?new RegExp(`^(${y4(b.source)})?$`):void 0}),K._zod.parse=(b,I)=>{if(w.innerType._zod.optin==="optional"){let W=w.innerType._zod.run(b,I);if(W instanceof Promise)return W.then((P)=>P3(P,b.value));return P3(W,b.value)}if(b.value===void 0)return b;return w.innerType._zod.run(b,I)}}),l3=E("$ZodNullable",(K,w)=>{S2.init(K,w),w2(K._zod,"optin",()=>w.innerType._zod.optin),w2(K._zod,"optout",()=>w.innerType._zod.optout),w2(K._zod,"pattern",()=>{let b=w.innerType._zod.pattern;return b?new RegExp(`^(${y4(b.source)}|null)$`):void 0}),w2(K._zod,"values",()=>{return w.innerType._zod.values?new Set([...w.innerType._zod.values,null]):void 0}),K._zod.parse=(b,I)=>{if(b.value===null)return b;return w.innerType._zod.run(b,I)}}),p3=E("$ZodDefault",(K,w)=>{S2.init(K,w),K._zod.optin="optional",w2(K._zod,"values",()=>w.innerType._zod.values),K._zod.parse=(b,I)=>{if(I.direction==="backward")return w.innerType._zod.run(b,I);if(b.value===void 0)return b.value=w.defaultValue,b;let W=w.innerType._zod.run(b,I);if(W instanceof Promise)return W.then((P)=>O3(P,w));return O3(W,w)}});function O3(K,w){if(K.value===void 0)K.value=w.defaultValue;return K}var i3=E("$ZodPrefault",(K,w)=>{S2.init(K,w),K._zod.optin="optional",w2(K._zod,"values",()=>w.innerType._zod.values),K._zod.parse=(b,I)=>{if(I.direction==="backward")return w.innerType._zod.run(b,I);if(b.value===void 0)b.value=w.defaultValue;return w.innerType._zod.run(b,I)}}),e3=E("$ZodNonOptional",(K,w)=>{S2.init(K,w),w2(K._zod,"values",()=>{let b=w.innerType._zod.values;return b?new Set([...b].filter((I)=>I!==void 0)):void 0}),K._zod.parse=(b,I)=>{let W=w.innerType._zod.run(b,I);if(W instanceof Promise)return W.then((P)=>M3(P,K));return M3(W,K)}});function M3(K,w){if(!K.issues.length&&K.value===void 0)K.issues.push({code:"invalid_type",expected:"nonoptional",input:K.value,inst:w});return K}var n3=E("$ZodCatch",(K,w)=>{S2.init(K,w),w2(K._zod,"optin",()=>w.innerType._zod.optin),w2(K._zod,"optout",()=>w.innerType._zod.optout),w2(K._zod,"values",()=>w.innerType._zod.values),K._zod.parse=(b,I)=>{if(I.direction==="backward")return w.innerType._zod.run(b,I);let W=w.innerType._zod.run(b,I);if(W instanceof Promise)return W.then((P)=>{if(b.value=P.value,P.issues.length)b.value=w.catchValue({...b,error:{issues:P.issues.map((O)=>f2(O,I,k2()))},input:b.value}),b.issues=[];return b});if(b.value=W.value,W.issues.length)b.value=w.catchValue({...b,error:{issues:W.issues.map((P)=>f2(P,I,k2()))},input:b.value}),b.issues=[];return b}});var d3=E("$ZodPipe",(K,w)=>{S2.init(K,w),w2(K._zod,"values",()=>w.in._zod.values),w2(K._zod,"optin",()=>w.in._zod.optin),w2(K._zod,"optout",()=>w.out._zod.optout),w2(K._zod,"propValues",()=>w.in._zod.propValues),K._zod.parse=(b,I)=>{if(I.direction==="backward"){let P=w.out._zod.run(b,I);if(P instanceof Promise)return P.then((O)=>h1(O,w.in,I));return h1(P,w.in,I)}let W=w.in._zod.run(b,I);if(W instanceof Promise)return W.then((P)=>h1(P,w.out,I));return h1(W,w.out,I)}});function h1(K,w,b){if(K.issues.length)return K.aborted=!0,K;return w._zod.run({value:K.value,issues:K.issues},b)}var t3=E("$ZodReadonly",(K,w)=>{S2.init(K,w),w2(K._zod,"propValues",()=>w.innerType._zod.propValues),w2(K._zod,"values",()=>w.innerType._zod.values),w2(K._zod,"optin",()=>w.innerType?._zod?.optin),w2(K._zod,"optout",()=>w.innerType?._zod?.optout),K._zod.parse=(b,I)=>{if(I.direction==="backward")return w.innerType._zod.run(b,I);let W=w.innerType._zod.run(b,I);if(W instanceof Promise)return W.then(J3);return J3(W)}});function J3(K){return K.value=Object.freeze(K.value),K}var a3=E("$ZodCustom",(K,w)=>{v2.init(K,w),S2.init(K,w),K._zod.parse=(b,I)=>{return b},K._zod.check=(b)=>{let I=b.value,W=w.fn(I);if(W instanceof Promise)return W.then((P)=>N3(P,b,I,K));N3(W,b,I,K);return}});function N3(K,w,b,I){if(!K){let W={code:"custom",input:b,inst:I,path:[...I._zod.def.path??[]],continue:!I._zod.def.abort};if(I._zod.def.params)W.params=I._zod.def.params;w.issues.push(j4(W))}}var q9=(K)=>{let w=typeof K;switch(w){case"number":return Number.isNaN(K)?"NaN":"number";case"object":{if(Array.isArray(K))return"array";if(K===null)return"null";if(Object.getPrototypeOf(K)!==Object.prototype&&K.constructor)return K.constructor.name}}return w},H9=()=>{let K={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function w(I){return K[I]??null}let b={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return(I)=>{switch(I.code){case"invalid_type":return`Invalid input: expected ${I.expected}, received ${q9(I.input)}`;case"invalid_value":if(I.values.length===1)return`Invalid input: expected ${V1(I.values[0])}`;return`Invalid option: expected one of ${L1(I.values,"|")}`;case"too_big":{let W=I.inclusive?"<=":"<",P=w(I.origin);if(P)return`Too big: expected ${I.origin??"value"} to have ${W}${I.maximum.toString()} ${P.unit??"elements"}`;return`Too big: expected ${I.origin??"value"} to be ${W}${I.maximum.toString()}`}case"too_small":{let W=I.inclusive?">=":">",P=w(I.origin);if(P)return`Too small: expected ${I.origin} to have ${W}${I.minimum.toString()} ${P.unit}`;return`Too small: expected ${I.origin} to be ${W}${I.minimum.toString()}`}case"invalid_format":{let W=I;if(W.format==="starts_with")return`Invalid string: must start with "${W.prefix}"`;if(W.format==="ends_with")return`Invalid string: must end with "${W.suffix}"`;if(W.format==="includes")return`Invalid string: must include "${W.includes}"`;if(W.format==="regex")return`Invalid string: must match pattern ${W.pattern}`;return`Invalid ${b[W.format]??I.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${I.divisor}`;case"unrecognized_keys":return`Unrecognized key${I.keys.length>1?"s":""}: ${L1(I.keys,", ")}`;case"invalid_key":return`Invalid key in ${I.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${I.origin}`;default:return"Invalid input"}}};function kK(){return{localeError:H9()}}var s3,F9=Symbol("ZodOutput"),h9=Symbol("ZodInput");class K5{constructor(){this._map=new WeakMap,this._idmap=new Map}add(K,...w){let b=w[0];if(this._map.set(K,b),b&&typeof b==="object"&&"id"in b){if(this._idmap.has(b.id))throw Error(`ID ${b.id} already exists in the registry`);this._idmap.set(b.id,K)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(K){let w=this._map.get(K);if(w&&typeof w==="object"&&"id"in w)this._idmap.delete(w.id);return this._map.delete(K),this}get(K){let w=K._zod.parent;if(w){let b={...this.get(w)??{}};delete b.id;let I={...b,...this._map.get(K)};return Object.keys(I).length?I:void 0}return this._map.get(K)}has(K){return this._map.has(K)}}function w5(){return new K5}(s3=globalThis).__zod_globalRegistry??(s3.__zod_globalRegistry=w5());var M4=globalThis.__zod_globalRegistry;function b5(K,w){return new K({type:"string",...T(w)})}function ZK(K,w){return new K({type:"string",format:"email",check:"string_format",abort:!1,...T(w)})}function AK(K,w){return new K({type:"string",format:"guid",check:"string_format",abort:!1,...T(w)})}function I5(K,w){return new K({type:"string",format:"uuid",check:"string_format",abort:!1,...T(w)})}function W5(K,w){return new K({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...T(w)})}function P5(K,w){return new K({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...T(w)})}function O5(K,w){return new K({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...T(w)})}function M5(K,w){return new K({type:"string",format:"url",check:"string_format",abort:!1,...T(w)})}function J5(K,w){return new K({type:"string",format:"emoji",check:"string_format",abort:!1,...T(w)})}function N5(K,w){return new K({type:"string",format:"nanoid",check:"string_format",abort:!1,...T(w)})}function S5(K,w){return new K({type:"string",format:"cuid",check:"string_format",abort:!1,...T(w)})}function D5(K,w){return new K({type:"string",format:"cuid2",check:"string_format",abort:!1,...T(w)})}function G5(K,w){return new K({type:"string",format:"ulid",check:"string_format",abort:!1,...T(w)})}function $5(K,w){return new K({type:"string",format:"xid",check:"string_format",abort:!1,...T(w)})}function B5(K,w){return new K({type:"string",format:"ksuid",check:"string_format",abort:!1,...T(w)})}function X5(K,w){return new K({type:"string",format:"ipv4",check:"string_format",abort:!1,...T(w)})}function U5(K,w){return new K({type:"string",format:"ipv6",check:"string_format",abort:!1,...T(w)})}function z5(K,w){return new K({type:"string",format:"cidrv4",check:"string_format",abort:!1,...T(w)})}function L5(K,w){return new K({type:"string",format:"cidrv6",check:"string_format",abort:!1,...T(w)})}function Q5(K,w){return new K({type:"string",format:"base64",check:"string_format",abort:!1,...T(w)})}function Y5(K,w){return new K({type:"string",format:"base64url",check:"string_format",abort:!1,...T(w)})}function V5(K,w){return new K({type:"string",format:"e164",check:"string_format",abort:!1,...T(w)})}function cK(K,w){return new K({type:"string",format:"jwt",check:"string_format",abort:!1,...T(w)})}function q5(K,w){return new K({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...T(w)})}function H5(K,w){return new K({type:"string",format:"date",check:"string_format",...T(w)})}function F5(K,w){return new K({type:"string",format:"time",check:"string_format",precision:null,...T(w)})}function h5(K,w){return new K({type:"string",format:"duration",check:"string_format",...T(w)})}function v5(K){return new K({type:"unknown"})}function R5(K,w){return new K({type:"never",...T(w)})}function E1(K,w){return new T8({check:"max_length",...T(w),maximum:K})}function g4(K,w){return new l8({check:"min_length",...T(w),minimum:K})}function j1(K,w){return new p8({check:"length_equals",...T(w),length:K})}function uK(K,w){return new i8({check:"string_format",format:"regex",...T(w),pattern:K})}function CK(K){return new e8({check:"string_format",format:"lowercase",...T(K)})}function xK(K){return new n8({check:"string_format",format:"uppercase",...T(K)})}function oK(K,w){return new d8({check:"string_format",format:"includes",...T(w),includes:K})}function rK(K,w){return new t8({check:"string_format",format:"starts_with",...T(w),prefix:K})}function yK(K,w){return new a8({check:"string_format",format:"ends_with",...T(w),suffix:K})}function J4(K){return new s8({check:"overwrite",tx:K})}function _K(K){return J4((w)=>w.normalize(K))}function mK(){return J4((K)=>K.trim())}function fK(){return J4((K)=>K.toLowerCase())}function TK(){return J4((K)=>K.toUpperCase())}function lK(){return J4((K)=>YK(K))}function E5(K,w,b){return new K({type:"array",element:w,...T(b)})}function j5(K,w,b){return new K({type:"custom",check:"custom",fn:w,...T(b)})}function g5(K){let w=v9((b)=>{return b.addIssue=(I)=>{if(typeof I==="string")b.issues.push(j4(I,b.value,w._zod.def));else{let W=I;if(W.fatal)W.continue=!1;W.code??(W.code="custom"),W.input??(W.input=b.value),W.inst??(W.inst=w),W.continue??(W.continue=!w._zod.def.abort),b.issues.push(j4(W))}},K(b.value,b)});return w}function v9(K,w){let b=new v2({check:"custom",...T(w)});return b._zod.check=K,b}function pK(K){let w=K?.target??"draft-2020-12";if(w==="draft-4")w="draft-04";if(w==="draft-7")w="draft-07";return{processors:K.processors??{},metadataRegistry:K?.metadata??M4,target:w,unrepresentable:K?.unrepresentable??"throw",override:K?.override??(()=>{}),io:K?.io??"output",counter:0,seen:new Map,cycles:K?.cycles??"ref",reused:K?.reused??"inline",external:K?.external??void 0}}function $2(K,w,b={path:[],schemaPath:[]}){var I;let W=K._zod.def,P=w.seen.get(K);if(P){if(P.count++,b.schemaPath.includes(K))P.cycle=b.path;return P.schema}let O={schema:{},count:1,cycle:void 0,path:b.path};w.seen.set(K,O);let M=K._zod.toJSONSchema?.();if(M)O.schema=M;else{let G={...b,schemaPath:[...b.schemaPath,K],path:b.path},Y=K._zod.parent;if(Y)O.ref=Y,$2(Y,w,G),w.seen.get(Y).isParent=!0;else if(K._zod.processJSONSchema)K._zod.processJSONSchema(w,O.schema,G);else{let X=O.schema,h=w.processors[W.type];if(!h)throw Error(`[toJSONSchema]: Non-representable type encountered: ${W.type}`);h(K,w,X,G)}}let J=w.metadataRegistry.get(K);if(J)Object.assign(O.schema,J);if(w.io==="input"&&H2(K))delete O.schema.examples,delete O.schema.default;if(w.io==="input"&&O.schema._prefault)(I=O.schema).default??(I.default=O.schema._prefault);return delete O.schema._prefault,w.seen.get(K).schema}function iK(K,w){let b=K.seen.get(w);if(!b)throw Error("Unprocessed schema. This is a bug in Zod.");let I=(P)=>{let O=K.target==="draft-2020-12"?"$defs":"definitions";if(K.external){let G=K.external.registry.get(P[0])?.id,Y=K.external.uri??((h)=>h);if(G)return{ref:Y(G)};let X=P[1].defId??P[1].schema.id??`schema${K.counter++}`;return P[1].defId=X,{defId:X,ref:`${Y("__shared")}#/${O}/${X}`}}if(P[1]===b)return{ref:"#"};let J=`${"#"}/${O}/`,N=P[1].schema.id??`__schema${K.counter++}`;return{defId:N,ref:J+N}},W=(P)=>{if(P[1].schema.$ref)return;let O=P[1],{ref:M,defId:J}=I(P);if(O.def={...O.schema},J)O.defId=J;let N=O.schema;for(let G in N)delete N[G];N.$ref=M};if(K.cycles==="throw")for(let P of K.seen.entries()){let O=P[1];if(O.cycle)throw Error(`Cycle detected: #/${O.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let P of K.seen.entries()){let O=P[1];if(w===P[0]){W(P);continue}if(K.external){let J=K.external.registry.get(P[0])?.id;if(w!==P[0]&&J){W(P);continue}}if(K.metadataRegistry.get(P[0])?.id){W(P);continue}if(O.cycle){W(P);continue}if(O.count>1){if(K.reused==="ref"){W(P);continue}}}}function eK(K,w){let b=K.seen.get(w);if(!b)throw Error("Unprocessed schema. This is a bug in Zod.");let I=(O)=>{let M=K.seen.get(O),J=M.def??M.schema,N={...J};if(M.ref===null)return;let G=M.ref;if(M.ref=null,G){I(G);let Y=K.seen.get(G).schema;if(Y.$ref&&(K.target==="draft-07"||K.target==="draft-04"||K.target==="openapi-3.0"))J.allOf=J.allOf??[],J.allOf.push(Y);else Object.assign(J,Y),Object.assign(J,N)}if(!M.isParent)K.override({zodSchema:O,jsonSchema:J,path:M.path??[]})};for(let O of[...K.seen.entries()].reverse())I(O[0]);let W={};if(K.target==="draft-2020-12")W.$schema="https://json-schema.org/draft/2020-12/schema";else if(K.target==="draft-07")W.$schema="http://json-schema.org/draft-07/schema#";else if(K.target==="draft-04")W.$schema="http://json-schema.org/draft-04/schema#";else if(K.target==="openapi-3.0");if(K.external?.uri){let O=K.external.registry.get(w)?.id;if(!O)throw Error("Schema is missing an `id` property");W.$id=K.external.uri(O)}Object.assign(W,b.def??b.schema);let P=K.external?.defs??{};for(let O of K.seen.entries()){let M=O[1];if(M.def&&M.defId)P[M.defId]=M.def}if(K.external);else if(Object.keys(P).length>0)if(K.target==="draft-2020-12")W.$defs=P;else W.definitions=P;try{let O=JSON.parse(JSON.stringify(W));return Object.defineProperty(O,"~standard",{value:{...w["~standard"],jsonSchema:{input:i4(w,"input"),output:i4(w,"output")}},enumerable:!1,writable:!1}),O}catch(O){throw Error("Error converting schema to JSON.")}}function H2(K,w){let b=w??{seen:new Set};if(b.seen.has(K))return!1;b.seen.add(K);let I=K._zod.def;if(I.type==="transform")return!0;if(I.type==="array")return H2(I.element,b);if(I.type==="set")return H2(I.valueType,b);if(I.type==="lazy")return H2(I.getter(),b);if(I.type==="promise"||I.type==="optional"||I.type==="nonoptional"||I.type==="nullable"||I.type==="readonly"||I.type==="default"||I.type==="prefault")return H2(I.innerType,b);if(I.type==="intersection")return H2(I.left,b)||H2(I.right,b);if(I.type==="record"||I.type==="map")return H2(I.keyType,b)||H2(I.valueType,b);if(I.type==="pipe")return H2(I.in,b)||H2(I.out,b);if(I.type==="object"){for(let W in I.shape)if(H2(I.shape[W],b))return!0;return!1}if(I.type==="union"){for(let W of I.options)if(H2(W,b))return!0;return!1}if(I.type==="tuple"){for(let W of I.items)if(H2(W,b))return!0;if(I.rest&&H2(I.rest,b))return!0;return!1}return!1}var k5=(K,w={})=>(b)=>{let I=pK({...b,processors:w});return $2(K,I),iK(I,K),eK(I,K)},i4=(K,w)=>(b)=>{let{libraryOptions:I,target:W}=b??{},P=pK({...I??{},target:W,io:w,processors:{}});return $2(K,P),iK(P,K),eK(P,K)};var R9={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},Z5=(K,w,b,I)=>{let W=b;W.type="string";let{minimum:P,maximum:O,format:M,patterns:J,contentEncoding:N}=K._zod.bag;if(typeof P==="number")W.minLength=P;if(typeof O==="number")W.maxLength=O;if(M){if(W.format=R9[M]??M,W.format==="")delete W.format}if(N)W.contentEncoding=N;if(J&&J.size>0){let G=[...J];if(G.length===1)W.pattern=G[0].source;else if(G.length>1)W.allOf=[...G.map((Y)=>({...w.target==="draft-07"||w.target==="draft-04"||w.target==="openapi-3.0"?{type:"string"}:{},pattern:Y.source}))]}};var A5=(K,w,b,I)=>{b.not={}};var c5=(K,w,b,I)=>{};var u5=(K,w,b,I)=>{let W=K._zod.def,P=x4(W.entries);if(P.every((O)=>typeof O==="number"))b.type="number";if(P.every((O)=>typeof O==="string"))b.type="string";b.enum=P};var C5=(K,w,b,I)=>{if(w.unrepresentable==="throw")throw Error("Custom types cannot be represented in JSON Schema")};var x5=(K,w,b,I)=>{if(w.unrepresentable==="throw")throw Error("Transforms cannot be represented in JSON Schema")};var o5=(K,w,b,I)=>{let W=b,P=K._zod.def,{minimum:O,maximum:M}=K._zod.bag;if(typeof O==="number")W.minItems=O;if(typeof M==="number")W.maxItems=M;W.type="array",W.items=$2(P.element,w,{...I,path:[...I.path,"items"]})},r5=(K,w,b,I)=>{let W=b,P=K._zod.def;W.type="object",W.properties={};let O=P.shape;for(let N in O)W.properties[N]=$2(O[N],w,{...I,path:[...I.path,"properties",N]});let M=new Set(Object.keys(O)),J=new Set([...M].filter((N)=>{let G=P.shape[N]._zod;if(w.io==="input")return G.optin===void 0;else return G.optout===void 0}));if(J.size>0)W.required=Array.from(J);if(P.catchall?._zod.def.type==="never")W.additionalProperties=!1;else if(!P.catchall){if(w.io==="output")W.additionalProperties=!1}else if(P.catchall)W.additionalProperties=$2(P.catchall,w,{...I,path:[...I.path,"additionalProperties"]})},y5=(K,w,b,I)=>{let W=K._zod.def,P=W.inclusive===!1,O=W.options.map((M,J)=>$2(M,w,{...I,path:[...I.path,P?"oneOf":"anyOf",J]}));if(P)b.oneOf=O;else b.anyOf=O},_5=(K,w,b,I)=>{let W=K._zod.def,P=$2(W.left,w,{...I,path:[...I.path,"allOf",0]}),O=$2(W.right,w,{...I,path:[...I.path,"allOf",1]}),M=(N)=>("allOf"in N)&&Object.keys(N).length===1,J=[...M(P)?P.allOf:[P],...M(O)?O.allOf:[O]];b.allOf=J};var m5=(K,w,b,I)=>{let W=K._zod.def,P=$2(W.innerType,w,I),O=w.seen.get(K);if(w.target==="openapi-3.0")O.ref=W.innerType,b.nullable=!0;else b.anyOf=[P,{type:"null"}]},f5=(K,w,b,I)=>{let W=K._zod.def;$2(W.innerType,w,I);let P=w.seen.get(K);P.ref=W.innerType},T5=(K,w,b,I)=>{let W=K._zod.def;$2(W.innerType,w,I);let P=w.seen.get(K);P.ref=W.innerType,b.default=JSON.parse(JSON.stringify(W.defaultValue))},l5=(K,w,b,I)=>{let W=K._zod.def;$2(W.innerType,w,I);let P=w.seen.get(K);if(P.ref=W.innerType,w.io==="input")b._prefault=JSON.parse(JSON.stringify(W.defaultValue))},p5=(K,w,b,I)=>{let W=K._zod.def;$2(W.innerType,w,I);let P=w.seen.get(K);P.ref=W.innerType;let O;try{O=W.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}b.default=O},i5=(K,w,b,I)=>{let W=K._zod.def,P=w.io==="input"?W.in._zod.def.type==="transform"?W.out:W.in:W.out;$2(P,w,I);let O=w.seen.get(K);O.ref=P},e5=(K,w,b,I)=>{let W=K._zod.def;$2(W.innerType,w,I);let P=w.seen.get(K);P.ref=W.innerType,b.readOnly=!0};var n5=(K,w,b,I)=>{let W=K._zod.def;$2(W.innerType,w,I);let P=w.seen.get(K);P.ref=W.innerType};var y9=E("ZodISODateTime",(K,w)=>{V3.init(K,w),O2.init(K,w)});function d5(K){return q5(y9,K)}var _9=E("ZodISODate",(K,w)=>{q3.init(K,w),O2.init(K,w)});function t5(K){return H5(_9,K)}var m9=E("ZodISOTime",(K,w)=>{H3.init(K,w),O2.init(K,w)});function a5(K){return F5(m9,K)}var f9=E("ZodISODuration",(K,w)=>{F3.init(K,w),O2.init(K,w)});function s5(K){return h5(f9,K)}var w0=(K,w)=>{q1.init(K,w),K.name="ZodError",Object.defineProperties(K,{format:{value:(b)=>vK(K,b)},flatten:{value:(b)=>hK(K,b)},addIssue:{value:(b)=>{K.issues.push(b),K.message=JSON.stringify(K.issues,E4,2)}},addIssues:{value:(b)=>{K.issues.push(...b),K.message=JSON.stringify(K.issues,E4,2)}},isEmpty:{get(){return K.issues.length===0}}})},OP=E("ZodError",w0),R2=E("ZodError",w0,{Parent:Error});var b0=H1(R2),I0=F1(R2),W0=f4(R2),P0=T4(R2),O0=G8(R2),M0=$8(R2),J0=B8(R2),N0=X8(R2),S0=U8(R2),D0=z8(R2),G0=L8(R2),$0=Q8(R2);var B2=E("ZodType",(K,w)=>{return S2.init(K,w),Object.assign(K["~standard"],{jsonSchema:{input:i4(K,"input"),output:i4(K,"output")}}),K.toJSONSchema=k5(K,{}),K.def=w,K.type=w.type,Object.defineProperty(K,"_def",{value:w}),K.check=(...b)=>{return K.clone(s.mergeDefs(w,{checks:[...w.checks??[],...b.map((I)=>typeof I==="function"?{_zod:{check:I,def:{check:"custom"},onattach:[]}}:I)]}))},K.clone=(b,I)=>Z2(K,b,I),K.brand=()=>K,K.register=(b,I)=>{return b.add(K,I),K},K.parse=(b,I)=>b0(K,b,I,{callee:K.parse}),K.safeParse=(b,I)=>W0(K,b,I),K.parseAsync=async(b,I)=>I0(K,b,I,{callee:K.parseAsync}),K.safeParseAsync=async(b,I)=>P0(K,b,I),K.spa=K.safeParseAsync,K.encode=(b,I)=>O0(K,b,I),K.decode=(b,I)=>M0(K,b,I),K.encodeAsync=async(b,I)=>J0(K,b,I),K.decodeAsync=async(b,I)=>N0(K,b,I),K.safeEncode=(b,I)=>S0(K,b,I),K.safeDecode=(b,I)=>D0(K,b,I),K.safeEncodeAsync=async(b,I)=>G0(K,b,I),K.safeDecodeAsync=async(b,I)=>$0(K,b,I),K.refine=(b,I)=>K.check(Ab(b,I)),K.superRefine=(b)=>K.check(cb(b)),K.overwrite=(b)=>K.check(J4(b)),K.optional=()=>U0(K),K.nullable=()=>z0(K),K.nullish=()=>U0(z0(K)),K.nonoptional=(b)=>vb(K,b),K.array=()=>Gb(K),K.or=(b)=>Xb([K,b]),K.and=(b)=>zb(K,b),K.transform=(b)=>L0(K,Yb(b)),K.default=(b)=>Hb(K,b),K.prefault=(b)=>hb(K,b),K.catch=(b)=>Eb(K,b),K.pipe=(b)=>L0(K,b),K.readonly=()=>kb(K),K.describe=(b)=>{let I=K.clone();return M4.add(I,{description:b}),I},Object.defineProperty(K,"description",{get(){return M4.get(K)?.description},configurable:!0}),K.meta=(...b)=>{if(b.length===0)return M4.get(K);let I=K.clone();return M4.add(I,b[0]),I},K.isOptional=()=>K.safeParse(void 0).success,K.isNullable=()=>K.safeParse(null).success,K}),Q0=E("_ZodString",(K,w)=>{R1.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(I,W,P)=>Z5(K,I,W,P);let b=K._zod.bag;K.format=b.format??null,K.minLength=b.minimum??null,K.maxLength=b.maximum??null,K.regex=(...I)=>K.check(uK(...I)),K.includes=(...I)=>K.check(oK(...I)),K.startsWith=(...I)=>K.check(rK(...I)),K.endsWith=(...I)=>K.check(yK(...I)),K.min=(...I)=>K.check(g4(...I)),K.max=(...I)=>K.check(E1(...I)),K.length=(...I)=>K.check(j1(...I)),K.nonempty=(...I)=>K.check(g4(1,...I)),K.lowercase=(I)=>K.check(CK(I)),K.uppercase=(I)=>K.check(xK(I)),K.trim=()=>K.check(mK()),K.normalize=(...I)=>K.check(_K(...I)),K.toLowerCase=()=>K.check(fK()),K.toUpperCase=()=>K.check(TK()),K.slugify=()=>K.check(lK())}),p9=E("ZodString",(K,w)=>{R1.init(K,w),Q0.init(K,w),K.email=(b)=>K.check(ZK(V0,b)),K.url=(b)=>K.check(M5(i9,b)),K.jwt=(b)=>K.check(cK(H0,b)),K.emoji=(b)=>K.check(J5(e9,b)),K.guid=(b)=>K.check(AK(B0,b)),K.uuid=(b)=>K.check(I5(g1,b)),K.uuidv4=(b)=>K.check(W5(g1,b)),K.uuidv6=(b)=>K.check(P5(g1,b)),K.uuidv7=(b)=>K.check(O5(g1,b)),K.nanoid=(b)=>K.check(N5(n9,b)),K.guid=(b)=>K.check(AK(B0,b)),K.cuid=(b)=>K.check(S5(d9,b)),K.cuid2=(b)=>K.check(D5(t9,b)),K.ulid=(b)=>K.check(G5(a9,b)),K.base64=(b)=>K.check(Q5(Pb,b)),K.base64url=(b)=>K.check(Y5(Ob,b)),K.xid=(b)=>K.check($5(s9,b)),K.ksuid=(b)=>K.check(B5(Kb,b)),K.ipv4=(b)=>K.check(X5(wb,b)),K.ipv6=(b)=>K.check(U5(bb,b)),K.cidrv4=(b)=>K.check(z5(Ib,b)),K.cidrv6=(b)=>K.check(L5(Wb,b)),K.e164=(b)=>K.check(V5(Mb,b)),K.datetime=(b)=>K.check(d5(b)),K.date=(b)=>K.check(t5(b)),K.time=(b)=>K.check(a5(b)),K.duration=(b)=>K.check(s5(b))});function Y0(K){return b5(p9,K)}var O2=E("ZodStringFormat",(K,w)=>{W2.init(K,w),Q0.init(K,w)}),V0=E("ZodEmail",(K,w)=>{G3.init(K,w),O2.init(K,w)});function q0(K){return ZK(V0,K)}var B0=E("ZodGUID",(K,w)=>{S3.init(K,w),O2.init(K,w)});var g1=E("ZodUUID",(K,w)=>{D3.init(K,w),O2.init(K,w)});var i9=E("ZodURL",(K,w)=>{$3.init(K,w),O2.init(K,w)});var e9=E("ZodEmoji",(K,w)=>{B3.init(K,w),O2.init(K,w)});var n9=E("ZodNanoID",(K,w)=>{X3.init(K,w),O2.init(K,w)});var d9=E("ZodCUID",(K,w)=>{U3.init(K,w),O2.init(K,w)});var t9=E("ZodCUID2",(K,w)=>{z3.init(K,w),O2.init(K,w)});var a9=E("ZodULID",(K,w)=>{L3.init(K,w),O2.init(K,w)});var s9=E("ZodXID",(K,w)=>{Q3.init(K,w),O2.init(K,w)});var Kb=E("ZodKSUID",(K,w)=>{Y3.init(K,w),O2.init(K,w)});var wb=E("ZodIPv4",(K,w)=>{h3.init(K,w),O2.init(K,w)});var bb=E("ZodIPv6",(K,w)=>{v3.init(K,w),O2.init(K,w)});var Ib=E("ZodCIDRv4",(K,w)=>{R3.init(K,w),O2.init(K,w)});var Wb=E("ZodCIDRv6",(K,w)=>{E3.init(K,w),O2.init(K,w)});var Pb=E("ZodBase64",(K,w)=>{g3.init(K,w),O2.init(K,w)});var Ob=E("ZodBase64URL",(K,w)=>{k3.init(K,w),O2.init(K,w)});var Mb=E("ZodE164",(K,w)=>{Z3.init(K,w),O2.init(K,w)});var H0=E("ZodJWT",(K,w)=>{A3.init(K,w),O2.init(K,w)});function F0(K){return cK(H0,K)}var Jb=E("ZodUnknown",(K,w)=>{c3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,I,W)=>c5(K,b,I,W)});function X0(){return v5(Jb)}var Nb=E("ZodNever",(K,w)=>{u3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,I,W)=>A5(K,b,I,W)});function Sb(K){return R5(Nb,K)}var Db=E("ZodArray",(K,w)=>{C3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,I,W)=>o5(K,b,I,W),K.element=w.element,K.min=(b,I)=>K.check(g4(b,I)),K.nonempty=(b)=>K.check(g4(1,b)),K.max=(b,I)=>K.check(E1(b,I)),K.length=(b,I)=>K.check(j1(b,I)),K.unwrap=()=>K.element});function Gb(K,w){return E5(Db,K,w)}var $b=E("ZodObject",(K,w)=>{r3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,I,W)=>r5(K,b,I,W),s.defineLazy(K,"shape",()=>{return w.shape}),K.keyof=()=>Lb(Object.keys(K._zod.def.shape)),K.catchall=(b)=>K.clone({...K._zod.def,catchall:b}),K.passthrough=()=>K.clone({...K._zod.def,catchall:X0()}),K.loose=()=>K.clone({...K._zod.def,catchall:X0()}),K.strict=()=>K.clone({...K._zod.def,catchall:Sb()}),K.strip=()=>K.clone({...K._zod.def,catchall:void 0}),K.extend=(b)=>{return s.extend(K,b)},K.safeExtend=(b)=>{return s.safeExtend(K,b)},K.merge=(b)=>s.merge(K,b),K.pick=(b)=>s.pick(K,b),K.omit=(b)=>s.omit(K,b),K.partial=(...b)=>s.partial(v0,K,b[0]),K.required=(...b)=>s.required(R0,K,b[0])});function h0(K,w){let b={type:"object",shape:K??{},...s.normalizeParams(w)};return new $b(b)}var Bb=E("ZodUnion",(K,w)=>{y3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,I,W)=>y5(K,b,I,W),K.options=w.options});function Xb(K,w){return new Bb({type:"union",options:K,...s.normalizeParams(w)})}var Ub=E("ZodIntersection",(K,w)=>{_3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,I,W)=>_5(K,b,I,W)});function zb(K,w){return new Ub({type:"intersection",left:K,right:w})}var nK=E("ZodEnum",(K,w)=>{m3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(I,W,P)=>u5(K,I,W,P),K.enum=w.entries,K.options=Object.values(w.entries);let b=new Set(Object.keys(w.entries));K.extract=(I,W)=>{let P={};for(let O of I)if(b.has(O))P[O]=w.entries[O];else throw Error(`Key ${O} not found in enum`);return new nK({...w,checks:[],...s.normalizeParams(W),entries:P})},K.exclude=(I,W)=>{let P={...w.entries};for(let O of I)if(b.has(O))delete P[O];else throw Error(`Key ${O} not found in enum`);return new nK({...w,checks:[],...s.normalizeParams(W),entries:P})}});function Lb(K,w){let b=Array.isArray(K)?Object.fromEntries(K.map((I)=>[I,I])):K;return new nK({type:"enum",entries:b,...s.normalizeParams(w)})}var Qb=E("ZodTransform",(K,w)=>{f3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,I,W)=>x5(K,b,I,W),K._zod.parse=(b,I)=>{if(I.direction==="backward")throw new u4(K.constructor.name);b.addIssue=(P)=>{if(typeof P==="string")b.issues.push(s.issue(P,b.value,w));else{let O=P;if(O.fatal)O.continue=!1;O.code??(O.code="custom"),O.input??(O.input=b.value),O.inst??(O.inst=K),b.issues.push(s.issue(O))}};let W=w.transform(b.value,b);if(W instanceof Promise)return W.then((P)=>{return b.value=P,b});return b.value=W,b}});function Yb(K){return new Qb({type:"transform",transform:K})}var v0=E("ZodOptional",(K,w)=>{T3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,I,W)=>n5(K,b,I,W),K.unwrap=()=>K._zod.def.innerType});function U0(K){return new v0({type:"optional",innerType:K})}var Vb=E("ZodNullable",(K,w)=>{l3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,I,W)=>m5(K,b,I,W),K.unwrap=()=>K._zod.def.innerType});function z0(K){return new Vb({type:"nullable",innerType:K})}var qb=E("ZodDefault",(K,w)=>{p3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,I,W)=>T5(K,b,I,W),K.unwrap=()=>K._zod.def.innerType,K.removeDefault=K.unwrap});function Hb(K,w){return new qb({type:"default",innerType:K,get defaultValue(){return typeof w==="function"?w():s.shallowClone(w)}})}var Fb=E("ZodPrefault",(K,w)=>{i3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,I,W)=>l5(K,b,I,W),K.unwrap=()=>K._zod.def.innerType});function hb(K,w){return new Fb({type:"prefault",innerType:K,get defaultValue(){return typeof w==="function"?w():s.shallowClone(w)}})}var R0=E("ZodNonOptional",(K,w)=>{e3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,I,W)=>f5(K,b,I,W),K.unwrap=()=>K._zod.def.innerType});function vb(K,w){return new R0({type:"nonoptional",innerType:K,...s.normalizeParams(w)})}var Rb=E("ZodCatch",(K,w)=>{n3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,I,W)=>p5(K,b,I,W),K.unwrap=()=>K._zod.def.innerType,K.removeCatch=K.unwrap});function Eb(K,w){return new Rb({type:"catch",innerType:K,catchValue:typeof w==="function"?w:()=>w})}var jb=E("ZodPipe",(K,w)=>{d3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,I,W)=>i5(K,b,I,W),K.in=w.in,K.out=w.out});function L0(K,w){return new jb({type:"pipe",in:K,out:w})}var gb=E("ZodReadonly",(K,w)=>{t3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,I,W)=>e5(K,b,I,W),K.unwrap=()=>K._zod.def.innerType});function kb(K){return new gb({type:"readonly",innerType:K})}var Zb=E("ZodCustom",(K,w)=>{a3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,I,W)=>C5(K,b,I,W)});function Ab(K,w={}){return j5(Zb,K,w)}function cb(K){return g5(K)}k2(kK());class k1{params;#K=Z4.ETokenAudiences.SYSTEM;#w=1;token;constructor(K){this.params=K}async signToken(){let{params:{credential:{tenantId:K,appId:w,modeId:b,secretKey:I},options:W}}=this;try{let P=new Uint8Array(Buffer.from(I,"base64")),O=await crypto.subtle.importKey("raw",P,{name:"HMAC",hash:"SHA-512"},!1,["sign","verify"]),M=await new U1({tenantId:K,appId:w,modeId:b,iss:K,aud:Z4.ETokenAudiences.SYSTEM}).setProtectedHeader({alg:"HS512"}).sign(O);return this.token=M,M}catch(P){if(W?.logs)console.error("[BoolGuard] Sign token error:",P);throw P}}async ping(){let{token:K,params:{credential:{tenantId:w,appId:b,modeId:I},options:W}}=this;try{let P=K||await this.signToken(),O=new Headers;O.append("X-Tenant-ID",w),O.append("X-App-ID",b),O.append("X-Mode-ID",I),O.append("Authorization",`Bearer ${P}`);let M=await fetch(`${this.#K}/v${W?.version||this.#w}/tenant-app-modes/ping`,{method:"GET",headers:O});if(!M.ok)throw await M.json();return M.ok}catch(P){if(W?.logs)console.error("[BoolGuard] Ping error:",P);return!1}}async createPlainAccount({identity:K,password:w,metadata:b}){let{token:I,params:{credential:{tenantId:W,appId:P,modeId:O},options:M}}=this;try{let J=I||await this.signToken(),N=new Headers;N.append("X-Tenant-ID",W),N.append("X-App-ID",P),N.append("X-Mode-ID",O),N.append("Authorization",`Bearer ${J}`),N.append("Content-Type","application/json");let G=await fetch(`${this.#K}/v${M?.version||this.#w}/tenant-app-mode-accounts`,{method:"POST",headers:N,body:JSON.stringify({data:Object.freeze({type:"plain",identity:K,password:w,metadata:b})})});if(!G.ok)throw await G.json();let{data:Y}=await G.json();return Object.freeze({account:Y.account,credential:Y.credential})}catch(J){if(M?.logs)console.error("[BoolGuard] Create plain account error:",J);throw J}}async createEmailAccount({identity:K,password:w,metadata:b}){let{token:I,params:{credential:{tenantId:W,appId:P,modeId:O},options:M}}=this;try{let J=I||await this.signToken(),N=new Headers;N.append("X-Tenant-ID",W),N.append("X-App-ID",P),N.append("X-Mode-ID",O),N.append("Authorization",`Bearer ${J}`),N.append("Content-Type","application/json");let G=await fetch(`${this.#K}/v${M?.version||this.#w}/tenant-app-mode-accounts`,{method:"POST",headers:N,body:JSON.stringify({data:Object.freeze({type:"email",identity:K,password:w,metadata:b})})});if(!G.ok)throw await G.json();let{data:Y}=await G.json();return Object.freeze({account:Y.account,credential:Y.credential})}catch(J){if(M?.logs)console.error("[BoolGuard] Create email account error:",J);throw J}}async authenticate({identity:K,password:w}){let{token:b,params:{credential:{tenantId:I,appId:W,modeId:P},options:O}}=this;try{let M=b||await this.signToken(),J=await q0().safeParseAsync(K),N=new Headers;N.append("X-Tenant-ID",I),N.append("X-App-ID",W),N.append("X-Mode-ID",P),N.append("Authorization",`Bearer ${M}`),N.append("Content-Type","application/json");let G=await fetch(`${this.#K}/v${O?.version||this.#w}/tenant-app-mode-accounts/authenticate`,{method:"POST",headers:N,body:JSON.stringify({data:Object.freeze({type:!J.success?"plain":"email",identity:K,password:w})})});if(!G.ok)throw await G.json();let{data:Y}=await G.json();return Object.freeze({account:Y.account,credential:Y.credential,token:Y.token})}catch(M){if(O?.logs)console.error("[BoolGuard] Authenticate error:",M);throw M}}async verifyToken({token:K}){let{params:{credential:{tenantId:w,appId:b,modeId:I},options:W}}=this;try{let P=this.token||await this.signToken(),O=new Headers;O.append("X-Tenant-ID",w),O.append("X-App-ID",b),O.append("X-Mode-ID",I),O.append("Authorization",`Bearer ${P}`),O.append("Content-Type","application/json");let M=await fetch(`${this.#K}/v${W?.version||this.#w}/tenant-app-mode-accounts/verify`,{method:"POST",headers:O,body:JSON.stringify({data:Object.freeze({token:K})})});if(!M.ok)throw await M.json();let{data:J}=await M.json();return Object.freeze({account:J.account,credential:J.credential})}catch(P){if(W?.logs)console.error("[BoolGuard] Verify token error:",P);throw P}}}var nO=async({credential:K,definition:w,options:b})=>{let I=new k1({credential:K,definition:w,options:b});if(await I.signToken(),!await I.ping())throw Error("Ping to Bool Guard service failed!");return[G2.guardClient,I]};var ub=h0({authorization:Y0().startsWith("Bearer ").transform((K,w)=>{let[b,I]=K.split(" ");if(!F0().safeParse(I).success)return w.addIssue("Token must be match jsonwebtoken format."),LK;return Object.freeze({schema:b,token:I})})});class dK{clientInstance;constructor(K){this.clientInstance=K}async start(K,w){let b=await ub.safeParseAsync(w.toJSON());if(!b.success)return K.set(G2.authState,void 0);else{let{authorization:{token:I}}=b.data;try{let{account:W,credential:P}=await this.clientInstance.verifyToken({token:I}),O=Object.freeze({account:W,credential:P});return K.set(G2.authState,O)}catch(W){return console.error(W),K.set(G2.authState,void 0)}}}}q4([S4(0,N1()),S4(1,q6())],dK.prototype,"start",null),dK=q4([v6(),S4(0,h6(G2.guardClient))],dK);export{nO as loader,dK as Middleware,G2 as Keys,PK as Guard,Z4 as Enums,Aw as ControllerGuard,k1 as Client,WK as AuthState,u0 as ActionGuard};

//# debugId=4AB7699402AB9C4A64756E2164756E21
