// @bun
var e3=Object.defineProperty;var m4=(c,K)=>{for(var w in K)e3(c,w,{get:K[w],enumerable:!0,configurable:!0,set:(P)=>K[w]=()=>P})};var Q2=function(c,K,w,P){var h=arguments.length,M=h<3?K:P===null?P=Object.getOwnPropertyDescriptor(K,w):P,S;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")M=Reflect.decorate(c,K,w,P);else for(var O=c.length-1;O>=0;O--)if(S=c[O])M=(h<3?S(M):h>3?S(K,w,M):S(K,w))||M;return h>3&&M&&Object.defineProperty(K,w,M),M},W2=(c,K)=>(w,P)=>K(w,P,c);var x2={};m4(x2,{ETokenAudiences:()=>yK});var yK;((K)=>K.SYSTEM="https://api-guard.booljs.com")(yK||={});var Uc={};m4(Uc,{service:()=>T3,guardMetadata:()=>l3,guardClient:()=>n3,authState:()=>p3});var p3=Symbol("__boolGuard::authState"),l3=Symbol("__boolGuard::guardMetadata"),T3=Symbol("__boolGuard::authService"),n3=Symbol("__boolGuard::guardClient");var i3=()=>(c,K)=>{Reflect.defineMetadata(Uc.guardMetadata,void 0,c,K)};var t3=Object.create,{getPrototypeOf:d3,defineProperty:u4,getOwnPropertyNames:s3}=Object,a3=Object.prototype.hasOwnProperty,M4=(c,K,w)=>{w=c!=null?t3(d3(c)):{};let P=K||!c||!c.__esModule?u4(w,"default",{value:c,enumerable:!0}):w;for(let h of s3(c))if(!a3.call(P,h))u4(P,h,{get:()=>c[h],enumerable:!0});return P},_=(c,K)=>()=>(K||c((K={exports:{}}).exports,K),K.exports),cw=(c,K)=>{for(var w in K)u4(c,w,{get:K[w],enumerable:!0,configurable:!0,set:(P)=>K[w]=()=>P})},Kw=import.meta.require,e4=_(()=>{/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var c;(function(K){(function(w){var P=typeof globalThis==="object"?globalThis:typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:G(),h=M(K);if(typeof P.Reflect<"u")h=M(P.Reflect,h);if(w(h,P),typeof P.Reflect>"u")P.Reflect=K;function M(D,$){return function(L,B){if(Object.defineProperty(D,L,{configurable:!0,writable:!0,value:B}),$)$(L,B)}}function S(){try{return Function("return this;")()}catch(D){}}function O(){try{return(0,eval)("(function() { return this; })()")}catch(D){}}function G(){return S()||O()}})(function(w,P){var h=Object.prototype.hasOwnProperty,M=typeof Symbol==="function",S=M&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",O=M&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",G=typeof Object.create==="function",D={__proto__:[]}instanceof Array,$=!G&&!D,L={create:G?function(){return _c(Object.create(null))}:D?function(){return _c({__proto__:null})}:function(){return _c({})},has:$?function(j,Y){return h.call(j,Y)}:function(j,Y){return Y in j},get:$?function(j,Y){return h.call(j,Y)?j[Y]:void 0}:function(j,Y){return j[Y]}},B=Object.getPrototypeOf(Function),q=typeof Map==="function"&&typeof Map.prototype.entries==="function"?Map:k4(),J=typeof Set==="function"&&typeof Set.prototype.entries==="function"?Set:l2(),z=typeof WeakMap==="function"?WeakMap:g4(),H=M?Symbol.for("@reflect-metadata:registry"):void 0,b=dc(),Q=sc(b);function X(j,Y,v,Z){if(!y(v)){if(!s(j))throw TypeError();if(!d(Y))throw TypeError();if(!d(Z)&&!y(Z)&&!zc(Z))throw TypeError();if(zc(Z))Z=void 0;return v=l(v),cc(j,Y,v,Z)}else{if(!s(j))throw TypeError();if(!Mc(Y))throw TypeError();return C(j,Y)}}w("decorate",X);function W(j,Y){function v(Z,m){if(!d(Z))throw TypeError();if(!y(m)&&!Nc(m))throw TypeError();vc(j,Y,Z,m)}return v}w("metadata",W);function V(j,Y,v,Z){if(!d(v))throw TypeError();if(!y(Z))Z=l(Z);return vc(j,Y,v,Z)}w("defineMetadata",V);function o(j,Y,v){if(!d(Y))throw TypeError();if(!y(v))v=l(v);return Oc(j,Y,v)}w("hasMetadata",o);function U(j,Y,v){if(!d(Y))throw TypeError();if(!y(v))v=l(v);return wc(j,Y,v)}w("hasOwnMetadata",U);function r(j,Y,v){if(!d(Y))throw TypeError();if(!y(v))v=l(v);return Dc(j,Y,v)}w("getMetadata",r);function g(j,Y,v){if(!d(Y))throw TypeError();if(!y(v))v=l(v);return Hc(j,Y,v)}w("getOwnMetadata",g);function A(j,Y){if(!d(j))throw TypeError();if(!y(Y))Y=l(Y);return p(j,Y)}w("getMetadataKeys",A);function u(j,Y){if(!d(j))throw TypeError();if(!y(Y))Y=l(Y);return Gc(j,Y)}w("getOwnMetadataKeys",u);function n(j,Y,v){if(!d(Y))throw TypeError();if(!y(v))v=l(v);if(!d(Y))throw TypeError();if(!y(v))v=l(v);var Z=J2(Y,v,!1);if(y(Z))return!1;return Z.OrdinaryDeleteMetadata(j,Y,v)}w("deleteMetadata",n);function C(j,Y){for(var v=j.length-1;v>=0;--v){var Z=j[v],m=Z(Y);if(!y(m)&&!zc(m)){if(!Mc(m))throw TypeError();Y=m}}return Y}function cc(j,Y,v,Z){for(var m=j.length-1;m>=0;--m){var Pc=j[m],I=Pc(Y,v,Z);if(!y(I)&&!zc(I)){if(!d(I))throw TypeError();Z=I}}return Z}function Oc(j,Y,v){var Z=wc(j,Y,v);if(Z)return!0;var m=Bc(Y);if(!zc(m))return Oc(j,m,v);return!1}function wc(j,Y,v){var Z=J2(Y,v,!1);if(y(Z))return!1;return kc(Z.OrdinaryHasOwnMetadata(j,Y,v))}function Dc(j,Y,v){var Z=wc(j,Y,v);if(Z)return Hc(j,Y,v);var m=Bc(Y);if(!zc(m))return Dc(j,m,v);return}function Hc(j,Y,v){var Z=J2(Y,v,!1);if(y(Z))return;return Z.OrdinaryGetOwnMetadata(j,Y,v)}function vc(j,Y,v,Z){var m=J2(v,Z,!0);m.OrdinaryDefineOwnMetadata(j,Y,v,Z)}function p(j,Y){var v=Gc(j,Y),Z=Bc(j);if(Z===null)return v;var m=p(Z,Y);if(m.length<=0)return v;if(v.length<=0)return m;var Pc=new J,I=[];for(var N=0,E=v;N<E.length;N++){var R=E[N],x=Pc.has(R);if(!x)Pc.add(R),I.push(R)}for(var k=0,f=m;k<f.length;k++){var R=f[k],x=Pc.has(R);if(!x)Pc.add(R),I.push(R)}return I}function Gc(j,Y){var v=J2(j,Y,!1);if(!v)return[];return v.OrdinaryOwnMetadataKeys(j,Y)}function Fc(j){if(j===null)return 1;switch(typeof j){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return j===null?1:6;default:return 6}}function y(j){return j===void 0}function zc(j){return j===null}function Zc(j){return typeof j==="symbol"}function d(j){return typeof j==="object"?j!==null:typeof j==="function"}function Ec(j,Y){switch(Fc(j)){case 0:return j;case 1:return j;case 2:return j;case 3:return j;case 4:return j;case 5:return j}var v=Y===3?"string":Y===5?"number":"default",Z=bc(j,S);if(Z!==void 0){var m=Z.call(j,v);if(d(m))throw TypeError();return m}return Qc(j,v==="default"?"number":v)}function Qc(j,Y){if(Y==="string"){var v=j.toString;if(T(v)){var Z=v.call(j);if(!d(Z))return Z}var m=j.valueOf;if(T(m)){var Z=m.call(j);if(!d(Z))return Z}}else{var m=j.valueOf;if(T(m)){var Z=m.call(j);if(!d(Z))return Z}var Pc=j.toString;if(T(Pc)){var Z=Pc.call(j);if(!d(Z))return Z}}throw TypeError()}function kc(j){return!!j}function Ac(j){return""+j}function l(j){var Y=Ec(j,3);if(Zc(Y))return Y;return Ac(Y)}function s(j){return Array.isArray?Array.isArray(j):j instanceof Object?j instanceof Array:Object.prototype.toString.call(j)==="[object Array]"}function T(j){return typeof j==="function"}function Mc(j){return typeof j==="function"}function Nc(j){switch(Fc(j)){case 3:return!0;case 4:return!0;default:return!1}}function jc(j,Y){return j===Y||j!==j&&Y!==Y}function bc(j,Y){var v=j[Y];if(v===void 0||v===null)return;if(!T(v))throw TypeError();return v}function yc(j){var Y=bc(j,O);if(!T(Y))throw TypeError();var v=Y.call(j);if(!d(v))throw TypeError();return v}function Xc(j){return j.value}function $c(j){var Y=j.next();return Y.done?!1:Y}function rc(j){var Y=j.return;if(Y)Y.call(j)}function Bc(j){var Y=Object.getPrototypeOf(j);if(typeof j!=="function"||j===B)return Y;if(Y!==B)return Y;var v=j.prototype,Z=v&&Object.getPrototypeOf(v);if(Z==null||Z===Object.prototype)return Y;var m=Z.constructor;if(typeof m!=="function")return Y;if(m===j)return Y;return m}function tc(){var j;if(!y(H)&&typeof P.Reflect<"u"&&!(H in P.Reflect)&&typeof P.Reflect.defineMetadata==="function")j=E4(P.Reflect);var Y,v,Z,m=new z,Pc={registerProvider:I,getProvider:E,setProvider:x};return Pc;function I(k){if(!Object.isExtensible(Pc))throw Error("Cannot add provider to a frozen registry.");switch(!0){case j===k:break;case y(Y):Y=k;break;case Y===k:break;case y(v):v=k;break;case v===k:break;default:if(Z===void 0)Z=new J;Z.add(k);break}}function N(k,f){if(!y(Y)){if(Y.isProviderFor(k,f))return Y;if(!y(v)){if(v.isProviderFor(k,f))return Y;if(!y(Z)){var t=yc(Z);while(!0){var i=$c(t);if(!i)return;var Jc=Xc(i);if(Jc.isProviderFor(k,f))return rc(t),Jc}}}}if(!y(j)&&j.isProviderFor(k,f))return j;return}function E(k,f){var t=m.get(k),i;if(!y(t))i=t.get(f);if(!y(i))return i;if(i=N(k,f),!y(i)){if(y(t))t=new q,m.set(k,t);t.set(f,i)}return i}function R(k){if(y(k))throw TypeError();return Y===k||v===k||!y(Z)&&Z.has(k)}function x(k,f,t){if(!R(t))throw Error("Metadata provider not registered.");var i=E(k,f);if(i!==t){if(!y(i))return!1;var Jc=m.get(k);if(y(Jc))Jc=new q,m.set(k,Jc);Jc.set(f,t)}return!0}}function dc(){var j;if(!y(H)&&d(P.Reflect)&&Object.isExtensible(P.Reflect))j=P.Reflect[H];if(y(j))j=tc();if(!y(H)&&d(P.Reflect)&&Object.isExtensible(P.Reflect))Object.defineProperty(P.Reflect,H,{enumerable:!1,configurable:!1,writable:!1,value:j});return j}function sc(j){var Y=new z,v={isProviderFor:function(R,x){var k=Y.get(R);if(y(k))return!1;return k.has(x)},OrdinaryDefineOwnMetadata:I,OrdinaryHasOwnMetadata:m,OrdinaryGetOwnMetadata:Pc,OrdinaryOwnMetadataKeys:N,OrdinaryDeleteMetadata:E};return b.registerProvider(v),v;function Z(R,x,k){var f=Y.get(R),t=!1;if(y(f)){if(!k)return;f=new q,Y.set(R,f),t=!0}var i=f.get(x);if(y(i)){if(!k)return;if(i=new q,f.set(x,i),!j.setProvider(R,x,v)){if(f.delete(x),t)Y.delete(R);throw Error("Wrong provider for target.")}}return i}function m(R,x,k){var f=Z(x,k,!1);if(y(f))return!1;return kc(f.has(R))}function Pc(R,x,k){var f=Z(x,k,!1);if(y(f))return;return f.get(R)}function I(R,x,k,f){var t=Z(k,f,!0);t.set(R,x)}function N(R,x){var k=[],f=Z(R,x,!1);if(y(f))return k;var t=f.keys(),i=yc(t),Jc=0;while(!0){var U2=$c(i);if(!U2)return k.length=Jc,k;var ac=Xc(U2);try{k[Jc]=ac}catch(Vc){try{rc(i)}finally{throw Vc}}Jc++}}function E(R,x,k){var f=Z(x,k,!1);if(y(f))return!1;if(!f.delete(R))return!1;if(f.size===0){var t=Y.get(x);if(!y(t)){if(t.delete(k),t.size===0)Y.delete(t)}}return!0}}function E4(j){var{defineMetadata:Y,hasOwnMetadata:v,getOwnMetadata:Z,getOwnMetadataKeys:m,deleteMetadata:Pc}=j,I=new z,N={isProviderFor:function(E,R){var x=I.get(E);if(!y(x)&&x.has(R))return!0;if(m(E,R).length){if(y(x))x=new J,I.set(E,x);return x.add(R),!0}return!1},OrdinaryDefineOwnMetadata:Y,OrdinaryHasOwnMetadata:v,OrdinaryGetOwnMetadata:Z,OrdinaryOwnMetadataKeys:m,OrdinaryDeleteMetadata:Pc};return N}function J2(j,Y,v){var Z=b.getProvider(j,Y);if(!y(Z))return Z;if(v){if(b.setProvider(j,Y,Q))return Q;throw Error("Illegal state.")}return}function k4(){var j={},Y=[],v=function(){function N(E,R,x){this._index=0,this._keys=E,this._values=R,this._selector=x}return N.prototype["@@iterator"]=function(){return this},N.prototype[O]=function(){return this},N.prototype.next=function(){var E=this._index;if(E>=0&&E<this._keys.length){var R=this._selector(this._keys[E],this._values[E]);if(E+1>=this._keys.length)this._index=-1,this._keys=Y,this._values=Y;else this._index++;return{value:R,done:!1}}return{value:void 0,done:!0}},N.prototype.throw=function(E){if(this._index>=0)this._index=-1,this._keys=Y,this._values=Y;throw E},N.prototype.return=function(E){if(this._index>=0)this._index=-1,this._keys=Y,this._values=Y;return{value:E,done:!0}},N}(),Z=function(){function N(){this._keys=[],this._values=[],this._cacheKey=j,this._cacheIndex=-2}return Object.defineProperty(N.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),N.prototype.has=function(E){return this._find(E,!1)>=0},N.prototype.get=function(E){var R=this._find(E,!1);return R>=0?this._values[R]:void 0},N.prototype.set=function(E,R){var x=this._find(E,!0);return this._values[x]=R,this},N.prototype.delete=function(E){var R=this._find(E,!1);if(R>=0){var x=this._keys.length;for(var k=R+1;k<x;k++)this._keys[k-1]=this._keys[k],this._values[k-1]=this._values[k];if(this._keys.length--,this._values.length--,jc(E,this._cacheKey))this._cacheKey=j,this._cacheIndex=-2;return!0}return!1},N.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=j,this._cacheIndex=-2},N.prototype.keys=function(){return new v(this._keys,this._values,m)},N.prototype.values=function(){return new v(this._keys,this._values,Pc)},N.prototype.entries=function(){return new v(this._keys,this._values,I)},N.prototype["@@iterator"]=function(){return this.entries()},N.prototype[O]=function(){return this.entries()},N.prototype._find=function(E,R){if(!jc(this._cacheKey,E)){this._cacheIndex=-1;for(var x=0;x<this._keys.length;x++)if(jc(this._keys[x],E)){this._cacheIndex=x;break}}if(this._cacheIndex<0&&R)this._cacheIndex=this._keys.length,this._keys.push(E),this._values.push(void 0);return this._cacheIndex},N}();return Z;function m(N,E){return N}function Pc(N,E){return E}function I(N,E){return[N,E]}}function l2(){var j=function(){function Y(){this._map=new q}return Object.defineProperty(Y.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Y.prototype.has=function(v){return this._map.has(v)},Y.prototype.add=function(v){return this._map.set(v,v),this},Y.prototype.delete=function(v){return this._map.delete(v)},Y.prototype.clear=function(){this._map.clear()},Y.prototype.keys=function(){return this._map.keys()},Y.prototype.values=function(){return this._map.keys()},Y.prototype.entries=function(){return this._map.entries()},Y.prototype["@@iterator"]=function(){return this.keys()},Y.prototype[O]=function(){return this.keys()},Y}();return j}function g4(){var j=16,Y=L.create(),v=Z();return function(){function E(){this._key=Z()}return E.prototype.has=function(R){var x=m(R,!1);return x!==void 0?L.has(x,this._key):!1},E.prototype.get=function(R){var x=m(R,!1);return x!==void 0?L.get(x,this._key):void 0},E.prototype.set=function(R,x){var k=m(R,!0);return k[this._key]=x,this},E.prototype.delete=function(R){var x=m(R,!1);return x!==void 0?delete x[this._key]:!1},E.prototype.clear=function(){this._key=Z()},E}();function Z(){var E;do E="@@WeakMap@@"+N();while(L.has(Y,E));return Y[E]=!0,E}function m(E,R){if(!h.call(E,v)){if(!R)return;Object.defineProperty(E,v,{value:L.create()})}return E[v]}function Pc(E,R){for(var x=0;x<R;++x)E[x]=Math.random()*255|0;return E}function I(E){if(typeof Uint8Array==="function"){var R=new Uint8Array(E);if(typeof crypto<"u")crypto.getRandomValues(R);else if(typeof msCrypto<"u")msCrypto.getRandomValues(R);else Pc(R,E);return R}return Pc(Array(E),E)}function N(){var E=I(j);E[6]=E[6]&79|64,E[8]=E[8]&191|128;var R="";for(var x=0;x<j;++x){var k=E[x];if(x===4||x===6||x===8)R+="-";if(k<16)R+="0";R+=k.toString(16).toLowerCase()}return R}}function _c(j){return j.__=void 0,delete j.__,j}})})(c||(c={}))}),V2=_((c,K)=>{K.exports=TypeError}),ww=_((c,K)=>{K.exports=Kw("util").inspect}),S4=_((c,K)=>{var w=typeof Map==="function"&&Map.prototype,P=Object.getOwnPropertyDescriptor&&w?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,h=w&&P&&typeof P.get==="function"?P.get:null,M=w&&Map.prototype.forEach,S=typeof Set==="function"&&Set.prototype,O=Object.getOwnPropertyDescriptor&&S?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,G=S&&O&&typeof O.get==="function"?O.get:null,D=S&&Set.prototype.forEach,$=typeof WeakMap==="function"&&WeakMap.prototype,L=$?WeakMap.prototype.has:null,B=typeof WeakSet==="function"&&WeakSet.prototype,q=B?WeakSet.prototype.has:null,J=typeof WeakRef==="function"&&WeakRef.prototype,z=J?WeakRef.prototype.deref:null,H=Boolean.prototype.valueOf,b=Object.prototype.toString,Q=Function.prototype.toString,X=String.prototype.match,W=String.prototype.slice,V=String.prototype.replace,o=String.prototype.toUpperCase,U=String.prototype.toLowerCase,r=RegExp.prototype.test,g=Array.prototype.concat,A=Array.prototype.join,u=Array.prototype.slice,n=Math.floor,C=typeof BigInt==="function"?BigInt.prototype.valueOf:null,cc=Object.getOwnPropertySymbols,Oc=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?Symbol.prototype.toString:null,wc=typeof Symbol==="function"&&typeof Symbol.iterator==="object",Dc=typeof Symbol==="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===wc?"object":"symbol")?Symbol.toStringTag:null,Hc=Object.prototype.propertyIsEnumerable,vc=(typeof Reflect==="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(I){return I.__proto__}:null);function p(I,N){if(I===1/0||I===-1/0||I!==I||I&&I>-1000&&I<1000||r.call(/e/,N))return N;var E=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof I==="number"){var R=I<0?-n(-I):n(I);if(R!==I){var x=String(R),k=W.call(N,x.length+1);return V.call(x,E,"$&_")+"."+V.call(V.call(k,/([0-9]{3})/g,"$&_"),/_$/,"")}}return V.call(N,E,"$&_")}var Gc=ww(),Fc=Gc.custom,y=jc(Fc)?Fc:null,zc={__proto__:null,double:'"',single:"'"},Zc={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};K.exports=function I(N,E,R,x){var k=E||{};if(Xc(k,"quoteStyle")&&!Xc(zc,k.quoteStyle))throw TypeError('option "quoteStyle" must be "single" or "double"');if(Xc(k,"maxStringLength")&&(typeof k.maxStringLength==="number"?k.maxStringLength<0&&k.maxStringLength!==1/0:k.maxStringLength!==null))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var f=Xc(k,"customInspect")?k.customInspect:!0;if(typeof f!=="boolean"&&f!=="symbol")throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Xc(k,"indent")&&k.indent!==null&&k.indent!=="\t"&&!(parseInt(k.indent,10)===k.indent&&k.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Xc(k,"numericSeparator")&&typeof k.numericSeparator!=="boolean")throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var t=k.numericSeparator;if(typeof N>"u")return"undefined";if(N===null)return"null";if(typeof N==="boolean")return N?"true":"false";if(typeof N==="string")return l2(N,k);if(typeof N==="number"){if(N===0)return 1/0/N>0?"0":"-0";var i=String(N);return t?p(N,i):i}if(typeof N==="bigint"){var Jc=String(N)+"n";return t?p(N,Jc):Jc}var U2=typeof k.depth>"u"?5:k.depth;if(typeof R>"u")R=0;if(R>=U2&&U2>0&&typeof N==="object")return kc(N)?"[Array]":"[Object]";var ac=Z(k,R);if(typeof x>"u")x=[];else if(Bc(x,N)>=0)return"[Circular]";function Vc(Y2,n2,f3){if(n2)x=u.call(x),x.push(n2);if(f3){var CK={depth:k.depth};if(Xc(k,"quoteStyle"))CK.quoteStyle=k.quoteStyle;return I(Y2,CK,R+1,x)}return I(Y2,k,R+1,x)}if(typeof N==="function"&&!l(N)){var xK=rc(N),ZK=Pc(N,Vc);return"[Function"+(xK?": "+xK:" (anonymous)")+"]"+(ZK.length>0?" { "+A.call(ZK,", ")+" }":"")}if(jc(N)){var AK=wc?V.call(String(N),/^(Symbol\(.*\))_[^)]*$/,"$1"):Oc.call(N);return typeof N==="object"&&!wc?_c(AK):AK}if(k4(N)){var R2="<"+U.call(String(N.nodeName)),R4=N.attributes||[];for(var T2=0;T2<R4.length;T2++)R2+=" "+R4[T2].name+"="+d(Ec(R4[T2].value),"double",k);if(R2+=">",N.childNodes&&N.childNodes.length)R2+="...";return R2+="</"+U.call(String(N.nodeName))+">",R2}if(kc(N)){if(N.length===0)return"[]";var x4=Pc(N,Vc);if(ac&&!v(x4))return"["+m(x4,ac)+"]";return"[ "+A.call(x4,", ")+" ]"}if(s(N)){var Z4=Pc(N,Vc);if(!("cause"in Error.prototype)&&"cause"in N&&!Hc.call(N,"cause"))return"{ ["+String(N)+"] "+A.call(g.call("[cause]: "+Vc(N.cause),Z4),", ")+" }";if(Z4.length===0)return"["+String(N)+"]";return"{ ["+String(N)+"] "+A.call(Z4,", ")+" }"}if(typeof N==="object"&&f){if(y&&typeof N[y]==="function"&&Gc)return Gc(N,{depth:U2-R});else if(f!=="symbol"&&typeof N.inspect==="function")return N.inspect()}if(tc(N)){var rK=[];if(M)M.call(N,function(Y2,n2){rK.push(Vc(n2,N,!0)+" => "+Vc(Y2,N))});return Y("Map",h.call(N),rK,ac)}if(E4(N)){var oK=[];if(D)D.call(N,function(Y2){oK.push(Vc(Y2,N))});return Y("Set",G.call(N),oK,ac)}if(dc(N))return j("WeakMap");if(J2(N))return j("WeakSet");if(sc(N))return j("WeakRef");if(Mc(N))return _c(Vc(Number(N)));if(bc(N))return _c(Vc(C.call(N)));if(Nc(N))return _c(H.call(N));if(T(N))return _c(Vc(String(N)));if(typeof window<"u"&&N===window)return"{ [object Window] }";if(typeof globalThis<"u"&&N===globalThis||typeof global<"u"&&N===global)return"{ [object globalThis] }";if(!Ac(N)&&!l(N)){var A4=Pc(N,Vc),mK=vc?vc(N)===Object.prototype:N instanceof Object||N.constructor===Object,r4=N instanceof Object?"":"null prototype",uK=!mK&&Dc&&Object(N)===N&&Dc in N?W.call($c(N),8,-1):r4?"Object":"",_3=mK||typeof N.constructor!=="function"?"":N.constructor.name?N.constructor.name+" ":"",o4=_3+(uK||r4?"["+A.call(g.call([],uK||[],r4||[]),": ")+"] ":"");if(A4.length===0)return o4+"{}";if(ac)return o4+"{"+m(A4,ac)+"}";return o4+"{ "+A.call(A4,", ")+" }"}return String(N)};function d(I,N,E){var R=E.quoteStyle||N,x=zc[R];return x+I+x}function Ec(I){return V.call(String(I),/"/g,"&quot;")}function Qc(I){return!Dc||!(typeof I==="object"&&((Dc in I)||typeof I[Dc]<"u"))}function kc(I){return $c(I)==="[object Array]"&&Qc(I)}function Ac(I){return $c(I)==="[object Date]"&&Qc(I)}function l(I){return $c(I)==="[object RegExp]"&&Qc(I)}function s(I){return $c(I)==="[object Error]"&&Qc(I)}function T(I){return $c(I)==="[object String]"&&Qc(I)}function Mc(I){return $c(I)==="[object Number]"&&Qc(I)}function Nc(I){return $c(I)==="[object Boolean]"&&Qc(I)}function jc(I){if(wc)return I&&typeof I==="object"&&I instanceof Symbol;if(typeof I==="symbol")return!0;if(!I||typeof I!=="object"||!Oc)return!1;try{return Oc.call(I),!0}catch(N){}return!1}function bc(I){if(!I||typeof I!=="object"||!C)return!1;try{return C.call(I),!0}catch(N){}return!1}var yc=Object.prototype.hasOwnProperty||function(I){return I in this};function Xc(I,N){return yc.call(I,N)}function $c(I){return b.call(I)}function rc(I){if(I.name)return I.name;var N=X.call(Q.call(I),/^function\s*([\w$]+)/);if(N)return N[1];return null}function Bc(I,N){if(I.indexOf)return I.indexOf(N);for(var E=0,R=I.length;E<R;E++)if(I[E]===N)return E;return-1}function tc(I){if(!h||!I||typeof I!=="object")return!1;try{h.call(I);try{G.call(I)}catch(N){return!0}return I instanceof Map}catch(N){}return!1}function dc(I){if(!L||!I||typeof I!=="object")return!1;try{L.call(I,L);try{q.call(I,q)}catch(N){return!0}return I instanceof WeakMap}catch(N){}return!1}function sc(I){if(!z||!I||typeof I!=="object")return!1;try{return z.call(I),!0}catch(N){}return!1}function E4(I){if(!G||!I||typeof I!=="object")return!1;try{G.call(I);try{h.call(I)}catch(N){return!0}return I instanceof Set}catch(N){}return!1}function J2(I){if(!q||!I||typeof I!=="object")return!1;try{q.call(I,q);try{L.call(I,L)}catch(N){return!0}return I instanceof WeakSet}catch(N){}return!1}function k4(I){if(!I||typeof I!=="object")return!1;if(typeof HTMLElement<"u"&&I instanceof HTMLElement)return!0;return typeof I.nodeName==="string"&&typeof I.getAttribute==="function"}function l2(I,N){if(I.length>N.maxStringLength){var E=I.length-N.maxStringLength,R="... "+E+" more character"+(E>1?"s":"");return l2(W.call(I,0,N.maxStringLength),N)+R}var x=Zc[N.quoteStyle||"single"];x.lastIndex=0;var k=V.call(V.call(I,x,"\\$1"),/[\x00-\x1f]/g,g4);return d(k,"single",N)}function g4(I){var N=I.charCodeAt(0),E={8:"b",9:"t",10:"n",12:"f",13:"r"}[N];if(E)return"\\"+E;return"\\x"+(N<16?"0":"")+o.call(N.toString(16))}function _c(I){return"Object("+I+")"}function j(I){return I+" { ? }"}function Y(I,N,E,R){var x=R?m(E,R):A.call(E,", ");return I+" ("+N+") {"+x+"}"}function v(I){for(var N=0;N<I.length;N++)if(Bc(I[N],`
`)>=0)return!1;return!0}function Z(I,N){var E;if(I.indent==="\t")E="\t";else if(typeof I.indent==="number"&&I.indent>0)E=A.call(Array(I.indent+1)," ");else return null;return{base:E,prev:A.call(Array(N+1),E)}}function m(I,N){if(I.length===0)return"";var E=`
`+N.prev+N.base;return E+A.call(I,","+E)+`
`+N.prev}function Pc(I,N){var E=kc(I),R=[];if(E){R.length=I.length;for(var x=0;x<I.length;x++)R[x]=Xc(I,x)?N(I[x],I):""}var k=typeof cc==="function"?cc(I):[],f;if(wc){f={};for(var t=0;t<k.length;t++)f["$"+k[t]]=k[t]}for(var i in I){if(!Xc(I,i))continue;if(E&&String(Number(i))===i&&i<I.length)continue;if(wc&&f["$"+i]instanceof Symbol)continue;else if(r.call(/[^\w$]/,i))R.push(N(i,I)+": "+N(I[i],I));else R.push(i+": "+N(I[i],I))}if(typeof cc==="function"){for(var Jc=0;Jc<k.length;Jc++)if(Hc.call(I,k[Jc]))R.push("["+N(k[Jc])+"]: "+N(I[k[Jc]],I))}return R}}),Pw=_((c,K)=>{var w=S4(),P=V2(),h=function(D,$,L){var B=D,q;for(;(q=B.next)!=null;B=q)if(q.key===$){if(B.next=q.next,!L)q.next=D.next,D.next=q;return q}},M=function(D,$){if(!D)return;var L=h(D,$);return L&&L.value},S=function(D,$,L){var B=h(D,$);if(B)B.value=L;else D.next={key:$,next:D.next,value:L}},O=function(D,$){if(!D)return!1;return!!h(D,$)},G=function(D,$){if(D)return h(D,$,!0)};K.exports=function(){var D,$={assert:function(L){if(!$.has(L))throw new P("Side channel does not contain "+w(L))},delete:function(L){var B=D&&D.next,q=G(D,L);if(q&&B&&B===q)D=void 0;return!!q},get:function(L){return M(D,L)},has:function(L){return O(D,L)},set:function(L,B){if(!D)D={next:void 0};S(D,L,B)}};return $}}),eK=_((c,K)=>{K.exports=Object}),hw=_((c,K)=>{K.exports=Error}),Mw=_((c,K)=>{K.exports=EvalError}),Sw=_((c,K)=>{K.exports=RangeError}),bw=_((c,K)=>{K.exports=ReferenceError}),Ow=_((c,K)=>{K.exports=SyntaxError}),Jw=_((c,K)=>{K.exports=URIError}),Ww=_((c,K)=>{K.exports=Math.abs}),Nw=_((c,K)=>{K.exports=Math.floor}),Iw=_((c,K)=>{K.exports=Math.max}),Dw=_((c,K)=>{K.exports=Math.min}),Gw=_((c,K)=>{K.exports=Math.pow}),jw=_((c,K)=>{K.exports=Math.round}),Xw=_((c,K)=>{K.exports=Number.isNaN||function(w){return w!==w}}),$w=_((c,K)=>{var w=Xw();K.exports=function(P){if(w(P)||P===0)return P;return P<0?-1:1}}),Bw=_((c,K)=>{K.exports=Object.getOwnPropertyDescriptor}),pK=_((c,K)=>{var w=Bw();if(w)try{w([],"length")}catch(P){w=null}K.exports=w}),zw=_((c,K)=>{var w=Object.defineProperty||!1;if(w)try{w({},"a",{value:1})}catch(P){w=!1}K.exports=w}),Uw=_((c,K)=>{K.exports=function(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function")return!1;if(typeof Symbol.iterator==="symbol")return!0;var w={},P=Symbol("test"),h=Object(P);if(typeof P==="string")return!1;if(Object.prototype.toString.call(P)!=="[object Symbol]")return!1;if(Object.prototype.toString.call(h)!=="[object Symbol]")return!1;var M=42;w[P]=M;for(var S in w)return!1;if(typeof Object.keys==="function"&&Object.keys(w).length!==0)return!1;if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(w).length!==0)return!1;var O=Object.getOwnPropertySymbols(w);if(O.length!==1||O[0]!==P)return!1;if(!Object.prototype.propertyIsEnumerable.call(w,P))return!1;if(typeof Object.getOwnPropertyDescriptor==="function"){var G=Object.getOwnPropertyDescriptor(w,P);if(G.value!==M||G.enumerable!==!0)return!1}return!0}}),Yw=_((c,K)=>{var w=typeof Symbol<"u"&&Symbol,P=Uw();K.exports=function(){if(typeof w!=="function")return!1;if(typeof Symbol!=="function")return!1;if(typeof w("foo")!=="symbol")return!1;if(typeof Symbol("bar")!=="symbol")return!1;return P()}}),lK=_((c,K)=>{K.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null}),TK=_((c,K)=>{var w=eK();K.exports=w.getPrototypeOf||null}),Qw=_((c,K)=>{var w="Function.prototype.bind called on incompatible ",P=Object.prototype.toString,h=Math.max,M="[object Function]",S=function(D,$){var L=[];for(var B=0;B<D.length;B+=1)L[B]=D[B];for(var q=0;q<$.length;q+=1)L[q+D.length]=$[q];return L},O=function(D,$){var L=[];for(var B=$||0,q=0;B<D.length;B+=1,q+=1)L[q]=D[B];return L},G=function(D,$){var L="";for(var B=0;B<D.length;B+=1)if(L+=D[B],B+1<D.length)L+=$;return L};K.exports=function(D){var $=this;if(typeof $!=="function"||P.apply($)!==M)throw TypeError(w+$);var L=O(arguments,1),B,q=function(){if(this instanceof B){var Q=$.apply(this,S(L,arguments));if(Object(Q)===Q)return Q;return this}return $.apply(D,S(L,arguments))},J=h(0,$.length-L.length),z=[];for(var H=0;H<J;H++)z[H]="$"+H;if(B=Function("binder","return function ("+G(z,",")+"){ return binder.apply(this,arguments); }")(q),$.prototype){var b=function(){};b.prototype=$.prototype,B.prototype=new b,b.prototype=null}return B}}),b4=_((c,K)=>{var w=Qw();K.exports=Function.prototype.bind||w}),p4=_((c,K)=>{K.exports=Function.prototype.call}),nK=_((c,K)=>{K.exports=Function.prototype.apply}),Vw=_((c,K)=>{K.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply}),qw=_((c,K)=>{var w=b4(),P=nK(),h=p4(),M=Vw();K.exports=M||w.call(h,P)}),iK=_((c,K)=>{var w=b4(),P=V2(),h=p4(),M=qw();K.exports=function(S){if(S.length<1||typeof S[0]!=="function")throw new P("a function is required");return M(w,h,S)}}),Lw=_((c,K)=>{var w=iK(),P=pK(),h;try{h=[].__proto__===Array.prototype}catch(G){if(!G||typeof G!=="object"||!("code"in G)||G.code!=="ERR_PROTO_ACCESS")throw G}var M=!!h&&P&&P(Object.prototype,"__proto__"),S=Object,O=S.getPrototypeOf;K.exports=M&&typeof M.get==="function"?w([M.get]):typeof O==="function"?function(G){return O(G==null?G:S(G))}:!1}),Hw=_((c,K)=>{var w=lK(),P=TK(),h=Lw();K.exports=w?function(M){return w(M)}:P?function(M){if(!M||typeof M!=="object"&&typeof M!=="function")throw TypeError("getProto: not an object");return P(M)}:h?function(M){return h(M)}:null}),vw=_((c,K)=>{var w=Function.prototype.call,P=Object.prototype.hasOwnProperty,h=b4();K.exports=h.call(w,P)}),l4=_((c,K)=>{var w,P=eK(),h=hw(),M=Mw(),S=Sw(),O=bw(),G=Ow(),D=V2(),$=Jw(),L=Ww(),B=Nw(),q=Iw(),J=Dw(),z=Gw(),H=jw(),b=$w(),Q=Function,X=function(l){try{return Q('"use strict"; return ('+l+").constructor;")()}catch(s){}},W=pK(),V=zw(),o=function(){throw new D},U=W?function(){try{return arguments.callee,o}catch(l){try{return W(arguments,"callee").get}catch(s){return o}}}():o,r=Yw()(),g=Hw(),A=TK(),u=lK(),n=nK(),C=p4(),cc={},Oc=typeof Uint8Array>"u"||!g?w:g(Uint8Array),wc={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?w:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?w:ArrayBuffer,"%ArrayIteratorPrototype%":r&&g?g([][Symbol.iterator]()):w,"%AsyncFromSyncIteratorPrototype%":w,"%AsyncFunction%":cc,"%AsyncGenerator%":cc,"%AsyncGeneratorFunction%":cc,"%AsyncIteratorPrototype%":cc,"%Atomics%":typeof Atomics>"u"?w:Atomics,"%BigInt%":typeof BigInt>"u"?w:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?w:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?w:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?w:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":h,"%eval%":eval,"%EvalError%":M,"%Float16Array%":typeof Float16Array>"u"?w:Float16Array,"%Float32Array%":typeof Float32Array>"u"?w:Float32Array,"%Float64Array%":typeof Float64Array>"u"?w:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?w:FinalizationRegistry,"%Function%":Q,"%GeneratorFunction%":cc,"%Int8Array%":typeof Int8Array>"u"?w:Int8Array,"%Int16Array%":typeof Int16Array>"u"?w:Int16Array,"%Int32Array%":typeof Int32Array>"u"?w:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":r&&g?g(g([][Symbol.iterator]())):w,"%JSON%":typeof JSON==="object"?JSON:w,"%Map%":typeof Map>"u"?w:Map,"%MapIteratorPrototype%":typeof Map>"u"||!r||!g?w:g(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":P,"%Object.getOwnPropertyDescriptor%":W,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?w:Promise,"%Proxy%":typeof Proxy>"u"?w:Proxy,"%RangeError%":S,"%ReferenceError%":O,"%Reflect%":typeof Reflect>"u"?w:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?w:Set,"%SetIteratorPrototype%":typeof Set>"u"||!r||!g?w:g(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?w:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":r&&g?g(""[Symbol.iterator]()):w,"%Symbol%":r?Symbol:w,"%SyntaxError%":G,"%ThrowTypeError%":U,"%TypedArray%":Oc,"%TypeError%":D,"%Uint8Array%":typeof Uint8Array>"u"?w:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?w:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?w:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?w:Uint32Array,"%URIError%":$,"%WeakMap%":typeof WeakMap>"u"?w:WeakMap,"%WeakRef%":typeof WeakRef>"u"?w:WeakRef,"%WeakSet%":typeof WeakSet>"u"?w:WeakSet,"%Function.prototype.call%":C,"%Function.prototype.apply%":n,"%Object.defineProperty%":V,"%Object.getPrototypeOf%":A,"%Math.abs%":L,"%Math.floor%":B,"%Math.max%":q,"%Math.min%":J,"%Math.pow%":z,"%Math.round%":H,"%Math.sign%":b,"%Reflect.getPrototypeOf%":u};if(g)try{null.error}catch(l){Dc=g(g(l)),wc["%Error.prototype%"]=Dc}var Dc,Hc=function l(s){var T;if(s==="%AsyncFunction%")T=X("async function () {}");else if(s==="%GeneratorFunction%")T=X("function* () {}");else if(s==="%AsyncGeneratorFunction%")T=X("async function* () {}");else if(s==="%AsyncGenerator%"){var Mc=l("%AsyncGeneratorFunction%");if(Mc)T=Mc.prototype}else if(s==="%AsyncIteratorPrototype%"){var Nc=l("%AsyncGenerator%");if(Nc&&g)T=g(Nc.prototype)}return wc[s]=T,T},vc={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},p=b4(),Gc=vw(),Fc=p.call(C,Array.prototype.concat),y=p.call(n,Array.prototype.splice),zc=p.call(C,String.prototype.replace),Zc=p.call(C,String.prototype.slice),d=p.call(C,RegExp.prototype.exec),Ec=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Qc=/\\(\\)?/g,kc=function(l){var s=Zc(l,0,1),T=Zc(l,-1);if(s==="%"&&T!=="%")throw new G("invalid intrinsic syntax, expected closing `%`");else if(T==="%"&&s!=="%")throw new G("invalid intrinsic syntax, expected opening `%`");var Mc=[];return zc(l,Ec,function(Nc,jc,bc,yc){Mc[Mc.length]=bc?zc(yc,Qc,"$1"):jc||Nc}),Mc},Ac=function(l,s){var T=l,Mc;if(Gc(vc,T))Mc=vc[T],T="%"+Mc[0]+"%";if(Gc(wc,T)){var Nc=wc[T];if(Nc===cc)Nc=Hc(T);if(typeof Nc>"u"&&!s)throw new D("intrinsic "+l+" exists, but is not available. Please file an issue!");return{alias:Mc,name:T,value:Nc}}throw new G("intrinsic "+l+" does not exist!")};K.exports=function(l,s){if(typeof l!=="string"||l.length===0)throw new D("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof s!=="boolean")throw new D('"allowMissing" argument must be a boolean');if(d(/^%?[^%]*%?$/,l)===null)throw new G("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var T=kc(l),Mc=T.length>0?T[0]:"",Nc=Ac("%"+Mc+"%",s),jc=Nc.name,bc=Nc.value,yc=!1,Xc=Nc.alias;if(Xc)Mc=Xc[0],y(T,Fc([0,1],Xc));for(var $c=1,rc=!0;$c<T.length;$c+=1){var Bc=T[$c],tc=Zc(Bc,0,1),dc=Zc(Bc,-1);if((tc==='"'||tc==="'"||tc==="`"||(dc==='"'||dc==="'"||dc==="`"))&&tc!==dc)throw new G("property names with quotes must have matching quotes");if(Bc==="constructor"||!rc)yc=!0;if(Mc+="."+Bc,jc="%"+Mc+"%",Gc(wc,jc))bc=wc[jc];else if(bc!=null){if(!(Bc in bc)){if(!s)throw new D("base intrinsic for "+l+" exists, but the property is not available.");return}if(W&&$c+1>=T.length){var sc=W(bc,Bc);if(rc=!!sc,rc&&"get"in sc&&!("originalValue"in sc.get))bc=sc.get;else bc=bc[Bc]}else rc=Gc(bc,Bc),bc=bc[Bc];if(rc&&!yc)wc[jc]=bc}}return bc}}),tK=_((c,K)=>{var w=l4(),P=iK(),h=P([w("%String.prototype.indexOf%")]);K.exports=function(M,S){var O=w(M,!!S);if(typeof O==="function"&&h(M,".prototype.")>-1)return P([O]);return O}}),dK=_((c,K)=>{var w=l4(),P=tK(),h=S4(),M=V2(),S=w("%Map%",!0),O=P("Map.prototype.get",!0),G=P("Map.prototype.set",!0),D=P("Map.prototype.has",!0),$=P("Map.prototype.delete",!0),L=P("Map.prototype.size",!0);K.exports=!!S&&function(){var B,q={assert:function(J){if(!q.has(J))throw new M("Side channel does not contain "+h(J))},delete:function(J){if(B){var z=$(B,J);if(L(B)===0)B=void 0;return z}return!1},get:function(J){if(B)return O(B,J)},has:function(J){if(B)return D(B,J);return!1},set:function(J,z){if(!B)B=new S;G(B,J,z)}};return q}}),Fw=_((c,K)=>{var w=l4(),P=tK(),h=S4(),M=dK(),S=V2(),O=w("%WeakMap%",!0),G=P("WeakMap.prototype.get",!0),D=P("WeakMap.prototype.set",!0),$=P("WeakMap.prototype.has",!0),L=P("WeakMap.prototype.delete",!0);K.exports=O?function(){var B,q,J={assert:function(z){if(!J.has(z))throw new S("Side channel does not contain "+h(z))},delete:function(z){if(O&&z&&(typeof z==="object"||typeof z==="function")){if(B)return L(B,z)}else if(M){if(q)return q.delete(z)}return!1},get:function(z){if(O&&z&&(typeof z==="object"||typeof z==="function")){if(B)return G(B,z)}return q&&q.get(z)},has:function(z){if(O&&z&&(typeof z==="object"||typeof z==="function")){if(B)return $(B,z)}return!!q&&q.has(z)},set:function(z,H){if(O&&z&&(typeof z==="object"||typeof z==="function")){if(!B)B=new O;D(B,z,H)}else if(M){if(!q)q=M();q.set(z,H)}}};return J}:M}),Ew=_((c,K)=>{var w=V2(),P=S4(),h=Pw(),M=dK(),S=Fw(),O=S||M||h;K.exports=function(){var G,D={assert:function($){if(!D.has($))throw new w("Side channel does not contain "+P($))},delete:function($){return!!G&&G.delete($)},get:function($){return G&&G.get($)},has:function($){return!!G&&G.has($)},set:function($,L){if(!G)G=O();G.set($,L)}};return D}}),T4=_((c,K)=>{var w=String.prototype.replace,P=/%20/g,h={RFC1738:"RFC1738",RFC3986:"RFC3986"};K.exports={default:h.RFC3986,formatters:{RFC1738:function(M){return w.call(M,P,"+")},RFC3986:function(M){return String(M)}},RFC1738:h.RFC1738,RFC3986:h.RFC3986}}),sK=_((c,K)=>{var w=T4(),P=Object.prototype.hasOwnProperty,h=Array.isArray,M=function(){var Q=[];for(var X=0;X<256;++X)Q.push("%"+((X<16?"0":"")+X.toString(16)).toUpperCase());return Q}(),S=function(Q){while(Q.length>1){var X=Q.pop(),W=X.obj[X.prop];if(h(W)){var V=[];for(var o=0;o<W.length;++o)if(typeof W[o]<"u")V.push(W[o]);X.obj[X.prop]=V}}},O=function(Q,X){var W=X&&X.plainObjects?{__proto__:null}:{};for(var V=0;V<Q.length;++V)if(typeof Q[V]<"u")W[V]=Q[V];return W},G=function Q(X,W,V){if(!W)return X;if(typeof W!=="object"&&typeof W!=="function"){if(h(X))X.push(W);else if(X&&typeof X==="object"){if(V&&(V.plainObjects||V.allowPrototypes)||!P.call(Object.prototype,W))X[W]=!0}else return[X,W];return X}if(!X||typeof X!=="object")return[X].concat(W);var o=X;if(h(X)&&!h(W))o=O(X,V);if(h(X)&&h(W))return W.forEach(function(U,r){if(P.call(X,r)){var g=X[r];if(g&&typeof g==="object"&&U&&typeof U==="object")X[r]=Q(g,U,V);else X.push(U)}else X[r]=U}),X;return Object.keys(W).reduce(function(U,r){var g=W[r];if(P.call(U,r))U[r]=Q(U[r],g,V);else U[r]=g;return U},o)},D=function(Q,X){return Object.keys(X).reduce(function(W,V){return W[V]=X[V],W},Q)},$=function(Q,X,W){var V=Q.replace(/\+/g," ");if(W==="iso-8859-1")return V.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(V)}catch(o){return V}},L=1024,B=function(Q,X,W,V,o){if(Q.length===0)return Q;var U=Q;if(typeof Q==="symbol")U=Symbol.prototype.toString.call(Q);else if(typeof Q!=="string")U=String(Q);if(W==="iso-8859-1")return escape(U).replace(/%u[0-9a-f]{4}/gi,function(cc){return"%26%23"+parseInt(cc.slice(2),16)+"%3B"});var r="";for(var g=0;g<U.length;g+=L){var A=U.length>=L?U.slice(g,g+L):U,u=[];for(var n=0;n<A.length;++n){var C=A.charCodeAt(n);if(C===45||C===46||C===95||C===126||C>=48&&C<=57||C>=65&&C<=90||C>=97&&C<=122||o===w.RFC1738&&(C===40||C===41)){u[u.length]=A.charAt(n);continue}if(C<128){u[u.length]=M[C];continue}if(C<2048){u[u.length]=M[192|C>>6]+M[128|C&63];continue}if(C<55296||C>=57344){u[u.length]=M[224|C>>12]+M[128|C>>6&63]+M[128|C&63];continue}n+=1,C=65536+((C&1023)<<10|A.charCodeAt(n)&1023),u[u.length]=M[240|C>>18]+M[128|C>>12&63]+M[128|C>>6&63]+M[128|C&63]}r+=u.join("")}return r},q=function(Q){var X=[{obj:{o:Q},prop:"o"}],W=[];for(var V=0;V<X.length;++V){var o=X[V],U=o.obj[o.prop],r=Object.keys(U);for(var g=0;g<r.length;++g){var A=r[g],u=U[A];if(typeof u==="object"&&u!==null&&W.indexOf(u)===-1)X.push({obj:U,prop:A}),W.push(u)}}return S(X),Q},J=function(Q){return Object.prototype.toString.call(Q)==="[object RegExp]"},z=function(Q){if(!Q||typeof Q!=="object")return!1;return!!(Q.constructor&&Q.constructor.isBuffer&&Q.constructor.isBuffer(Q))},H=function(Q,X){return[].concat(Q,X)},b=function(Q,X){if(h(Q)){var W=[];for(var V=0;V<Q.length;V+=1)W.push(X(Q[V]));return W}return X(Q)};K.exports={arrayToObject:O,assign:D,combine:H,compact:q,decode:$,encode:B,isBuffer:z,isRegExp:J,maybeMap:b,merge:G}}),kw=_((c,K)=>{var w=Ew(),P=sK(),h=T4(),M=Object.prototype.hasOwnProperty,S={brackets:function(b){return b+"[]"},comma:"comma",indices:function(b,Q){return b+"["+Q+"]"},repeat:function(b){return b}},O=Array.isArray,G=Array.prototype.push,D=function(b,Q){G.apply(b,O(Q)?Q:[Q])},$=Date.prototype.toISOString,L=h.default,B={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:P.encode,encodeValuesOnly:!1,filter:void 0,format:L,formatter:h.formatters[L],indices:!1,serializeDate:function(b){return $.call(b)},skipNulls:!1,strictNullHandling:!1},q=function(b){return typeof b==="string"||typeof b==="number"||typeof b==="boolean"||typeof b==="symbol"||typeof b==="bigint"},J={},z=function b(Q,X,W,V,o,U,r,g,A,u,n,C,cc,Oc,wc,Dc,Hc,vc){var p=Q,Gc=vc,Fc=0,y=!1;while((Gc=Gc.get(J))!==void 0&&!y){var zc=Gc.get(Q);if(Fc+=1,typeof zc<"u")if(zc===Fc)throw RangeError("Cyclic object value");else y=!0;if(typeof Gc.get(J)>"u")Fc=0}if(typeof u==="function")p=u(X,p);else if(p instanceof Date)p=cc(p);else if(W==="comma"&&O(p))p=P.maybeMap(p,function(bc){if(bc instanceof Date)return cc(bc);return bc});if(p===null){if(U)return A&&!Dc?A(X,B.encoder,Hc,"key",Oc):X;p=""}if(q(p)||P.isBuffer(p)){if(A){var Zc=Dc?X:A(X,B.encoder,Hc,"key",Oc);return[wc(Zc)+"="+wc(A(p,B.encoder,Hc,"value",Oc))]}return[wc(X)+"="+wc(String(p))]}var d=[];if(typeof p>"u")return d;var Ec;if(W==="comma"&&O(p)){if(Dc&&A)p=P.maybeMap(p,A);Ec=[{value:p.length>0?p.join(",")||null:void 0}]}else if(O(u))Ec=u;else{var Qc=Object.keys(p);Ec=n?Qc.sort(n):Qc}var kc=g?String(X).replace(/\./g,"%2E"):String(X),Ac=V&&O(p)&&p.length===1?kc+"[]":kc;if(o&&O(p)&&p.length===0)return Ac+"[]";for(var l=0;l<Ec.length;++l){var s=Ec[l],T=typeof s==="object"&&s&&typeof s.value<"u"?s.value:p[s];if(r&&T===null)continue;var Mc=C&&g?String(s).replace(/\./g,"%2E"):String(s),Nc=O(p)?typeof W==="function"?W(Ac,Mc):Ac:Ac+(C?"."+Mc:"["+Mc+"]");vc.set(Q,Fc);var jc=w();jc.set(J,vc),D(d,b(T,Nc,W,V,o,U,r,g,W==="comma"&&Dc&&O(p)?null:A,u,n,C,cc,Oc,wc,Dc,Hc,jc))}return d},H=function(b){if(!b)return B;if(typeof b.allowEmptyArrays<"u"&&typeof b.allowEmptyArrays!=="boolean")throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof b.encodeDotInKeys<"u"&&typeof b.encodeDotInKeys!=="boolean")throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(b.encoder!==null&&typeof b.encoder<"u"&&typeof b.encoder!=="function")throw TypeError("Encoder has to be a function.");var Q=b.charset||B.charset;if(typeof b.charset<"u"&&b.charset!=="utf-8"&&b.charset!=="iso-8859-1")throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var X=h.default;if(typeof b.format<"u"){if(!M.call(h.formatters,b.format))throw TypeError("Unknown format option provided.");X=b.format}var W=h.formatters[X],V=B.filter;if(typeof b.filter==="function"||O(b.filter))V=b.filter;var o;if(b.arrayFormat in S)o=b.arrayFormat;else if("indices"in b)o=b.indices?"indices":"repeat";else o=B.arrayFormat;if("commaRoundTrip"in b&&typeof b.commaRoundTrip!=="boolean")throw TypeError("`commaRoundTrip` must be a boolean, or absent");var U=typeof b.allowDots>"u"?b.encodeDotInKeys===!0?!0:B.allowDots:!!b.allowDots;return{addQueryPrefix:typeof b.addQueryPrefix==="boolean"?b.addQueryPrefix:B.addQueryPrefix,allowDots:U,allowEmptyArrays:typeof b.allowEmptyArrays==="boolean"?!!b.allowEmptyArrays:B.allowEmptyArrays,arrayFormat:o,charset:Q,charsetSentinel:typeof b.charsetSentinel==="boolean"?b.charsetSentinel:B.charsetSentinel,commaRoundTrip:!!b.commaRoundTrip,delimiter:typeof b.delimiter>"u"?B.delimiter:b.delimiter,encode:typeof b.encode==="boolean"?b.encode:B.encode,encodeDotInKeys:typeof b.encodeDotInKeys==="boolean"?b.encodeDotInKeys:B.encodeDotInKeys,encoder:typeof b.encoder==="function"?b.encoder:B.encoder,encodeValuesOnly:typeof b.encodeValuesOnly==="boolean"?b.encodeValuesOnly:B.encodeValuesOnly,filter:V,format:X,formatter:W,serializeDate:typeof b.serializeDate==="function"?b.serializeDate:B.serializeDate,skipNulls:typeof b.skipNulls==="boolean"?b.skipNulls:B.skipNulls,sort:typeof b.sort==="function"?b.sort:null,strictNullHandling:typeof b.strictNullHandling==="boolean"?b.strictNullHandling:B.strictNullHandling}};K.exports=function(b,Q){var X=b,W=H(Q),V,o;if(typeof W.filter==="function")o=W.filter,X=o("",X);else if(O(W.filter))o=W.filter,V=o;var U=[];if(typeof X!=="object"||X===null)return"";var r=S[W.arrayFormat],g=r==="comma"&&W.commaRoundTrip;if(!V)V=Object.keys(X);if(W.sort)V.sort(W.sort);var A=w();for(var u=0;u<V.length;++u){var n=V[u],C=X[n];if(W.skipNulls&&C===null)continue;D(U,z(C,n,r,g,W.allowEmptyArrays,W.strictNullHandling,W.skipNulls,W.encodeDotInKeys,W.encode?W.encoder:null,W.filter,W.sort,W.allowDots,W.serializeDate,W.format,W.formatter,W.encodeValuesOnly,W.charset,A))}var cc=U.join(W.delimiter),Oc=W.addQueryPrefix===!0?"?":"";if(W.charsetSentinel)if(W.charset==="iso-8859-1")Oc+="utf8=%26%2310003%3B&";else Oc+="utf8=%E2%9C%93&";return cc.length>0?Oc+cc:""}}),gw=_((c,K)=>{var w=sK(),P=Object.prototype.hasOwnProperty,h=Array.isArray,M={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:w.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1000,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},S=function(J){return J.replace(/&#(\d+);/g,function(z,H){return String.fromCharCode(parseInt(H,10))})},O=function(J,z,H){if(J&&typeof J==="string"&&z.comma&&J.indexOf(",")>-1)return J.split(",");if(z.throwOnLimitExceeded&&H>=z.arrayLimit)throw RangeError("Array limit exceeded. Only "+z.arrayLimit+" element"+(z.arrayLimit===1?"":"s")+" allowed in an array.");return J},G="utf8=%26%2310003%3B",D="utf8=%E2%9C%93",$=function(J,z){var H={__proto__:null},b=z.ignoreQueryPrefix?J.replace(/^\?/,""):J;b=b.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var Q=z.parameterLimit===1/0?void 0:z.parameterLimit,X=b.split(z.delimiter,z.throwOnLimitExceeded?Q+1:Q);if(z.throwOnLimitExceeded&&X.length>Q)throw RangeError("Parameter limit exceeded. Only "+Q+" parameter"+(Q===1?"":"s")+" allowed.");var W=-1,V,o=z.charset;if(z.charsetSentinel){for(V=0;V<X.length;++V)if(X[V].indexOf("utf8=")===0){if(X[V]===D)o="utf-8";else if(X[V]===G)o="iso-8859-1";W=V,V=X.length}}for(V=0;V<X.length;++V){if(V===W)continue;var U=X[V],r=U.indexOf("]="),g=r===-1?U.indexOf("="):r+1,A,u;if(g===-1)A=z.decoder(U,M.decoder,o,"key"),u=z.strictNullHandling?null:"";else A=z.decoder(U.slice(0,g),M.decoder,o,"key"),u=w.maybeMap(O(U.slice(g+1),z,h(H[A])?H[A].length:0),function(C){return z.decoder(C,M.decoder,o,"value")});if(u&&z.interpretNumericEntities&&o==="iso-8859-1")u=S(String(u));if(U.indexOf("[]=")>-1)u=h(u)?[u]:u;var n=P.call(H,A);if(n&&z.duplicates==="combine")H[A]=w.combine(H[A],u);else if(!n||z.duplicates==="last")H[A]=u}return H},L=function(J,z,H,b){var Q=0;if(J.length>0&&J[J.length-1]==="[]"){var X=J.slice(0,-1).join("");Q=Array.isArray(z)&&z[X]?z[X].length:0}var W=b?z:O(z,H,Q);for(var V=J.length-1;V>=0;--V){var o,U=J[V];if(U==="[]"&&H.parseArrays)o=H.allowEmptyArrays&&(W===""||H.strictNullHandling&&W===null)?[]:w.combine([],W);else{o=H.plainObjects?{__proto__:null}:{};var r=U.charAt(0)==="["&&U.charAt(U.length-1)==="]"?U.slice(1,-1):U,g=H.decodeDotInKeys?r.replace(/%2E/g,"."):r,A=parseInt(g,10);if(!H.parseArrays&&g==="")o={0:W};else if(!isNaN(A)&&U!==g&&String(A)===g&&A>=0&&(H.parseArrays&&A<=H.arrayLimit))o=[],o[A]=W;else if(g!=="__proto__")o[g]=W}W=o}return W},B=function(J,z,H,b){if(!J)return;var Q=H.allowDots?J.replace(/\.([^.[]+)/g,"[$1]"):J,X=/(\[[^[\]]*])/,W=/(\[[^[\]]*])/g,V=H.depth>0&&X.exec(Q),o=V?Q.slice(0,V.index):Q,U=[];if(o){if(!H.plainObjects&&P.call(Object.prototype,o)){if(!H.allowPrototypes)return}U.push(o)}var r=0;while(H.depth>0&&(V=W.exec(Q))!==null&&r<H.depth){if(r+=1,!H.plainObjects&&P.call(Object.prototype,V[1].slice(1,-1))){if(!H.allowPrototypes)return}U.push(V[1])}if(V){if(H.strictDepth===!0)throw RangeError("Input depth exceeded depth option of "+H.depth+" and strictDepth is true");U.push("["+Q.slice(V.index)+"]")}return L(U,z,H,b)},q=function(J){if(!J)return M;if(typeof J.allowEmptyArrays<"u"&&typeof J.allowEmptyArrays!=="boolean")throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof J.decodeDotInKeys<"u"&&typeof J.decodeDotInKeys!=="boolean")throw TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(J.decoder!==null&&typeof J.decoder<"u"&&typeof J.decoder!=="function")throw TypeError("Decoder has to be a function.");if(typeof J.charset<"u"&&J.charset!=="utf-8"&&J.charset!=="iso-8859-1")throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof J.throwOnLimitExceeded<"u"&&typeof J.throwOnLimitExceeded!=="boolean")throw TypeError("`throwOnLimitExceeded` option must be a boolean");var z=typeof J.charset>"u"?M.charset:J.charset,H=typeof J.duplicates>"u"?M.duplicates:J.duplicates;if(H!=="combine"&&H!=="first"&&H!=="last")throw TypeError("The duplicates option must be either combine, first, or last");var b=typeof J.allowDots>"u"?J.decodeDotInKeys===!0?!0:M.allowDots:!!J.allowDots;return{allowDots:b,allowEmptyArrays:typeof J.allowEmptyArrays==="boolean"?!!J.allowEmptyArrays:M.allowEmptyArrays,allowPrototypes:typeof J.allowPrototypes==="boolean"?J.allowPrototypes:M.allowPrototypes,allowSparse:typeof J.allowSparse==="boolean"?J.allowSparse:M.allowSparse,arrayLimit:typeof J.arrayLimit==="number"?J.arrayLimit:M.arrayLimit,charset:z,charsetSentinel:typeof J.charsetSentinel==="boolean"?J.charsetSentinel:M.charsetSentinel,comma:typeof J.comma==="boolean"?J.comma:M.comma,decodeDotInKeys:typeof J.decodeDotInKeys==="boolean"?J.decodeDotInKeys:M.decodeDotInKeys,decoder:typeof J.decoder==="function"?J.decoder:M.decoder,delimiter:typeof J.delimiter==="string"||w.isRegExp(J.delimiter)?J.delimiter:M.delimiter,depth:typeof J.depth==="number"||J.depth===!1?+J.depth:M.depth,duplicates:H,ignoreQueryPrefix:J.ignoreQueryPrefix===!0,interpretNumericEntities:typeof J.interpretNumericEntities==="boolean"?J.interpretNumericEntities:M.interpretNumericEntities,parameterLimit:typeof J.parameterLimit==="number"?J.parameterLimit:M.parameterLimit,parseArrays:J.parseArrays!==!1,plainObjects:typeof J.plainObjects==="boolean"?J.plainObjects:M.plainObjects,strictDepth:typeof J.strictDepth==="boolean"?!!J.strictDepth:M.strictDepth,strictNullHandling:typeof J.strictNullHandling==="boolean"?J.strictNullHandling:M.strictNullHandling,throwOnLimitExceeded:typeof J.throwOnLimitExceeded==="boolean"?J.throwOnLimitExceeded:!1}};K.exports=function(J,z){var H=q(z);if(J===""||J===null||typeof J>"u")return H.plainObjects?{__proto__:null}:{};var b=typeof J==="string"?$(J,H):J,Q=H.plainObjects?{__proto__:null}:{},X=Object.keys(b);for(var W=0;W<X.length;++W){var V=X[W],o=B(V,b[V],H,typeof J==="string");Q=w.merge(Q,o,H)}if(H.allowSparse===!0)return Q;return w.compact(Q)}}),Rw=_((c,K)=>{var w=kw(),P=gw(),h=T4();K.exports={formats:h,parse:P,stringify:w}}),i1=M4(e4(),1),xw={};cw(xw,{zodSchemaKey:()=>rw,webSocketServerArgsKey:()=>I2,webSocketMessageArgsKey:()=>t2,webSocketKey:()=>P4,webSocketEventKey:()=>ow,webSocketEventArgumentsKey:()=>Zw,webSocketConnectionArgsKey:()=>D2,webSocketCloseReasonArgsKey:()=>P6,webSocketCloseCodeArgsKey:()=>w6,routeModelArgsKey:()=>mc,responseStatusTextArgsKey:()=>M6,responseStatusArgsKey:()=>s2,responseHeadersArgsKey:()=>oc,responseBodyArgsKey:()=>d2,requestHeadersArgsKey:()=>K2,requestHeaderArgsKey:()=>ec,requestBodyArgsKey:()=>G2,requestArgsKey:()=>pc,queryArgsKey:()=>h6,paramsArgsKey:()=>y4,paramArgsKey:()=>j2,moduleKey:()=>i2,middlewareKey:()=>K6,interceptorKey:()=>n4,injectableKey:()=>c6,injectKey:()=>w4,httpServerArgsKey:()=>fc,guardKey:()=>aK,controllerKey:()=>K4,controllerHttpKey:()=>Aw,contextArgsKey:()=>w2,containerKey:()=>N2,configKey:()=>C4,argumentsKey:()=>Yc});var Yc=Symbol("__bool:arguments__"),Zw=Symbol("__bool:webSocketEventArguments__"),C4=Symbol("__bool:config__"),K4=Symbol("__bool:controller__"),n4=Symbol("__bool:interceptor__"),aK=Symbol("__bool:guard__"),Aw=Symbol("__bool:controller.http__"),w4=Symbol("__bool:inject__"),c6=Symbol("__bool:injectable__"),K6=Symbol("__bool:middleware__"),i2=Symbol("__bool:module__"),N2=Symbol("__bool:container__"),rw=Symbol("__bool:zodSchema__"),P4=Symbol("__bool:webSocket__"),ow=Symbol("__bool:webSocket:event__"),I2=Symbol("__bool:webSocketArguments:server__"),D2=Symbol("__bool:webSocketArguments:connection__"),t2=Symbol("__bool:webSocketArguments:message__"),w6=Symbol("__bool:webSocketArguments:closeCode__"),P6=Symbol("__bool:webSocketArguments:closeReason__"),fc=Symbol("__bool:httpArguments:server__"),K2=Symbol("__bool:httpArguments:requestHeaders__"),ec=Symbol("__bool:httpArguments:requestHeader__"),G2=Symbol("__bool:httpArguments:requestBody__"),y4=Symbol("__bool:httpArguments:params__"),j2=Symbol("__bool:httpArguments:param__"),h6=Symbol("__bool:httpArguments:query__"),pc=Symbol("__bool:httpArguments:request__"),oc=Symbol("__bool:httpArguments:responseHeaders__"),w2=Symbol("__bool:httpArguments:context__"),mc=Symbol("__bool:httpArguments:routeModel__"),d2=Symbol("__bool:httpArguments:responseBody__"),s2=Symbol("__bool:httpArguments:responseStatus__"),M6=Symbol("__bool:httpArguments:responseStatusText__"),S6=(c)=>(K,w,P)=>{if(!w)return;let h=Reflect.getOwnMetadata(Yc,K.constructor,w)||{};h[`argumentIndexes.${P}`]={index:P,type:K2,validationSchema:c},Reflect.defineMetadata(Yc,h,K.constructor,w)};var O4=(c)=>(K,w,P)=>{if(!w)return;let h=Reflect.getOwnMetadata(Yc,K.constructor,w)||{};h[`argumentIndexes.${P}`]={index:P,type:w2,key:c},Reflect.defineMetadata(Yc,h,K.constructor,w)},b6=()=>(c,K,w)=>{if(!K)return;let P=Reflect.getOwnMetadata(Yc,c.constructor,K)||{};P[`argumentIndexes.${w}`]={index:w,type:mc},Reflect.defineMetadata(Yc,P,c.constructor,K)};var O6=(c)=>(K,w,P)=>{let h=Reflect.getMetadata(w4,K)||[];h[P]=c,Reflect.defineMetadata(w4,h,K)};var J6=()=>(c)=>{Reflect.defineMetadata(n4,void 0,c)};var t1=Symbol("__bool:webSocket.upgrade__");var mw=Object.freeze({400:"BAD_REQUEST",401:"UNAUTHORIZED",402:"PAYMENT_REQUIRED",403:"FORBIDDEN",404:"NOT_FOUND",405:"METHOD_NOT_ALLOWED",406:"NOT_ACCEPTABLE",407:"PROXY_AUTHENCATION_REQUIRED",408:"REQUEST_TIMEOUT",409:"CONFLICT",410:"GONE",411:"LENGTH_REQUIRED",412:"PRECONDITION_FAILED",413:"PAYLOAD_TOO_LARGE",414:"URI_TOO_LONG",415:"UNSUPPORTED_MEDIA_TYPE",416:"RANGE_NOT_SATISFIABLE",417:"EXPECTATION_FAILED",418:"IM_A_TEAPOT",421:"MISDIRECTED_REQUEST",422:"UNPROCESSABLE_ENTITY",423:"LOCKED",424:"FAILED_DEPENDENCY",425:"TOO_EARLY_",426:"UPGRAGE_REQUIRED",428:"PRECONDITION_REQUIRED",429:"TOO_MANY_REQUESTS",431:"REQUEST_HEADER_FIELDS_TOO_LARGE",451:"UNAVAILABLE_FOR_LEGAL_REASONS"});class P2 extends Error{httpCode;message;data;constructor({httpCode:c,data:K,message:w}){super();this.httpCode=c,this.message=!w?.trim()?mw[c]:w.trim(),this.data=K}}var uw=Object.freeze({500:"INTERNAL_SERVER_ERROR",501:"NOT_IMPLEMENTED",502:"BAD_GATEWAY",503:"SERVICE_UNAVAILABLE",504:"GATEWAY_TIMEOUT",505:"HTTP_VERSION_NOT_SUPPORTED",506:"VARIANT_ALSO_NEGOTIATES",507:"INSUFFICIENT_STORAGE",508:"LOOP_DETECTED",510:"NOT_EXTENDED",511:"NETWORK_AUTHENTICATION_REQUIRED"});class i4 extends Error{httpCode;message;data;constructor({httpCode:c,data:K,message:w}){super();this.httpCode=c,this.message=!w?.trim()?uw[c]:w.trim(),this.data=K}}var Cw=(c,K=new Headers)=>{if(K.set("Content-Type","application/json"),c instanceof P2||c instanceof i4)return new Response(JSON.stringify(c),{status:c.httpCode,statusText:c.message,headers:K});return new Response(JSON.stringify((()=>{switch(typeof c){case"object":return!(c instanceof Error)?c:{message:c.message,code:c.name,cause:c.cause};case"string":return{message:c};case"number":return{code:c};default:return}})()),{status:500,statusText:"INTERNAL SERVER ERROR",headers:K})},gc;(function(c){c.year="year",c.month="month",c.day="day",c.hours="hours",c.minutes="minutes",c.seconds="seconds",c.miliseconds="miliseconds"})(gc||(gc={}));var yw=(c,K,w=gc.day)=>{let P=c instanceof Date?c:new Date(c);switch(w){case gc.year:P.setFullYear(P.getFullYear()+K);break;case gc.month:P.setMonth(P.getMonth()+K);break;case gc.day:P.setDate(P.getDate()+K);break;case gc.hours:P.setHours(P.getHours()+K);break;case gc.minutes:P.setMinutes(P.getMinutes()+K);break;case gc.seconds:P.setSeconds(P.getSeconds()+K);break;case gc.miliseconds:P.setMilliseconds(P.getMilliseconds()+K);break}return P},_w=M4(Rw(),1),d1=async function(){}.constructor,_K=Object.freeze({black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,gray:90}),fK=Object.freeze({black:40,red:41,green:42,yellow:43,blue:44,magenta:45,cyan:46,white:47,gray:100}),c2=(c,K={})=>{let{color:w,backgroundColor:P,bold:h,underline:M}=K,S="";if(h)S+="\x1B[1m";if(M)S+="\x1B[4m";if(w&&_K[w])S+=`\x1B[${_K[w]}m`;if(P&&fK[P])S+=`\x1B[${fK[P]}m`;return`${S}${c}\x1B[0m`},fw=(c)=>{let{headers:K,method:w}=c,P=K.get("upgrade")?.toLowerCase()||"",h=K.get("connection")?.toLowerCase()||"";return w==="GET"&&P?.toLowerCase()==="websocket"&&h?.toLowerCase().includes("upgrade")};class a2{_staticMap=new Map;_dynamicMap=new Map;_options=void 0;constructor(...c){c.forEach((K)=>{K.staticEntries.forEach(([w,P])=>this.set(w,P,{isStatic:!0,isPassthrough:!0})),K.dynamicEntries.forEach(([w,P])=>this.set(w,P,{isStatic:!1}))})}get(c,K){return!(K||this._options)?.isStatic?this._dynamicMap.get(c):this._staticMap.get(c)}has(c,K){return!(K||this._options)?.isStatic?this._dynamicMap.has(c):this._staticMap.has(c)}set(c,K,w){let P=w||this._options;if(!P?.isStatic)this._dynamicMap.set(c,K);else if(!this._staticMap.has(c))this._staticMap.set(c,K);else if(!P.isPassthrough)throw Error(`${String(c)} already exists in context static collection.`);return this}setOptions(c){return this._options=c,this}get staticEntries(){return[...this._staticMap.entries()]}get dynamicEntries(){return[...this._dynamicMap.entries()]}}class lc{static rootPattern=":([a-z0-9A-Z_-]{1,})";static innerRootPattern="([a-z0-9A-Z_-]{1,})";alias;_map=new Map;constructor(c){this.alias=this._thinAlias(c)}test(c,K){try{let w=this._map.get(K),P=this.alias.split("/"),h=this._thinAlias(c).split("/");if(!w)return;if(P.length!==h.length)return;let M=Object(),S=this.alias.replace(new RegExp(lc.rootPattern,"g"),lc.innerRootPattern);if(!new RegExp(S).test(this._thinAlias(c)))return;for(let O=0;O<P.length;O++){let G=P[O],D=h[O];if(!new RegExp(lc.rootPattern,"g").test(G)){if(G!==D)return}else{let $=!1;if(G.replace(new RegExp(lc.rootPattern,"g"),(L,B,q)=>{if(q===0)D.replace(new RegExp(lc.innerRootPattern,"g"),(J,z,H)=>{if(H===0)Object.assign(M,{[B]:J});return J});return L}),$)return}continue}return Object.freeze({parameters:M,model:w})}catch(w){return console.error(w),!1}}isMatch(c,K){try{if(!this._map.get(K))return;let w=this.alias.split("/"),P=this._thinAlias(c).split("/");if(w.length!==P.length)return!1;let h=Object();for(let M=0;M<w.length;M++){let S=w[M],O=P[M];if(!new RegExp(lc.rootPattern,"g").test(S)){if(S!==O)return!1}else{let G=!1;if(S.replace(new RegExp(lc.rootPattern,"g"),(D,$,L)=>{if(!new RegExp(L,"g").test(O))G=!0;else Object.assign(h,{[$]:O});return""}),G)return!1}continue}return!0}catch(w){console.error(w);return}}get(c){if(!this._map.get("GET"))this._map.set("GET",c);return this}post(c){if(!this._map.get("POST"))this._map.set("POST",c);return this}put(c){if(!this._map.get("PUT"))this._map.set("PUT",c);return this}delete(c){if(!this._map.get("DELETE"))this._map.set("DELETE",c);return this}connect(c){if(!this._map.get("CONNECT"))return this._map.set("CONNECT",c);return this}options(c){if(!this._map.get("OPTIONS"))return this._map.set("OPTIONS",c);return this}trace(c){if(!this._map.get("TRACE"))return this._map.set("TRACE",c);return this}patch(c){if(!this._map.get("PATCH"))return this._map.set("PATCH",c);return this}_thinAlias(c){return c.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}get _fullPath(){return this.alias.split("/").map((c,K)=>{let w=new RegExp(":([a-z0-9A-Z_.-]{1,})(\\(.*?\\))","g");if(!w.test(c)){if(w=new RegExp(":([a-z0-9A-Z_.-]{1,})","g"),!w.test(c))return c;return c.replace(w,(P,h)=>`${P}(.*?)`)}return c}).join("/")}get _filteredPath(){return this.alias.split("/").map((c,K)=>{let w=new RegExp(":([a-z0-9A-Z_.-]{1,})((.*?))","g");if(!w.test(c)){if(w=new RegExp(":([a-z0-9A-Z_.-]{1,})","g"),!w.test(c))return c;return c.replace(w,(P,h)=>"(.*?)")}return c.replace(w,(P,h,M)=>M)}).join("/")}}var ew=lc;class _4{alias;_routes=new Map;constructor(c){this.alias=this._thinAlias(c)}route(c){let K=this._thinAlias(`${this.alias}/${c}`),w=this._routes.get(K),P=!w?new ew(`${this.alias}/${c}`):w;if(!w)this._routes.set(K,P);return P}_thinAlias(c){return c.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}get routes(){return this._routes}}class f4{_routers=new Map;add(...c){for(let K of c){if(this._routers.has(K.alias))continue;this._routers.set(K.alias,K)}return this}find(c,K){for(let w of this._routers.values())for(let P of w.routes.values()){let h=P.test(c,K);if(!h)continue;return h}return}}var s1=M4(e4(),1);class c4{_mapper=new Map;constructor(...c){c.forEach((K)=>{K.entries.forEach(([w,P])=>{this._mapper.set(w,P)})})}get(c){if(this._mapper.has(c))return this._mapper.get(c);if(typeof c!=="function")return;let K=Reflect.getMetadataKeys(c);if(![c6,K4,K6,aK,n4,P4].some((h)=>K.includes(h)))throw Error("Missing dependency declaration, please check @Injectable() used on dependency(ies).");let w=(Reflect.getOwnMetadata(w4,c)||[]).map((h)=>this.get(h)),P=new c(...w);return this._mapper.set(c,P),P}set(c,K){if(this._mapper.has(c))throw Error(`${String(c)} already exists in injector collection.`);this._mapper.set(c,K)}get entries(){return[...this._mapper.entries()]}}class W6{error;constructor(c){this.error=c}}var pw=W6;class N6{eventName;metadata;_context=void 0;constructor({eventName:c,metadata:K}){this.eventName=c,this.metadata=K}bind(c){return this._context=c,this}execute(){if(this._context&&typeof this.metadata.descriptor.value==="function")this.metadata.descriptor.value=this.metadata.descriptor.value.bind(this._context);return Object.freeze({methodName:this.metadata.methodName,descriptor:this.metadata.descriptor,arguments:this.metadata.arguments})}}class t4{rawAlias;alias;routes=[];constructor(c="/"){this.rawAlias=c,this.alias=t4.thinAlias(c)}addRoutes(...c){for(let K of c)if(!this.routes.includes(K))this.routes.push(K);return this}bind(c){for(let K of this.routes)K.bind(c);return this}execute(){let c=new Map;for(let K of this.routes)c.set(`${this.alias}:::${K.eventName}`,K.execute());return c}static thinAlias(c){return c.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}}class h4{rawPrefix;prefix;routers=[];constructor(c="/"){this.rawPrefix=c,this.prefix=h4.thinPrefix(c)}addRouters(...c){for(let K=0;K<c.length;K++)if(!this.routers.includes(c[K]))this.routers.push(c[K]);for(let K of c)if(!this.routers.includes(K))this.routers.push(K);return this}execute(){let c=new Map;for(let K of this.routers){let w=K.execute();for(let[P,h]of w.entries())c.set(`/${h4.thinPrefix(`${this.prefix}/${P}`)}`,h)}return c}static thinPrefix(c){return c.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}}class lw{classConstructor;options;#c;#K;#w=new c4;#P=new Map;#M;#S=900;#h;constructor(c,K){if(this.classConstructor=c,this.options=K,this.#K=Reflect.getOwnMetadataKeys(c),!this.#K.includes(N2)&&!this.#K.includes(i2))throw Error(`Can not detect! ${c.name} class is not a container or module.`);this.#S=typeof K.static?.cacheTimeInSeconds!=="number"?900:K.static.cacheTimeInSeconds,this.#M=Object.freeze({allowLogsMethods:this.options?.log?.methods||[],staticOption:this.options.static,allowOrigins:!this.options.cors?.origins?["*"]:typeof this.options.cors.origins!=="string"?this.options.cors.origins.includes("*")||this.options.cors.origins.length<1?["*"]:this.options.cors.origins:[this.options.cors.origins!=="*"?this.options.cors.origins:"*"],allowMethods:this.options.cors?.methods||["GET","POST","PUT","PATCH","DELETE","OPTIONS"],allowCredentials:!this.options.cors?.credentials?!1:!0,allowHeaders:!this.options.cors?.headers||this.options.cors.headers.includes("*")?["*"]:this.options.cors.headers})}useValidator(c){this.#h=c}async preLaunch(){if(this.#c)return this.#c;let c=!this.#K.includes(N2)?void 0:Reflect.getOwnMetadata(N2,this.classConstructor),K=!this.#K.includes(N2)?[this.classConstructor]:c?.modules||[],w=!c?void 0:await this.containerResolution({containerClass:this.classConstructor,options:this.options,extendInjector:this.#w}),P=await Promise.all(K.map((S)=>this.moduleResolution({moduleClass:S,options:this.options,extendInjector:!w?this.#w:w.injector})));if([...new Set(P.map((S)=>S.prefix))].length!==P.length)throw Error("Module prefix should be unique.");let h=new Map;for(let S of P){let O=S.webSocketRouterGroup.execute();for(let[G,D]of O.entries())h.set(G,D)}let M=Object.freeze({containerMetadata:c,modulesConverted:K,resolutedContainer:w,resolutedModules:P,webSocketsMap:h});return this.#c=M,M}async listen(){let{allowLogsMethods:c,allowOrigins:K,allowMethods:w,allowHeaders:P,allowCredentials:h,staticOption:M}=this.#M,{resolutedContainer:S,resolutedModules:O,webSocketsMap:G}=await this.preLaunch(),D=Bun.serve({port:this.options.port,fetch:async($,L)=>{let B=performance.now(),q=new URL($.url),J=_w.parse(q.searchParams.toString(),this.options.queryParser),z=$.headers.get("origin")||"*",H=$.method.toUpperCase(),b=new Headers,Q=new a2().setOptions({isStatic:!0}).set(fc,L).set(pc,$).set(ec,$.headers).set(oc,b).set(h6,J);try{let X=fw($),W;if(X){for(let A of O){let u=A.webSocketHttpRouterGroup.find(q.pathname,$.method);if(u){W=Object.freeze({route:u,resolution:A});break}}if(!W)return this.finalizeResponse(new Response(JSON.stringify({httpCode:404,message:"Route not found",data:void 0}),{status:404,statusText:"Not found.",headers:b}));let g=await this.webSocketFetcher({request:$,server:L},{query:J,responseHeaders:b,route:W.route,moduleResolution:W.resolution});return g instanceof Response?g:void 0}if([...!h?[]:[{key:"Access-Control-Allow-Credentials",value:"true"}],{key:"Access-Control-Allow-Origin",value:K.includes("*")?"*":!K.includes(z)?K[0]:z},{key:"Access-Control-Allow-Methods",value:w.join(", ")},{key:"Access-Control-Allow-Headers",value:P.join(", ")}].forEach(({key:g,value:A})=>b.set(g,A)),!w.includes(H))return this.finalizeResponse(new Response(void 0,{status:405,statusText:"Method Not Allowed.",headers:b}));if($.method.toUpperCase()==="OPTIONS")return this.finalizeResponse(K.includes("*")||K.includes(z)?new Response(void 0,{status:204,statusText:"No Content.",headers:b}):new Response(void 0,{status:417,statusText:"Expectation Failed.",headers:b}));if(M){let{path:g,headers:A}=M,u=`${g}/${q.pathname}`,n=this.#P.get(u);if(!n){let C=Bun.file(u);if(await C.exists()){if(A)for(let[cc,Oc]of Object.entries(A))b.set(cc,Oc);return b.set("Content-Type",C.type),this.finalizeResponse(new Response(await C.arrayBuffer(),{status:200,statusText:"SUCCESS",headers:b}))}}else{let C=new Date>n.expiredAt;if(C)this.#P.delete(u);let cc=!C?n.file:Bun.file(u);if(await cc.exists()){if(this.#P.set(u,Object.freeze({expiredAt:yw(new Date,this.#S,gc.seconds),file:cc})),A)for(let[Oc,wc]of Object.entries(A))b.set(Oc,wc);return b.set("Content-Type",cc.type),this.finalizeResponse(new Response(await cc.arrayBuffer(),{status:200,statusText:"SUCCESS",headers:b}))}}}if(S){let{context:g}=await this.httpFetcher({context:Q,resolutedMap:{injector:S.injector,startMiddlewareGroup:S.startMiddlewareGroup,guardGroup:S.guardGroup},options:{isContainer:!0}});Q=g}for(let g of O){let A=g.controllerRouterGroup.find(q.pathname,H);if(A){W=Object.freeze({route:A,resolution:g});break}}if(!W)Q.setOptions({isStatic:!1}).set(s2,404).set(M6,"Not found.").set(d2,{httpCode:404,message:"Route not found",data:void 0});else{let{context:g}=await this.httpFetcher({context:Q,route:W.route,resolutedMap:W.resolution});Q=g}if(S){let{context:g}=await this.httpFetcher({context:Q,resolutedMap:{injector:S.injector,endMiddlewareGroup:S.endMiddlewareGroup},options:{isContainer:!0}});Q=g}let V=Q.get(oc,{isStatic:!0})||new Headers,o=Q.get(d2,{isStatic:!1})||void 0,U=Q.get(s2,{isStatic:!1}),r=Q.get(s2,{isStatic:!1});return this.serializeResponse({status:typeof U!=="number"?void 0:U,statusText:typeof r!=="string"?void 0:r,headers:V,data:o})}catch(X){return this.options.debug&&console.error(X),this.finalizeResponse(Cw(X,b))}finally{if(c){let X=performance.now(),W=c2(q.pathname,{color:"blue"}),V=`${Bun.color("yellow","ansi")}${process.pid}`,o=c2($.method,{color:"yellow",backgroundColor:"blue"}),U=c2(`${$.headers.get("x-forwarded-for")||$.headers.get("x-real-ip")||L.requestIP($)?.address||"<Unknown>"}`,{color:"yellow"}),r=c2(`${Math.round((X-B+Number.EPSILON)*100)/100}ms`,{color:"yellow",backgroundColor:"blue"});c.includes($.method.toUpperCase())&&console.info(`PID: ${V} - Method: ${o} - IP: ${U} - ${W} - Time: ${r}`)}}},websocket:{open:($)=>{let L=`${$.data.pathname}:::open`,B=G.get(L);if(!B)return;let q=B.arguments||{},J=[];for(let[z,H]of Object.entries(q))switch(H.type){case D2:J[H.index]=$;break;case I2:J[H.index]=D;break}B.descriptor.value(...J)},close:($,L,B)=>{let q=`${$.data.pathname}:::close`,J=G.get(q);if(!J)return;let z=J.arguments||{},H=[];for(let[b,Q]of Object.entries(z))switch(Q.type){case D2:H[Q.index]=$;break;case I2:H[Q.index]=D;break;case w6:H[Q.index]=L;break;case P6:H[Q.index]=B;break}J.descriptor.value(...H)},message:($,L)=>{let B=`${$.data.pathname}:::message`,q=G.get(B);if(!q)return;let J=q.arguments||{},z=[];for(let[H,b]of Object.entries(J))switch(b.type){case D2:z[b.index]=$;break;case t2:z[b.index]=L;break;case I2:z[b.index]=D;break}q.descriptor.value(...z)},drain:($)=>{let L=`${$.data.pathname}:::drain`,B=G.get(L);if(!B)return;let q=B.arguments||{},J=[];for(let[z,H]of Object.entries(q))switch(H.type){case D2:J[H.index]=$;break;case I2:J[H.index]=D;break}B.descriptor.value(...J)},ping:($,L)=>{let B=`${$.data.pathname}:::ping`,q=G.get(B);if(!q)return;let J=q.arguments||{},z=[];for(let[H,b]of Object.entries(J))switch(b.type){case D2:z[b.index]=$;break;case I2:z[b.index]=D;break;case t2:z[b.index]=L;break}q.descriptor.value(...z)},pong:($,L)=>{let B=`${$.data.pathname}:::pong`,q=G.get(B);if(!q)return;let J=q.arguments||{},z=[];for(let[H,b]of Object.entries(J))switch(b.type){case D2:z[b.index]=$;break;case I2:z[b.index]=D;break;case t2:z[b.index]=L;break}q.descriptor.value(...z)}}})}async containerResolution({containerClass:c,options:K,extendInjector:w}){if(!Reflect.getOwnMetadataKeys(c).includes(N2))throw Error(`${c.name} is not a container.`);let P=new c4(w),h=Reflect.getOwnMetadata(N2,c),{loaders:M,middlewares:S,guards:O,dependencies:G,config:D}=h||{},{config:$}=Object.freeze({config:{...typeof K.config!=="function"?K.config:await K.config(),...typeof D!=="function"?typeof D!=="object"?void 0:("key"in D)&&("value"in D)&&typeof D.key==="symbol"?typeof D.value!=="function"?D.value:await D.value():D:await D()}});if(P.set(D&&"key"in D&&"value"in D&&typeof D.key==="symbol"?D.key:C4,$),M){let J=[];for(let[H,b]of Object.entries(M))J.push(async()=>{try{let Q=await b({config:$});return console.info(`${c2(" INFO ",{color:"white",backgroundColor:"blue",bold:!0})} Loader [${H}] initialized successfully.`),Q}catch(Q){throw console.error(`${c2(" WARN ",{color:"yellow",backgroundColor:"red",bold:!0})} Loader [${H}] initialization failed.`),K.debug&&console.error(Q),Q}});let z=await Promise.all(J.map((H)=>H()));for(let[H,b]of z)P.set(H,b)}!G||G.map((J)=>P.get(J));let L=[],B=[];!S||S.forEach((J)=>{let z=P.get(J);if(z.start&&typeof z.start==="function"){let H=Reflect.getOwnMetadata(Yc,J,"start")||{};L.push(Object.freeze({class:J,funcName:"start",func:z.start.bind(z),argumentsMetadata:H}))}if(z.end&&typeof z.end==="function"){let H=Reflect.getOwnMetadata(Yc,J,"end")||{};B.push(Object.freeze({class:J,funcName:"end",func:z.end.bind(z),argumentsMetadata:H}))}});let q=!O?[]:O.map((J)=>{let z=P.get(J),H=Reflect.getOwnMetadata(Yc,J,"enforce")||{};return Object.freeze({class:J,funcName:"enforce",func:z.enforce.bind(z),argumentsMetadata:H})});return Object.freeze({injector:P,startMiddlewareGroup:L,endMiddlewareGroup:B,guardGroup:q})}async moduleResolution({moduleClass:c,options:K,extendInjector:w}){if(!Reflect.getOwnMetadataKeys(c).includes(i2))throw Error(`${c.name} is not a module.`);let P=new c4(w),h=Reflect.getOwnMetadata(i2,c),{loaders:M,middlewares:S,guards:O,interceptors:G,controllers:D,dependencies:$,webSockets:L,prefix:B,config:q}=h||{},J=`${K.prefix||""}/${B||""}`,{config:z}=Object.freeze({config:{...typeof K.config!=="function"?K.config:await K.config(),...typeof q!=="function"?typeof q!=="object"?void 0:("key"in q)&&("value"in q)&&typeof q.key==="symbol"?typeof q.value!=="function"?q.value:await q.value():q:await q()}});if(P.set(q&&"key"in q&&"value"in q&&typeof q.key==="symbol"?q.key:C4,z),M){let r=[];for(let[A,u]of Object.entries(M))r.push(async()=>{try{let n=await u({config:z});return console.info(`${c2(" INFO ",{color:"white",backgroundColor:"blue",bold:!0})} Loader [${A}] initialized successfully.`),n}catch(n){throw console.error(`${c2(" WARN ",{color:"yellow",backgroundColor:"red",bold:!0})} Loader [${A}] initialization failed.`),K.debug&&console.error(n),n}});let g=await Promise.all(r.map((A)=>A()));for(let A=0;A<g.length;A++){let[u,n]=g[A];P.set(u,n)}}!$||$.map((r)=>P.get(r));let H=[],b=[];!S||S.forEach((r)=>{let g=P.get(r);if(g.start&&typeof g.start==="function"){let A=Reflect.getOwnMetadata(Yc,r,"start")||{};H.push(Object.freeze({class:r,funcName:"start",func:g.start.bind(g),argumentsMetadata:A}))}if(g.end&&typeof g.end==="function"){let A=Reflect.getOwnMetadata(Yc,r,"end")||{};b.push(Object.freeze({class:r,funcName:"end",func:g.end.bind(g),argumentsMetadata:A}))}});let Q=!O?[]:O.map((r)=>{let g=P.get(r),A=Reflect.getOwnMetadata(Yc,r,"enforce")||{};return Object.freeze({class:r,funcName:"enforce",func:g.enforce.bind(g),argumentsMetadata:A})}),X=[],W=[];!G||G.forEach((r)=>{let g=P.get(r);if(g.open&&typeof g.open==="function"){let A=Reflect.getOwnMetadata(Yc,r,"open")||{};X.push(Object.freeze({class:r,funcName:"open",func:g.open.bind(g),argumentsMetadata:A}))}if(g.close&&typeof g.close==="function"){let A=Reflect.getOwnMetadata(Yc,r,"close")||{};W.push(Object.freeze({class:r,funcName:"close",func:g.close.bind(g),argumentsMetadata:A}))}});let V=new f4;!D||D.forEach((r)=>this.initControllerInstance({controllerConstructor:r,httpRouterGroup:V,injector:P,prefix:J}));let o=new f4,U=new h4;return L&&L.forEach((r)=>this.initWebSocketInstance({webSocketConstructor:r,httpRouterGroup:o,webSocketRouterGroup:U,injector:P,prefix:J})),Object.freeze({prefix:B||"",injector:P,startMiddlewareGroup:H,endMiddlewareGroup:b,guardGroup:Q,openInterceptorGroup:X,closeInterceptorGroup:W,controllerRouterGroup:V,webSocketHttpRouterGroup:o,webSocketRouterGroup:U})}async argumentsResolution(c,K,w,P){if(!this.#h)return c;try{let h=await this.#h.validate(c,K,w,P);if(!(h instanceof pw))return h;throw new P2({httpCode:400,message:`Validation at the [${P.toString()}] method fails at positional argument [${w}].`,data:h.error})}catch(h){if(h instanceof P2)throw h;throw new i4({httpCode:500,message:`Validation at the [${P.toString()}] method error at positional argument [${w}].`,data:!(h instanceof Error)?h:[{message:h.message,code:h.name,cause:h.cause}]})}}initControllerInstance({controllerConstructor:c,httpRouterGroup:K,injector:w,prefix:P}){if(!Reflect.getOwnMetadataKeys(c).includes(K4))throw Error(`${c.name} is not a controller.`);let h=w.get(c);if(!h)throw Error("Can not initialize controller.");let M=Reflect.getOwnMetadata(K4,c)||{prefix:"/",httpMetadata:[]},S=new _4(`/${P||""}/${M.prefix}`);return M.httpMetadata.forEach((O)=>{if(typeof O.descriptor.value!=="function")return;let G=S.route(O.path),D=O.descriptor.value.bind(h),$=Object.freeze({class:c,funcName:O.methodName,func:D,argumentsMetadata:O.argumentsMetadata});switch(O.httpMethod){case"GET":return G.get($);case"POST":return G.post($);case"PUT":return G.put($);case"PATCH":return G.patch($);case"DELETE":return G.delete($);case"OPTIONS":return G.options($)}}),K.add(S)}initWebSocketInstance({injector:c,httpRouterGroup:K,prefix:w,webSocketRouterGroup:P,webSocketConstructor:h}){if(!Reflect.getOwnMetadataKeys(h).includes(P4))throw Error(`${h.name} is not a websocket route.`);let M=c.get(h);if(!M)throw Error("Can not initialize webSocket.");let S=Reflect.getOwnMetadata(P4,h)||{prefix:"/",events:[],http:[]},O=`/${w||""}/${S.prefix}`,G=new _4(O);for(let[$,L]of Object.entries(S.http)){if(typeof L.descriptor?.value!=="function")continue;let B=G.route(L.path),q=L.descriptor.value.bind(M),J=Object.freeze({class:h,funcName:L.methodName,func:q,argumentsMetadata:L.argumentsMetadata});switch(L.httpMethod){case"GET":B.get(J);break;case"POST":B.post(J);break}}K.add(G);let D=new t4(O);for(let[$,L]of Object.entries(S.events)){let B=new N6({eventName:$,metadata:L});D.addRoutes(B)}return D.bind(M),P.addRouters(D),Object.freeze({httpRouterGroup:K,webSocketRouterGroup:P})}serializeResponse({status:c,statusText:K,headers:w,data:P}){let h=w.get("Content-Type")||"text/plain";if(h.includes("application/json"))return this.finalizeResponse(new Response(P instanceof ReadableStream?P:JSON.stringify(P),{status:c,statusText:K,headers:w}));if(h.includes("text/plain")||h.includes("text/html"))return this.finalizeResponse(new Response(P instanceof ReadableStream?P:String(P),{status:c,statusText:K,headers:w}));if(h.includes("application/octet-stream")){if(P instanceof Uint8Array||P instanceof ArrayBuffer||P instanceof Blob||P instanceof ReadableStream)return this.finalizeResponse(new Response(P instanceof Uint8Array?String.fromCharCode(...new Uint8Array(P)):P,{status:c,statusText:K,headers:w}));throw Error("Invalid data type for application/octet-stream")}if(h.includes("multipart/form-data")){if(P instanceof FormData)return this.finalizeResponse(new Response(P,{status:c,statusText:K,headers:w}));throw Error("multipart/form-data requires FormData object")}return this.finalizeResponse(new Response(String(P),{status:c,statusText:K,headers:w}))}finalizeResponse(c){return c.headers.set("X-Powered-By","Bool Typescript"),c}async httpFetcher({context:c,route:K,options:w,resolutedMap:P}){let h={isStatic:!0},M=(!c?new a2:new a2(c)).setOptions(h);if(K)M.set(y4,K.parameters).set(mc,K.model);let S=M.get(fc,h)||void 0,O=M.get(pc,h)||void 0,G=M.get(ec,h)||void 0,D=M.get(oc,h)||void 0,$=M.get(y4,h)||void 0,L=M.get(mc,h)||void 0;if(P){let{startMiddlewareGroup:B,guardGroup:q}=P;if(B)for(let J=0;J<B.length;J++){let z=[],{func:H,funcName:b,argumentsMetadata:Q}=B[J];for(let[X,W]of Object.entries(Q))switch(W.type){case w2:z[W.index]=!W.key?M:M.get(W.key,h);break;case pc:z[W.index]=!W.validationSchema?O:await this.argumentsResolution(O,W.validationSchema,W.index,b);break;case G2:z[W.index]=!W.validationSchema?await O?.[W.parser||"json"]():await this.argumentsResolution(await O?.[W.parser||"json"](),W.validationSchema,W.index,b);break;case K2:z[W.index]=!W.validationSchema?G:await this.argumentsResolution(G?.toJSON(),W.validationSchema,W.index,b);break;case ec:z[W.index]=!W.validationSchema?G?.get(W.key)||void 0:await this.argumentsResolution(G?.get(W.key)||void 0,W.validationSchema,W.index,b);break;case j2:z[W.index]=!W.validationSchema?$?.[W.key]||void 0:await this.argumentsResolution($?.[W.key]||void 0,W.validationSchema,W.index,b);break;case mc:z[W.index]=L;break;case oc:z[W.index]=D;break;case fc:z[W.index]=S;break;default:z[W.index]=!W.validationSchema?!M.has(W.type,h)?void 0:M.get(W.type,h):await this.argumentsResolution(!(W.type in M)?void 0:M.get(W.type,h),W.validationSchema,W.index,b);break}await H(...z)}if(q)for(let J=0;J<q.length;J++){let z=[],{func:H,funcName:b,argumentsMetadata:Q}=q[J];for(let[W,V]of Object.entries(Q))switch(V.type){case pc:z[V.index]=!V.validationSchema?O:await this.argumentsResolution(O,V.validationSchema,V.index,b);break;case G2:z[V.index]=!V.validationSchema?await O?.[V.parser||"json"]():await this.argumentsResolution(await O?.[V.parser||"json"](),V.validationSchema,V.index,b);break;case w2:z[V.index]=!V.key?M:M.get(V.key);break;case K2:z[V.index]=!V.validationSchema?G:await this.argumentsResolution(G?.toJSON(),V.validationSchema,V.index,b);break;case oc:z[V.index]=D;break;case ec:z[V.index]=!V.validationSchema?G?.get(V.key)||void 0:await this.argumentsResolution(G?.get(V.key)||void 0,V.validationSchema,V.index,b);break;case j2:z[V.index]=!V.validationSchema?$?.[V.key]||void 0:await this.argumentsResolution($?.[V.key],V.validationSchema,V.index,b);break;case mc:z[V.index]=L;break;case fc:z[V.index]=S;break;default:z[V.index]=!V.validationSchema?!M.has(V.type)?void 0:M.get(V.type):await this.argumentsResolution(M.get(V.type),V.validationSchema,V.index,b);break}let X=await H(...z);if(typeof X!=="boolean"||!X)throw new P2({httpCode:401,message:"Unauthorization.",data:void 0})}}if(L&&!w?.isContainer){if(P&&"openInterceptorGroup"in P&&P.openInterceptorGroup){let{openInterceptorGroup:H}=P;for(let b=0;b<H.length;b++){let Q=[],{func:X,funcName:W,argumentsMetadata:V}=H[b];for(let[o,U]of Object.entries(V))switch(U.type){case pc:Q[U.index]=!U.validationSchema?O:await this.argumentsResolution(O,U.validationSchema,U.index,W);break;case G2:Q[U.index]=!U.validationSchema?await O?.[U.parser||"json"]():await this.argumentsResolution(await O?.[U.parser||"json"](),U.validationSchema,U.index,W);break;case w2:Q[U.index]=!U.key?M:M.get(U.key);break;case K2:Q[U.index]=!U.validationSchema?G:await this.argumentsResolution(G?.toJSON(),U.validationSchema,U.index,W);break;case ec:Q[U.index]=!U.validationSchema?G?.get(U.key)||void 0:await this.argumentsResolution(G?.get(U.key)||void 0,U.validationSchema,U.index,W);break;case oc:Q[U.index]=D;break;case j2:Q[U.index]=!U.validationSchema?$?.[U.key]||void 0:await this.argumentsResolution($?.[U.key]||void 0,U.validationSchema,U.index,W);break;case mc:Q[U.index]=L;break;case fc:Q[U.index]=S;break;default:Q[U.index]=!U.validationSchema?!M.has(U.type)?void 0:M.get(U.type):await this.argumentsResolution(M.get(U.type),U.validationSchema,U.index,W);break}await X(...Q)}}let B=[],{func:q,funcName:J,argumentsMetadata:z}=L;for(let[H,b]of Object.entries(z))switch(b.type){case pc:B[b.index]=!b.validationSchema?O:await this.argumentsResolution(O,b.validationSchema,b.index,J);break;case G2:B[b.index]=!b.validationSchema?await O?.[b.parser||"json"]():await this.argumentsResolution(await O?.[b.parser||"json"](),b.validationSchema,b.index,J);break;case w2:B[b.index]=!b.key?M:M.get(b.key);break;case K2:B[b.index]=!b.validationSchema?G:await this.argumentsResolution(G?.toJSON(),b.validationSchema,b.index,J);break;case ec:B[b.index]=!b.validationSchema?G?.get(b.key)||void 0:await this.argumentsResolution(G?.get(b.key)||void 0,b.validationSchema,b.index,J);break;case oc:B[b.index]=D;break;case j2:B[b.index]=!b.validationSchema?$?.[b.key]||void 0:await this.argumentsResolution($?.[b.key]||void 0,b.validationSchema,b.index,J);break;case mc:B[b.index]=L;break;case fc:B[b.index]=S;break;default:B[b.index]=!b.validationSchema?!M.has(b.type)?void 0:M.get(b.type):await this.argumentsResolution(M.get(b.type),b.validationSchema,b.index,J);break}if(M.set(d2,await q(...B),{isStatic:!1}),P&&"closeInterceptorGroup"in P&&P.closeInterceptorGroup){let{closeInterceptorGroup:H}=P;for(let b=0;b<H.length;b++){let Q=[],{func:X,funcName:W,argumentsMetadata:V}=H[b];for(let[o,U]of Object.entries(V))switch(U.type){case pc:Q[U.index]=!U.validationSchema?O:await this.argumentsResolution(O,U.validationSchema,U.index,W);break;case G2:Q[U.index]=!U.validationSchema?await O?.[U.parser||"json"]():await this.argumentsResolution(await O?.[U.parser||"json"](),U.validationSchema,U.index,W);break;case w2:Q[U.index]=!U.key?M:M.get(U.key);break;case K2:Q[U.index]=!U.validationSchema?G:await this.argumentsResolution(G?.toJSON(),U.validationSchema,U.index,W);break;case oc:Q[U.index]=M.get(U.type);break;case ec:Q[U.index]=!U.validationSchema?G?.get(U.key)||void 0:await this.argumentsResolution(G?.get(U.key)||void 0,U.validationSchema,U.index,W);break;case j2:Q[U.index]=!U.validationSchema?$?.[U.key]||void 0:await this.argumentsResolution($?.[U.key]||void 0,U.validationSchema,U.index,W);break;case mc:Q[U.index]=L;break;case fc:Q[U.index]=S;break;default:Q[U.index]=!U.validationSchema?!M.has(U.type)?void 0:M.get(U.type):await this.argumentsResolution(M.get(U.type),U.validationSchema,U.index,W);break}await X(...Q)}}}if(P){let{endMiddlewareGroup:B}=P;if(B)for(let q=0;q<B.length;q++){let J=[],{func:z,funcName:H,argumentsMetadata:b}=B[q];for(let[Q,X]of Object.entries(b))switch(X.type){case pc:J[X.index]=!X.validationSchema?O:await this.argumentsResolution(O,X.validationSchema,X.index,H);break;case G2:J[X.index]=!X.validationSchema?await O?.[X.parser||"json"]():await this.argumentsResolution(await O?.[X.parser||"json"](),X.validationSchema,X.index,H);break;case w2:J[X.index]=!X.key?M:M.get(X.key);break;case K2:J[X.index]=!X.validationSchema?G:await this.argumentsResolution(G?.toJSON(),X.validationSchema,X.index,H);break;case oc:J[X.index]=M.get(X.type);break;case ec:J[X.index]=!X.validationSchema?G?.get(X.key)||void 0:await this.argumentsResolution(G?.get(X.key)||void 0,X.validationSchema,X.index,H);break;case j2:J[X.index]=!X.validationSchema?$?.[X.key]||void 0:await this.argumentsResolution($?.[X.key]||void 0,X.validationSchema,X.index,H);break;case mc:J[X.index]=L;break;case fc:J[X.index]=S;break;default:J[X.index]=!X.validationSchema?!M.has(X.type)?void 0:M.get(X.type):await this.argumentsResolution(!(X.type in M)?void 0:M.get(X.type),X.validationSchema,X.index,H);break}await z(...J)}}return Object.freeze({context:M})}async webSocketFetcher(c,K){let{request:w,server:P}=c,{query:h,responseHeaders:M,route:{model:S}}=K,O=await S.func(...[P,w,h]);if(typeof O!=="boolean")return this.finalizeResponse(new Response(JSON.stringify({httpCode:500,message:"Can not detect webSocket upgrade result.",data:void 0}),{status:500,statusText:"Internal server error.",headers:M}));if(!O)return this.finalizeResponse(new Response(JSON.stringify({httpCode:500,message:"Can not upgrade.",data:void 0}),{status:500,statusText:"Internal server error.",headers:M}));return O}}var a1=M4(e4(),1);var d4=()=>O4(Uc.authState);var Tw=()=>(c)=>{Reflect.defineMetadata(Uc.guardMetadata,void 0,c)};class s4{open(c,K){if(Reflect.getOwnMetadataKeys(c.class.prototype,c.funcName).includes(Uc.authState)){if(!K)throw new P2({httpCode:401,message:"Unauthorized",data:void 0});return}if(Reflect.getOwnMetadataKeys(c.class).includes(Uc.authState)){if(!K)throw new P2({httpCode:401,message:"Unauthorized",data:void 0});return}}}Q2([W2(0,b6()),W2(1,d4())],s4.prototype,"open",null),s4=Q2([J6()],s4);var j9=Object.freeze({status:"aborted"});function F(c,K,w){function P(O,G){var D;Object.defineProperty(O,"_zod",{value:O._zod??{},enumerable:!1}),(D=O._zod).traits??(D.traits=new Set),O._zod.traits.add(c),K(O,G);for(let $ in S.prototype)if(!($ in O))Object.defineProperty(O,$,{value:S.prototype[$].bind(O)});O._zod.constr=S,O._zod.def=G}let h=w?.Parent??Object;class M extends h{}Object.defineProperty(M,"name",{value:c});function S(O){var G;let D=w?.Parent?new M:this;P(D,O),(G=D._zod).deferred??(G.deferred=[]);for(let $ of D._zod.deferred)$();return D}return Object.defineProperty(S,"init",{value:P}),Object.defineProperty(S,Symbol.hasInstance,{value:(O)=>{if(w?.Parent&&O instanceof w.Parent)return!0;return O?._zod?.traits?.has(c)}}),Object.defineProperty(S,"name",{value:c}),S}var X9=Symbol("zod_brand");class Tc extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Z2 extends Error{constructor(c){super(`Encountered unidirectional transform during encode: ${c}`);this.name="ZodEncodeError"}}var J4={};function nc(c){if(c)Object.assign(J4,c);return J4}var a={};m4(a,{unwrapMessage:()=>A2,uint8ArrayToHex:()=>z0,uint8ArrayToBase64url:()=>$0,uint8ArrayToBase64:()=>Y6,stringifyPrimitive:()=>X6,shallowClone:()=>G6,safeExtend:()=>N0,required:()=>G0,randomString:()=>h0,propertyKeyTypes:()=>wK,promiseAllObject:()=>P0,primitiveTypes:()=>j6,prefixIssues:()=>u2,pick:()=>O0,partial:()=>D0,optionalKeys:()=>PK,omit:()=>J0,objectClone:()=>c0,numKeys:()=>M0,nullish:()=>o2,normalizeParams:()=>e,mergeDefs:()=>M2,merge:()=>I0,jsonStringifyReplacer:()=>L2,joinValues:()=>aw,issue:()=>H2,isPlainObject:()=>X2,isObject:()=>q2,hexToUint8Array:()=>B0,getSizableOrigin:()=>z6,getParsedType:()=>S0,getLengthableOrigin:()=>C2,getEnumValues:()=>cK,getElementAtPath:()=>w0,floatSafeRemainder:()=>D6,finalizeIssue:()=>uc,extend:()=>W0,escapeRegex:()=>$2,esc:()=>W4,defineLazy:()=>Kc,createTransparentProxy:()=>b0,cloneDef:()=>K0,clone:()=>Rc,cleanRegex:()=>m2,cleanEnum:()=>j0,captureStackTrace:()=>N4,cached:()=>r2,base64urlToUint8Array:()=>X0,base64ToUint8Array:()=>U6,assignProp:()=>h2,assertNotEqual:()=>iw,assertNever:()=>dw,assertIs:()=>tw,assertEqual:()=>nw,assert:()=>sw,allowsEval:()=>KK,aborted:()=>S2,NUMBER_FORMAT_RANGES:()=>$6,Class:()=>Q6,BIGINT_FORMAT_RANGES:()=>B6});function nw(c){return c}function iw(c){return c}function tw(c){}function dw(c){throw Error()}function sw(c){}function cK(c){let K=Object.values(c).filter((P)=>typeof P==="number");return Object.entries(c).filter(([P,h])=>K.indexOf(+P)===-1).map(([P,h])=>h)}function aw(c,K="|"){return c.map((w)=>X6(w)).join(K)}function L2(c,K){if(typeof K==="bigint")return K.toString();return K}function r2(c){return{get value(){{let w=c();return Object.defineProperty(this,"value",{value:w}),w}throw Error("cached value already set")}}}function o2(c){return c===null||c===void 0}function m2(c){let K=c.startsWith("^")?1:0,w=c.endsWith("$")?c.length-1:c.length;return c.slice(K,w)}function D6(c,K){let w=(c.toString().split(".")[1]||"").length,P=K.toString(),h=(P.split(".")[1]||"").length;if(h===0&&/\d?e-\d?/.test(P)){let G=P.match(/\d?e-(\d?)/);if(G?.[1])h=Number.parseInt(G[1])}let M=w>h?w:h,S=Number.parseInt(c.toFixed(M).replace(".","")),O=Number.parseInt(K.toFixed(M).replace(".",""));return S%O/10**M}var I6=Symbol("evaluating");function Kc(c,K,w){let P=void 0;Object.defineProperty(c,K,{get(){if(P===I6)return;if(P===void 0)P=I6,P=w();return P},set(h){Object.defineProperty(c,K,{value:h})},configurable:!0})}function c0(c){return Object.create(Object.getPrototypeOf(c),Object.getOwnPropertyDescriptors(c))}function h2(c,K,w){Object.defineProperty(c,K,{value:w,writable:!0,enumerable:!0,configurable:!0})}function M2(...c){let K={};for(let w of c){let P=Object.getOwnPropertyDescriptors(w);Object.assign(K,P)}return Object.defineProperties({},K)}function K0(c){return M2(c._zod.def)}function w0(c,K){if(!K)return c;return K.reduce((w,P)=>w?.[P],c)}function P0(c){let K=Object.keys(c),w=K.map((P)=>c[P]);return Promise.all(w).then((P)=>{let h={};for(let M=0;M<K.length;M++)h[K[M]]=P[M];return h})}function h0(c=10){let w="";for(let P=0;P<c;P++)w+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return w}function W4(c){return JSON.stringify(c)}var N4="captureStackTrace"in Error?Error.captureStackTrace:(...c)=>{};function q2(c){return typeof c==="object"&&c!==null&&!Array.isArray(c)}var KK=r2(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(c){return!1}});function X2(c){if(q2(c)===!1)return!1;let K=c.constructor;if(K===void 0)return!0;let w=K.prototype;if(q2(w)===!1)return!1;if(Object.prototype.hasOwnProperty.call(w,"isPrototypeOf")===!1)return!1;return!0}function G6(c){if(X2(c))return{...c};if(Array.isArray(c))return[...c];return c}function M0(c){let K=0;for(let w in c)if(Object.prototype.hasOwnProperty.call(c,w))K++;return K}var S0=(c)=>{let K=typeof c;switch(K){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(c)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(c))return"array";if(c===null)return"null";if(c.then&&typeof c.then==="function"&&c.catch&&typeof c.catch==="function")return"promise";if(typeof Map<"u"&&c instanceof Map)return"map";if(typeof Set<"u"&&c instanceof Set)return"set";if(typeof Date<"u"&&c instanceof Date)return"date";if(typeof File<"u"&&c instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${K}`)}},wK=new Set(["string","number","symbol"]),j6=new Set(["string","number","bigint","boolean","symbol","undefined"]);function $2(c){return c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Rc(c,K,w){let P=new c._zod.constr(K??c._zod.def);if(!K||w?.parent)P._zod.parent=c;return P}function e(c){let K=c;if(!K)return{};if(typeof K==="string")return{error:()=>K};if(K?.message!==void 0){if(K?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");K.error=K.message}if(delete K.message,typeof K.error==="string")return{...K,error:()=>K.error};return K}function b0(c){let K;return new Proxy({},{get(w,P,h){return K??(K=c()),Reflect.get(K,P,h)},set(w,P,h,M){return K??(K=c()),Reflect.set(K,P,h,M)},has(w,P){return K??(K=c()),Reflect.has(K,P)},deleteProperty(w,P){return K??(K=c()),Reflect.deleteProperty(K,P)},ownKeys(w){return K??(K=c()),Reflect.ownKeys(K)},getOwnPropertyDescriptor(w,P){return K??(K=c()),Reflect.getOwnPropertyDescriptor(K,P)},defineProperty(w,P,h){return K??(K=c()),Reflect.defineProperty(K,P,h)}})}function X6(c){if(typeof c==="bigint")return c.toString()+"n";if(typeof c==="string")return`"${c}"`;return`${c}`}function PK(c){return Object.keys(c).filter((K)=>{return c[K]._zod.optin==="optional"&&c[K]._zod.optout==="optional"})}var $6={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},B6={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function O0(c,K){let w=c._zod.def,P=M2(c._zod.def,{get shape(){let h={};for(let M in K){if(!(M in w.shape))throw Error(`Unrecognized key: "${M}"`);if(!K[M])continue;h[M]=w.shape[M]}return h2(this,"shape",h),h},checks:[]});return Rc(c,P)}function J0(c,K){let w=c._zod.def,P=M2(c._zod.def,{get shape(){let h={...c._zod.def.shape};for(let M in K){if(!(M in w.shape))throw Error(`Unrecognized key: "${M}"`);if(!K[M])continue;delete h[M]}return h2(this,"shape",h),h},checks:[]});return Rc(c,P)}function W0(c,K){if(!X2(K))throw Error("Invalid input to extend: expected a plain object");let w=c._zod.def.checks;if(w&&w.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let h=M2(c._zod.def,{get shape(){let M={...c._zod.def.shape,...K};return h2(this,"shape",M),M},checks:[]});return Rc(c,h)}function N0(c,K){if(!X2(K))throw Error("Invalid input to safeExtend: expected a plain object");let w={...c._zod.def,get shape(){let P={...c._zod.def.shape,...K};return h2(this,"shape",P),P},checks:c._zod.def.checks};return Rc(c,w)}function I0(c,K){let w=M2(c._zod.def,{get shape(){let P={...c._zod.def.shape,...K._zod.def.shape};return h2(this,"shape",P),P},get catchall(){return K._zod.def.catchall},checks:[]});return Rc(c,w)}function D0(c,K,w){let P=M2(K._zod.def,{get shape(){let h=K._zod.def.shape,M={...h};if(w)for(let S in w){if(!(S in h))throw Error(`Unrecognized key: "${S}"`);if(!w[S])continue;M[S]=c?new c({type:"optional",innerType:h[S]}):h[S]}else for(let S in h)M[S]=c?new c({type:"optional",innerType:h[S]}):h[S];return h2(this,"shape",M),M},checks:[]});return Rc(K,P)}function G0(c,K,w){let P=M2(K._zod.def,{get shape(){let h=K._zod.def.shape,M={...h};if(w)for(let S in w){if(!(S in M))throw Error(`Unrecognized key: "${S}"`);if(!w[S])continue;M[S]=new c({type:"nonoptional",innerType:h[S]})}else for(let S in h)M[S]=new c({type:"nonoptional",innerType:h[S]});return h2(this,"shape",M),M},checks:[]});return Rc(K,P)}function S2(c,K=0){if(c.aborted===!0)return!0;for(let w=K;w<c.issues.length;w++)if(c.issues[w]?.continue!==!0)return!0;return!1}function u2(c,K){return K.map((w)=>{var P;return(P=w).path??(P.path=[]),w.path.unshift(c),w})}function A2(c){return typeof c==="string"?c:c?.message}function uc(c,K,w){let P={...c,path:c.path??[]};if(!c.message){let h=A2(c.inst?._zod.def?.error?.(c))??A2(K?.error?.(c))??A2(w.customError?.(c))??A2(w.localeError?.(c))??"Invalid input";P.message=h}if(delete P.inst,delete P.continue,!K?.reportInput)delete P.input;return P}function z6(c){if(c instanceof Set)return"set";if(c instanceof Map)return"map";if(c instanceof File)return"file";return"unknown"}function C2(c){if(Array.isArray(c))return"array";if(typeof c==="string")return"string";return"unknown"}function H2(...c){let[K,w,P]=c;if(typeof K==="string")return{message:K,code:"custom",input:w,inst:P};return{...K}}function j0(c){return Object.entries(c).filter(([K,w])=>{return Number.isNaN(Number.parseInt(K,10))}).map((K)=>K[1])}function U6(c){let K=atob(c),w=new Uint8Array(K.length);for(let P=0;P<K.length;P++)w[P]=K.charCodeAt(P);return w}function Y6(c){let K="";for(let w=0;w<c.length;w++)K+=String.fromCharCode(c[w]);return btoa(K)}function X0(c){let K=c.replace(/-/g,"+").replace(/_/g,"/"),w="=".repeat((4-K.length%4)%4);return U6(K+w)}function $0(c){return Y6(c).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function B0(c){let K=c.replace(/^0x/,"");if(K.length%2!==0)throw Error("Invalid hex string length");let w=new Uint8Array(K.length/2);for(let P=0;P<K.length;P+=2)w[P/2]=Number.parseInt(K.slice(P,P+2),16);return w}function z0(c){return Array.from(c).map((K)=>K.toString(16).padStart(2,"0")).join("")}class Q6{constructor(...c){}}var V6=(c,K)=>{c.name="$ZodError",Object.defineProperty(c,"_zod",{value:c._zod,enumerable:!1}),Object.defineProperty(c,"issues",{value:K,enumerable:!1}),c.message=JSON.stringify(K,L2,2),Object.defineProperty(c,"toString",{value:()=>c.message,enumerable:!1})},I4=F("$ZodError",V6),hK=F("$ZodError",V6,{Parent:Error});function q6(c,K=(w)=>w.message){let w={},P=[];for(let h of c.issues)if(h.path.length>0)w[h.path[0]]=w[h.path[0]]||[],w[h.path[0]].push(K(h));else P.push(K(h));return{formErrors:P,fieldErrors:w}}function L6(c,K){let w=K||function(M){return M.message},P={_errors:[]},h=(M)=>{for(let S of M.issues)if(S.code==="invalid_union"&&S.errors.length)S.errors.map((O)=>h({issues:O}));else if(S.code==="invalid_key")h({issues:S.issues});else if(S.code==="invalid_element")h({issues:S.issues});else if(S.path.length===0)P._errors.push(w(S));else{let O=P,G=0;while(G<S.path.length){let D=S.path[G];if(G!==S.path.length-1)O[D]=O[D]||{_errors:[]};else O[D]=O[D]||{_errors:[]},O[D]._errors.push(w(S));O=O[D],G++}}};return h(c),P}var D4=(c)=>(K,w,P,h)=>{let M=P?Object.assign(P,{async:!1}):{async:!1},S=K._zod.run({value:w,issues:[]},M);if(S instanceof Promise)throw new Tc;if(S.issues.length){let O=new(h?.Err??c)(S.issues.map((G)=>uc(G,M,nc())));throw N4(O,h?.callee),O}return S.value};var G4=(c)=>async(K,w,P,h)=>{let M=P?Object.assign(P,{async:!0}):{async:!0},S=K._zod.run({value:w,issues:[]},M);if(S instanceof Promise)S=await S;if(S.issues.length){let O=new(h?.Err??c)(S.issues.map((G)=>uc(G,M,nc())));throw N4(O,h?.callee),O}return S.value};var y2=(c)=>(K,w,P)=>{let h=P?{...P,async:!1}:{async:!1},M=K._zod.run({value:w,issues:[]},h);if(M instanceof Promise)throw new Tc;return M.issues.length?{success:!1,error:new(c??I4)(M.issues.map((S)=>uc(S,h,nc())))}:{success:!0,data:M.value}},H6=y2(hK),_2=(c)=>async(K,w,P)=>{let h=P?Object.assign(P,{async:!0}):{async:!0},M=K._zod.run({value:w,issues:[]},h);if(M instanceof Promise)M=await M;return M.issues.length?{success:!1,error:new c(M.issues.map((S)=>uc(S,h,nc())))}:{success:!0,data:M.value}},v6=_2(hK),F6=(c)=>(K,w,P)=>{let h=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return D4(c)(K,w,h)};var E6=(c)=>(K,w,P)=>{return D4(c)(K,w,P)};var k6=(c)=>async(K,w,P)=>{let h=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return G4(c)(K,w,h)};var g6=(c)=>async(K,w,P)=>{return G4(c)(K,w,P)};var R6=(c)=>(K,w,P)=>{let h=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return y2(c)(K,w,h)};var x6=(c)=>(K,w,P)=>{return y2(c)(K,w,P)};var Z6=(c)=>async(K,w,P)=>{let h=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return _2(c)(K,w,h)};var A6=(c)=>async(K,w,P)=>{return _2(c)(K,w,P)};var r6=/^[cC][^\s-]{8,}$/,o6=/^[0-9a-z]+$/,m6=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,u6=/^[0-9a-vA-V]{20}$/,C6=/^[A-Za-z0-9]{27}$/,y6=/^[a-zA-Z0-9_-]{21}$/,_6=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/;var f6=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,MK=(c)=>{if(!c)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${c}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)};var e6=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;function p6(){return new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}var l6=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,T6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,n6=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,i6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,t6=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,SK=/^[A-Za-z0-9_-]*$/,d6=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/;var s6=/^\+(?:[0-9]){6,14}[0-9]$/,a6="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",c8=new RegExp(`^${a6}$`);function K8(c){return typeof c.precision==="number"?c.precision===-1?"(?:[01]\\d|2[0-3]):[0-5]\\d":c.precision===0?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${c.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function w8(c){return new RegExp(`^${K8(c)}$`)}function P8(c){let K=K8({precision:c.precision}),w=["Z"];if(c.local)w.push("");if(c.offset)w.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let P=`${K}(?:${w.join("|")})`;return new RegExp(`^${a6}T(?:${P})$`)}var h8=(c)=>{let K=c?`[\\s\\S]{${c?.minimum??0},${c?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${K}$`)};var M8=/^[^A-Z]*$/,S8=/^[^a-z]*$/;var qc=F("$ZodCheck",(c,K)=>{var w;c._zod??(c._zod={}),c._zod.def=K,(w=c._zod).onattach??(w.onattach=[])});var b8=F("$ZodCheckMaxLength",(c,K)=>{var w;qc.init(c,K),(w=c._zod.def).when??(w.when=(P)=>{let h=P.value;return!o2(h)&&h.length!==void 0}),c._zod.onattach.push((P)=>{let h=P._zod.bag.maximum??Number.POSITIVE_INFINITY;if(K.maximum<h)P._zod.bag.maximum=K.maximum}),c._zod.check=(P)=>{let h=P.value;if(h.length<=K.maximum)return;let S=C2(h);P.issues.push({origin:S,code:"too_big",maximum:K.maximum,inclusive:!0,input:h,inst:c,continue:!K.abort})}}),O8=F("$ZodCheckMinLength",(c,K)=>{var w;qc.init(c,K),(w=c._zod.def).when??(w.when=(P)=>{let h=P.value;return!o2(h)&&h.length!==void 0}),c._zod.onattach.push((P)=>{let h=P._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(K.minimum>h)P._zod.bag.minimum=K.minimum}),c._zod.check=(P)=>{let h=P.value;if(h.length>=K.minimum)return;let S=C2(h);P.issues.push({origin:S,code:"too_small",minimum:K.minimum,inclusive:!0,input:h,inst:c,continue:!K.abort})}}),J8=F("$ZodCheckLengthEquals",(c,K)=>{var w;qc.init(c,K),(w=c._zod.def).when??(w.when=(P)=>{let h=P.value;return!o2(h)&&h.length!==void 0}),c._zod.onattach.push((P)=>{let h=P._zod.bag;h.minimum=K.length,h.maximum=K.length,h.length=K.length}),c._zod.check=(P)=>{let h=P.value,M=h.length;if(M===K.length)return;let S=C2(h),O=M>K.length;P.issues.push({origin:S,...O?{code:"too_big",maximum:K.length}:{code:"too_small",minimum:K.length},inclusive:!0,exact:!0,input:P.value,inst:c,continue:!K.abort})}}),f2=F("$ZodCheckStringFormat",(c,K)=>{var w,P;if(qc.init(c,K),c._zod.onattach.push((h)=>{let M=h._zod.bag;if(M.format=K.format,K.pattern)M.patterns??(M.patterns=new Set),M.patterns.add(K.pattern)}),K.pattern)(w=c._zod).check??(w.check=(h)=>{if(K.pattern.lastIndex=0,K.pattern.test(h.value))return;h.issues.push({origin:"string",code:"invalid_format",format:K.format,input:h.value,...K.pattern?{pattern:K.pattern.toString()}:{},inst:c,continue:!K.abort})});else(P=c._zod).check??(P.check=()=>{})}),W8=F("$ZodCheckRegex",(c,K)=>{f2.init(c,K),c._zod.check=(w)=>{if(K.pattern.lastIndex=0,K.pattern.test(w.value))return;w.issues.push({origin:"string",code:"invalid_format",format:"regex",input:w.value,pattern:K.pattern.toString(),inst:c,continue:!K.abort})}}),N8=F("$ZodCheckLowerCase",(c,K)=>{K.pattern??(K.pattern=M8),f2.init(c,K)}),I8=F("$ZodCheckUpperCase",(c,K)=>{K.pattern??(K.pattern=S8),f2.init(c,K)}),D8=F("$ZodCheckIncludes",(c,K)=>{qc.init(c,K);let w=$2(K.includes),P=new RegExp(typeof K.position==="number"?`^.{${K.position}}${w}`:w);K.pattern=P,c._zod.onattach.push((h)=>{let M=h._zod.bag;M.patterns??(M.patterns=new Set),M.patterns.add(P)}),c._zod.check=(h)=>{if(h.value.includes(K.includes,K.position))return;h.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:K.includes,input:h.value,inst:c,continue:!K.abort})}}),G8=F("$ZodCheckStartsWith",(c,K)=>{qc.init(c,K);let w=new RegExp(`^${$2(K.prefix)}.*`);K.pattern??(K.pattern=w),c._zod.onattach.push((P)=>{let h=P._zod.bag;h.patterns??(h.patterns=new Set),h.patterns.add(w)}),c._zod.check=(P)=>{if(P.value.startsWith(K.prefix))return;P.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:K.prefix,input:P.value,inst:c,continue:!K.abort})}}),j8=F("$ZodCheckEndsWith",(c,K)=>{qc.init(c,K);let w=new RegExp(`.*${$2(K.suffix)}$`);K.pattern??(K.pattern=w),c._zod.onattach.push((P)=>{let h=P._zod.bag;h.patterns??(h.patterns=new Set),h.patterns.add(w)}),c._zod.check=(P)=>{if(P.value.endsWith(K.suffix))return;P.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:K.suffix,input:P.value,inst:c,continue:!K.abort})}});var X8=F("$ZodCheckOverwrite",(c,K)=>{qc.init(c,K),c._zod.check=(w)=>{w.value=K.tx(w.value)}});class bK{constructor(c=[]){if(this.content=[],this.indent=0,this)this.args=c}indented(c){this.indent+=1,c(this),this.indent-=1}write(c){if(typeof c==="function"){c(this,{execution:"sync"}),c(this,{execution:"async"});return}let w=c.split(`
`).filter((M)=>M),P=Math.min(...w.map((M)=>M.length-M.trimStart().length)),h=w.map((M)=>M.slice(P)).map((M)=>" ".repeat(this.indent*2)+M);for(let M of h)this.content.push(M)}compile(){let c=Function,K=this?.args,P=[...(this?.content??[""]).map((h)=>`  ${h}`)];return new c(...K,P.join(`
`))}}var B8={major:4,minor:1,patch:9};var Wc=F("$ZodType",(c,K)=>{var w;c??(c={}),c._zod.def=K,c._zod.bag=c._zod.bag||{},c._zod.version=B8;let P=[...c._zod.def.checks??[]];if(c._zod.traits.has("$ZodCheck"))P.unshift(c);for(let h of P)for(let M of h._zod.onattach)M(c);if(P.length===0)(w=c._zod).deferred??(w.deferred=[]),c._zod.deferred?.push(()=>{c._zod.run=c._zod.parse});else{let h=(S,O,G)=>{let D=S2(S),$;for(let L of O){if(L._zod.def.when){if(!L._zod.def.when(S))continue}else if(D)continue;let B=S.issues.length,q=L._zod.check(S);if(q instanceof Promise&&G?.async===!1)throw new Tc;if($||q instanceof Promise)$=($??Promise.resolve()).then(async()=>{if(await q,S.issues.length===B)return;if(!D)D=S2(S,B)});else{if(S.issues.length===B)continue;if(!D)D=S2(S,B)}}if($)return $.then(()=>{return S});return S},M=(S,O,G)=>{if(S2(S))return S.aborted=!0,S;let D=h(O,P,G);if(D instanceof Promise){if(G.async===!1)throw new Tc;return D.then(($)=>c._zod.parse($,G))}return c._zod.parse(D,G)};c._zod.run=(S,O)=>{if(O.skipChecks)return c._zod.parse(S,O);if(O.direction==="backward"){let D=c._zod.parse({value:S.value,issues:[]},{...O,skipChecks:!0});if(D instanceof Promise)return D.then(($)=>{return M($,S,O)});return M(D,S,O)}let G=c._zod.parse(S,O);if(G instanceof Promise){if(O.async===!1)throw new Tc;return G.then((D)=>h(D,P,O))}return h(G,P,O)}}c["~standard"]={validate:(h)=>{try{let M=H6(c,h);return M.success?{value:M.data}:{issues:M.error?.issues}}catch(M){return v6(c,h).then((S)=>S.success?{value:S.data}:{issues:S.error?.issues})}},vendor:"zod",version:1}}),B4=F("$ZodString",(c,K)=>{Wc.init(c,K),c._zod.pattern=[...c?._zod.bag?.patterns??[]].pop()??h8(c._zod.bag),c._zod.parse=(w,P)=>{if(K.coerce)try{w.value=String(w.value)}catch(h){}if(typeof w.value==="string")return w;return w.issues.push({expected:"string",code:"invalid_type",input:w.value,inst:c}),w}}),hc=F("$ZodStringFormat",(c,K)=>{f2.init(c,K),B4.init(c,K)}),v8=F("$ZodGUID",(c,K)=>{K.pattern??(K.pattern=f6),hc.init(c,K)}),F8=F("$ZodUUID",(c,K)=>{if(K.version){let P={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[K.version];if(P===void 0)throw Error(`Invalid UUID version: "${K.version}"`);K.pattern??(K.pattern=MK(P))}else K.pattern??(K.pattern=MK());hc.init(c,K)}),E8=F("$ZodEmail",(c,K)=>{K.pattern??(K.pattern=e6),hc.init(c,K)}),k8=F("$ZodURL",(c,K)=>{hc.init(c,K),c._zod.check=(w)=>{try{let P=w.value.trim(),h=new URL(P);if(K.hostname){if(K.hostname.lastIndex=0,!K.hostname.test(h.hostname))w.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:d6.source,input:w.value,inst:c,continue:!K.abort})}if(K.protocol){if(K.protocol.lastIndex=0,!K.protocol.test(h.protocol.endsWith(":")?h.protocol.slice(0,-1):h.protocol))w.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:K.protocol.source,input:w.value,inst:c,continue:!K.abort})}if(K.normalize)w.value=h.href;else w.value=P;return}catch(P){w.issues.push({code:"invalid_format",format:"url",input:w.value,inst:c,continue:!K.abort})}}}),g8=F("$ZodEmoji",(c,K)=>{K.pattern??(K.pattern=p6()),hc.init(c,K)}),R8=F("$ZodNanoID",(c,K)=>{K.pattern??(K.pattern=y6),hc.init(c,K)}),x8=F("$ZodCUID",(c,K)=>{K.pattern??(K.pattern=r6),hc.init(c,K)}),Z8=F("$ZodCUID2",(c,K)=>{K.pattern??(K.pattern=o6),hc.init(c,K)}),A8=F("$ZodULID",(c,K)=>{K.pattern??(K.pattern=m6),hc.init(c,K)}),r8=F("$ZodXID",(c,K)=>{K.pattern??(K.pattern=u6),hc.init(c,K)}),o8=F("$ZodKSUID",(c,K)=>{K.pattern??(K.pattern=C6),hc.init(c,K)}),m8=F("$ZodISODateTime",(c,K)=>{K.pattern??(K.pattern=P8(K)),hc.init(c,K)}),u8=F("$ZodISODate",(c,K)=>{K.pattern??(K.pattern=c8),hc.init(c,K)}),C8=F("$ZodISOTime",(c,K)=>{K.pattern??(K.pattern=w8(K)),hc.init(c,K)}),y8=F("$ZodISODuration",(c,K)=>{K.pattern??(K.pattern=_6),hc.init(c,K)}),_8=F("$ZodIPv4",(c,K)=>{K.pattern??(K.pattern=l6),hc.init(c,K),c._zod.onattach.push((w)=>{let P=w._zod.bag;P.format="ipv4"})}),f8=F("$ZodIPv6",(c,K)=>{K.pattern??(K.pattern=T6),hc.init(c,K),c._zod.onattach.push((w)=>{let P=w._zod.bag;P.format="ipv6"}),c._zod.check=(w)=>{try{new URL(`http://[${w.value}]`)}catch{w.issues.push({code:"invalid_format",format:"ipv6",input:w.value,inst:c,continue:!K.abort})}}}),e8=F("$ZodCIDRv4",(c,K)=>{K.pattern??(K.pattern=n6),hc.init(c,K)}),p8=F("$ZodCIDRv6",(c,K)=>{K.pattern??(K.pattern=i6),hc.init(c,K),c._zod.check=(w)=>{let P=w.value.split("/");try{if(P.length!==2)throw Error();let[h,M]=P;if(!M)throw Error();let S=Number(M);if(`${S}`!==M)throw Error();if(S<0||S>128)throw Error();new URL(`http://[${h}]`)}catch{w.issues.push({code:"invalid_format",format:"cidrv6",input:w.value,inst:c,continue:!K.abort})}}});function l8(c){if(c==="")return!0;if(c.length%4!==0)return!1;try{return atob(c),!0}catch{return!1}}var T8=F("$ZodBase64",(c,K)=>{K.pattern??(K.pattern=t6),hc.init(c,K),c._zod.onattach.push((w)=>{w._zod.bag.contentEncoding="base64"}),c._zod.check=(w)=>{if(l8(w.value))return;w.issues.push({code:"invalid_format",format:"base64",input:w.value,inst:c,continue:!K.abort})}});function Y0(c){if(!SK.test(c))return!1;let K=c.replace(/[-_]/g,(P)=>P==="-"?"+":"/"),w=K.padEnd(Math.ceil(K.length/4)*4,"=");return l8(w)}var n8=F("$ZodBase64URL",(c,K)=>{K.pattern??(K.pattern=SK),hc.init(c,K),c._zod.onattach.push((w)=>{w._zod.bag.contentEncoding="base64url"}),c._zod.check=(w)=>{if(Y0(w.value))return;w.issues.push({code:"invalid_format",format:"base64url",input:w.value,inst:c,continue:!K.abort})}}),i8=F("$ZodE164",(c,K)=>{K.pattern??(K.pattern=s6),hc.init(c,K)});function Q0(c,K=null){try{let w=c.split(".");if(w.length!==3)return!1;let[P]=w;if(!P)return!1;let h=JSON.parse(atob(P));if("typ"in h&&h?.typ!=="JWT")return!1;if(!h.alg)return!1;if(K&&(!("alg"in h)||h.alg!==K))return!1;return!0}catch{return!1}}var t8=F("$ZodJWT",(c,K)=>{hc.init(c,K),c._zod.check=(w)=>{if(Q0(w.value,K.alg))return;w.issues.push({code:"invalid_format",format:"jwt",input:w.value,inst:c,continue:!K.abort})}});var d8=F("$ZodUnknown",(c,K)=>{Wc.init(c,K),c._zod.parse=(w)=>w}),s8=F("$ZodNever",(c,K)=>{Wc.init(c,K),c._zod.parse=(w,P)=>{return w.issues.push({expected:"never",code:"invalid_type",input:w.value,inst:c}),w}});function z8(c,K,w){if(c.issues.length)K.issues.push(...u2(w,c.issues));K.value[w]=c.value}var a8=F("$ZodArray",(c,K)=>{Wc.init(c,K),c._zod.parse=(w,P)=>{let h=w.value;if(!Array.isArray(h))return w.issues.push({expected:"array",code:"invalid_type",input:h,inst:c}),w;w.value=Array(h.length);let M=[];for(let S=0;S<h.length;S++){let O=h[S],G=K.element._zod.run({value:O,issues:[]},P);if(G instanceof Promise)M.push(G.then((D)=>z8(D,w,S)));else z8(G,w,S)}if(M.length)return Promise.all(M).then(()=>w);return w}});function $4(c,K,w,P){if(c.issues.length)K.issues.push(...u2(w,c.issues));if(c.value===void 0){if(w in P)K.value[w]=void 0}else K.value[w]=c.value}function c5(c){let K=Object.keys(c.shape);for(let P of K)if(!c.shape?.[P]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${P}": expected a Zod schema`);let w=PK(c.shape);return{...c,keys:K,keySet:new Set(K),numKeys:K.length,optionalKeys:new Set(w)}}function K5(c,K,w,P,h,M){let S=[],O=h.keySet,G=h.catchall._zod,D=G.def.type;for(let $ of Object.keys(K)){if(O.has($))continue;if(D==="never"){S.push($);continue}let L=G.run({value:K[$],issues:[]},P);if(L instanceof Promise)c.push(L.then((B)=>$4(B,w,$,K)));else $4(L,w,$,K)}if(S.length)w.issues.push({code:"unrecognized_keys",keys:S,input:K,inst:M});if(!c.length)return w;return Promise.all(c).then(()=>{return w})}var V0=F("$ZodObject",(c,K)=>{Wc.init(c,K);let w=r2(()=>c5(K));Kc(c._zod,"propValues",()=>{let S=K.shape,O={};for(let G in S){let D=S[G]._zod;if(D.values){O[G]??(O[G]=new Set);for(let $ of D.values)O[G].add($)}}return O});let P=q2,h=K.catchall,M;c._zod.parse=(S,O)=>{M??(M=w.value);let G=S.value;if(!P(G))return S.issues.push({expected:"object",code:"invalid_type",input:G,inst:c}),S;S.value={};let D=[],$=M.shape;for(let L of M.keys){let q=$[L]._zod.run({value:G[L],issues:[]},O);if(q instanceof Promise)D.push(q.then((J)=>$4(J,S,L,G)));else $4(q,S,L,G)}if(!h)return D.length?Promise.all(D).then(()=>S):S;return K5(D,G,S,O,w.value,c)}}),w5=F("$ZodObjectJIT",(c,K)=>{V0.init(c,K);let w=c._zod.parse,P=r2(()=>c5(K)),h=(B)=>{let q=new bK(["shape","payload","ctx"]),J=P.value,z=(X)=>{let W=W4(X);return`shape[${W}]._zod.run({ value: input[${W}], issues: [] }, ctx)`};q.write("const input = payload.value;");let H=Object.create(null),b=0;for(let X of J.keys)H[X]=`key_${b++}`;q.write("const newResult = {};");for(let X of J.keys){let W=H[X],V=W4(X);q.write(`const ${W} = ${z(X)};`),q.write(`
        if (${W}.issues.length) {
          payload.issues = payload.issues.concat(${W}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${V}, ...iss.path] : [${V}]
          })));
        }
        
        
        if (${W}.value === undefined) {
          if (${V} in input) {
            newResult[${V}] = undefined;
          }
        } else {
          newResult[${V}] = ${W}.value;
        }
        
      `)}q.write("payload.value = newResult;"),q.write("return payload;");let Q=q.compile();return(X,W)=>Q(B,X,W)},M,S=q2,O=!J4.jitless,D=O&&KK.value,$=K.catchall,L;c._zod.parse=(B,q)=>{L??(L=P.value);let J=B.value;if(!S(J))return B.issues.push({expected:"object",code:"invalid_type",input:J,inst:c}),B;if(O&&D&&q?.async===!1&&q.jitless!==!0){if(!M)M=h(K.shape);if(B=M(B,q),!$)return B;return K5([],J,B,q,L,c)}return w(B,q)}});function U8(c,K,w,P){for(let M of c)if(M.issues.length===0)return K.value=M.value,K;let h=c.filter((M)=>!S2(M));if(h.length===1)return K.value=h[0].value,h[0];return K.issues.push({code:"invalid_union",input:K.value,inst:w,errors:c.map((M)=>M.issues.map((S)=>uc(S,P,nc())))}),K}var P5=F("$ZodUnion",(c,K)=>{Wc.init(c,K),Kc(c._zod,"optin",()=>K.options.some((h)=>h._zod.optin==="optional")?"optional":void 0),Kc(c._zod,"optout",()=>K.options.some((h)=>h._zod.optout==="optional")?"optional":void 0),Kc(c._zod,"values",()=>{if(K.options.every((h)=>h._zod.values))return new Set(K.options.flatMap((h)=>Array.from(h._zod.values)));return}),Kc(c._zod,"pattern",()=>{if(K.options.every((h)=>h._zod.pattern)){let h=K.options.map((M)=>M._zod.pattern);return new RegExp(`^(${h.map((M)=>m2(M.source)).join("|")})$`)}return});let w=K.options.length===1,P=K.options[0]._zod.run;c._zod.parse=(h,M)=>{if(w)return P(h,M);let S=!1,O=[];for(let G of K.options){let D=G._zod.run({value:h.value,issues:[]},M);if(D instanceof Promise)O.push(D),S=!0;else{if(D.issues.length===0)return D;O.push(D)}}if(!S)return U8(O,h,c,M);return Promise.all(O).then((G)=>{return U8(G,h,c,M)})}});var h5=F("$ZodIntersection",(c,K)=>{Wc.init(c,K),c._zod.parse=(w,P)=>{let h=w.value,M=K.left._zod.run({value:h,issues:[]},P),S=K.right._zod.run({value:h,issues:[]},P);if(M instanceof Promise||S instanceof Promise)return Promise.all([M,S]).then(([G,D])=>{return Y8(w,G,D)});return Y8(w,M,S)}});function OK(c,K){if(c===K)return{valid:!0,data:c};if(c instanceof Date&&K instanceof Date&&+c===+K)return{valid:!0,data:c};if(X2(c)&&X2(K)){let w=Object.keys(K),P=Object.keys(c).filter((M)=>w.indexOf(M)!==-1),h={...c,...K};for(let M of P){let S=OK(c[M],K[M]);if(!S.valid)return{valid:!1,mergeErrorPath:[M,...S.mergeErrorPath]};h[M]=S.data}return{valid:!0,data:h}}if(Array.isArray(c)&&Array.isArray(K)){if(c.length!==K.length)return{valid:!1,mergeErrorPath:[]};let w=[];for(let P=0;P<c.length;P++){let h=c[P],M=K[P],S=OK(h,M);if(!S.valid)return{valid:!1,mergeErrorPath:[P,...S.mergeErrorPath]};w.push(S.data)}return{valid:!0,data:w}}return{valid:!1,mergeErrorPath:[]}}function Y8(c,K,w){if(K.issues.length)c.issues.push(...K.issues);if(w.issues.length)c.issues.push(...w.issues);if(S2(c))return c;let P=OK(K.value,w.value);if(!P.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(P.mergeErrorPath)}`);return c.value=P.data,c}var M5=F("$ZodEnum",(c,K)=>{Wc.init(c,K);let w=cK(K.entries),P=new Set(w);c._zod.values=P,c._zod.pattern=new RegExp(`^(${w.filter((h)=>wK.has(typeof h)).map((h)=>typeof h==="string"?$2(h):h.toString()).join("|")})$`),c._zod.parse=(h,M)=>{let S=h.value;if(P.has(S))return h;return h.issues.push({code:"invalid_value",values:w,input:S,inst:c}),h}});var S5=F("$ZodTransform",(c,K)=>{Wc.init(c,K),c._zod.parse=(w,P)=>{if(P.direction==="backward")throw new Z2(c.constructor.name);let h=K.transform(w.value,w);if(P.async)return(h instanceof Promise?h:Promise.resolve(h)).then((S)=>{return w.value=S,w});if(h instanceof Promise)throw new Tc;return w.value=h,w}});function Q8(c,K){if(c.issues.length&&K===void 0)return{issues:[],value:void 0};return c}var b5=F("$ZodOptional",(c,K)=>{Wc.init(c,K),c._zod.optin="optional",c._zod.optout="optional",Kc(c._zod,"values",()=>{return K.innerType._zod.values?new Set([...K.innerType._zod.values,void 0]):void 0}),Kc(c._zod,"pattern",()=>{let w=K.innerType._zod.pattern;return w?new RegExp(`^(${m2(w.source)})?$`):void 0}),c._zod.parse=(w,P)=>{if(K.innerType._zod.optin==="optional"){let h=K.innerType._zod.run(w,P);if(h instanceof Promise)return h.then((M)=>Q8(M,w.value));return Q8(h,w.value)}if(w.value===void 0)return w;return K.innerType._zod.run(w,P)}}),O5=F("$ZodNullable",(c,K)=>{Wc.init(c,K),Kc(c._zod,"optin",()=>K.innerType._zod.optin),Kc(c._zod,"optout",()=>K.innerType._zod.optout),Kc(c._zod,"pattern",()=>{let w=K.innerType._zod.pattern;return w?new RegExp(`^(${m2(w.source)}|null)$`):void 0}),Kc(c._zod,"values",()=>{return K.innerType._zod.values?new Set([...K.innerType._zod.values,null]):void 0}),c._zod.parse=(w,P)=>{if(w.value===null)return w;return K.innerType._zod.run(w,P)}}),J5=F("$ZodDefault",(c,K)=>{Wc.init(c,K),c._zod.optin="optional",Kc(c._zod,"values",()=>K.innerType._zod.values),c._zod.parse=(w,P)=>{if(P.direction==="backward")return K.innerType._zod.run(w,P);if(w.value===void 0)return w.value=K.defaultValue,w;let h=K.innerType._zod.run(w,P);if(h instanceof Promise)return h.then((M)=>V8(M,K));return V8(h,K)}});function V8(c,K){if(c.value===void 0)c.value=K.defaultValue;return c}var W5=F("$ZodPrefault",(c,K)=>{Wc.init(c,K),c._zod.optin="optional",Kc(c._zod,"values",()=>K.innerType._zod.values),c._zod.parse=(w,P)=>{if(P.direction==="backward")return K.innerType._zod.run(w,P);if(w.value===void 0)w.value=K.defaultValue;return K.innerType._zod.run(w,P)}}),N5=F("$ZodNonOptional",(c,K)=>{Wc.init(c,K),Kc(c._zod,"values",()=>{let w=K.innerType._zod.values;return w?new Set([...w].filter((P)=>P!==void 0)):void 0}),c._zod.parse=(w,P)=>{let h=K.innerType._zod.run(w,P);if(h instanceof Promise)return h.then((M)=>q8(M,c));return q8(h,c)}});function q8(c,K){if(!c.issues.length&&c.value===void 0)c.issues.push({code:"invalid_type",expected:"nonoptional",input:c.value,inst:K});return c}var I5=F("$ZodCatch",(c,K)=>{Wc.init(c,K),Kc(c._zod,"optin",()=>K.innerType._zod.optin),Kc(c._zod,"optout",()=>K.innerType._zod.optout),Kc(c._zod,"values",()=>K.innerType._zod.values),c._zod.parse=(w,P)=>{if(P.direction==="backward")return K.innerType._zod.run(w,P);let h=K.innerType._zod.run(w,P);if(h instanceof Promise)return h.then((M)=>{if(w.value=M.value,M.issues.length)w.value=K.catchValue({...w,error:{issues:M.issues.map((S)=>uc(S,P,nc()))},input:w.value}),w.issues=[];return w});if(w.value=h.value,h.issues.length)w.value=K.catchValue({...w,error:{issues:h.issues.map((M)=>uc(M,P,nc()))},input:w.value}),w.issues=[];return w}});var D5=F("$ZodPipe",(c,K)=>{Wc.init(c,K),Kc(c._zod,"values",()=>K.in._zod.values),Kc(c._zod,"optin",()=>K.in._zod.optin),Kc(c._zod,"optout",()=>K.out._zod.optout),Kc(c._zod,"propValues",()=>K.in._zod.propValues),c._zod.parse=(w,P)=>{if(P.direction==="backward"){let M=K.out._zod.run(w,P);if(M instanceof Promise)return M.then((S)=>X4(S,K.in,P));return X4(M,K.in,P)}let h=K.in._zod.run(w,P);if(h instanceof Promise)return h.then((M)=>X4(M,K.out,P));return X4(h,K.out,P)}});function X4(c,K,w){if(c.issues.length)return c.aborted=!0,c;return K._zod.run({value:c.value,issues:c.issues},w)}var G5=F("$ZodReadonly",(c,K)=>{Wc.init(c,K),Kc(c._zod,"propValues",()=>K.innerType._zod.propValues),Kc(c._zod,"values",()=>K.innerType._zod.values),Kc(c._zod,"optin",()=>K.innerType._zod.optin),Kc(c._zod,"optout",()=>K.innerType._zod.optout),c._zod.parse=(w,P)=>{if(P.direction==="backward")return K.innerType._zod.run(w,P);let h=K.innerType._zod.run(w,P);if(h instanceof Promise)return h.then(L8);return L8(h)}});function L8(c){return c.value=Object.freeze(c.value),c}var j5=F("$ZodCustom",(c,K)=>{qc.init(c,K),Wc.init(c,K),c._zod.parse=(w,P)=>{return w},c._zod.check=(w)=>{let P=w.value,h=K.fn(P);if(h instanceof Promise)return h.then((M)=>H8(M,w,P,c));H8(h,w,P,c);return}});function H8(c,K,w,P){if(!c){let h={code:"custom",input:w,inst:P,path:[...P._zod.def.path??[]],continue:!P._zod.def.abort};if(P._zod.def.params)h.params=P._zod.def.params;K.issues.push(H2(h))}}var r9=Symbol("ZodOutput"),o9=Symbol("ZodInput");class X5{constructor(){this._map=new WeakMap,this._idmap=new Map}add(c,...K){let w=K[0];if(this._map.set(c,w),w&&typeof w==="object"&&"id"in w){if(this._idmap.has(w.id))throw Error(`ID ${w.id} already exists in the registry`);this._idmap.set(w.id,c)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(c){let K=this._map.get(c);if(K&&typeof K==="object"&&"id"in K)this._idmap.delete(K.id);return this._map.delete(c),this}get(c){let K=c._zod.parent;if(K){let w={...this.get(K)??{}};delete w.id;let P={...w,...this._map.get(c)};return Object.keys(P).length?P:void 0}return this._map.get(c)}has(c){return this._map.has(c)}}function q0(){return new X5}var e2=q0();function $5(c,K){return new c({type:"string",...e(K)})}function JK(c,K){return new c({type:"string",format:"email",check:"string_format",abort:!1,...e(K)})}function WK(c,K){return new c({type:"string",format:"guid",check:"string_format",abort:!1,...e(K)})}function B5(c,K){return new c({type:"string",format:"uuid",check:"string_format",abort:!1,...e(K)})}function z5(c,K){return new c({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...e(K)})}function U5(c,K){return new c({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...e(K)})}function Y5(c,K){return new c({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...e(K)})}function Q5(c,K){return new c({type:"string",format:"url",check:"string_format",abort:!1,...e(K)})}function V5(c,K){return new c({type:"string",format:"emoji",check:"string_format",abort:!1,...e(K)})}function q5(c,K){return new c({type:"string",format:"nanoid",check:"string_format",abort:!1,...e(K)})}function L5(c,K){return new c({type:"string",format:"cuid",check:"string_format",abort:!1,...e(K)})}function H5(c,K){return new c({type:"string",format:"cuid2",check:"string_format",abort:!1,...e(K)})}function v5(c,K){return new c({type:"string",format:"ulid",check:"string_format",abort:!1,...e(K)})}function F5(c,K){return new c({type:"string",format:"xid",check:"string_format",abort:!1,...e(K)})}function E5(c,K){return new c({type:"string",format:"ksuid",check:"string_format",abort:!1,...e(K)})}function k5(c,K){return new c({type:"string",format:"ipv4",check:"string_format",abort:!1,...e(K)})}function g5(c,K){return new c({type:"string",format:"ipv6",check:"string_format",abort:!1,...e(K)})}function R5(c,K){return new c({type:"string",format:"cidrv4",check:"string_format",abort:!1,...e(K)})}function x5(c,K){return new c({type:"string",format:"cidrv6",check:"string_format",abort:!1,...e(K)})}function Z5(c,K){return new c({type:"string",format:"base64",check:"string_format",abort:!1,...e(K)})}function A5(c,K){return new c({type:"string",format:"base64url",check:"string_format",abort:!1,...e(K)})}function r5(c,K){return new c({type:"string",format:"e164",check:"string_format",abort:!1,...e(K)})}function o5(c,K){return new c({type:"string",format:"jwt",check:"string_format",abort:!1,...e(K)})}function m5(c,K){return new c({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...e(K)})}function u5(c,K){return new c({type:"string",format:"date",check:"string_format",...e(K)})}function C5(c,K){return new c({type:"string",format:"time",check:"string_format",precision:null,...e(K)})}function y5(c,K){return new c({type:"string",format:"duration",check:"string_format",...e(K)})}function _5(c){return new c({type:"unknown"})}function f5(c,K){return new c({type:"never",...e(K)})}function z4(c,K){return new b8({check:"max_length",...e(K),maximum:c})}function v2(c,K){return new O8({check:"min_length",...e(K),minimum:c})}function U4(c,K){return new J8({check:"length_equals",...e(K),length:c})}function NK(c,K){return new W8({check:"string_format",format:"regex",...e(K),pattern:c})}function IK(c){return new N8({check:"string_format",format:"lowercase",...e(c)})}function DK(c){return new I8({check:"string_format",format:"uppercase",...e(c)})}function GK(c,K){return new D8({check:"string_format",format:"includes",...e(K),includes:c})}function jK(c,K){return new G8({check:"string_format",format:"starts_with",...e(K),prefix:c})}function XK(c,K){return new j8({check:"string_format",format:"ends_with",...e(K),suffix:c})}function B2(c){return new X8({check:"overwrite",tx:c})}function $K(c){return B2((K)=>K.normalize(c))}function BK(){return B2((c)=>c.trim())}function zK(){return B2((c)=>c.toLowerCase())}function UK(){return B2((c)=>c.toUpperCase())}function e5(c,K,w){return new c({type:"array",element:K,...e(w)})}function p5(c,K,w){return new c({type:"custom",check:"custom",fn:K,...e(w)})}function l5(c){let K=L0((w)=>{return w.addIssue=(P)=>{if(typeof P==="string")w.issues.push(H2(P,w.value,K._zod.def));else{let h=P;if(h.fatal)h.continue=!1;h.code??(h.code="custom"),h.input??(h.input=w.value),h.inst??(h.inst=K),h.continue??(h.continue=!K._zod.def.abort),w.issues.push(H2(h))}},c(w.value,w)});return K}function L0(c,K){let w=new qc({check:"custom",...e(K)});return w._zod.check=c,w}var r0=F("ZodISODateTime",(c,K)=>{m8.init(c,K),Sc.init(c,K)});function T5(c){return m5(r0,c)}var o0=F("ZodISODate",(c,K)=>{u8.init(c,K),Sc.init(c,K)});function n5(c){return u5(o0,c)}var m0=F("ZodISOTime",(c,K)=>{C8.init(c,K),Sc.init(c,K)});function i5(c){return C5(m0,c)}var u0=F("ZodISODuration",(c,K)=>{y8.init(c,K),Sc.init(c,K)});function t5(c){return y5(u0,c)}var d5=(c,K)=>{I4.init(c,K),c.name="ZodError",Object.defineProperties(c,{format:{value:(w)=>L6(c,w)},flatten:{value:(w)=>q6(c,w)},addIssue:{value:(w)=>{c.issues.push(w),c.message=JSON.stringify(c.issues,L2,2)}},addIssues:{value:(w)=>{c.issues.push(...w),c.message=JSON.stringify(c.issues,L2,2)}},isEmpty:{get(){return c.issues.length===0}}})},DP=F("ZodError",d5),Lc=F("ZodError",d5,{Parent:Error});var s5=D4(Lc),a5=G4(Lc),c3=y2(Lc),K3=_2(Lc),w3=F6(Lc),P3=E6(Lc),h3=k6(Lc),M3=g6(Lc),S3=R6(Lc),b3=x6(Lc),O3=Z6(Lc),J3=A6(Lc);var Ic=F("ZodType",(c,K)=>{return Wc.init(c,K),c.def=K,c.type=K.type,Object.defineProperty(c,"_def",{value:K}),c.check=(...w)=>{return c.clone({...K,checks:[...K.checks??[],...w.map((P)=>typeof P==="function"?{_zod:{check:P,def:{check:"custom"},onattach:[]}}:P)]})},c.clone=(w,P)=>Rc(c,w,P),c.brand=()=>c,c.register=(w,P)=>{return w.add(c,P),c},c.parse=(w,P)=>s5(c,w,P,{callee:c.parse}),c.safeParse=(w,P)=>c3(c,w,P),c.parseAsync=async(w,P)=>a5(c,w,P,{callee:c.parseAsync}),c.safeParseAsync=async(w,P)=>K3(c,w,P),c.spa=c.safeParseAsync,c.encode=(w,P)=>w3(c,w,P),c.decode=(w,P)=>P3(c,w,P),c.encodeAsync=async(w,P)=>h3(c,w,P),c.decodeAsync=async(w,P)=>M3(c,w,P),c.safeEncode=(w,P)=>S3(c,w,P),c.safeDecode=(w,P)=>b3(c,w,P),c.safeEncodeAsync=async(w,P)=>O3(c,w,P),c.safeDecodeAsync=async(w,P)=>J3(c,w,P),c.refine=(w,P)=>c.check(g1(w,P)),c.superRefine=(w)=>c.check(R1(w)),c.overwrite=(w)=>c.check(B2(w)),c.optional=()=>I3(c),c.nullable=()=>D3(c),c.nullish=()=>I3(D3(c)),c.nonoptional=(w)=>q1(c,w),c.array=()=>W1(c),c.or=(w)=>D1([c,w]),c.and=(w)=>j1(c,w),c.transform=(w)=>G3(c,B1(w)),c.default=(w)=>Y1(c,w),c.prefault=(w)=>V1(c,w),c.catch=(w)=>H1(c,w),c.pipe=(w)=>G3(c,w),c.readonly=()=>E1(c),c.describe=(w)=>{let P=c.clone();return e2.add(P,{description:w}),P},Object.defineProperty(c,"description",{get(){return e2.get(c)?.description},configurable:!0}),c.meta=(...w)=>{if(w.length===0)return e2.get(c);let P=c.clone();return e2.add(P,w[0]),P},c.isOptional=()=>c.safeParse(void 0).success,c.isNullable=()=>c.safeParse(null).success,c}),j3=F("_ZodString",(c,K)=>{B4.init(c,K),Ic.init(c,K);let w=c._zod.bag;c.format=w.format??null,c.minLength=w.minimum??null,c.maxLength=w.maximum??null,c.regex=(...P)=>c.check(NK(...P)),c.includes=(...P)=>c.check(GK(...P)),c.startsWith=(...P)=>c.check(jK(...P)),c.endsWith=(...P)=>c.check(XK(...P)),c.min=(...P)=>c.check(v2(...P)),c.max=(...P)=>c.check(z4(...P)),c.length=(...P)=>c.check(U4(...P)),c.nonempty=(...P)=>c.check(v2(1,...P)),c.lowercase=(P)=>c.check(IK(P)),c.uppercase=(P)=>c.check(DK(P)),c.trim=()=>c.check(BK()),c.normalize=(...P)=>c.check($K(...P)),c.toLowerCase=()=>c.check(zK()),c.toUpperCase=()=>c.check(UK())}),f0=F("ZodString",(c,K)=>{B4.init(c,K),j3.init(c,K),c.email=(w)=>c.check(JK($3,w)),c.url=(w)=>c.check(Q5(e0,w)),c.jwt=(w)=>c.check(o5(M1,w)),c.emoji=(w)=>c.check(V5(p0,w)),c.guid=(w)=>c.check(WK(W3,w)),c.uuid=(w)=>c.check(B5(Q4,w)),c.uuidv4=(w)=>c.check(z5(Q4,w)),c.uuidv6=(w)=>c.check(U5(Q4,w)),c.uuidv7=(w)=>c.check(Y5(Q4,w)),c.nanoid=(w)=>c.check(q5(l0,w)),c.guid=(w)=>c.check(WK(W3,w)),c.cuid=(w)=>c.check(L5(T0,w)),c.cuid2=(w)=>c.check(H5(n0,w)),c.ulid=(w)=>c.check(v5(i0,w)),c.base64=(w)=>c.check(Z5(w1,w)),c.base64url=(w)=>c.check(A5(P1,w)),c.xid=(w)=>c.check(F5(t0,w)),c.ksuid=(w)=>c.check(E5(d0,w)),c.ipv4=(w)=>c.check(k5(s0,w)),c.ipv6=(w)=>c.check(g5(a0,w)),c.cidrv4=(w)=>c.check(R5(c1,w)),c.cidrv6=(w)=>c.check(x5(K1,w)),c.e164=(w)=>c.check(r5(h1,w)),c.datetime=(w)=>c.check(T5(w)),c.date=(w)=>c.check(n5(w)),c.time=(w)=>c.check(i5(w)),c.duration=(w)=>c.check(t5(w))});function X3(c){return $5(f0,c)}var Sc=F("ZodStringFormat",(c,K)=>{hc.init(c,K),j3.init(c,K)}),$3=F("ZodEmail",(c,K)=>{E8.init(c,K),Sc.init(c,K)});function B3(c){return JK($3,c)}var W3=F("ZodGUID",(c,K)=>{v8.init(c,K),Sc.init(c,K)});var Q4=F("ZodUUID",(c,K)=>{F8.init(c,K),Sc.init(c,K)});var e0=F("ZodURL",(c,K)=>{k8.init(c,K),Sc.init(c,K)});var p0=F("ZodEmoji",(c,K)=>{g8.init(c,K),Sc.init(c,K)});var l0=F("ZodNanoID",(c,K)=>{R8.init(c,K),Sc.init(c,K)});var T0=F("ZodCUID",(c,K)=>{x8.init(c,K),Sc.init(c,K)});var n0=F("ZodCUID2",(c,K)=>{Z8.init(c,K),Sc.init(c,K)});var i0=F("ZodULID",(c,K)=>{A8.init(c,K),Sc.init(c,K)});var t0=F("ZodXID",(c,K)=>{r8.init(c,K),Sc.init(c,K)});var d0=F("ZodKSUID",(c,K)=>{o8.init(c,K),Sc.init(c,K)});var s0=F("ZodIPv4",(c,K)=>{_8.init(c,K),Sc.init(c,K)});var a0=F("ZodIPv6",(c,K)=>{f8.init(c,K),Sc.init(c,K)});var c1=F("ZodCIDRv4",(c,K)=>{e8.init(c,K),Sc.init(c,K)});var K1=F("ZodCIDRv6",(c,K)=>{p8.init(c,K),Sc.init(c,K)});var w1=F("ZodBase64",(c,K)=>{T8.init(c,K),Sc.init(c,K)});var P1=F("ZodBase64URL",(c,K)=>{n8.init(c,K),Sc.init(c,K)});var h1=F("ZodE164",(c,K)=>{i8.init(c,K),Sc.init(c,K)});var M1=F("ZodJWT",(c,K)=>{t8.init(c,K),Sc.init(c,K)});var S1=F("ZodUnknown",(c,K)=>{d8.init(c,K),Ic.init(c,K)});function N3(){return _5(S1)}var b1=F("ZodNever",(c,K)=>{s8.init(c,K),Ic.init(c,K)});function O1(c){return f5(b1,c)}var J1=F("ZodArray",(c,K)=>{a8.init(c,K),Ic.init(c,K),c.element=K.element,c.min=(w,P)=>c.check(v2(w,P)),c.nonempty=(w)=>c.check(v2(1,w)),c.max=(w,P)=>c.check(z4(w,P)),c.length=(w,P)=>c.check(U4(w,P)),c.unwrap=()=>c.element});function W1(c,K){return e5(J1,c,K)}var N1=F("ZodObject",(c,K)=>{w5.init(c,K),Ic.init(c,K),a.defineLazy(c,"shape",()=>K.shape),c.keyof=()=>X1(Object.keys(c._zod.def.shape)),c.catchall=(w)=>c.clone({...c._zod.def,catchall:w}),c.passthrough=()=>c.clone({...c._zod.def,catchall:N3()}),c.loose=()=>c.clone({...c._zod.def,catchall:N3()}),c.strict=()=>c.clone({...c._zod.def,catchall:O1()}),c.strip=()=>c.clone({...c._zod.def,catchall:void 0}),c.extend=(w)=>{return a.extend(c,w)},c.safeExtend=(w)=>{return a.safeExtend(c,w)},c.merge=(w)=>a.merge(c,w),c.pick=(w)=>a.pick(c,w),c.omit=(w)=>a.omit(c,w),c.partial=(...w)=>a.partial(U3,c,w[0]),c.required=(...w)=>a.required(Y3,c,w[0])});function z3(c,K){let w={type:"object",get shape(){return a.assignProp(this,"shape",c?a.objectClone(c):{}),this.shape},...a.normalizeParams(K)};return new N1(w)}var I1=F("ZodUnion",(c,K)=>{P5.init(c,K),Ic.init(c,K),c.options=K.options});function D1(c,K){return new I1({type:"union",options:c,...a.normalizeParams(K)})}var G1=F("ZodIntersection",(c,K)=>{h5.init(c,K),Ic.init(c,K)});function j1(c,K){return new G1({type:"intersection",left:c,right:K})}var YK=F("ZodEnum",(c,K)=>{M5.init(c,K),Ic.init(c,K),c.enum=K.entries,c.options=Object.values(K.entries);let w=new Set(Object.keys(K.entries));c.extract=(P,h)=>{let M={};for(let S of P)if(w.has(S))M[S]=K.entries[S];else throw Error(`Key ${S} not found in enum`);return new YK({...K,checks:[],...a.normalizeParams(h),entries:M})},c.exclude=(P,h)=>{let M={...K.entries};for(let S of P)if(w.has(S))delete M[S];else throw Error(`Key ${S} not found in enum`);return new YK({...K,checks:[],...a.normalizeParams(h),entries:M})}});function X1(c,K){let w=Array.isArray(c)?Object.fromEntries(c.map((P)=>[P,P])):c;return new YK({type:"enum",entries:w,...a.normalizeParams(K)})}var $1=F("ZodTransform",(c,K)=>{S5.init(c,K),Ic.init(c,K),c._zod.parse=(w,P)=>{if(P.direction==="backward")throw new Z2(c.constructor.name);w.addIssue=(M)=>{if(typeof M==="string")w.issues.push(a.issue(M,w.value,K));else{let S=M;if(S.fatal)S.continue=!1;S.code??(S.code="custom"),S.input??(S.input=w.value),S.inst??(S.inst=c),w.issues.push(a.issue(S))}};let h=K.transform(w.value,w);if(h instanceof Promise)return h.then((M)=>{return w.value=M,w});return w.value=h,w}});function B1(c){return new $1({type:"transform",transform:c})}var U3=F("ZodOptional",(c,K)=>{b5.init(c,K),Ic.init(c,K),c.unwrap=()=>c._zod.def.innerType});function I3(c){return new U3({type:"optional",innerType:c})}var z1=F("ZodNullable",(c,K)=>{O5.init(c,K),Ic.init(c,K),c.unwrap=()=>c._zod.def.innerType});function D3(c){return new z1({type:"nullable",innerType:c})}var U1=F("ZodDefault",(c,K)=>{J5.init(c,K),Ic.init(c,K),c.unwrap=()=>c._zod.def.innerType,c.removeDefault=c.unwrap});function Y1(c,K){return new U1({type:"default",innerType:c,get defaultValue(){return typeof K==="function"?K():a.shallowClone(K)}})}var Q1=F("ZodPrefault",(c,K)=>{W5.init(c,K),Ic.init(c,K),c.unwrap=()=>c._zod.def.innerType});function V1(c,K){return new Q1({type:"prefault",innerType:c,get defaultValue(){return typeof K==="function"?K():a.shallowClone(K)}})}var Y3=F("ZodNonOptional",(c,K)=>{N5.init(c,K),Ic.init(c,K),c.unwrap=()=>c._zod.def.innerType});function q1(c,K){return new Y3({type:"nonoptional",innerType:c,...a.normalizeParams(K)})}var L1=F("ZodCatch",(c,K)=>{I5.init(c,K),Ic.init(c,K),c.unwrap=()=>c._zod.def.innerType,c.removeCatch=c.unwrap});function H1(c,K){return new L1({type:"catch",innerType:c,catchValue:typeof K==="function"?K:()=>K})}var v1=F("ZodPipe",(c,K)=>{D5.init(c,K),Ic.init(c,K),c.in=K.in,c.out=K.out});function G3(c,K){return new v1({type:"pipe",in:c,out:K})}var F1=F("ZodReadonly",(c,K)=>{G5.init(c,K),Ic.init(c,K),c.unwrap=()=>c._zod.def.innerType});function E1(c){return new F1({type:"readonly",innerType:c})}var k1=F("ZodCustom",(c,K)=>{j5.init(c,K),Ic.init(c,K)});function g1(c,K={}){return p5(k1,c,K)}function R1(c){return l5(c)}var ic=new TextEncoder,F2=new TextDecoder;function Q3(...c){let K=c.reduce((h,{length:M})=>h+M,0),w=new Uint8Array(K),P=0;for(let h of c)w.set(h,P),P+=h.length;return w}function V3(c){if(Uint8Array.prototype.toBase64)return c.toBase64();let K=32768,w=[];for(let P=0;P<c.length;P+=K)w.push(String.fromCharCode.apply(null,c.subarray(P,P+K)));return btoa(w.join(""))}function q3(c){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(c);let K=atob(c),w=new Uint8Array(K.length);for(let P=0;P<K.length;P++)w[P]=K.charCodeAt(P);return w}function L3(c){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof c==="string"?c:F2.decode(c),{alphabet:"base64url"});let K=c;if(K instanceof Uint8Array)K=F2.decode(K);K=K.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return q3(K)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function V4(c){let K=c;if(typeof K==="string")K=ic.encode(K);if(Uint8Array.prototype.toBase64)return K.toBase64({alphabet:"base64url",omitPadding:!0});return V3(K).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class q4 extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(c,K){super(c,K);this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class xc extends q4{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class b2 extends q4{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class QK extends q4{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}function Cc(c,K="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${K} must be ${c}`)}function E2(c,K){return c.name===K}function VK(c){return parseInt(c.name.slice(4),10)}function A1(c){switch(c){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}function r1(c,K){if(K&&!c.usages.includes(K))throw TypeError(`CryptoKey does not support this operation, its usages must include ${K}.`)}function H3(c,K,w){switch(K){case"HS256":case"HS384":case"HS512":{if(!E2(c.algorithm,"HMAC"))throw Cc("HMAC");let P=parseInt(K.slice(2),10);if(VK(c.algorithm.hash)!==P)throw Cc(`SHA-${P}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!E2(c.algorithm,"RSASSA-PKCS1-v1_5"))throw Cc("RSASSA-PKCS1-v1_5");let P=parseInt(K.slice(2),10);if(VK(c.algorithm.hash)!==P)throw Cc(`SHA-${P}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!E2(c.algorithm,"RSA-PSS"))throw Cc("RSA-PSS");let P=parseInt(K.slice(2),10);if(VK(c.algorithm.hash)!==P)throw Cc(`SHA-${P}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!E2(c.algorithm,"Ed25519"))throw Cc("Ed25519");break}case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":{if(!E2(c.algorithm,K))throw Cc(K);break}case"ES256":case"ES384":case"ES512":{if(!E2(c.algorithm,"ECDSA"))throw Cc("ECDSA");let P=A1(K);if(c.algorithm.namedCurve!==P)throw Cc(P,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}r1(c,w)}function v3(c,K,...w){if(w=w.filter(Boolean),w.length>2){let P=w.pop();c+=`one of type ${w.join(", ")}, or ${P}.`}else if(w.length===2)c+=`one of type ${w[0]} or ${w[1]}.`;else c+=`of type ${w[0]}.`;if(K==null)c+=` Received ${K}`;else if(typeof K==="function"&&K.name)c+=` Received function ${K.name}`;else if(typeof K==="object"&&K!=null){if(K.constructor?.name)c+=` Received an instance of ${K.constructor.name}`}return c}var F3=(c,...K)=>{return v3("Key must be ",c,...K)};function qK(c,K,...w){return v3(`Key for the ${c} algorithm must be `,K,...w)}function LK(c){return c?.[Symbol.toStringTag]==="CryptoKey"}function HK(c){return c?.[Symbol.toStringTag]==="KeyObject"}var vK=(c)=>{return LK(c)||HK(c)};var E3=(...c)=>{let K=c.filter(Boolean);if(K.length===0||K.length===1)return!0;let w;for(let P of K){let h=Object.keys(P);if(!w||w.size===0){w=new Set(h);continue}for(let M of h){if(w.has(M))return!1;w.add(M)}}return!0};function o1(c){return typeof c==="object"&&c!==null}var L4=(c)=>{if(!o1(c)||Object.prototype.toString.call(c)!=="[object Object]")return!1;if(Object.getPrototypeOf(c)===null)return!0;let K=c;while(Object.getPrototypeOf(K)!==null)K=Object.getPrototypeOf(K);return Object.getPrototypeOf(c)===K};var k3=(c,K)=>{if(c.startsWith("RS")||c.startsWith("PS")){let{modulusLength:w}=K.algorithm;if(typeof w!=="number"||w<2048)throw TypeError(`${c} requires key modulusLength to be 2048 bits or larger`)}};function m1(c){let K,w;switch(c.kty){case"AKP":{switch(c.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":K={name:c.alg},w=c.priv?["sign"]:["verify"];break;default:throw new xc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(c.alg){case"PS256":case"PS384":case"PS512":K={name:"RSA-PSS",hash:`SHA-${c.alg.slice(-3)}`},w=c.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":K={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${c.alg.slice(-3)}`},w=c.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":K={name:"RSA-OAEP",hash:`SHA-${parseInt(c.alg.slice(-3),10)||1}`},w=c.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new xc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(c.alg){case"ES256":K={name:"ECDSA",namedCurve:"P-256"},w=c.d?["sign"]:["verify"];break;case"ES384":K={name:"ECDSA",namedCurve:"P-384"},w=c.d?["sign"]:["verify"];break;case"ES512":K={name:"ECDSA",namedCurve:"P-521"},w=c.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":K={name:"ECDH",namedCurve:c.crv},w=c.d?["deriveBits"]:[];break;default:throw new xc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(c.alg){case"Ed25519":case"EdDSA":K={name:"Ed25519"},w=c.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":K={name:c.crv},w=c.d?["deriveBits"]:[];break;default:throw new xc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new xc('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:K,keyUsages:w}}var g3=async(c)=>{if(!c.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:K,keyUsages:w}=m1(c),P={...c};if(P.kty!=="AKP")delete P.alg;return delete P.use,crypto.subtle.importKey("jwk",P,K,c.ext??(c.d||c.priv?!1:!0),c.key_ops??w)};var R3=(c,K,w,P,h)=>{if(h.crit!==void 0&&P?.crit===void 0)throw new c('"crit" (Critical) Header Parameter MUST be integrity protected');if(!P||P.crit===void 0)return new Set;if(!Array.isArray(P.crit)||P.crit.length===0||P.crit.some((S)=>typeof S!=="string"||S.length===0))throw new c('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let M;if(w!==void 0)M=new Map([...Object.entries(w),...K.entries()]);else M=K;for(let S of P.crit){if(!M.has(S))throw new xc(`Extension Header Parameter "${S}" is not recognized`);if(h[S]===void 0)throw new c(`Extension Header Parameter "${S}" is missing`);if(M.get(S)&&P[S]===void 0)throw new c(`Extension Header Parameter "${S}" MUST be integrity protected`)}return new Set(P.crit)};function p2(c){return L4(c)&&typeof c.kty==="string"}function x3(c){return c.kty!=="oct"&&(c.kty==="AKP"&&typeof c.priv==="string"||typeof c.d==="string")}function Z3(c){return c.kty!=="oct"&&typeof c.d>"u"&&typeof c.priv>"u"}function A3(c){return c.kty==="oct"&&typeof c.k==="string"}var k2,r3=async(c,K,w,P=!1)=>{k2||=new WeakMap;let h=k2.get(c);if(h?.[w])return h[w];let M=await g3({...K,alg:w});if(P)Object.freeze(c);if(!h)k2.set(c,{[w]:M});else h[w]=M;return M},C1=(c,K)=>{k2||=new WeakMap;let w=k2.get(c);if(w?.[K])return w[K];let P=c.type==="public",h=P?!0:!1,M;if(c.asymmetricKeyType==="x25519"){switch(K){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}M=c.toCryptoKey(c.asymmetricKeyType,h,P?[]:["deriveBits"])}if(c.asymmetricKeyType==="ed25519"){if(K!=="EdDSA"&&K!=="Ed25519")throw TypeError("given KeyObject instance cannot be used for this algorithm");M=c.toCryptoKey(c.asymmetricKeyType,h,[P?"verify":"sign"])}switch(c.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":{if(K!==c.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");M=c.toCryptoKey(c.asymmetricKeyType,h,[P?"verify":"sign"])}}if(c.asymmetricKeyType==="rsa"){let S;switch(K){case"RSA-OAEP":S="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":S="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":S="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":S="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(K.startsWith("RSA-OAEP"))return c.toCryptoKey({name:"RSA-OAEP",hash:S},h,P?["encrypt"]:["decrypt"]);M=c.toCryptoKey({name:K.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:S},h,[P?"verify":"sign"])}if(c.asymmetricKeyType==="ec"){let O=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(c.asymmetricKeyDetails?.namedCurve);if(!O)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(K==="ES256"&&O==="P-256")M=c.toCryptoKey({name:"ECDSA",namedCurve:O},h,[P?"verify":"sign"]);if(K==="ES384"&&O==="P-384")M=c.toCryptoKey({name:"ECDSA",namedCurve:O},h,[P?"verify":"sign"]);if(K==="ES512"&&O==="P-521")M=c.toCryptoKey({name:"ECDSA",namedCurve:O},h,[P?"verify":"sign"]);if(K.startsWith("ECDH-ES"))M=c.toCryptoKey({name:"ECDH",namedCurve:O},h,P?[]:["deriveBits"])}if(!M)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(!w)k2.set(c,{[K]:M});else w[K]=M;return M},o3=async(c,K)=>{if(c instanceof Uint8Array)return c;if(LK(c))return c;if(HK(c)){if(c.type==="secret")return c.export();if("toCryptoKey"in c&&typeof c.toCryptoKey==="function")try{return C1(c,K)}catch(P){if(P instanceof TypeError)throw P}let w=c.export({format:"jwk"});return r3(c,w,K)}if(p2(c)){if(c.k)return L3(c.k);return r3(c,c,K,!0)}throw Error("unreachable")};var g2=(c)=>c?.[Symbol.toStringTag],FK=(c,K,w)=>{if(K.use!==void 0){let P;switch(w){case"sign":case"verify":P="sig";break;case"encrypt":case"decrypt":P="enc";break}if(K.use!==P)throw TypeError(`Invalid key for this operation, its "use" must be "${P}" when present`)}if(K.alg!==void 0&&K.alg!==c)throw TypeError(`Invalid key for this operation, its "alg" must be "${c}" when present`);if(Array.isArray(K.key_ops)){let P;switch(!0){case(w==="sign"||w==="verify"):case c==="dir":case c.includes("CBC-HS"):P=w;break;case c.startsWith("PBES2"):P="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(c):if(!c.includes("GCM")&&c.endsWith("KW"))P=w==="encrypt"?"wrapKey":"unwrapKey";else P=w;break;case(w==="encrypt"&&c.startsWith("RSA")):P="wrapKey";break;case w==="decrypt":P=c.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(P&&K.key_ops?.includes?.(P)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${P}" when present`)}return!0},y1=(c,K,w)=>{if(K instanceof Uint8Array)return;if(p2(K)){if(A3(K)&&FK(c,K,w))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!vK(K))throw TypeError(qK(c,K,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(K.type!=="secret")throw TypeError(`${g2(K)} instances for symmetric algorithms must be of type "secret"`)},_1=(c,K,w)=>{if(p2(K))switch(w){case"decrypt":case"sign":if(x3(K)&&FK(c,K,w))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(Z3(K)&&FK(c,K,w))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!vK(K))throw TypeError(qK(c,K,"CryptoKey","KeyObject","JSON Web Key"));if(K.type==="secret")throw TypeError(`${g2(K)} instances for asymmetric algorithms must not be of type "secret"`);if(K.type==="public")switch(w){case"sign":throw TypeError(`${g2(K)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${g2(K)} instances for asymmetric algorithm decryption must be of type "private"`);default:break}if(K.type==="private")switch(w){case"verify":throw TypeError(`${g2(K)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${g2(K)} instances for asymmetric algorithm encryption must be of type "public"`);default:break}},m3=(c,K,w)=>{if(c.startsWith("HS")||c==="dir"||c.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(c)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(c))y1(c,K,w);else _1(c,K,w)};var u3=(c,K)=>{let w=`SHA-${c.slice(-3)}`;switch(c){case"HS256":case"HS384":case"HS512":return{hash:w,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:w,name:"RSA-PSS",saltLength:parseInt(c.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:w,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:w,name:"ECDSA",namedCurve:K.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:c};default:throw new xc(`alg ${c} is not supported either by JOSE or your javascript runtime`)}};var C3=async(c,K,w)=>{if(K instanceof Uint8Array){if(!c.startsWith("HS"))throw TypeError(F3(K,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",K,{hash:`SHA-${c.slice(-3)}`,name:"HMAC"},!1,[w])}return H3(K,c,w),K};var O2=(c)=>Math.floor(c.getTime()/1000);var f1=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,H4=(c)=>{let K=f1.exec(c);if(!K||K[4]&&K[1])throw TypeError("Invalid time period format");let w=parseFloat(K[2]),P=K[3].toLowerCase(),h;switch(P){case"sec":case"secs":case"second":case"seconds":case"s":h=Math.round(w);break;case"minute":case"minutes":case"min":case"mins":case"m":h=Math.round(w*60);break;case"hour":case"hours":case"hr":case"hrs":case"h":h=Math.round(w*3600);break;case"day":case"days":case"d":h=Math.round(w*86400);break;case"week":case"weeks":case"w":h=Math.round(w*604800);break;default:h=Math.round(w*31557600);break}if(K[1]==="-"||K[4]==="ago")return-h;return h};function z2(c,K){if(!Number.isFinite(K))throw TypeError(`Invalid ${c} input`);return K}class EK{#c;constructor(c){if(!L4(c))throw TypeError("JWT Claims Set MUST be an object");this.#c=structuredClone(c)}data(){return ic.encode(JSON.stringify(this.#c))}get iss(){return this.#c.iss}set iss(c){this.#c.iss=c}get sub(){return this.#c.sub}set sub(c){this.#c.sub=c}get aud(){return this.#c.aud}set aud(c){this.#c.aud=c}set jti(c){this.#c.jti=c}set nbf(c){if(typeof c==="number")this.#c.nbf=z2("setNotBefore",c);else if(c instanceof Date)this.#c.nbf=z2("setNotBefore",O2(c));else this.#c.nbf=O2(new Date)+H4(c)}set exp(c){if(typeof c==="number")this.#c.exp=z2("setExpirationTime",c);else if(c instanceof Date)this.#c.exp=z2("setExpirationTime",O2(c));else this.#c.exp=O2(new Date)+H4(c)}set iat(c){if(typeof c>"u")this.#c.iat=O2(new Date);else if(c instanceof Date)this.#c.iat=z2("setIssuedAt",O2(c));else if(typeof c==="string")this.#c.iat=z2("setIssuedAt",O2(new Date)+H4(c));else this.#c.iat=z2("setIssuedAt",c)}}var y3=async(c,K,w)=>{let P=await C3(c,K,"sign");k3(c,P);let h=await crypto.subtle.sign(u3(c,P.algorithm),P,w);return new Uint8Array(h)};class kK{#c;#K;#w;constructor(c){if(!(c instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#c=c}setProtectedHeader(c){if(this.#K)throw TypeError("setProtectedHeader can only be called once");return this.#K=c,this}setUnprotectedHeader(c){if(this.#w)throw TypeError("setUnprotectedHeader can only be called once");return this.#w=c,this}async sign(c,K){if(!this.#K&&!this.#w)throw new b2("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!E3(this.#K,this.#w))throw new b2("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let w={...this.#K,...this.#w},P=R3(b2,new Map([["b64",!0]]),K?.crit,this.#K,w),h=!0;if(P.has("b64")){if(h=this.#K.b64,typeof h!=="boolean")throw new b2('The "b64" (base64url-encode payload) Header Parameter must be a boolean')}let{alg:M}=w;if(typeof M!=="string"||!M)throw new b2('JWS "alg" (Algorithm) Header Parameter missing or invalid');m3(M,c,"sign");let S=this.#c;if(h)S=ic.encode(V4(S));let O;if(this.#K)O=ic.encode(V4(JSON.stringify(this.#K)));else O=ic.encode("");let G=Q3(O,ic.encode("."),S),D=await o3(c,M),$=await y3(M,D,G),L={signature:V4($),payload:""};if(h)L.payload=F2.decode(S);if(this.#w)L.header=this.#w;if(this.#K)L.protected=F2.decode(O);return L}}class gK{#c;constructor(c){this.#c=new kK(c)}setProtectedHeader(c){return this.#c.setProtectedHeader(c),this}async sign(c,K){let w=await this.#c.sign(c,K);if(w.payload===void 0)throw TypeError("use the flattened module for creating JWS with b64: false");return`${w.protected}.${w.payload}.${w.signature}`}}class v4{#c;#K;constructor(c={}){this.#K=new EK(c)}setIssuer(c){return this.#K.iss=c,this}setSubject(c){return this.#K.sub=c,this}setAudience(c){return this.#K.aud=c,this}setJti(c){return this.#K.jti=c,this}setNotBefore(c){return this.#K.nbf=c,this}setExpirationTime(c){return this.#K.exp=c,this}setIssuedAt(c){return this.#K.iat=c,this}setProtectedHeader(c){return this.#c=c,this}async sign(c,K){let w=new gK(this.#K.data());if(w.setProtectedHeader(this.#c),Array.isArray(this.#c?.crit)&&this.#c.crit.includes("b64")&&this.#c.b64===!1)throw new QK("JWTs MUST NOT use unencoded payload");return w.sign(c,K)}}class F4{configs;options;#c=x2.ETokenAudiences.SYSTEM;token;constructor(c,K){this.configs=c;this.options=K}async signToken(){try{let c=new Uint8Array(Buffer.from(this.configs.secretKey,"base64")),K=await crypto.subtle.importKey("raw",c,{name:"HMAC",hash:"SHA-512"},!1,["sign","verify"]),w=await new v4({tenantId:this.configs.tenantId,appId:this.configs.appId,modeId:this.configs.modeId,iss:this.configs.tenantId,aud:x2.ETokenAudiences.SYSTEM}).setProtectedHeader({alg:"HS512"}).sign(K);return this.token=w,w}catch(c){if(this.options?.logs)console.error("[BoolGuard] Sign token error:",c);throw c}}async ping(){try{let c=this.token||await this.signToken(),K=new Headers;K.append("X-Tenant-ID",this.configs.tenantId),K.append("X-App-ID",this.configs.appId),K.append("X-Mode-ID",this.configs.modeId),K.append("Authorization",`Bearer ${c}`);let w=await fetch(`${this.#c}/v${this.options?.version}/tenant-app-modes/ping`,{method:"GET",headers:K});if(!w.ok)throw await w.json();return w.ok}catch(c){if(this.options?.logs)console.error("[BoolGuard] Ping error:",c);return!1}}async createPlainAccount({identity:c,password:K,metadata:w}){try{let P=this.token||await this.signToken(),h=new Headers;h.append("X-Tenant-ID",this.configs.tenantId),h.append("X-App-ID",this.configs.appId),h.append("X-Mode-ID",this.configs.modeId),h.append("Authorization",`Bearer ${P}`),h.append("Content-Type","application/json");let M=await fetch(`${this.#c}/v${this.options?.version}/tenant-app-mode-accounts`,{method:"POST",headers:h,body:JSON.stringify({data:{type:"plain",identity:c,password:K,metadata:w}})});if(!M.ok)throw await M.json();let{data:S}=await M.json();return Object.freeze({account:S.account,credential:S.credential})}catch(P){if(this.options?.logs)console.error("[BoolGuard] Create plain account error:",P);throw P}}async createEmailAccount({identity:c,password:K,metadata:w}){try{let P=this.token||await this.signToken(),h=new Headers;h.append("X-Tenant-ID",this.configs.tenantId),h.append("X-App-ID",this.configs.appId),h.append("X-Mode-ID",this.configs.modeId),h.append("Authorization",`Bearer ${P}`),h.append("Content-Type","application/json");let M=await fetch(`${this.#c}/v${this.options?.version}/tenant-app-mode-accounts`,{method:"POST",headers:h,body:JSON.stringify({data:{type:"email",identity:c,password:K,metadata:w}})});if(!M.ok)throw await M.json();let{data:S}=await M.json();return Object.freeze({account:S.account,credential:S.credential})}catch(P){if(this.options?.logs)console.error("[BoolGuard] Create email account error:",P);throw P}}async authenticate({identity:c,password:K}){try{let w=this.token||await this.signToken(),P=await B3().safeParseAsync(c),h=new Headers;h.append("X-Tenant-ID",this.configs.tenantId),h.append("X-App-ID",this.configs.appId),h.append("X-Mode-ID",this.configs.modeId),h.append("Authorization",`Bearer ${w}`),h.append("Content-Type","application/json");let M=await fetch(`${this.#c}/v${this.options?.version}/tenant-app-mode-accounts/authenticate`,{method:"POST",headers:h,body:JSON.stringify({data:{type:!P.success?"plain":"email",identity:c,password:K}})});if(!M.ok)throw await M.json();let{data:S}=await M.json();return Object.freeze({account:S.account,credential:S.credential,token:S.token})}catch(w){if(this.options?.logs)console.error("[BoolGuard] Authenticate error:",w);throw w}}async verifyToken({token:c}){try{let K=this.token||await this.signToken(),w=new Headers;w.append("X-Tenant-ID",this.configs.tenantId),w.append("X-App-ID",this.configs.appId),w.append("X-Mode-ID",this.configs.modeId),w.append("Authorization",`Bearer ${K}`),w.append("Content-Type","application/json");let P=await fetch(`${this.#c}/v${this.options?.version}/tenant-app-mode-accounts/verify`,{method:"POST",headers:w,body:JSON.stringify({data:{token:c}})});if(!P.ok)throw await P.json();let{data:h}=await P.json();return Object.freeze({account:h.account,credential:h.credential})}catch(K){if(this.options?.logs)console.error("[BoolGuard] Verify token error:",K);throw K}}}var e1=z3({authorization:X3().startsWith("Bearer ").min(24).transform((c)=>{let[K,w]=c.split(" ");return Object.freeze({schema:K,token:w})})});class RK{clientInstance;constructor(c){this.clientInstance=c}async start(c,K){let w=await e1.safeParseAsync(K.toJSON());if(!w.success)return c.set(Uc.authState,void 0);else{let{authorization:{token:P}}=w.data;try{let{account:h,credential:M}=await this.clientInstance.verifyToken({token:P}),S=Object.freeze({account:h,credential:M});return c.set(Uc.authState,S)}catch(h){return console.error(h),c.set(Uc.authState,void 0)}}}}Q2([W2(0,O4()),W2(1,S6())],RK.prototype,"start",null),RK=Q2([W2(0,O6(F4))],RK);export{RK as Middleware,Uc as Keys,s4 as Interceptor,x2 as Enums,Tw as ControllerGuard,F4 as Client,d4 as AuthState,i3 as ActionGuard};

//# debugId=FBFD1BBD99313CBF64756E2164756E21
