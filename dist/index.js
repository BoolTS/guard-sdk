// @bun
var lK=Object.defineProperty;var m4=(c,K)=>{for(var w in K)lK(c,w,{get:K[w],enumerable:!0,configurable:!0,set:(P)=>K[w]=()=>P})};var Y2=function(c,K,w,P){var S=arguments.length,h=S<3?K:P===null?P=Object.getOwnPropertyDescriptor(K,w):P,W;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")h=Reflect.decorate(c,K,w,P);else for(var M=c.length-1;M>=0;M--)if(W=c[M])h=(S<3?W(h):S>3?W(K,w,h):W(K,w))||h;return S>3&&h&&Object.defineProperty(K,w,h),h},O2=(c,K)=>(w,P)=>K(w,P,c);var x2={};m4(x2,{ETokenAudiences:()=>_6});var _6;((K)=>K.SYSTEM="https://api-guard.booljs.com")(_6||={});var Yc={};m4(Yc,{service:()=>iK,guardMetadata:()=>TK,guardClient:()=>nK,authState:()=>pK});var pK=Symbol.for("__boolGuard::authState"),TK=Symbol.for("__boolGuard::guardMetadata"),iK=Symbol.for("__boolGuard::authService"),nK=Symbol.for("__boolGuard::guardClient");var tK=Object.create,{getPrototypeOf:dK,defineProperty:u4,getOwnPropertyNames:sK}=Object,aK=Object.prototype.hasOwnProperty,h4=(c,K,w)=>{w=c!=null?tK(dK(c)):{};let P=K||!c||!c.__esModule?u4(w,"default",{value:c,enumerable:!0}):w;for(let S of sK(c))if(!aK.call(P,S))u4(P,S,{get:()=>c[S],enumerable:!0});return P},_=(c,K)=>()=>(K||c((K={exports:{}}).exports,K),K.exports),c0=(c,K)=>{for(var w in K)u4(c,w,{get:K[w],enumerable:!0,configurable:!0,set:(P)=>K[w]=()=>P})},K0=import.meta.require,e4=_(()=>{/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var c;(function(K){(function(w){var P=typeof globalThis==="object"?globalThis:typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:J(),S=h(K);if(typeof P.Reflect<"u")S=h(P.Reflect,S);if(w(S,P),typeof P.Reflect>"u")P.Reflect=K;function h(O,G){return function(V,z){if(Object.defineProperty(O,V,{configurable:!0,writable:!0,value:z}),G)G(V,z)}}function W(){try{return Function("return this;")()}catch(O){}}function M(){try{return(0,eval)("(function() { return this; })()")}catch(O){}}function J(){return W()||M()}})(function(w,P){var S=Object.prototype.hasOwnProperty,h=typeof Symbol==="function",W=h&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",M=h&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",J=typeof Object.create==="function",O={__proto__:[]}instanceof Array,G=!J&&!O,V={create:J?function(){return _c(Object.create(null))}:O?function(){return _c({__proto__:null})}:function(){return _c({})},has:G?function(X,U){return S.call(X,U)}:function(X,U){return U in X},get:G?function(X,U){return S.call(X,U)?X[U]:void 0}:function(X,U){return X[U]}},z=Object.getPrototypeOf(Function),L=typeof Map==="function"&&typeof Map.prototype.entries==="function"?Map:R4(),I=typeof Set==="function"&&typeof Set.prototype.entries==="function"?Set:p2(),$=typeof WeakMap==="function"?WeakMap:g4(),q=h?Symbol.for("@reflect-metadata:registry"):void 0,b=dc(),Y=sc(b);function B(X,U,v,Z){if(!y(v)){if(!s(X))throw TypeError();if(!d(U))throw TypeError();if(!d(Z)&&!y(Z)&&!$c(Z))throw TypeError();if($c(Z))Z=void 0;return v=p(v),a(X,U,v,Z)}else{if(!s(X))throw TypeError();if(!hc(U))throw TypeError();return C(X,U)}}w("decorate",B);function D(X,U){function v(Z,m){if(!d(Z))throw TypeError();if(!y(m)&&!Jc(m))throw TypeError();vc(X,U,Z,m)}return v}w("metadata",D);function H(X,U,v,Z){if(!d(v))throw TypeError();if(!y(Z))Z=p(Z);return vc(X,U,v,Z)}w("defineMetadata",H);function o(X,U,v){if(!d(U))throw TypeError();if(!y(v))v=p(v);return bc(X,U,v)}w("hasMetadata",o);function Q(X,U,v){if(!d(U))throw TypeError();if(!y(v))v=p(v);return wc(X,U,v)}w("hasOwnMetadata",Q);function r(X,U,v){if(!d(U))throw TypeError();if(!y(v))v=p(v);return Nc(X,U,v)}w("getMetadata",r);function g(X,U,v){if(!d(U))throw TypeError();if(!y(v))v=p(v);return qc(X,U,v)}w("getOwnMetadata",g);function A(X,U){if(!d(X))throw TypeError();if(!y(U))U=p(U);return l(X,U)}w("getMetadataKeys",A);function u(X,U){if(!d(X))throw TypeError();if(!y(U))U=p(U);return Gc(X,U)}w("getOwnMetadataKeys",u);function i(X,U,v){if(!d(U))throw TypeError();if(!y(v))v=p(v);if(!d(U))throw TypeError();if(!y(v))v=p(v);var Z=I2(U,v,!1);if(y(Z))return!1;return Z.OrdinaryDeleteMetadata(X,U,v)}w("deleteMetadata",i);function C(X,U){for(var v=X.length-1;v>=0;--v){var Z=X[v],m=Z(U);if(!y(m)&&!$c(m)){if(!hc(m))throw TypeError();U=m}}return U}function a(X,U,v,Z){for(var m=X.length-1;m>=0;--m){var Pc=X[m],j=Pc(U,v,Z);if(!y(j)&&!$c(j)){if(!d(j))throw TypeError();Z=j}}return Z}function bc(X,U,v){var Z=wc(X,U,v);if(Z)return!0;var m=zc(U);if(!$c(m))return bc(X,m,v);return!1}function wc(X,U,v){var Z=I2(U,v,!1);if(y(Z))return!1;return Rc(Z.OrdinaryHasOwnMetadata(X,U,v))}function Nc(X,U,v){var Z=wc(X,U,v);if(Z)return qc(X,U,v);var m=zc(U);if(!$c(m))return Nc(X,m,v);return}function qc(X,U,v){var Z=I2(U,v,!1);if(y(Z))return;return Z.OrdinaryGetOwnMetadata(X,U,v)}function vc(X,U,v,Z){var m=I2(v,Z,!0);m.OrdinaryDefineOwnMetadata(X,U,v,Z)}function l(X,U){var v=Gc(X,U),Z=zc(X);if(Z===null)return v;var m=l(Z,U);if(m.length<=0)return v;if(v.length<=0)return m;var Pc=new I,j=[];for(var N=0,E=v;N<E.length;N++){var k=E[N],x=Pc.has(k);if(!x)Pc.add(k),j.push(k)}for(var R=0,f=m;R<f.length;R++){var k=f[R],x=Pc.has(k);if(!x)Pc.add(k),j.push(k)}return j}function Gc(X,U){var v=I2(X,U,!1);if(!v)return[];return v.OrdinaryOwnMetadataKeys(X,U)}function Fc(X){if(X===null)return 1;switch(typeof X){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return X===null?1:6;default:return 6}}function y(X){return X===void 0}function $c(X){return X===null}function Zc(X){return typeof X==="symbol"}function d(X){return typeof X==="object"?X!==null:typeof X==="function"}function Ec(X,U){switch(Fc(X)){case 0:return X;case 1:return X;case 2:return X;case 3:return X;case 4:return X;case 5:return X}var v=U===3?"string":U===5?"number":"default",Z=Mc(X,W);if(Z!==void 0){var m=Z.call(X,v);if(d(m))throw TypeError();return m}return Uc(X,v==="default"?"number":v)}function Uc(X,U){if(U==="string"){var v=X.toString;if(T(v)){var Z=v.call(X);if(!d(Z))return Z}var m=X.valueOf;if(T(m)){var Z=m.call(X);if(!d(Z))return Z}}else{var m=X.valueOf;if(T(m)){var Z=m.call(X);if(!d(Z))return Z}var Pc=X.toString;if(T(Pc)){var Z=Pc.call(X);if(!d(Z))return Z}}throw TypeError()}function Rc(X){return!!X}function Ac(X){return""+X}function p(X){var U=Ec(X,3);if(Zc(U))return U;return Ac(U)}function s(X){return Array.isArray?Array.isArray(X):X instanceof Object?X instanceof Array:Object.prototype.toString.call(X)==="[object Array]"}function T(X){return typeof X==="function"}function hc(X){return typeof X==="function"}function Jc(X){switch(Fc(X)){case 3:return!0;case 4:return!0;default:return!1}}function jc(X,U){return X===U||X!==X&&U!==U}function Mc(X,U){var v=X[U];if(v===void 0||v===null)return;if(!T(v))throw TypeError();return v}function yc(X){var U=Mc(X,M);if(!T(U))throw TypeError();var v=U.call(X);if(!d(v))throw TypeError();return v}function Xc(X){return X.value}function Bc(X){var U=X.next();return U.done?!1:U}function rc(X){var U=X.return;if(U)U.call(X)}function zc(X){var U=Object.getPrototypeOf(X);if(typeof X!=="function"||X===z)return U;if(U!==z)return U;var v=X.prototype,Z=v&&Object.getPrototypeOf(v);if(Z==null||Z===Object.prototype)return U;var m=Z.constructor;if(typeof m!=="function")return U;if(m===X)return U;return m}function tc(){var X;if(!y(q)&&typeof P.Reflect<"u"&&!(q in P.Reflect)&&typeof P.Reflect.defineMetadata==="function")X=E4(P.Reflect);var U,v,Z,m=new $,Pc={registerProvider:j,getProvider:E,setProvider:x};return Pc;function j(R){if(!Object.isExtensible(Pc))throw Error("Cannot add provider to a frozen registry.");switch(!0){case X===R:break;case y(U):U=R;break;case U===R:break;case y(v):v=R;break;case v===R:break;default:if(Z===void 0)Z=new I;Z.add(R);break}}function N(R,f){if(!y(U)){if(U.isProviderFor(R,f))return U;if(!y(v)){if(v.isProviderFor(R,f))return U;if(!y(Z)){var t=yc(Z);while(!0){var n=Bc(t);if(!n)return;var Ic=Xc(n);if(Ic.isProviderFor(R,f))return rc(t),Ic}}}}if(!y(X)&&X.isProviderFor(R,f))return X;return}function E(R,f){var t=m.get(R),n;if(!y(t))n=t.get(f);if(!y(n))return n;if(n=N(R,f),!y(n)){if(y(t))t=new L,m.set(R,t);t.set(f,n)}return n}function k(R){if(y(R))throw TypeError();return U===R||v===R||!y(Z)&&Z.has(R)}function x(R,f,t){if(!k(t))throw Error("Metadata provider not registered.");var n=E(R,f);if(n!==t){if(!y(n))return!1;var Ic=m.get(R);if(y(Ic))Ic=new L,m.set(R,Ic);Ic.set(f,t)}return!0}}function dc(){var X;if(!y(q)&&d(P.Reflect)&&Object.isExtensible(P.Reflect))X=P.Reflect[q];if(y(X))X=tc();if(!y(q)&&d(P.Reflect)&&Object.isExtensible(P.Reflect))Object.defineProperty(P.Reflect,q,{enumerable:!1,configurable:!1,writable:!1,value:X});return X}function sc(X){var U=new $,v={isProviderFor:function(k,x){var R=U.get(k);if(y(R))return!1;return R.has(x)},OrdinaryDefineOwnMetadata:j,OrdinaryHasOwnMetadata:m,OrdinaryGetOwnMetadata:Pc,OrdinaryOwnMetadataKeys:N,OrdinaryDeleteMetadata:E};return b.registerProvider(v),v;function Z(k,x,R){var f=U.get(k),t=!1;if(y(f)){if(!R)return;f=new L,U.set(k,f),t=!0}var n=f.get(x);if(y(n)){if(!R)return;if(n=new L,f.set(x,n),!X.setProvider(k,x,v)){if(f.delete(x),t)U.delete(k);throw Error("Wrong provider for target.")}}return n}function m(k,x,R){var f=Z(x,R,!1);if(y(f))return!1;return Rc(f.has(k))}function Pc(k,x,R){var f=Z(x,R,!1);if(y(f))return;return f.get(k)}function j(k,x,R,f){var t=Z(R,f,!0);t.set(k,x)}function N(k,x){var R=[],f=Z(k,x,!1);if(y(f))return R;var t=f.keys(),n=yc(t),Ic=0;while(!0){var Q2=Bc(n);if(!Q2)return R.length=Ic,R;var ac=Xc(Q2);try{R[Ic]=ac}catch(Hc){try{rc(n)}finally{throw Hc}}Ic++}}function E(k,x,R){var f=Z(x,R,!1);if(y(f))return!1;if(!f.delete(k))return!1;if(f.size===0){var t=U.get(x);if(!y(t)){if(t.delete(R),t.size===0)U.delete(t)}}return!0}}function E4(X){var{defineMetadata:U,hasOwnMetadata:v,getOwnMetadata:Z,getOwnMetadataKeys:m,deleteMetadata:Pc}=X,j=new $,N={isProviderFor:function(E,k){var x=j.get(E);if(!y(x)&&x.has(k))return!0;if(m(E,k).length){if(y(x))x=new I,j.set(E,x);return x.add(k),!0}return!1},OrdinaryDefineOwnMetadata:U,OrdinaryHasOwnMetadata:v,OrdinaryGetOwnMetadata:Z,OrdinaryOwnMetadataKeys:m,OrdinaryDeleteMetadata:Pc};return N}function I2(X,U,v){var Z=b.getProvider(X,U);if(!y(Z))return Z;if(v){if(b.setProvider(X,U,Y))return Y;throw Error("Illegal state.")}return}function R4(){var X={},U=[],v=function(){function N(E,k,x){this._index=0,this._keys=E,this._values=k,this._selector=x}return N.prototype["@@iterator"]=function(){return this},N.prototype[M]=function(){return this},N.prototype.next=function(){var E=this._index;if(E>=0&&E<this._keys.length){var k=this._selector(this._keys[E],this._values[E]);if(E+1>=this._keys.length)this._index=-1,this._keys=U,this._values=U;else this._index++;return{value:k,done:!1}}return{value:void 0,done:!0}},N.prototype.throw=function(E){if(this._index>=0)this._index=-1,this._keys=U,this._values=U;throw E},N.prototype.return=function(E){if(this._index>=0)this._index=-1,this._keys=U,this._values=U;return{value:E,done:!0}},N}(),Z=function(){function N(){this._keys=[],this._values=[],this._cacheKey=X,this._cacheIndex=-2}return Object.defineProperty(N.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),N.prototype.has=function(E){return this._find(E,!1)>=0},N.prototype.get=function(E){var k=this._find(E,!1);return k>=0?this._values[k]:void 0},N.prototype.set=function(E,k){var x=this._find(E,!0);return this._values[x]=k,this},N.prototype.delete=function(E){var k=this._find(E,!1);if(k>=0){var x=this._keys.length;for(var R=k+1;R<x;R++)this._keys[R-1]=this._keys[R],this._values[R-1]=this._values[R];if(this._keys.length--,this._values.length--,jc(E,this._cacheKey))this._cacheKey=X,this._cacheIndex=-2;return!0}return!1},N.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=X,this._cacheIndex=-2},N.prototype.keys=function(){return new v(this._keys,this._values,m)},N.prototype.values=function(){return new v(this._keys,this._values,Pc)},N.prototype.entries=function(){return new v(this._keys,this._values,j)},N.prototype["@@iterator"]=function(){return this.entries()},N.prototype[M]=function(){return this.entries()},N.prototype._find=function(E,k){if(!jc(this._cacheKey,E)){this._cacheIndex=-1;for(var x=0;x<this._keys.length;x++)if(jc(this._keys[x],E)){this._cacheIndex=x;break}}if(this._cacheIndex<0&&k)this._cacheIndex=this._keys.length,this._keys.push(E),this._values.push(void 0);return this._cacheIndex},N}();return Z;function m(N,E){return N}function Pc(N,E){return E}function j(N,E){return[N,E]}}function p2(){var X=function(){function U(){this._map=new L}return Object.defineProperty(U.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),U.prototype.has=function(v){return this._map.has(v)},U.prototype.add=function(v){return this._map.set(v,v),this},U.prototype.delete=function(v){return this._map.delete(v)},U.prototype.clear=function(){this._map.clear()},U.prototype.keys=function(){return this._map.keys()},U.prototype.values=function(){return this._map.keys()},U.prototype.entries=function(){return this._map.entries()},U.prototype["@@iterator"]=function(){return this.keys()},U.prototype[M]=function(){return this.keys()},U}();return X}function g4(){var X=16,U=V.create(),v=Z();return function(){function E(){this._key=Z()}return E.prototype.has=function(k){var x=m(k,!1);return x!==void 0?V.has(x,this._key):!1},E.prototype.get=function(k){var x=m(k,!1);return x!==void 0?V.get(x,this._key):void 0},E.prototype.set=function(k,x){var R=m(k,!0);return R[this._key]=x,this},E.prototype.delete=function(k){var x=m(k,!1);return x!==void 0?delete x[this._key]:!1},E.prototype.clear=function(){this._key=Z()},E}();function Z(){var E;do E="@@WeakMap@@"+N();while(V.has(U,E));return U[E]=!0,E}function m(E,k){if(!S.call(E,v)){if(!k)return;Object.defineProperty(E,v,{value:V.create()})}return E[v]}function Pc(E,k){for(var x=0;x<k;++x)E[x]=Math.random()*255|0;return E}function j(E){if(typeof Uint8Array==="function"){var k=new Uint8Array(E);if(typeof crypto<"u")crypto.getRandomValues(k);else if(typeof msCrypto<"u")msCrypto.getRandomValues(k);else Pc(k,E);return k}return Pc(Array(E),E)}function N(){var E=j(X);E[6]=E[6]&79|64,E[8]=E[8]&191|128;var k="";for(var x=0;x<X;++x){var R=E[x];if(x===4||x===6||x===8)k+="-";if(R<16)k+="0";k+=R.toString(16).toLowerCase()}return k}}function _c(X){return X.__=void 0,delete X.__,X}})})(c||(c={}))}),H2=_((c,K)=>{K.exports=TypeError}),w0=_((c,K)=>{K.exports=K0("util").inspect}),W4=_((c,K)=>{var w=typeof Map==="function"&&Map.prototype,P=Object.getOwnPropertyDescriptor&&w?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,S=w&&P&&typeof P.get==="function"?P.get:null,h=w&&Map.prototype.forEach,W=typeof Set==="function"&&Set.prototype,M=Object.getOwnPropertyDescriptor&&W?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,J=W&&M&&typeof M.get==="function"?M.get:null,O=W&&Set.prototype.forEach,G=typeof WeakMap==="function"&&WeakMap.prototype,V=G?WeakMap.prototype.has:null,z=typeof WeakSet==="function"&&WeakSet.prototype,L=z?WeakSet.prototype.has:null,I=typeof WeakRef==="function"&&WeakRef.prototype,$=I?WeakRef.prototype.deref:null,q=Boolean.prototype.valueOf,b=Object.prototype.toString,Y=Function.prototype.toString,B=String.prototype.match,D=String.prototype.slice,H=String.prototype.replace,o=String.prototype.toUpperCase,Q=String.prototype.toLowerCase,r=RegExp.prototype.test,g=Array.prototype.concat,A=Array.prototype.join,u=Array.prototype.slice,i=Math.floor,C=typeof BigInt==="function"?BigInt.prototype.valueOf:null,a=Object.getOwnPropertySymbols,bc=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?Symbol.prototype.toString:null,wc=typeof Symbol==="function"&&typeof Symbol.iterator==="object",Nc=typeof Symbol==="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===wc?"object":"symbol")?Symbol.toStringTag:null,qc=Object.prototype.propertyIsEnumerable,vc=(typeof Reflect==="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(j){return j.__proto__}:null);function l(j,N){if(j===1/0||j===-1/0||j!==j||j&&j>-1000&&j<1000||r.call(/e/,N))return N;var E=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof j==="number"){var k=j<0?-i(-j):i(j);if(k!==j){var x=String(k),R=D.call(N,x.length+1);return H.call(x,E,"$&_")+"."+H.call(H.call(R,/([0-9]{3})/g,"$&_"),/_$/,"")}}return H.call(N,E,"$&_")}var Gc=w0(),Fc=Gc.custom,y=jc(Fc)?Fc:null,$c={__proto__:null,double:'"',single:"'"},Zc={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};K.exports=function j(N,E,k,x){var R=E||{};if(Xc(R,"quoteStyle")&&!Xc($c,R.quoteStyle))throw TypeError('option "quoteStyle" must be "single" or "double"');if(Xc(R,"maxStringLength")&&(typeof R.maxStringLength==="number"?R.maxStringLength<0&&R.maxStringLength!==1/0:R.maxStringLength!==null))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var f=Xc(R,"customInspect")?R.customInspect:!0;if(typeof f!=="boolean"&&f!=="symbol")throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Xc(R,"indent")&&R.indent!==null&&R.indent!=="\t"&&!(parseInt(R.indent,10)===R.indent&&R.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Xc(R,"numericSeparator")&&typeof R.numericSeparator!=="boolean")throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var t=R.numericSeparator;if(typeof N>"u")return"undefined";if(N===null)return"null";if(typeof N==="boolean")return N?"true":"false";if(typeof N==="string")return p2(N,R);if(typeof N==="number"){if(N===0)return 1/0/N>0?"0":"-0";var n=String(N);return t?l(N,n):n}if(typeof N==="bigint"){var Ic=String(N)+"n";return t?l(N,Ic):Ic}var Q2=typeof R.depth>"u"?5:R.depth;if(typeof k>"u")k=0;if(k>=Q2&&Q2>0&&typeof N==="object")return Rc(N)?"[Array]":"[Object]";var ac=Z(R,k);if(typeof x>"u")x=[];else if(zc(x,N)>=0)return"[Circular]";function Hc(U2,i2,eK){if(i2)x=u.call(x),x.push(i2);if(eK){var y6={depth:R.depth};if(Xc(R,"quoteStyle"))y6.quoteStyle=R.quoteStyle;return j(U2,y6,k+1,x)}return j(U2,R,k+1,x)}if(typeof N==="function"&&!p(N)){var Z6=rc(N),A6=Pc(N,Hc);return"[Function"+(Z6?": "+Z6:" (anonymous)")+"]"+(A6.length>0?" { "+A.call(A6,", ")+" }":"")}if(jc(N)){var r6=wc?H.call(String(N),/^(Symbol\(.*\))_[^)]*$/,"$1"):bc.call(N);return typeof N==="object"&&!wc?_c(r6):r6}if(R4(N)){var k2="<"+Q.call(String(N.nodeName)),k4=N.attributes||[];for(var T2=0;T2<k4.length;T2++)k2+=" "+k4[T2].name+"="+d(Ec(k4[T2].value),"double",R);if(k2+=">",N.childNodes&&N.childNodes.length)k2+="...";return k2+="</"+Q.call(String(N.nodeName))+">",k2}if(Rc(N)){if(N.length===0)return"[]";var x4=Pc(N,Hc);if(ac&&!v(x4))return"["+m(x4,ac)+"]";return"[ "+A.call(x4,", ")+" ]"}if(s(N)){var Z4=Pc(N,Hc);if(!("cause"in Error.prototype)&&"cause"in N&&!qc.call(N,"cause"))return"{ ["+String(N)+"] "+A.call(g.call("[cause]: "+Hc(N.cause),Z4),", ")+" }";if(Z4.length===0)return"["+String(N)+"]";return"{ ["+String(N)+"] "+A.call(Z4,", ")+" }"}if(typeof N==="object"&&f){if(y&&typeof N[y]==="function"&&Gc)return Gc(N,{depth:Q2-k});else if(f!=="symbol"&&typeof N.inspect==="function")return N.inspect()}if(tc(N)){var o6=[];if(h)h.call(N,function(U2,i2){o6.push(Hc(i2,N,!0)+" => "+Hc(U2,N))});return U("Map",S.call(N),o6,ac)}if(E4(N)){var m6=[];if(O)O.call(N,function(U2){m6.push(Hc(U2,N))});return U("Set",J.call(N),m6,ac)}if(dc(N))return X("WeakMap");if(I2(N))return X("WeakSet");if(sc(N))return X("WeakRef");if(hc(N))return _c(Hc(Number(N)));if(Mc(N))return _c(Hc(C.call(N)));if(Jc(N))return _c(q.call(N));if(T(N))return _c(Hc(String(N)));if(typeof window<"u"&&N===window)return"{ [object Window] }";if(typeof globalThis<"u"&&N===globalThis||typeof global<"u"&&N===global)return"{ [object globalThis] }";if(!Ac(N)&&!p(N)){var A4=Pc(N,Hc),u6=vc?vc(N)===Object.prototype:N instanceof Object||N.constructor===Object,r4=N instanceof Object?"":"null prototype",C6=!u6&&Nc&&Object(N)===N&&Nc in N?D.call(Bc(N),8,-1):r4?"Object":"",fK=u6||typeof N.constructor!=="function"?"":N.constructor.name?N.constructor.name+" ":"",o4=fK+(C6||r4?"["+A.call(g.call([],C6||[],r4||[]),": ")+"] ":"");if(A4.length===0)return o4+"{}";if(ac)return o4+"{"+m(A4,ac)+"}";return o4+"{ "+A.call(A4,", ")+" }"}return String(N)};function d(j,N,E){var k=E.quoteStyle||N,x=$c[k];return x+j+x}function Ec(j){return H.call(String(j),/"/g,"&quot;")}function Uc(j){return!Nc||!(typeof j==="object"&&((Nc in j)||typeof j[Nc]<"u"))}function Rc(j){return Bc(j)==="[object Array]"&&Uc(j)}function Ac(j){return Bc(j)==="[object Date]"&&Uc(j)}function p(j){return Bc(j)==="[object RegExp]"&&Uc(j)}function s(j){return Bc(j)==="[object Error]"&&Uc(j)}function T(j){return Bc(j)==="[object String]"&&Uc(j)}function hc(j){return Bc(j)==="[object Number]"&&Uc(j)}function Jc(j){return Bc(j)==="[object Boolean]"&&Uc(j)}function jc(j){if(wc)return j&&typeof j==="object"&&j instanceof Symbol;if(typeof j==="symbol")return!0;if(!j||typeof j!=="object"||!bc)return!1;try{return bc.call(j),!0}catch(N){}return!1}function Mc(j){if(!j||typeof j!=="object"||!C)return!1;try{return C.call(j),!0}catch(N){}return!1}var yc=Object.prototype.hasOwnProperty||function(j){return j in this};function Xc(j,N){return yc.call(j,N)}function Bc(j){return b.call(j)}function rc(j){if(j.name)return j.name;var N=B.call(Y.call(j),/^function\s*([\w$]+)/);if(N)return N[1];return null}function zc(j,N){if(j.indexOf)return j.indexOf(N);for(var E=0,k=j.length;E<k;E++)if(j[E]===N)return E;return-1}function tc(j){if(!S||!j||typeof j!=="object")return!1;try{S.call(j);try{J.call(j)}catch(N){return!0}return j instanceof Map}catch(N){}return!1}function dc(j){if(!V||!j||typeof j!=="object")return!1;try{V.call(j,V);try{L.call(j,L)}catch(N){return!0}return j instanceof WeakMap}catch(N){}return!1}function sc(j){if(!$||!j||typeof j!=="object")return!1;try{return $.call(j),!0}catch(N){}return!1}function E4(j){if(!J||!j||typeof j!=="object")return!1;try{J.call(j);try{S.call(j)}catch(N){return!0}return j instanceof Set}catch(N){}return!1}function I2(j){if(!L||!j||typeof j!=="object")return!1;try{L.call(j,L);try{V.call(j,V)}catch(N){return!0}return j instanceof WeakSet}catch(N){}return!1}function R4(j){if(!j||typeof j!=="object")return!1;if(typeof HTMLElement<"u"&&j instanceof HTMLElement)return!0;return typeof j.nodeName==="string"&&typeof j.getAttribute==="function"}function p2(j,N){if(j.length>N.maxStringLength){var E=j.length-N.maxStringLength,k="... "+E+" more character"+(E>1?"s":"");return p2(D.call(j,0,N.maxStringLength),N)+k}var x=Zc[N.quoteStyle||"single"];x.lastIndex=0;var R=H.call(H.call(j,x,"\\$1"),/[\x00-\x1f]/g,g4);return d(R,"single",N)}function g4(j){var N=j.charCodeAt(0),E={8:"b",9:"t",10:"n",12:"f",13:"r"}[N];if(E)return"\\"+E;return"\\x"+(N<16?"0":"")+o.call(N.toString(16))}function _c(j){return"Object("+j+")"}function X(j){return j+" { ? }"}function U(j,N,E,k){var x=k?m(E,k):A.call(E,", ");return j+" ("+N+") {"+x+"}"}function v(j){for(var N=0;N<j.length;N++)if(zc(j[N],`
`)>=0)return!1;return!0}function Z(j,N){var E;if(j.indent==="\t")E="\t";else if(typeof j.indent==="number"&&j.indent>0)E=A.call(Array(j.indent+1)," ");else return null;return{base:E,prev:A.call(Array(N+1),E)}}function m(j,N){if(j.length===0)return"";var E=`
`+N.prev+N.base;return E+A.call(j,","+E)+`
`+N.prev}function Pc(j,N){var E=Rc(j),k=[];if(E){k.length=j.length;for(var x=0;x<j.length;x++)k[x]=Xc(j,x)?N(j[x],j):""}var R=typeof a==="function"?a(j):[],f;if(wc){f={};for(var t=0;t<R.length;t++)f["$"+R[t]]=R[t]}for(var n in j){if(!Xc(j,n))continue;if(E&&String(Number(n))===n&&n<j.length)continue;if(wc&&f["$"+n]instanceof Symbol)continue;else if(r.call(/[^\w$]/,n))k.push(N(n,j)+": "+N(j[n],j));else k.push(n+": "+N(j[n],j))}if(typeof a==="function"){for(var Ic=0;Ic<R.length;Ic++)if(qc.call(j,R[Ic]))k.push("["+N(R[Ic])+"]: "+N(j[R[Ic]],j))}return k}}),P0=_((c,K)=>{var w=W4(),P=H2(),S=function(O,G,V){var z=O,L;for(;(L=z.next)!=null;z=L)if(L.key===G){if(z.next=L.next,!V)L.next=O.next,O.next=L;return L}},h=function(O,G){if(!O)return;var V=S(O,G);return V&&V.value},W=function(O,G,V){var z=S(O,G);if(z)z.value=V;else O.next={key:G,next:O.next,value:V}},M=function(O,G){if(!O)return!1;return!!S(O,G)},J=function(O,G){if(O)return S(O,G,!0)};K.exports=function(){var O,G={assert:function(V){if(!G.has(V))throw new P("Side channel does not contain "+w(V))},delete:function(V){var z=O&&O.next,L=J(O,V);if(L&&z&&z===L)O=void 0;return!!L},get:function(V){return h(O,V)},has:function(V){return M(O,V)},set:function(V,z){if(!O)O={next:void 0};W(O,V,z)}};return G}}),l6=_((c,K)=>{K.exports=Object}),S0=_((c,K)=>{K.exports=Error}),h0=_((c,K)=>{K.exports=EvalError}),W0=_((c,K)=>{K.exports=RangeError}),M0=_((c,K)=>{K.exports=ReferenceError}),b0=_((c,K)=>{K.exports=SyntaxError}),I0=_((c,K)=>{K.exports=URIError}),O0=_((c,K)=>{K.exports=Math.abs}),J0=_((c,K)=>{K.exports=Math.floor}),D0=_((c,K)=>{K.exports=Math.max}),N0=_((c,K)=>{K.exports=Math.min}),G0=_((c,K)=>{K.exports=Math.pow}),j0=_((c,K)=>{K.exports=Math.round}),X0=_((c,K)=>{K.exports=Number.isNaN||function(w){return w!==w}}),B0=_((c,K)=>{var w=X0();K.exports=function(P){if(w(P)||P===0)return P;return P<0?-1:1}}),z0=_((c,K)=>{K.exports=Object.getOwnPropertyDescriptor}),p6=_((c,K)=>{var w=z0();if(w)try{w([],"length")}catch(P){w=null}K.exports=w}),$0=_((c,K)=>{var w=Object.defineProperty||!1;if(w)try{w({},"a",{value:1})}catch(P){w=!1}K.exports=w}),Q0=_((c,K)=>{K.exports=function(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function")return!1;if(typeof Symbol.iterator==="symbol")return!0;var w={},P=Symbol("test"),S=Object(P);if(typeof P==="string")return!1;if(Object.prototype.toString.call(P)!=="[object Symbol]")return!1;if(Object.prototype.toString.call(S)!=="[object Symbol]")return!1;var h=42;w[P]=h;for(var W in w)return!1;if(typeof Object.keys==="function"&&Object.keys(w).length!==0)return!1;if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(w).length!==0)return!1;var M=Object.getOwnPropertySymbols(w);if(M.length!==1||M[0]!==P)return!1;if(!Object.prototype.propertyIsEnumerable.call(w,P))return!1;if(typeof Object.getOwnPropertyDescriptor==="function"){var J=Object.getOwnPropertyDescriptor(w,P);if(J.value!==h||J.enumerable!==!0)return!1}return!0}}),U0=_((c,K)=>{var w=typeof Symbol<"u"&&Symbol,P=Q0();K.exports=function(){if(typeof w!=="function")return!1;if(typeof Symbol!=="function")return!1;if(typeof w("foo")!=="symbol")return!1;if(typeof Symbol("bar")!=="symbol")return!1;return P()}}),T6=_((c,K)=>{K.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null}),i6=_((c,K)=>{var w=l6();K.exports=w.getPrototypeOf||null}),Y0=_((c,K)=>{var w="Function.prototype.bind called on incompatible ",P=Object.prototype.toString,S=Math.max,h="[object Function]",W=function(O,G){var V=[];for(var z=0;z<O.length;z+=1)V[z]=O[z];for(var L=0;L<G.length;L+=1)V[L+O.length]=G[L];return V},M=function(O,G){var V=[];for(var z=G||0,L=0;z<O.length;z+=1,L+=1)V[L]=O[z];return V},J=function(O,G){var V="";for(var z=0;z<O.length;z+=1)if(V+=O[z],z+1<O.length)V+=G;return V};K.exports=function(O){var G=this;if(typeof G!=="function"||P.apply(G)!==h)throw TypeError(w+G);var V=M(arguments,1),z,L=function(){if(this instanceof z){var Y=G.apply(this,W(V,arguments));if(Object(Y)===Y)return Y;return this}return G.apply(O,W(V,arguments))},I=S(0,G.length-V.length),$=[];for(var q=0;q<I;q++)$[q]="$"+q;if(z=Function("binder","return function ("+J($,",")+"){ return binder.apply(this,arguments); }")(L),G.prototype){var b=function(){};b.prototype=G.prototype,z.prototype=new b,b.prototype=null}return z}}),M4=_((c,K)=>{var w=Y0();K.exports=Function.prototype.bind||w}),l4=_((c,K)=>{K.exports=Function.prototype.call}),n6=_((c,K)=>{K.exports=Function.prototype.apply}),H0=_((c,K)=>{K.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply}),V0=_((c,K)=>{var w=M4(),P=n6(),S=l4(),h=H0();K.exports=h||w.call(S,P)}),t6=_((c,K)=>{var w=M4(),P=H2(),S=l4(),h=V0();K.exports=function(W){if(W.length<1||typeof W[0]!=="function")throw new P("a function is required");return h(w,S,W)}}),L0=_((c,K)=>{var w=t6(),P=p6(),S;try{S=[].__proto__===Array.prototype}catch(J){if(!J||typeof J!=="object"||!("code"in J)||J.code!=="ERR_PROTO_ACCESS")throw J}var h=!!S&&P&&P(Object.prototype,"__proto__"),W=Object,M=W.getPrototypeOf;K.exports=h&&typeof h.get==="function"?w([h.get]):typeof M==="function"?function(J){return M(J==null?J:W(J))}:!1}),q0=_((c,K)=>{var w=T6(),P=i6(),S=L0();K.exports=w?function(h){return w(h)}:P?function(h){if(!h||typeof h!=="object"&&typeof h!=="function")throw TypeError("getProto: not an object");return P(h)}:S?function(h){return S(h)}:null}),v0=_((c,K)=>{var w=Function.prototype.call,P=Object.prototype.hasOwnProperty,S=M4();K.exports=S.call(w,P)}),p4=_((c,K)=>{var w,P=l6(),S=S0(),h=h0(),W=W0(),M=M0(),J=b0(),O=H2(),G=I0(),V=O0(),z=J0(),L=D0(),I=N0(),$=G0(),q=j0(),b=B0(),Y=Function,B=function(p){try{return Y('"use strict"; return ('+p+").constructor;")()}catch(s){}},D=p6(),H=$0(),o=function(){throw new O},Q=D?function(){try{return arguments.callee,o}catch(p){try{return D(arguments,"callee").get}catch(s){return o}}}():o,r=U0()(),g=q0(),A=i6(),u=T6(),i=n6(),C=l4(),a={},bc=typeof Uint8Array>"u"||!g?w:g(Uint8Array),wc={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?w:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?w:ArrayBuffer,"%ArrayIteratorPrototype%":r&&g?g([][Symbol.iterator]()):w,"%AsyncFromSyncIteratorPrototype%":w,"%AsyncFunction%":a,"%AsyncGenerator%":a,"%AsyncGeneratorFunction%":a,"%AsyncIteratorPrototype%":a,"%Atomics%":typeof Atomics>"u"?w:Atomics,"%BigInt%":typeof BigInt>"u"?w:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?w:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?w:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?w:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":S,"%eval%":eval,"%EvalError%":h,"%Float16Array%":typeof Float16Array>"u"?w:Float16Array,"%Float32Array%":typeof Float32Array>"u"?w:Float32Array,"%Float64Array%":typeof Float64Array>"u"?w:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?w:FinalizationRegistry,"%Function%":Y,"%GeneratorFunction%":a,"%Int8Array%":typeof Int8Array>"u"?w:Int8Array,"%Int16Array%":typeof Int16Array>"u"?w:Int16Array,"%Int32Array%":typeof Int32Array>"u"?w:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":r&&g?g(g([][Symbol.iterator]())):w,"%JSON%":typeof JSON==="object"?JSON:w,"%Map%":typeof Map>"u"?w:Map,"%MapIteratorPrototype%":typeof Map>"u"||!r||!g?w:g(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":P,"%Object.getOwnPropertyDescriptor%":D,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?w:Promise,"%Proxy%":typeof Proxy>"u"?w:Proxy,"%RangeError%":W,"%ReferenceError%":M,"%Reflect%":typeof Reflect>"u"?w:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?w:Set,"%SetIteratorPrototype%":typeof Set>"u"||!r||!g?w:g(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?w:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":r&&g?g(""[Symbol.iterator]()):w,"%Symbol%":r?Symbol:w,"%SyntaxError%":J,"%ThrowTypeError%":Q,"%TypedArray%":bc,"%TypeError%":O,"%Uint8Array%":typeof Uint8Array>"u"?w:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?w:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?w:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?w:Uint32Array,"%URIError%":G,"%WeakMap%":typeof WeakMap>"u"?w:WeakMap,"%WeakRef%":typeof WeakRef>"u"?w:WeakRef,"%WeakSet%":typeof WeakSet>"u"?w:WeakSet,"%Function.prototype.call%":C,"%Function.prototype.apply%":i,"%Object.defineProperty%":H,"%Object.getPrototypeOf%":A,"%Math.abs%":V,"%Math.floor%":z,"%Math.max%":L,"%Math.min%":I,"%Math.pow%":$,"%Math.round%":q,"%Math.sign%":b,"%Reflect.getPrototypeOf%":u};if(g)try{null.error}catch(p){Nc=g(g(p)),wc["%Error.prototype%"]=Nc}var Nc,qc=function p(s){var T;if(s==="%AsyncFunction%")T=B("async function () {}");else if(s==="%GeneratorFunction%")T=B("function* () {}");else if(s==="%AsyncGeneratorFunction%")T=B("async function* () {}");else if(s==="%AsyncGenerator%"){var hc=p("%AsyncGeneratorFunction%");if(hc)T=hc.prototype}else if(s==="%AsyncIteratorPrototype%"){var Jc=p("%AsyncGenerator%");if(Jc&&g)T=g(Jc.prototype)}return wc[s]=T,T},vc={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},l=M4(),Gc=v0(),Fc=l.call(C,Array.prototype.concat),y=l.call(i,Array.prototype.splice),$c=l.call(C,String.prototype.replace),Zc=l.call(C,String.prototype.slice),d=l.call(C,RegExp.prototype.exec),Ec=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Uc=/\\(\\)?/g,Rc=function(p){var s=Zc(p,0,1),T=Zc(p,-1);if(s==="%"&&T!=="%")throw new J("invalid intrinsic syntax, expected closing `%`");else if(T==="%"&&s!=="%")throw new J("invalid intrinsic syntax, expected opening `%`");var hc=[];return $c(p,Ec,function(Jc,jc,Mc,yc){hc[hc.length]=Mc?$c(yc,Uc,"$1"):jc||Jc}),hc},Ac=function(p,s){var T=p,hc;if(Gc(vc,T))hc=vc[T],T="%"+hc[0]+"%";if(Gc(wc,T)){var Jc=wc[T];if(Jc===a)Jc=qc(T);if(typeof Jc>"u"&&!s)throw new O("intrinsic "+p+" exists, but is not available. Please file an issue!");return{alias:hc,name:T,value:Jc}}throw new J("intrinsic "+p+" does not exist!")};K.exports=function(p,s){if(typeof p!=="string"||p.length===0)throw new O("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof s!=="boolean")throw new O('"allowMissing" argument must be a boolean');if(d(/^%?[^%]*%?$/,p)===null)throw new J("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var T=Rc(p),hc=T.length>0?T[0]:"",Jc=Ac("%"+hc+"%",s),jc=Jc.name,Mc=Jc.value,yc=!1,Xc=Jc.alias;if(Xc)hc=Xc[0],y(T,Fc([0,1],Xc));for(var Bc=1,rc=!0;Bc<T.length;Bc+=1){var zc=T[Bc],tc=Zc(zc,0,1),dc=Zc(zc,-1);if((tc==='"'||tc==="'"||tc==="`"||(dc==='"'||dc==="'"||dc==="`"))&&tc!==dc)throw new J("property names with quotes must have matching quotes");if(zc==="constructor"||!rc)yc=!0;if(hc+="."+zc,jc="%"+hc+"%",Gc(wc,jc))Mc=wc[jc];else if(Mc!=null){if(!(zc in Mc)){if(!s)throw new O("base intrinsic for "+p+" exists, but the property is not available.");return}if(D&&Bc+1>=T.length){var sc=D(Mc,zc);if(rc=!!sc,rc&&"get"in sc&&!("originalValue"in sc.get))Mc=sc.get;else Mc=Mc[zc]}else rc=Gc(Mc,zc),Mc=Mc[zc];if(rc&&!yc)wc[jc]=Mc}}return Mc}}),d6=_((c,K)=>{var w=p4(),P=t6(),S=P([w("%String.prototype.indexOf%")]);K.exports=function(h,W){var M=w(h,!!W);if(typeof M==="function"&&S(h,".prototype.")>-1)return P([M]);return M}}),s6=_((c,K)=>{var w=p4(),P=d6(),S=W4(),h=H2(),W=w("%Map%",!0),M=P("Map.prototype.get",!0),J=P("Map.prototype.set",!0),O=P("Map.prototype.has",!0),G=P("Map.prototype.delete",!0),V=P("Map.prototype.size",!0);K.exports=!!W&&function(){var z,L={assert:function(I){if(!L.has(I))throw new h("Side channel does not contain "+S(I))},delete:function(I){if(z){var $=G(z,I);if(V(z)===0)z=void 0;return $}return!1},get:function(I){if(z)return M(z,I)},has:function(I){if(z)return O(z,I);return!1},set:function(I,$){if(!z)z=new W;J(z,I,$)}};return L}}),F0=_((c,K)=>{var w=p4(),P=d6(),S=W4(),h=s6(),W=H2(),M=w("%WeakMap%",!0),J=P("WeakMap.prototype.get",!0),O=P("WeakMap.prototype.set",!0),G=P("WeakMap.prototype.has",!0),V=P("WeakMap.prototype.delete",!0);K.exports=M?function(){var z,L,I={assert:function($){if(!I.has($))throw new W("Side channel does not contain "+S($))},delete:function($){if(M&&$&&(typeof $==="object"||typeof $==="function")){if(z)return V(z,$)}else if(h){if(L)return L.delete($)}return!1},get:function($){if(M&&$&&(typeof $==="object"||typeof $==="function")){if(z)return J(z,$)}return L&&L.get($)},has:function($){if(M&&$&&(typeof $==="object"||typeof $==="function")){if(z)return G(z,$)}return!!L&&L.has($)},set:function($,q){if(M&&$&&(typeof $==="object"||typeof $==="function")){if(!z)z=new M;O(z,$,q)}else if(h){if(!L)L=h();L.set($,q)}}};return I}:h}),E0=_((c,K)=>{var w=H2(),P=W4(),S=P0(),h=s6(),W=F0(),M=W||h||S;K.exports=function(){var J,O={assert:function(G){if(!O.has(G))throw new w("Side channel does not contain "+P(G))},delete:function(G){return!!J&&J.delete(G)},get:function(G){return J&&J.get(G)},has:function(G){return!!J&&J.has(G)},set:function(G,V){if(!J)J=M();J.set(G,V)}};return O}}),T4=_((c,K)=>{var w=String.prototype.replace,P=/%20/g,S={RFC1738:"RFC1738",RFC3986:"RFC3986"};K.exports={default:S.RFC3986,formatters:{RFC1738:function(h){return w.call(h,P,"+")},RFC3986:function(h){return String(h)}},RFC1738:S.RFC1738,RFC3986:S.RFC3986}}),a6=_((c,K)=>{var w=T4(),P=Object.prototype.hasOwnProperty,S=Array.isArray,h=function(){var Y=[];for(var B=0;B<256;++B)Y.push("%"+((B<16?"0":"")+B.toString(16)).toUpperCase());return Y}(),W=function(Y){while(Y.length>1){var B=Y.pop(),D=B.obj[B.prop];if(S(D)){var H=[];for(var o=0;o<D.length;++o)if(typeof D[o]<"u")H.push(D[o]);B.obj[B.prop]=H}}},M=function(Y,B){var D=B&&B.plainObjects?{__proto__:null}:{};for(var H=0;H<Y.length;++H)if(typeof Y[H]<"u")D[H]=Y[H];return D},J=function Y(B,D,H){if(!D)return B;if(typeof D!=="object"&&typeof D!=="function"){if(S(B))B.push(D);else if(B&&typeof B==="object"){if(H&&(H.plainObjects||H.allowPrototypes)||!P.call(Object.prototype,D))B[D]=!0}else return[B,D];return B}if(!B||typeof B!=="object")return[B].concat(D);var o=B;if(S(B)&&!S(D))o=M(B,H);if(S(B)&&S(D))return D.forEach(function(Q,r){if(P.call(B,r)){var g=B[r];if(g&&typeof g==="object"&&Q&&typeof Q==="object")B[r]=Y(g,Q,H);else B.push(Q)}else B[r]=Q}),B;return Object.keys(D).reduce(function(Q,r){var g=D[r];if(P.call(Q,r))Q[r]=Y(Q[r],g,H);else Q[r]=g;return Q},o)},O=function(Y,B){return Object.keys(B).reduce(function(D,H){return D[H]=B[H],D},Y)},G=function(Y,B,D){var H=Y.replace(/\+/g," ");if(D==="iso-8859-1")return H.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(H)}catch(o){return H}},V=1024,z=function(Y,B,D,H,o){if(Y.length===0)return Y;var Q=Y;if(typeof Y==="symbol")Q=Symbol.prototype.toString.call(Y);else if(typeof Y!=="string")Q=String(Y);if(D==="iso-8859-1")return escape(Q).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});var r="";for(var g=0;g<Q.length;g+=V){var A=Q.length>=V?Q.slice(g,g+V):Q,u=[];for(var i=0;i<A.length;++i){var C=A.charCodeAt(i);if(C===45||C===46||C===95||C===126||C>=48&&C<=57||C>=65&&C<=90||C>=97&&C<=122||o===w.RFC1738&&(C===40||C===41)){u[u.length]=A.charAt(i);continue}if(C<128){u[u.length]=h[C];continue}if(C<2048){u[u.length]=h[192|C>>6]+h[128|C&63];continue}if(C<55296||C>=57344){u[u.length]=h[224|C>>12]+h[128|C>>6&63]+h[128|C&63];continue}i+=1,C=65536+((C&1023)<<10|A.charCodeAt(i)&1023),u[u.length]=h[240|C>>18]+h[128|C>>12&63]+h[128|C>>6&63]+h[128|C&63]}r+=u.join("")}return r},L=function(Y){var B=[{obj:{o:Y},prop:"o"}],D=[];for(var H=0;H<B.length;++H){var o=B[H],Q=o.obj[o.prop],r=Object.keys(Q);for(var g=0;g<r.length;++g){var A=r[g],u=Q[A];if(typeof u==="object"&&u!==null&&D.indexOf(u)===-1)B.push({obj:Q,prop:A}),D.push(u)}}return W(B),Y},I=function(Y){return Object.prototype.toString.call(Y)==="[object RegExp]"},$=function(Y){if(!Y||typeof Y!=="object")return!1;return!!(Y.constructor&&Y.constructor.isBuffer&&Y.constructor.isBuffer(Y))},q=function(Y,B){return[].concat(Y,B)},b=function(Y,B){if(S(Y)){var D=[];for(var H=0;H<Y.length;H+=1)D.push(B(Y[H]));return D}return B(Y)};K.exports={arrayToObject:M,assign:O,combine:q,compact:L,decode:G,encode:z,isBuffer:$,isRegExp:I,maybeMap:b,merge:J}}),R0=_((c,K)=>{var w=E0(),P=a6(),S=T4(),h=Object.prototype.hasOwnProperty,W={brackets:function(b){return b+"[]"},comma:"comma",indices:function(b,Y){return b+"["+Y+"]"},repeat:function(b){return b}},M=Array.isArray,J=Array.prototype.push,O=function(b,Y){J.apply(b,M(Y)?Y:[Y])},G=Date.prototype.toISOString,V=S.default,z={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:P.encode,encodeValuesOnly:!1,filter:void 0,format:V,formatter:S.formatters[V],indices:!1,serializeDate:function(b){return G.call(b)},skipNulls:!1,strictNullHandling:!1},L=function(b){return typeof b==="string"||typeof b==="number"||typeof b==="boolean"||typeof b==="symbol"||typeof b==="bigint"},I={},$=function b(Y,B,D,H,o,Q,r,g,A,u,i,C,a,bc,wc,Nc,qc,vc){var l=Y,Gc=vc,Fc=0,y=!1;while((Gc=Gc.get(I))!==void 0&&!y){var $c=Gc.get(Y);if(Fc+=1,typeof $c<"u")if($c===Fc)throw RangeError("Cyclic object value");else y=!0;if(typeof Gc.get(I)>"u")Fc=0}if(typeof u==="function")l=u(B,l);else if(l instanceof Date)l=a(l);else if(D==="comma"&&M(l))l=P.maybeMap(l,function(Mc){if(Mc instanceof Date)return a(Mc);return Mc});if(l===null){if(Q)return A&&!Nc?A(B,z.encoder,qc,"key",bc):B;l=""}if(L(l)||P.isBuffer(l)){if(A){var Zc=Nc?B:A(B,z.encoder,qc,"key",bc);return[wc(Zc)+"="+wc(A(l,z.encoder,qc,"value",bc))]}return[wc(B)+"="+wc(String(l))]}var d=[];if(typeof l>"u")return d;var Ec;if(D==="comma"&&M(l)){if(Nc&&A)l=P.maybeMap(l,A);Ec=[{value:l.length>0?l.join(",")||null:void 0}]}else if(M(u))Ec=u;else{var Uc=Object.keys(l);Ec=i?Uc.sort(i):Uc}var Rc=g?String(B).replace(/\./g,"%2E"):String(B),Ac=H&&M(l)&&l.length===1?Rc+"[]":Rc;if(o&&M(l)&&l.length===0)return Ac+"[]";for(var p=0;p<Ec.length;++p){var s=Ec[p],T=typeof s==="object"&&s&&typeof s.value<"u"?s.value:l[s];if(r&&T===null)continue;var hc=C&&g?String(s).replace(/\./g,"%2E"):String(s),Jc=M(l)?typeof D==="function"?D(Ac,hc):Ac:Ac+(C?"."+hc:"["+hc+"]");vc.set(Y,Fc);var jc=w();jc.set(I,vc),O(d,b(T,Jc,D,H,o,Q,r,g,D==="comma"&&Nc&&M(l)?null:A,u,i,C,a,bc,wc,Nc,qc,jc))}return d},q=function(b){if(!b)return z;if(typeof b.allowEmptyArrays<"u"&&typeof b.allowEmptyArrays!=="boolean")throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof b.encodeDotInKeys<"u"&&typeof b.encodeDotInKeys!=="boolean")throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(b.encoder!==null&&typeof b.encoder<"u"&&typeof b.encoder!=="function")throw TypeError("Encoder has to be a function.");var Y=b.charset||z.charset;if(typeof b.charset<"u"&&b.charset!=="utf-8"&&b.charset!=="iso-8859-1")throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var B=S.default;if(typeof b.format<"u"){if(!h.call(S.formatters,b.format))throw TypeError("Unknown format option provided.");B=b.format}var D=S.formatters[B],H=z.filter;if(typeof b.filter==="function"||M(b.filter))H=b.filter;var o;if(b.arrayFormat in W)o=b.arrayFormat;else if("indices"in b)o=b.indices?"indices":"repeat";else o=z.arrayFormat;if("commaRoundTrip"in b&&typeof b.commaRoundTrip!=="boolean")throw TypeError("`commaRoundTrip` must be a boolean, or absent");var Q=typeof b.allowDots>"u"?b.encodeDotInKeys===!0?!0:z.allowDots:!!b.allowDots;return{addQueryPrefix:typeof b.addQueryPrefix==="boolean"?b.addQueryPrefix:z.addQueryPrefix,allowDots:Q,allowEmptyArrays:typeof b.allowEmptyArrays==="boolean"?!!b.allowEmptyArrays:z.allowEmptyArrays,arrayFormat:o,charset:Y,charsetSentinel:typeof b.charsetSentinel==="boolean"?b.charsetSentinel:z.charsetSentinel,commaRoundTrip:!!b.commaRoundTrip,delimiter:typeof b.delimiter>"u"?z.delimiter:b.delimiter,encode:typeof b.encode==="boolean"?b.encode:z.encode,encodeDotInKeys:typeof b.encodeDotInKeys==="boolean"?b.encodeDotInKeys:z.encodeDotInKeys,encoder:typeof b.encoder==="function"?b.encoder:z.encoder,encodeValuesOnly:typeof b.encodeValuesOnly==="boolean"?b.encodeValuesOnly:z.encodeValuesOnly,filter:H,format:B,formatter:D,serializeDate:typeof b.serializeDate==="function"?b.serializeDate:z.serializeDate,skipNulls:typeof b.skipNulls==="boolean"?b.skipNulls:z.skipNulls,sort:typeof b.sort==="function"?b.sort:null,strictNullHandling:typeof b.strictNullHandling==="boolean"?b.strictNullHandling:z.strictNullHandling}};K.exports=function(b,Y){var B=b,D=q(Y),H,o;if(typeof D.filter==="function")o=D.filter,B=o("",B);else if(M(D.filter))o=D.filter,H=o;var Q=[];if(typeof B!=="object"||B===null)return"";var r=W[D.arrayFormat],g=r==="comma"&&D.commaRoundTrip;if(!H)H=Object.keys(B);if(D.sort)H.sort(D.sort);var A=w();for(var u=0;u<H.length;++u){var i=H[u],C=B[i];if(D.skipNulls&&C===null)continue;O(Q,$(C,i,r,g,D.allowEmptyArrays,D.strictNullHandling,D.skipNulls,D.encodeDotInKeys,D.encode?D.encoder:null,D.filter,D.sort,D.allowDots,D.serializeDate,D.format,D.formatter,D.encodeValuesOnly,D.charset,A))}var a=Q.join(D.delimiter),bc=D.addQueryPrefix===!0?"?":"";if(D.charsetSentinel)if(D.charset==="iso-8859-1")bc+="utf8=%26%2310003%3B&";else bc+="utf8=%E2%9C%93&";return a.length>0?bc+a:""}}),g0=_((c,K)=>{var w=a6(),P=Object.prototype.hasOwnProperty,S=Array.isArray,h={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:w.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1000,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},W=function(I){return I.replace(/&#(\d+);/g,function($,q){return String.fromCharCode(parseInt(q,10))})},M=function(I,$,q){if(I&&typeof I==="string"&&$.comma&&I.indexOf(",")>-1)return I.split(",");if($.throwOnLimitExceeded&&q>=$.arrayLimit)throw RangeError("Array limit exceeded. Only "+$.arrayLimit+" element"+($.arrayLimit===1?"":"s")+" allowed in an array.");return I},J="utf8=%26%2310003%3B",O="utf8=%E2%9C%93",G=function(I,$){var q={__proto__:null},b=$.ignoreQueryPrefix?I.replace(/^\?/,""):I;b=b.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var Y=$.parameterLimit===1/0?void 0:$.parameterLimit,B=b.split($.delimiter,$.throwOnLimitExceeded?Y+1:Y);if($.throwOnLimitExceeded&&B.length>Y)throw RangeError("Parameter limit exceeded. Only "+Y+" parameter"+(Y===1?"":"s")+" allowed.");var D=-1,H,o=$.charset;if($.charsetSentinel){for(H=0;H<B.length;++H)if(B[H].indexOf("utf8=")===0){if(B[H]===O)o="utf-8";else if(B[H]===J)o="iso-8859-1";D=H,H=B.length}}for(H=0;H<B.length;++H){if(H===D)continue;var Q=B[H],r=Q.indexOf("]="),g=r===-1?Q.indexOf("="):r+1,A,u;if(g===-1)A=$.decoder(Q,h.decoder,o,"key"),u=$.strictNullHandling?null:"";else A=$.decoder(Q.slice(0,g),h.decoder,o,"key"),u=w.maybeMap(M(Q.slice(g+1),$,S(q[A])?q[A].length:0),function(C){return $.decoder(C,h.decoder,o,"value")});if(u&&$.interpretNumericEntities&&o==="iso-8859-1")u=W(String(u));if(Q.indexOf("[]=")>-1)u=S(u)?[u]:u;var i=P.call(q,A);if(i&&$.duplicates==="combine")q[A]=w.combine(q[A],u);else if(!i||$.duplicates==="last")q[A]=u}return q},V=function(I,$,q,b){var Y=0;if(I.length>0&&I[I.length-1]==="[]"){var B=I.slice(0,-1).join("");Y=Array.isArray($)&&$[B]?$[B].length:0}var D=b?$:M($,q,Y);for(var H=I.length-1;H>=0;--H){var o,Q=I[H];if(Q==="[]"&&q.parseArrays)o=q.allowEmptyArrays&&(D===""||q.strictNullHandling&&D===null)?[]:w.combine([],D);else{o=q.plainObjects?{__proto__:null}:{};var r=Q.charAt(0)==="["&&Q.charAt(Q.length-1)==="]"?Q.slice(1,-1):Q,g=q.decodeDotInKeys?r.replace(/%2E/g,"."):r,A=parseInt(g,10);if(!q.parseArrays&&g==="")o={0:D};else if(!isNaN(A)&&Q!==g&&String(A)===g&&A>=0&&(q.parseArrays&&A<=q.arrayLimit))o=[],o[A]=D;else if(g!=="__proto__")o[g]=D}D=o}return D},z=function(I,$,q,b){if(!I)return;var Y=q.allowDots?I.replace(/\.([^.[]+)/g,"[$1]"):I,B=/(\[[^[\]]*])/,D=/(\[[^[\]]*])/g,H=q.depth>0&&B.exec(Y),o=H?Y.slice(0,H.index):Y,Q=[];if(o){if(!q.plainObjects&&P.call(Object.prototype,o)){if(!q.allowPrototypes)return}Q.push(o)}var r=0;while(q.depth>0&&(H=D.exec(Y))!==null&&r<q.depth){if(r+=1,!q.plainObjects&&P.call(Object.prototype,H[1].slice(1,-1))){if(!q.allowPrototypes)return}Q.push(H[1])}if(H){if(q.strictDepth===!0)throw RangeError("Input depth exceeded depth option of "+q.depth+" and strictDepth is true");Q.push("["+Y.slice(H.index)+"]")}return V(Q,$,q,b)},L=function(I){if(!I)return h;if(typeof I.allowEmptyArrays<"u"&&typeof I.allowEmptyArrays!=="boolean")throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof I.decodeDotInKeys<"u"&&typeof I.decodeDotInKeys!=="boolean")throw TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(I.decoder!==null&&typeof I.decoder<"u"&&typeof I.decoder!=="function")throw TypeError("Decoder has to be a function.");if(typeof I.charset<"u"&&I.charset!=="utf-8"&&I.charset!=="iso-8859-1")throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof I.throwOnLimitExceeded<"u"&&typeof I.throwOnLimitExceeded!=="boolean")throw TypeError("`throwOnLimitExceeded` option must be a boolean");var $=typeof I.charset>"u"?h.charset:I.charset,q=typeof I.duplicates>"u"?h.duplicates:I.duplicates;if(q!=="combine"&&q!=="first"&&q!=="last")throw TypeError("The duplicates option must be either combine, first, or last");var b=typeof I.allowDots>"u"?I.decodeDotInKeys===!0?!0:h.allowDots:!!I.allowDots;return{allowDots:b,allowEmptyArrays:typeof I.allowEmptyArrays==="boolean"?!!I.allowEmptyArrays:h.allowEmptyArrays,allowPrototypes:typeof I.allowPrototypes==="boolean"?I.allowPrototypes:h.allowPrototypes,allowSparse:typeof I.allowSparse==="boolean"?I.allowSparse:h.allowSparse,arrayLimit:typeof I.arrayLimit==="number"?I.arrayLimit:h.arrayLimit,charset:$,charsetSentinel:typeof I.charsetSentinel==="boolean"?I.charsetSentinel:h.charsetSentinel,comma:typeof I.comma==="boolean"?I.comma:h.comma,decodeDotInKeys:typeof I.decodeDotInKeys==="boolean"?I.decodeDotInKeys:h.decodeDotInKeys,decoder:typeof I.decoder==="function"?I.decoder:h.decoder,delimiter:typeof I.delimiter==="string"||w.isRegExp(I.delimiter)?I.delimiter:h.delimiter,depth:typeof I.depth==="number"||I.depth===!1?+I.depth:h.depth,duplicates:q,ignoreQueryPrefix:I.ignoreQueryPrefix===!0,interpretNumericEntities:typeof I.interpretNumericEntities==="boolean"?I.interpretNumericEntities:h.interpretNumericEntities,parameterLimit:typeof I.parameterLimit==="number"?I.parameterLimit:h.parameterLimit,parseArrays:I.parseArrays!==!1,plainObjects:typeof I.plainObjects==="boolean"?I.plainObjects:h.plainObjects,strictDepth:typeof I.strictDepth==="boolean"?!!I.strictDepth:h.strictDepth,strictNullHandling:typeof I.strictNullHandling==="boolean"?I.strictNullHandling:h.strictNullHandling,throwOnLimitExceeded:typeof I.throwOnLimitExceeded==="boolean"?I.throwOnLimitExceeded:!1}};K.exports=function(I,$){var q=L($);if(I===""||I===null||typeof I>"u")return q.plainObjects?{__proto__:null}:{};var b=typeof I==="string"?G(I,q):I,Y=q.plainObjects?{__proto__:null}:{},B=Object.keys(b);for(var D=0;D<B.length;++D){var H=B[D],o=z(H,b[H],q,typeof I==="string");Y=w.merge(Y,o,q)}if(q.allowSparse===!0)return Y;return w.compact(Y)}}),k0=_((c,K)=>{var w=R0(),P=g0(),S=T4();K.exports={formats:S,parse:P,stringify:w}}),p9=h4(e4(),1),x0={};c0(x0,{zodSchemaKey:()=>r0,webSocketServerArgsKey:()=>D2,webSocketMessageArgsKey:()=>t2,webSocketKey:()=>P4,webSocketEventKey:()=>o0,webSocketEventArgumentsKey:()=>Z0,webSocketConnectionArgsKey:()=>N2,webSocketCloseReasonArgsKey:()=>P8,webSocketCloseCodeArgsKey:()=>w8,routeModelArgsKey:()=>mc,responseStatusTextArgsKey:()=>h8,responseStatusArgsKey:()=>s2,responseHeadersArgsKey:()=>oc,responseBodyArgsKey:()=>d2,requestHeadersArgsKey:()=>K2,requestHeaderArgsKey:()=>ec,requestBodyArgsKey:()=>G2,requestArgsKey:()=>lc,queryArgsKey:()=>S8,paramsArgsKey:()=>y4,paramArgsKey:()=>j2,moduleKey:()=>n2,middlewareKey:()=>n4,interceptorKey:()=>i4,injectableKey:()=>K8,injectKey:()=>w4,httpServerArgsKey:()=>fc,guardKey:()=>c8,controllerKey:()=>K4,controllerHttpKey:()=>A0,contextArgsKey:()=>w2,containerKey:()=>J2,configKey:()=>C4,argumentsKey:()=>Qc});var Qc=Symbol.for("____boolTypescriptCore:arguments__"),Z0=Symbol.for("____boolTypescriptCore:webSocketEventArguments__"),C4=Symbol.for("____boolTypescriptCore:config__"),K4=Symbol.for("____boolTypescriptCore:controller__"),i4=Symbol.for("____boolTypescriptCore:interceptor__"),c8=Symbol.for("____boolTypescriptCore:guard__"),A0=Symbol.for("____boolTypescriptCore:controller.http__"),w4=Symbol.for("____boolTypescriptCore:inject__"),K8=Symbol.for("____boolTypescriptCore:injectable__"),n4=Symbol.for("____boolTypescriptCore:middleware__"),n2=Symbol.for("____boolTypescriptCore:module__"),J2=Symbol.for("____boolTypescriptCore:container__"),r0=Symbol.for("____boolTypescriptCore:zodSchema__"),P4=Symbol.for("____boolTypescriptCore:webSocket__"),o0=Symbol.for("____boolTypescriptCore:webSocket:event__"),D2=Symbol.for("____boolTypescriptCore:webSocketArguments:server__"),N2=Symbol.for("____boolTypescriptCore:webSocketArguments:connection__"),t2=Symbol.for("____boolTypescriptCore:webSocketArguments:message__"),w8=Symbol.for("____boolTypescriptCore:webSocketArguments:closeCode__"),P8=Symbol.for("____boolTypescriptCore:webSocketArguments:closeReason__"),fc=Symbol.for("____boolTypescriptCore:httpArguments:server__"),K2=Symbol.for("____boolTypescriptCore:httpArguments:requestHeaders__"),ec=Symbol.for("____boolTypescriptCore:httpArguments:requestHeader__"),G2=Symbol.for("____boolTypescriptCore:httpArguments:requestBody__"),y4=Symbol.for("____boolTypescriptCore:httpArguments:params__"),j2=Symbol.for("____boolTypescriptCore:httpArguments:param__"),S8=Symbol.for("____boolTypescriptCore:httpArguments:query__"),lc=Symbol.for("____boolTypescriptCore:httpArguments:request__"),oc=Symbol.for("____boolTypescriptCore:httpArguments:responseHeaders__"),w2=Symbol.for("____boolTypescriptCore:httpArguments:context__"),mc=Symbol.for("____boolTypescriptCore:httpArguments:routeModel__"),d2=Symbol.for("____boolTypescriptCore:httpArguments:responseBody__"),s2=Symbol.for("____boolTypescriptCore:httpArguments:responseStatus__"),h8=Symbol.for("____boolTypescriptCore:httpArguments:responseStatusText__"),W8=(c)=>(K,w,P)=>{if(!w)return;let S=Reflect.getOwnMetadata(Qc,K.constructor,w)||{};S[`argumentIndexes.${P}`]={index:P,type:K2,validationSchema:c},Reflect.defineMetadata(Qc,S,K.constructor,w)};var b4=(c)=>(K,w,P)=>{if(!w)return;let S=Reflect.getOwnMetadata(Qc,K.constructor,w)||{};S[`argumentIndexes.${P}`]={index:P,type:w2,key:c},Reflect.defineMetadata(Qc,S,K.constructor,w)},M8=()=>(c,K,w)=>{if(!K)return;let P=Reflect.getOwnMetadata(Qc,c.constructor,K)||{};P[`argumentIndexes.${w}`]={index:w,type:mc},Reflect.defineMetadata(Qc,P,c.constructor,K)};var b8=(c)=>(K,w,P)=>{let S=Reflect.getMetadata(w4,K)||[];S[P]=c,Reflect.defineMetadata(w4,S,K)};var I8=()=>(c)=>{Reflect.defineMetadata(i4,void 0,c)},O8=()=>(c)=>{Reflect.defineMetadata(n4,void 0,c)};var T9=Symbol("__bool:webSocket.upgrade__");var m0=Object.freeze({400:"BAD_REQUEST",401:"UNAUTHORIZED",402:"PAYMENT_REQUIRED",403:"FORBIDDEN",404:"NOT_FOUND",405:"METHOD_NOT_ALLOWED",406:"NOT_ACCEPTABLE",407:"PROXY_AUTHENCATION_REQUIRED",408:"REQUEST_TIMEOUT",409:"CONFLICT",410:"GONE",411:"LENGTH_REQUIRED",412:"PRECONDITION_FAILED",413:"PAYLOAD_TOO_LARGE",414:"URI_TOO_LONG",415:"UNSUPPORTED_MEDIA_TYPE",416:"RANGE_NOT_SATISFIABLE",417:"EXPECTATION_FAILED",418:"IM_A_TEAPOT",421:"MISDIRECTED_REQUEST",422:"UNPROCESSABLE_ENTITY",423:"LOCKED",424:"FAILED_DEPENDENCY",425:"TOO_EARLY_",426:"UPGRAGE_REQUIRED",428:"PRECONDITION_REQUIRED",429:"TOO_MANY_REQUESTS",431:"REQUEST_HEADER_FIELDS_TOO_LARGE",451:"UNAVAILABLE_FOR_LEGAL_REASONS"});class P2 extends Error{httpCode;message;data;constructor({httpCode:c,data:K,message:w}){super();this.httpCode=c,this.message=!w?.trim()?m0[c]:w.trim(),this.data=K}}var u0=Object.freeze({500:"INTERNAL_SERVER_ERROR",501:"NOT_IMPLEMENTED",502:"BAD_GATEWAY",503:"SERVICE_UNAVAILABLE",504:"GATEWAY_TIMEOUT",505:"HTTP_VERSION_NOT_SUPPORTED",506:"VARIANT_ALSO_NEGOTIATES",507:"INSUFFICIENT_STORAGE",508:"LOOP_DETECTED",510:"NOT_EXTENDED",511:"NETWORK_AUTHENTICATION_REQUIRED"});class t4 extends Error{httpCode;message;data;constructor({httpCode:c,data:K,message:w}){super();this.httpCode=c,this.message=!w?.trim()?u0[c]:w.trim(),this.data=K}}var C0=(c,K=new Headers)=>{if(K.set("Content-Type","application/json"),c instanceof P2||c instanceof t4)return new Response(JSON.stringify(c),{status:c.httpCode,statusText:c.message,headers:K});return new Response(JSON.stringify((()=>{switch(typeof c){case"object":return!(c instanceof Error)?c:{message:c.message,code:c.name,cause:c.cause};case"string":return{message:c};case"number":return{code:c};default:return}})()),{status:500,statusText:"INTERNAL SERVER ERROR",headers:K})},gc;(function(c){c.year="year",c.month="month",c.day="day",c.hours="hours",c.minutes="minutes",c.seconds="seconds",c.miliseconds="miliseconds"})(gc||(gc={}));var y0=(c,K,w=gc.day)=>{let P=c instanceof Date?c:new Date(c);switch(w){case gc.year:P.setFullYear(P.getFullYear()+K);break;case gc.month:P.setMonth(P.getMonth()+K);break;case gc.day:P.setDate(P.getDate()+K);break;case gc.hours:P.setHours(P.getHours()+K);break;case gc.minutes:P.setMinutes(P.getMinutes()+K);break;case gc.seconds:P.setSeconds(P.getSeconds()+K);break;case gc.miliseconds:P.setMilliseconds(P.getMilliseconds()+K);break}return P},_0=h4(k0(),1),i9=async function(){}.constructor,f6=Object.freeze({black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,gray:90}),e6=Object.freeze({black:40,red:41,green:42,yellow:43,blue:44,magenta:45,cyan:46,white:47,gray:100}),c2=(c,K={})=>{let{color:w,backgroundColor:P,bold:S,underline:h}=K,W="";if(S)W+="\x1B[1m";if(h)W+="\x1B[4m";if(w&&f6[w])W+=`\x1B[${f6[w]}m`;if(P&&e6[P])W+=`\x1B[${e6[P]}m`;return`${W}${c}\x1B[0m`},f0=(c)=>{let{headers:K,method:w}=c,P=K.get("upgrade")?.toLowerCase()||"",S=K.get("connection")?.toLowerCase()||"";return w==="GET"&&P?.toLowerCase()==="websocket"&&S?.toLowerCase().includes("upgrade")};class a2{_staticMap=new Map;_dynamicMap=new Map;_options=void 0;constructor(...c){c.forEach((K)=>{K.staticEntries.forEach(([w,P])=>this.set(w,P,{isStatic:!0,isPassthrough:!0})),K.dynamicEntries.forEach(([w,P])=>this.set(w,P,{isStatic:!1}))})}get(c,K){return!(K||this._options)?.isStatic?this._dynamicMap.get(c):this._staticMap.get(c)}has(c,K){return!(K||this._options)?.isStatic?this._dynamicMap.has(c):this._staticMap.has(c)}set(c,K,w){let P=w||this._options;if(!P?.isStatic)this._dynamicMap.set(c,K);else if(!this._staticMap.has(c))this._staticMap.set(c,K);else if(!P.isPassthrough)throw Error(`${String(c)} already exists in context static collection.`);return this}setOptions(c){return this._options=c,this}get staticEntries(){return[...this._staticMap.entries()]}get dynamicEntries(){return[...this._dynamicMap.entries()]}}class pc{static rootPattern=":([a-z0-9A-Z_-]{1,})";static innerRootPattern="([a-z0-9A-Z_-]{1,})";alias;_map=new Map;constructor(c){this.alias=this._thinAlias(c)}test(c,K){try{let w=this._map.get(K),P=this.alias.split("/"),S=this._thinAlias(c).split("/");if(!w)return;if(P.length!==S.length)return;let h=Object(),W=this.alias.replace(new RegExp(pc.rootPattern,"g"),pc.innerRootPattern);if(!new RegExp(W).test(this._thinAlias(c)))return;for(let M=0;M<P.length;M++){let J=P[M],O=S[M];if(!new RegExp(pc.rootPattern,"g").test(J)){if(J!==O)return}else{let G=!1;if(J.replace(new RegExp(pc.rootPattern,"g"),(V,z,L)=>{if(L===0)O.replace(new RegExp(pc.innerRootPattern,"g"),(I,$,q)=>{if(q===0)Object.assign(h,{[z]:I});return I});return V}),G)return}continue}return Object.freeze({parameters:h,model:w})}catch(w){return console.error(w),!1}}isMatch(c,K){try{if(!this._map.get(K))return;let w=this.alias.split("/"),P=this._thinAlias(c).split("/");if(w.length!==P.length)return!1;let S=Object();for(let h=0;h<w.length;h++){let W=w[h],M=P[h];if(!new RegExp(pc.rootPattern,"g").test(W)){if(W!==M)return!1}else{let J=!1;if(W.replace(new RegExp(pc.rootPattern,"g"),(O,G,V)=>{if(!new RegExp(V,"g").test(M))J=!0;else Object.assign(S,{[G]:M});return""}),J)return!1}continue}return!0}catch(w){console.error(w);return}}get(c){if(!this._map.get("GET"))this._map.set("GET",c);return this}post(c){if(!this._map.get("POST"))this._map.set("POST",c);return this}put(c){if(!this._map.get("PUT"))this._map.set("PUT",c);return this}delete(c){if(!this._map.get("DELETE"))this._map.set("DELETE",c);return this}connect(c){if(!this._map.get("CONNECT"))return this._map.set("CONNECT",c);return this}options(c){if(!this._map.get("OPTIONS"))return this._map.set("OPTIONS",c);return this}trace(c){if(!this._map.get("TRACE"))return this._map.set("TRACE",c);return this}patch(c){if(!this._map.get("PATCH"))return this._map.set("PATCH",c);return this}_thinAlias(c){return c.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}get _fullPath(){return this.alias.split("/").map((c,K)=>{let w=new RegExp(":([a-z0-9A-Z_.-]{1,})(\\(.*?\\))","g");if(!w.test(c)){if(w=new RegExp(":([a-z0-9A-Z_.-]{1,})","g"),!w.test(c))return c;return c.replace(w,(P,S)=>`${P}(.*?)`)}return c}).join("/")}get _filteredPath(){return this.alias.split("/").map((c,K)=>{let w=new RegExp(":([a-z0-9A-Z_.-]{1,})((.*?))","g");if(!w.test(c)){if(w=new RegExp(":([a-z0-9A-Z_.-]{1,})","g"),!w.test(c))return c;return c.replace(w,(P,S)=>"(.*?)")}return c.replace(w,(P,S,h)=>h)}).join("/")}}var e0=pc;class _4{alias;_routes=new Map;constructor(c){this.alias=this._thinAlias(c)}route(c){let K=this._thinAlias(`${this.alias}/${c}`),w=this._routes.get(K),P=!w?new e0(`${this.alias}/${c}`):w;if(!w)this._routes.set(K,P);return P}_thinAlias(c){return c.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}get routes(){return this._routes}}class f4{_routers=new Map;add(...c){for(let K of c){if(this._routers.has(K.alias))continue;this._routers.set(K.alias,K)}return this}find(c,K){for(let w of this._routers.values())for(let P of w.routes.values()){let S=P.test(c,K);if(!S)continue;return S}return}}var n9=h4(e4(),1);class c4{_mapper=new Map;constructor(...c){c.forEach((K)=>{K.entries.forEach(([w,P])=>{this._mapper.set(w,P)})})}get(c){if(this._mapper.has(c))return this._mapper.get(c);if(typeof c!=="function")return;let K=Reflect.getMetadataKeys(c);if(![K8,K4,n4,c8,i4,P4].some((S)=>K.includes(S)))throw Error("Missing dependency declaration, please check @Injectable() used on dependency(ies).");let w=(Reflect.getOwnMetadata(w4,c)||[]).map((S)=>this.get(S)),P=new c(...w);return this._mapper.set(c,P),P}set(c,K){if(this._mapper.has(c))throw Error(`${String(c)} already exists in injector collection.`);this._mapper.set(c,K)}get entries(){return[...this._mapper.entries()]}}class J8{error;constructor(c){this.error=c}}var l0=J8;class D8{eventName;metadata;_context=void 0;constructor({eventName:c,metadata:K}){this.eventName=c,this.metadata=K}bind(c){return this._context=c,this}execute(){if(this._context&&typeof this.metadata.descriptor.value==="function")this.metadata.descriptor.value=this.metadata.descriptor.value.bind(this._context);return Object.freeze({methodName:this.metadata.methodName,descriptor:this.metadata.descriptor,arguments:this.metadata.arguments})}}class d4{rawAlias;alias;routes=[];constructor(c="/"){this.rawAlias=c,this.alias=d4.thinAlias(c)}addRoutes(...c){for(let K of c)if(!this.routes.includes(K))this.routes.push(K);return this}bind(c){for(let K of this.routes)K.bind(c);return this}execute(){let c=new Map;for(let K of this.routes)c.set(`${this.alias}:::${K.eventName}`,K.execute());return c}static thinAlias(c){return c.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}}class S4{rawPrefix;prefix;routers=[];constructor(c="/"){this.rawPrefix=c,this.prefix=S4.thinPrefix(c)}addRouters(...c){for(let K=0;K<c.length;K++)if(!this.routers.includes(c[K]))this.routers.push(c[K]);for(let K of c)if(!this.routers.includes(K))this.routers.push(K);return this}execute(){let c=new Map;for(let K of this.routers){let w=K.execute();for(let[P,S]of w.entries())c.set(`/${S4.thinPrefix(`${this.prefix}/${P}`)}`,S)}return c}static thinPrefix(c){return c.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}}class p0{classConstructor;options;#c;#K;#w=new c4;#P=new Map;#h;#W=900;#S;constructor(c,K){if(this.classConstructor=c,this.options=K,this.#K=Reflect.getOwnMetadataKeys(c),!this.#K.includes(J2)&&!this.#K.includes(n2))throw Error(`Can not detect! ${c.name} class is not a container or module.`);this.#W=typeof K.static?.cacheTimeInSeconds!=="number"?900:K.static.cacheTimeInSeconds,this.#h=Object.freeze({allowLogsMethods:this.options?.log?.methods||[],staticOption:this.options.static,allowOrigins:!this.options.cors?.origins?["*"]:typeof this.options.cors.origins!=="string"?this.options.cors.origins.includes("*")||this.options.cors.origins.length<1?["*"]:this.options.cors.origins:[this.options.cors.origins!=="*"?this.options.cors.origins:"*"],allowMethods:this.options.cors?.methods||["GET","POST","PUT","PATCH","DELETE","OPTIONS"],allowCredentials:!this.options.cors?.credentials?!1:!0,allowHeaders:!this.options.cors?.headers||this.options.cors.headers.includes("*")?["*"]:this.options.cors.headers})}useValidator(c){this.#S=c}async preLaunch(){if(this.#c)return this.#c;let c=!this.#K.includes(J2)?void 0:Reflect.getOwnMetadata(J2,this.classConstructor),K=!this.#K.includes(J2)?[this.classConstructor]:c?.modules||[],w=!c?void 0:await this.containerResolution({containerClass:this.classConstructor,options:this.options,extendInjector:this.#w}),P=await Promise.all(K.map((W)=>this.moduleResolution({moduleClass:W,options:this.options,extendInjector:!w?this.#w:w.injector})));if([...new Set(P.map((W)=>W.prefix))].length!==P.length)throw Error("Module prefix should be unique.");let S=new Map;for(let W of P){let M=W.webSocketRouterGroup.execute();for(let[J,O]of M.entries())S.set(J,O)}let h=Object.freeze({containerMetadata:c,modulesConverted:K,resolutedContainer:w,resolutedModules:P,webSocketsMap:S});return this.#c=h,h}async listen(){let{allowLogsMethods:c,allowOrigins:K,allowMethods:w,allowHeaders:P,allowCredentials:S,staticOption:h}=this.#h,{resolutedContainer:W,resolutedModules:M,webSocketsMap:J}=await this.preLaunch(),O=Bun.serve({port:this.options.port,fetch:async(G,V)=>{let z=performance.now(),L=new URL(G.url),I=_0.parse(L.searchParams.toString(),this.options.queryParser),$=G.headers.get("origin")||"*",q=G.method.toUpperCase(),b=new Headers,Y=new a2().setOptions({isStatic:!0}).set(fc,V).set(lc,G).set(ec,G.headers).set(oc,b).set(S8,I);try{let B=f0(G),D;if(B){for(let A of M){let u=A.webSocketHttpRouterGroup.find(L.pathname,G.method);if(u){D=Object.freeze({route:u,resolution:A});break}}if(!D)return this.finalizeResponse(new Response(JSON.stringify({httpCode:404,message:"Route not found",data:void 0}),{status:404,statusText:"Not found.",headers:b}));let g=await this.webSocketFetcher({request:G,server:V},{query:I,responseHeaders:b,route:D.route,moduleResolution:D.resolution});return g instanceof Response?g:void 0}if([...!S?[]:[{key:"Access-Control-Allow-Credentials",value:"true"}],{key:"Access-Control-Allow-Origin",value:K.includes("*")?"*":!K.includes($)?K[0]:$},{key:"Access-Control-Allow-Methods",value:w.join(", ")},{key:"Access-Control-Allow-Headers",value:P.join(", ")}].forEach(({key:g,value:A})=>b.set(g,A)),!w.includes(q))return this.finalizeResponse(new Response(void 0,{status:405,statusText:"Method Not Allowed.",headers:b}));if(G.method.toUpperCase()==="OPTIONS")return this.finalizeResponse(K.includes("*")||K.includes($)?new Response(void 0,{status:204,statusText:"No Content.",headers:b}):new Response(void 0,{status:417,statusText:"Expectation Failed.",headers:b}));if(h){let{path:g,headers:A}=h,u=`${g}/${L.pathname}`,i=this.#P.get(u);if(!i){let C=Bun.file(u);if(await C.exists()){if(A)for(let[a,bc]of Object.entries(A))b.set(a,bc);return b.set("Content-Type",C.type),this.finalizeResponse(new Response(await C.arrayBuffer(),{status:200,statusText:"SUCCESS",headers:b}))}}else{let C=new Date>i.expiredAt;if(C)this.#P.delete(u);let a=!C?i.file:Bun.file(u);if(await a.exists()){if(this.#P.set(u,Object.freeze({expiredAt:y0(new Date,this.#W,gc.seconds),file:a})),A)for(let[bc,wc]of Object.entries(A))b.set(bc,wc);return b.set("Content-Type",a.type),this.finalizeResponse(new Response(await a.arrayBuffer(),{status:200,statusText:"SUCCESS",headers:b}))}}}if(W){let{context:g}=await this.httpFetcher({context:Y,resolutedMap:{injector:W.injector,startMiddlewareGroup:W.startMiddlewareGroup,guardGroup:W.guardGroup},options:{isContainer:!0}});Y=g}for(let g of M){let A=g.controllerRouterGroup.find(L.pathname,q);if(A){D=Object.freeze({route:A,resolution:g});break}}if(!D)Y.setOptions({isStatic:!1}).set(s2,404).set(h8,"Not found.").set(d2,{httpCode:404,message:"Route not found",data:void 0});else{let{context:g}=await this.httpFetcher({context:Y,route:D.route,resolutedMap:D.resolution});Y=g}if(W){let{context:g}=await this.httpFetcher({context:Y,resolutedMap:{injector:W.injector,endMiddlewareGroup:W.endMiddlewareGroup},options:{isContainer:!0}});Y=g}let H=Y.get(oc,{isStatic:!0})||new Headers,o=Y.get(d2,{isStatic:!1})||void 0,Q=Y.get(s2,{isStatic:!1}),r=Y.get(s2,{isStatic:!1});return this.serializeResponse({status:typeof Q!=="number"?void 0:Q,statusText:typeof r!=="string"?void 0:r,headers:H,data:o})}catch(B){return this.options.debug&&console.error(B),this.finalizeResponse(C0(B,b))}finally{if(c){let B=performance.now(),D=c2(L.pathname,{color:"blue"}),H=`${Bun.color("yellow","ansi")}${process.pid}`,o=c2(G.method,{color:"yellow",backgroundColor:"blue"}),Q=c2(`${G.headers.get("x-forwarded-for")||G.headers.get("x-real-ip")||V.requestIP(G)?.address||"<Unknown>"}`,{color:"yellow"}),r=c2(`${Math.round((B-z+Number.EPSILON)*100)/100}ms`,{color:"yellow",backgroundColor:"blue"});c.includes(G.method.toUpperCase())&&console.info(`PID: ${H} - Method: ${o} - IP: ${Q} - ${D} - Time: ${r}`)}}},websocket:{open:(G)=>{let V=`${G.data.pathname}:::open`,z=J.get(V);if(!z)return;let L=z.arguments||{},I=[];for(let[$,q]of Object.entries(L))switch(q.type){case N2:I[q.index]=G;break;case D2:I[q.index]=O;break}z.descriptor.value(...I)},close:(G,V,z)=>{let L=`${G.data.pathname}:::close`,I=J.get(L);if(!I)return;let $=I.arguments||{},q=[];for(let[b,Y]of Object.entries($))switch(Y.type){case N2:q[Y.index]=G;break;case D2:q[Y.index]=O;break;case w8:q[Y.index]=V;break;case P8:q[Y.index]=z;break}I.descriptor.value(...q)},message:(G,V)=>{let z=`${G.data.pathname}:::message`,L=J.get(z);if(!L)return;let I=L.arguments||{},$=[];for(let[q,b]of Object.entries(I))switch(b.type){case N2:$[b.index]=G;break;case t2:$[b.index]=V;break;case D2:$[b.index]=O;break}L.descriptor.value(...$)},drain:(G)=>{let V=`${G.data.pathname}:::drain`,z=J.get(V);if(!z)return;let L=z.arguments||{},I=[];for(let[$,q]of Object.entries(L))switch(q.type){case N2:I[q.index]=G;break;case D2:I[q.index]=O;break}z.descriptor.value(...I)},ping:(G,V)=>{let z=`${G.data.pathname}:::ping`,L=J.get(z);if(!L)return;let I=L.arguments||{},$=[];for(let[q,b]of Object.entries(I))switch(b.type){case N2:$[b.index]=G;break;case D2:$[b.index]=O;break;case t2:$[b.index]=V;break}L.descriptor.value(...$)},pong:(G,V)=>{let z=`${G.data.pathname}:::pong`,L=J.get(z);if(!L)return;let I=L.arguments||{},$=[];for(let[q,b]of Object.entries(I))switch(b.type){case N2:$[b.index]=G;break;case D2:$[b.index]=O;break;case t2:$[b.index]=V;break}L.descriptor.value(...$)}}})}async containerResolution({containerClass:c,options:K,extendInjector:w}){if(!Reflect.getOwnMetadataKeys(c).includes(J2))throw Error(`${c.name} is not a container.`);let P=new c4(w),S=Reflect.getOwnMetadata(J2,c),{loaders:h,middlewares:W,guards:M,dependencies:J,config:O}=S||{},{config:G}=Object.freeze({config:{...typeof K.config!=="function"?K.config:await K.config(),...typeof O!=="function"?typeof O!=="object"?void 0:("key"in O)&&("value"in O)&&typeof O.key==="symbol"?typeof O.value!=="function"?O.value:await O.value():O:await O()}});if(P.set(O&&"key"in O&&"value"in O&&typeof O.key==="symbol"?O.key:C4,G),h){let I=[];for(let[q,b]of Object.entries(h))I.push(async()=>{try{let Y=await b({config:G});return console.info(`${c2(" INFO ",{color:"white",backgroundColor:"blue",bold:!0})} Loader [${q}] initialized successfully.`),Y}catch(Y){throw console.error(`${c2(" WARN ",{color:"yellow",backgroundColor:"red",bold:!0})} Loader [${q}] initialization failed.`),K.debug&&console.error(Y),Y}});let $=await Promise.all(I.map((q)=>q()));for(let[q,b]of $)P.set(q,b)}!J||J.map((I)=>P.get(I));let V=[],z=[];!W||W.forEach((I)=>{let $=P.get(I);if($.start&&typeof $.start==="function"){let q=Reflect.getOwnMetadata(Qc,I,"start")||{};V.push(Object.freeze({class:I,funcName:"start",func:$.start.bind($),argumentsMetadata:q}))}if($.end&&typeof $.end==="function"){let q=Reflect.getOwnMetadata(Qc,I,"end")||{};z.push(Object.freeze({class:I,funcName:"end",func:$.end.bind($),argumentsMetadata:q}))}});let L=!M?[]:M.map((I)=>{let $=P.get(I),q=Reflect.getOwnMetadata(Qc,I,"enforce")||{};return Object.freeze({class:I,funcName:"enforce",func:$.enforce.bind($),argumentsMetadata:q})});return Object.freeze({injector:P,startMiddlewareGroup:V,endMiddlewareGroup:z,guardGroup:L})}async moduleResolution({moduleClass:c,options:K,extendInjector:w}){if(!Reflect.getOwnMetadataKeys(c).includes(n2))throw Error(`${c.name} is not a module.`);let P=new c4(w),S=Reflect.getOwnMetadata(n2,c),{loaders:h,middlewares:W,guards:M,interceptors:J,controllers:O,dependencies:G,webSockets:V,prefix:z,config:L}=S||{},I=`${K.prefix||""}/${z||""}`,{config:$}=Object.freeze({config:{...typeof K.config!=="function"?K.config:await K.config(),...typeof L!=="function"?typeof L!=="object"?void 0:("key"in L)&&("value"in L)&&typeof L.key==="symbol"?typeof L.value!=="function"?L.value:await L.value():L:await L()}});if(P.set(L&&"key"in L&&"value"in L&&typeof L.key==="symbol"?L.key:C4,$),h){let r=[];for(let[A,u]of Object.entries(h))r.push(async()=>{try{let i=await u({config:$});return console.info(`${c2(" INFO ",{color:"white",backgroundColor:"blue",bold:!0})} Loader [${A}] initialized successfully.`),i}catch(i){throw console.error(`${c2(" WARN ",{color:"yellow",backgroundColor:"red",bold:!0})} Loader [${A}] initialization failed.`),K.debug&&console.error(i),i}});let g=await Promise.all(r.map((A)=>A()));for(let A=0;A<g.length;A++){let[u,i]=g[A];P.set(u,i)}}!G||G.map((r)=>P.get(r));let q=[],b=[];!W||W.forEach((r)=>{let g=P.get(r);if(g.start&&typeof g.start==="function"){let A=Reflect.getOwnMetadata(Qc,r,"start")||{};q.push(Object.freeze({class:r,funcName:"start",func:g.start.bind(g),argumentsMetadata:A}))}if(g.end&&typeof g.end==="function"){let A=Reflect.getOwnMetadata(Qc,r,"end")||{};b.push(Object.freeze({class:r,funcName:"end",func:g.end.bind(g),argumentsMetadata:A}))}});let Y=!M?[]:M.map((r)=>{let g=P.get(r),A=Reflect.getOwnMetadata(Qc,r,"enforce")||{};return Object.freeze({class:r,funcName:"enforce",func:g.enforce.bind(g),argumentsMetadata:A})}),B=[],D=[];!J||J.forEach((r)=>{let g=P.get(r);if(g.open&&typeof g.open==="function"){let A=Reflect.getOwnMetadata(Qc,r,"open")||{};B.push(Object.freeze({class:r,funcName:"open",func:g.open.bind(g),argumentsMetadata:A}))}if(g.close&&typeof g.close==="function"){let A=Reflect.getOwnMetadata(Qc,r,"close")||{};D.push(Object.freeze({class:r,funcName:"close",func:g.close.bind(g),argumentsMetadata:A}))}});let H=new f4;!O||O.forEach((r)=>this.initControllerInstance({controllerConstructor:r,httpRouterGroup:H,injector:P,prefix:I}));let o=new f4,Q=new S4;return V&&V.forEach((r)=>this.initWebSocketInstance({webSocketConstructor:r,httpRouterGroup:o,webSocketRouterGroup:Q,injector:P,prefix:I})),Object.freeze({prefix:z||"",injector:P,startMiddlewareGroup:q,endMiddlewareGroup:b,guardGroup:Y,openInterceptorGroup:B,closeInterceptorGroup:D,controllerRouterGroup:H,webSocketHttpRouterGroup:o,webSocketRouterGroup:Q})}async argumentsResolution(c,K,w,P){if(!this.#S)return c;try{let S=await this.#S.validate(c,K,w,P);if(!(S instanceof l0))return S;throw new P2({httpCode:400,message:`Validation at the [${P.toString()}] method fails at positional argument [${w}].`,data:S.error})}catch(S){if(S instanceof P2)throw S;throw new t4({httpCode:500,message:`Validation at the [${P.toString()}] method error at positional argument [${w}].`,data:!(S instanceof Error)?S:[{message:S.message,code:S.name,cause:S.cause}]})}}initControllerInstance({controllerConstructor:c,httpRouterGroup:K,injector:w,prefix:P}){if(!Reflect.getOwnMetadataKeys(c).includes(K4))throw Error(`${c.name} is not a controller.`);let S=w.get(c);if(!S)throw Error("Can not initialize controller.");let h=Reflect.getOwnMetadata(K4,c)||{prefix:"/",httpMetadata:[]},W=new _4(`/${P||""}/${h.prefix}`);return h.httpMetadata.forEach((M)=>{if(typeof M.descriptor.value!=="function")return;let J=W.route(M.path),O=M.descriptor.value.bind(S),G=Object.freeze({class:c,funcName:M.methodName,func:O,argumentsMetadata:M.argumentsMetadata});switch(M.httpMethod){case"GET":return J.get(G);case"POST":return J.post(G);case"PUT":return J.put(G);case"PATCH":return J.patch(G);case"DELETE":return J.delete(G);case"OPTIONS":return J.options(G)}}),K.add(W)}initWebSocketInstance({injector:c,httpRouterGroup:K,prefix:w,webSocketRouterGroup:P,webSocketConstructor:S}){if(!Reflect.getOwnMetadataKeys(S).includes(P4))throw Error(`${S.name} is not a websocket route.`);let h=c.get(S);if(!h)throw Error("Can not initialize webSocket.");let W=Reflect.getOwnMetadata(P4,S)||{prefix:"/",events:[],http:[]},M=`/${w||""}/${W.prefix}`,J=new _4(M);for(let[G,V]of Object.entries(W.http)){if(typeof V.descriptor?.value!=="function")continue;let z=J.route(V.path),L=V.descriptor.value.bind(h),I=Object.freeze({class:S,funcName:V.methodName,func:L,argumentsMetadata:V.argumentsMetadata});switch(V.httpMethod){case"GET":z.get(I);break;case"POST":z.post(I);break}}K.add(J);let O=new d4(M);for(let[G,V]of Object.entries(W.events)){let z=new D8({eventName:G,metadata:V});O.addRoutes(z)}return O.bind(h),P.addRouters(O),Object.freeze({httpRouterGroup:K,webSocketRouterGroup:P})}serializeResponse({status:c,statusText:K,headers:w,data:P}){let S=w.get("Content-Type")||"text/plain";if(S.includes("application/json"))return this.finalizeResponse(new Response(P instanceof ReadableStream?P:JSON.stringify(P),{status:c,statusText:K,headers:w}));if(S.includes("text/plain")||S.includes("text/html"))return this.finalizeResponse(new Response(P instanceof ReadableStream?P:String(P),{status:c,statusText:K,headers:w}));if(S.includes("application/octet-stream")){if(P instanceof Uint8Array||P instanceof ArrayBuffer||P instanceof Blob||P instanceof ReadableStream)return this.finalizeResponse(new Response(P instanceof Uint8Array?String.fromCharCode(...new Uint8Array(P)):P,{status:c,statusText:K,headers:w}));throw Error("Invalid data type for application/octet-stream")}if(S.includes("multipart/form-data")){if(P instanceof FormData)return this.finalizeResponse(new Response(P,{status:c,statusText:K,headers:w}));throw Error("multipart/form-data requires FormData object")}return this.finalizeResponse(new Response(String(P),{status:c,statusText:K,headers:w}))}finalizeResponse(c){return c.headers.set("X-Powered-By","Bool Typescript"),c}async httpFetcher({context:c,route:K,options:w,resolutedMap:P}){let S={isStatic:!0},h=(!c?new a2:new a2(c)).setOptions(S);if(K)h.set(y4,K.parameters).set(mc,K.model);let W=h.get(fc,S)||void 0,M=h.get(lc,S)||void 0,J=h.get(ec,S)||void 0,O=h.get(oc,S)||void 0,G=h.get(y4,S)||void 0,V=h.get(mc,S)||void 0;if(P){let{startMiddlewareGroup:z,guardGroup:L}=P;if(z)for(let I=0;I<z.length;I++){let $=[],{func:q,funcName:b,argumentsMetadata:Y}=z[I];for(let[B,D]of Object.entries(Y))switch(D.type){case w2:$[D.index]=!D.key?h:h.get(D.key,S);break;case lc:$[D.index]=!D.validationSchema?M:await this.argumentsResolution(M,D.validationSchema,D.index,b);break;case G2:$[D.index]=!D.validationSchema?await M?.[D.parser||"json"]():await this.argumentsResolution(await M?.[D.parser||"json"](),D.validationSchema,D.index,b);break;case K2:$[D.index]=!D.validationSchema?J:await this.argumentsResolution(J?.toJSON(),D.validationSchema,D.index,b);break;case ec:$[D.index]=!D.validationSchema?J?.get(D.key)||void 0:await this.argumentsResolution(J?.get(D.key)||void 0,D.validationSchema,D.index,b);break;case j2:$[D.index]=!D.validationSchema?G?.[D.key]||void 0:await this.argumentsResolution(G?.[D.key]||void 0,D.validationSchema,D.index,b);break;case mc:$[D.index]=V;break;case oc:$[D.index]=O;break;case fc:$[D.index]=W;break;default:$[D.index]=!D.validationSchema?!h.has(D.type,S)?void 0:h.get(D.type,S):await this.argumentsResolution(!(D.type in h)?void 0:h.get(D.type,S),D.validationSchema,D.index,b);break}await q(...$)}if(L)for(let I=0;I<L.length;I++){let $=[],{func:q,funcName:b,argumentsMetadata:Y}=L[I];for(let[D,H]of Object.entries(Y))switch(H.type){case lc:$[H.index]=!H.validationSchema?M:await this.argumentsResolution(M,H.validationSchema,H.index,b);break;case G2:$[H.index]=!H.validationSchema?await M?.[H.parser||"json"]():await this.argumentsResolution(await M?.[H.parser||"json"](),H.validationSchema,H.index,b);break;case w2:$[H.index]=!H.key?h:h.get(H.key);break;case K2:$[H.index]=!H.validationSchema?J:await this.argumentsResolution(J?.toJSON(),H.validationSchema,H.index,b);break;case oc:$[H.index]=O;break;case ec:$[H.index]=!H.validationSchema?J?.get(H.key)||void 0:await this.argumentsResolution(J?.get(H.key)||void 0,H.validationSchema,H.index,b);break;case j2:$[H.index]=!H.validationSchema?G?.[H.key]||void 0:await this.argumentsResolution(G?.[H.key],H.validationSchema,H.index,b);break;case mc:$[H.index]=V;break;case fc:$[H.index]=W;break;default:$[H.index]=!H.validationSchema?!h.has(H.type)?void 0:h.get(H.type):await this.argumentsResolution(h.get(H.type),H.validationSchema,H.index,b);break}let B=await q(...$);if(typeof B!=="boolean"||!B)throw new P2({httpCode:401,message:"Unauthorization.",data:void 0})}}if(V&&!w?.isContainer){if(P&&"openInterceptorGroup"in P&&P.openInterceptorGroup){let{openInterceptorGroup:q}=P;for(let b=0;b<q.length;b++){let Y=[],{func:B,funcName:D,argumentsMetadata:H}=q[b];for(let[o,Q]of Object.entries(H))switch(Q.type){case lc:Y[Q.index]=!Q.validationSchema?M:await this.argumentsResolution(M,Q.validationSchema,Q.index,D);break;case G2:Y[Q.index]=!Q.validationSchema?await M?.[Q.parser||"json"]():await this.argumentsResolution(await M?.[Q.parser||"json"](),Q.validationSchema,Q.index,D);break;case w2:Y[Q.index]=!Q.key?h:h.get(Q.key);break;case K2:Y[Q.index]=!Q.validationSchema?J:await this.argumentsResolution(J?.toJSON(),Q.validationSchema,Q.index,D);break;case ec:Y[Q.index]=!Q.validationSchema?J?.get(Q.key)||void 0:await this.argumentsResolution(J?.get(Q.key)||void 0,Q.validationSchema,Q.index,D);break;case oc:Y[Q.index]=O;break;case j2:Y[Q.index]=!Q.validationSchema?G?.[Q.key]||void 0:await this.argumentsResolution(G?.[Q.key]||void 0,Q.validationSchema,Q.index,D);break;case mc:Y[Q.index]=V;break;case fc:Y[Q.index]=W;break;default:Y[Q.index]=!Q.validationSchema?!h.has(Q.type)?void 0:h.get(Q.type):await this.argumentsResolution(h.get(Q.type),Q.validationSchema,Q.index,D);break}await B(...Y)}}let z=[],{func:L,funcName:I,argumentsMetadata:$}=V;for(let[q,b]of Object.entries($))switch(b.type){case lc:z[b.index]=!b.validationSchema?M:await this.argumentsResolution(M,b.validationSchema,b.index,I);break;case G2:z[b.index]=!b.validationSchema?await M?.[b.parser||"json"]():await this.argumentsResolution(await M?.[b.parser||"json"](),b.validationSchema,b.index,I);break;case w2:z[b.index]=!b.key?h:h.get(b.key);break;case K2:z[b.index]=!b.validationSchema?J:await this.argumentsResolution(J?.toJSON(),b.validationSchema,b.index,I);break;case ec:z[b.index]=!b.validationSchema?J?.get(b.key)||void 0:await this.argumentsResolution(J?.get(b.key)||void 0,b.validationSchema,b.index,I);break;case oc:z[b.index]=O;break;case j2:z[b.index]=!b.validationSchema?G?.[b.key]||void 0:await this.argumentsResolution(G?.[b.key]||void 0,b.validationSchema,b.index,I);break;case mc:z[b.index]=V;break;case fc:z[b.index]=W;break;default:z[b.index]=!b.validationSchema?!h.has(b.type)?void 0:h.get(b.type):await this.argumentsResolution(h.get(b.type),b.validationSchema,b.index,I);break}if(h.set(d2,await L(...z),{isStatic:!1}),P&&"closeInterceptorGroup"in P&&P.closeInterceptorGroup){let{closeInterceptorGroup:q}=P;for(let b=0;b<q.length;b++){let Y=[],{func:B,funcName:D,argumentsMetadata:H}=q[b];for(let[o,Q]of Object.entries(H))switch(Q.type){case lc:Y[Q.index]=!Q.validationSchema?M:await this.argumentsResolution(M,Q.validationSchema,Q.index,D);break;case G2:Y[Q.index]=!Q.validationSchema?await M?.[Q.parser||"json"]():await this.argumentsResolution(await M?.[Q.parser||"json"](),Q.validationSchema,Q.index,D);break;case w2:Y[Q.index]=!Q.key?h:h.get(Q.key);break;case K2:Y[Q.index]=!Q.validationSchema?J:await this.argumentsResolution(J?.toJSON(),Q.validationSchema,Q.index,D);break;case oc:Y[Q.index]=h.get(Q.type);break;case ec:Y[Q.index]=!Q.validationSchema?J?.get(Q.key)||void 0:await this.argumentsResolution(J?.get(Q.key)||void 0,Q.validationSchema,Q.index,D);break;case j2:Y[Q.index]=!Q.validationSchema?G?.[Q.key]||void 0:await this.argumentsResolution(G?.[Q.key]||void 0,Q.validationSchema,Q.index,D);break;case mc:Y[Q.index]=V;break;case fc:Y[Q.index]=W;break;default:Y[Q.index]=!Q.validationSchema?!h.has(Q.type)?void 0:h.get(Q.type):await this.argumentsResolution(h.get(Q.type),Q.validationSchema,Q.index,D);break}await B(...Y)}}}if(P){let{endMiddlewareGroup:z}=P;if(z)for(let L=0;L<z.length;L++){let I=[],{func:$,funcName:q,argumentsMetadata:b}=z[L];for(let[Y,B]of Object.entries(b))switch(B.type){case lc:I[B.index]=!B.validationSchema?M:await this.argumentsResolution(M,B.validationSchema,B.index,q);break;case G2:I[B.index]=!B.validationSchema?await M?.[B.parser||"json"]():await this.argumentsResolution(await M?.[B.parser||"json"](),B.validationSchema,B.index,q);break;case w2:I[B.index]=!B.key?h:h.get(B.key);break;case K2:I[B.index]=!B.validationSchema?J:await this.argumentsResolution(J?.toJSON(),B.validationSchema,B.index,q);break;case oc:I[B.index]=h.get(B.type);break;case ec:I[B.index]=!B.validationSchema?J?.get(B.key)||void 0:await this.argumentsResolution(J?.get(B.key)||void 0,B.validationSchema,B.index,q);break;case j2:I[B.index]=!B.validationSchema?G?.[B.key]||void 0:await this.argumentsResolution(G?.[B.key]||void 0,B.validationSchema,B.index,q);break;case mc:I[B.index]=V;break;case fc:I[B.index]=W;break;default:I[B.index]=!B.validationSchema?!h.has(B.type)?void 0:h.get(B.type):await this.argumentsResolution(!(B.type in h)?void 0:h.get(B.type),B.validationSchema,B.index,q);break}await $(...I)}}return Object.freeze({context:h})}async webSocketFetcher(c,K){let{request:w,server:P}=c,{query:S,responseHeaders:h,route:{model:W}}=K,M=await W.func(...[P,w,S]);if(typeof M!=="boolean")return this.finalizeResponse(new Response(JSON.stringify({httpCode:500,message:"Can not detect webSocket upgrade result.",data:void 0}),{status:500,statusText:"Internal server error.",headers:h}));if(!M)return this.finalizeResponse(new Response(JSON.stringify({httpCode:500,message:"Can not upgrade.",data:void 0}),{status:500,statusText:"Internal server error.",headers:h}));return M}}var t9=h4(e4(),1);var s4=()=>b4(Yc.authState);class a4{open(c,K){if(Reflect.getOwnMetadataKeys(c.class.prototype,c.funcName).includes(Yc.authState)){if(!K)throw new P2({httpCode:401,message:"Unauthorized",data:void 0});return}if(Reflect.getOwnMetadataKeys(c.class).includes(Yc.authState)){if(!K)throw new P2({httpCode:401,message:"Unauthorized",data:void 0});return}}}Y2([O2(0,M8()),O2(1,s4())],a4.prototype,"open",null),a4=Y2([I8()],a4);var Tc=new TextEncoder,V2=new TextDecoder;function N8(...c){let K=c.reduce((S,{length:h})=>S+h,0),w=new Uint8Array(K),P=0;for(let S of c)w.set(S,P),P+=S.length;return w}function G8(c){if(Uint8Array.prototype.toBase64)return c.toBase64();let K=32768,w=[];for(let P=0;P<c.length;P+=K)w.push(String.fromCharCode.apply(null,c.subarray(P,P+K)));return btoa(w.join(""))}function j8(c){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(c);let K=atob(c),w=new Uint8Array(K.length);for(let P=0;P<K.length;P++)w[P]=K.charCodeAt(P);return w}function X8(c){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof c==="string"?c:V2.decode(c),{alphabet:"base64url"});let K=c;if(K instanceof Uint8Array)K=V2.decode(K);K=K.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return j8(K)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function I4(c){let K=c;if(typeof K==="string")K=Tc.encode(K);if(Uint8Array.prototype.toBase64)return K.toBase64({alphabet:"base64url",omitPadding:!0});return G8(K).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class O4 extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(c,K){super(c,K);this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class kc extends O4{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class S2 extends O4{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class c6 extends O4{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}function uc(c,K="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${K} must be ${c}`)}function L2(c,K){return c.name===K}function K6(c){return parseInt(c.name.slice(4),10)}function n0(c){switch(c){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}function t0(c,K){if(K&&!c.usages.includes(K))throw TypeError(`CryptoKey does not support this operation, its usages must include ${K}.`)}function B8(c,K,w){switch(K){case"HS256":case"HS384":case"HS512":{if(!L2(c.algorithm,"HMAC"))throw uc("HMAC");let P=parseInt(K.slice(2),10);if(K6(c.algorithm.hash)!==P)throw uc(`SHA-${P}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!L2(c.algorithm,"RSASSA-PKCS1-v1_5"))throw uc("RSASSA-PKCS1-v1_5");let P=parseInt(K.slice(2),10);if(K6(c.algorithm.hash)!==P)throw uc(`SHA-${P}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!L2(c.algorithm,"RSA-PSS"))throw uc("RSA-PSS");let P=parseInt(K.slice(2),10);if(K6(c.algorithm.hash)!==P)throw uc(`SHA-${P}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!L2(c.algorithm,"Ed25519"))throw uc("Ed25519");break}case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":{if(!L2(c.algorithm,K))throw uc(K);break}case"ES256":case"ES384":case"ES512":{if(!L2(c.algorithm,"ECDSA"))throw uc("ECDSA");let P=n0(K);if(c.algorithm.namedCurve!==P)throw uc(P,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}t0(c,w)}function z8(c,K,...w){if(w=w.filter(Boolean),w.length>2){let P=w.pop();c+=`one of type ${w.join(", ")}, or ${P}.`}else if(w.length===2)c+=`one of type ${w[0]} or ${w[1]}.`;else c+=`of type ${w[0]}.`;if(K==null)c+=` Received ${K}`;else if(typeof K==="function"&&K.name)c+=` Received function ${K.name}`;else if(typeof K==="object"&&K!=null){if(K.constructor?.name)c+=` Received an instance of ${K.constructor.name}`}return c}var $8=(c,...K)=>{return z8("Key must be ",c,...K)};function w6(c,K,...w){return z8(`Key for the ${c} algorithm must be `,K,...w)}function P6(c){return c?.[Symbol.toStringTag]==="CryptoKey"}function S6(c){return c?.[Symbol.toStringTag]==="KeyObject"}var h6=(c)=>{return P6(c)||S6(c)};var Q8=(...c)=>{let K=c.filter(Boolean);if(K.length===0||K.length===1)return!0;let w;for(let P of K){let S=Object.keys(P);if(!w||w.size===0){w=new Set(S);continue}for(let h of S){if(w.has(h))return!1;w.add(h)}}return!0};function d0(c){return typeof c==="object"&&c!==null}var J4=(c)=>{if(!d0(c)||Object.prototype.toString.call(c)!=="[object Object]")return!1;if(Object.getPrototypeOf(c)===null)return!0;let K=c;while(Object.getPrototypeOf(K)!==null)K=Object.getPrototypeOf(K);return Object.getPrototypeOf(c)===K};var U8=(c,K)=>{if(c.startsWith("RS")||c.startsWith("PS")){let{modulusLength:w}=K.algorithm;if(typeof w!=="number"||w<2048)throw TypeError(`${c} requires key modulusLength to be 2048 bits or larger`)}};function s0(c){let K,w;switch(c.kty){case"AKP":{switch(c.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":K={name:c.alg},w=c.priv?["sign"]:["verify"];break;default:throw new kc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(c.alg){case"PS256":case"PS384":case"PS512":K={name:"RSA-PSS",hash:`SHA-${c.alg.slice(-3)}`},w=c.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":K={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${c.alg.slice(-3)}`},w=c.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":K={name:"RSA-OAEP",hash:`SHA-${parseInt(c.alg.slice(-3),10)||1}`},w=c.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new kc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(c.alg){case"ES256":K={name:"ECDSA",namedCurve:"P-256"},w=c.d?["sign"]:["verify"];break;case"ES384":K={name:"ECDSA",namedCurve:"P-384"},w=c.d?["sign"]:["verify"];break;case"ES512":K={name:"ECDSA",namedCurve:"P-521"},w=c.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":K={name:"ECDH",namedCurve:c.crv},w=c.d?["deriveBits"]:[];break;default:throw new kc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(c.alg){case"Ed25519":case"EdDSA":K={name:"Ed25519"},w=c.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":K={name:c.crv},w=c.d?["deriveBits"]:[];break;default:throw new kc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new kc('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:K,keyUsages:w}}var Y8=async(c)=>{if(!c.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:K,keyUsages:w}=s0(c),P={...c};if(P.kty!=="AKP")delete P.alg;return delete P.use,crypto.subtle.importKey("jwk",P,K,c.ext??(c.d||c.priv?!1:!0),c.key_ops??w)};var H8=(c,K,w,P,S)=>{if(S.crit!==void 0&&P?.crit===void 0)throw new c('"crit" (Critical) Header Parameter MUST be integrity protected');if(!P||P.crit===void 0)return new Set;if(!Array.isArray(P.crit)||P.crit.length===0||P.crit.some((W)=>typeof W!=="string"||W.length===0))throw new c('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let h;if(w!==void 0)h=new Map([...Object.entries(w),...K.entries()]);else h=K;for(let W of P.crit){if(!h.has(W))throw new kc(`Extension Header Parameter "${W}" is not recognized`);if(S[W]===void 0)throw new c(`Extension Header Parameter "${W}" is missing`);if(h.get(W)&&P[W]===void 0)throw new c(`Extension Header Parameter "${W}" MUST be integrity protected`)}return new Set(P.crit)};function Z2(c){return J4(c)&&typeof c.kty==="string"}function V8(c){return c.kty!=="oct"&&(c.kty==="AKP"&&typeof c.priv==="string"||typeof c.d==="string")}function L8(c){return c.kty!=="oct"&&typeof c.d>"u"&&typeof c.priv>"u"}function q8(c){return c.kty==="oct"&&typeof c.k==="string"}var q2,v8=async(c,K,w,P=!1)=>{q2||=new WeakMap;let S=q2.get(c);if(S?.[w])return S[w];let h=await Y8({...K,alg:w});if(P)Object.freeze(c);if(!S)q2.set(c,{[w]:h});else S[w]=h;return h},c1=(c,K)=>{q2||=new WeakMap;let w=q2.get(c);if(w?.[K])return w[K];let P=c.type==="public",S=P?!0:!1,h;if(c.asymmetricKeyType==="x25519"){switch(K){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}h=c.toCryptoKey(c.asymmetricKeyType,S,P?[]:["deriveBits"])}if(c.asymmetricKeyType==="ed25519"){if(K!=="EdDSA"&&K!=="Ed25519")throw TypeError("given KeyObject instance cannot be used for this algorithm");h=c.toCryptoKey(c.asymmetricKeyType,S,[P?"verify":"sign"])}switch(c.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":{if(K!==c.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");h=c.toCryptoKey(c.asymmetricKeyType,S,[P?"verify":"sign"])}}if(c.asymmetricKeyType==="rsa"){let W;switch(K){case"RSA-OAEP":W="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":W="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":W="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":W="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(K.startsWith("RSA-OAEP"))return c.toCryptoKey({name:"RSA-OAEP",hash:W},S,P?["encrypt"]:["decrypt"]);h=c.toCryptoKey({name:K.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:W},S,[P?"verify":"sign"])}if(c.asymmetricKeyType==="ec"){let M=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(c.asymmetricKeyDetails?.namedCurve);if(!M)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(K==="ES256"&&M==="P-256")h=c.toCryptoKey({name:"ECDSA",namedCurve:M},S,[P?"verify":"sign"]);if(K==="ES384"&&M==="P-384")h=c.toCryptoKey({name:"ECDSA",namedCurve:M},S,[P?"verify":"sign"]);if(K==="ES512"&&M==="P-521")h=c.toCryptoKey({name:"ECDSA",namedCurve:M},S,[P?"verify":"sign"]);if(K.startsWith("ECDH-ES"))h=c.toCryptoKey({name:"ECDH",namedCurve:M},S,P?[]:["deriveBits"])}if(!h)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(!w)q2.set(c,{[K]:h});else w[K]=h;return h},F8=async(c,K)=>{if(c instanceof Uint8Array)return c;if(P6(c))return c;if(S6(c)){if(c.type==="secret")return c.export();if("toCryptoKey"in c&&typeof c.toCryptoKey==="function")try{return c1(c,K)}catch(P){if(P instanceof TypeError)throw P}let w=c.export({format:"jwk"});return v8(c,w,K)}if(Z2(c)){if(c.k)return X8(c.k);return v8(c,c,K,!0)}throw Error("unreachable")};var v2=(c)=>c?.[Symbol.toStringTag],W6=(c,K,w)=>{if(K.use!==void 0){let P;switch(w){case"sign":case"verify":P="sig";break;case"encrypt":case"decrypt":P="enc";break}if(K.use!==P)throw TypeError(`Invalid key for this operation, its "use" must be "${P}" when present`)}if(K.alg!==void 0&&K.alg!==c)throw TypeError(`Invalid key for this operation, its "alg" must be "${c}" when present`);if(Array.isArray(K.key_ops)){let P;switch(!0){case(w==="sign"||w==="verify"):case c==="dir":case c.includes("CBC-HS"):P=w;break;case c.startsWith("PBES2"):P="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(c):if(!c.includes("GCM")&&c.endsWith("KW"))P=w==="encrypt"?"wrapKey":"unwrapKey";else P=w;break;case(w==="encrypt"&&c.startsWith("RSA")):P="wrapKey";break;case w==="decrypt":P=c.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(P&&K.key_ops?.includes?.(P)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${P}" when present`)}return!0},K1=(c,K,w)=>{if(K instanceof Uint8Array)return;if(Z2(K)){if(q8(K)&&W6(c,K,w))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!h6(K))throw TypeError(w6(c,K,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(K.type!=="secret")throw TypeError(`${v2(K)} instances for symmetric algorithms must be of type "secret"`)},w1=(c,K,w)=>{if(Z2(K))switch(w){case"decrypt":case"sign":if(V8(K)&&W6(c,K,w))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(L8(K)&&W6(c,K,w))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!h6(K))throw TypeError(w6(c,K,"CryptoKey","KeyObject","JSON Web Key"));if(K.type==="secret")throw TypeError(`${v2(K)} instances for asymmetric algorithms must not be of type "secret"`);if(K.type==="public")switch(w){case"sign":throw TypeError(`${v2(K)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${v2(K)} instances for asymmetric algorithm decryption must be of type "private"`);default:break}if(K.type==="private")switch(w){case"verify":throw TypeError(`${v2(K)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${v2(K)} instances for asymmetric algorithm encryption must be of type "public"`);default:break}},E8=(c,K,w)=>{if(c.startsWith("HS")||c==="dir"||c.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(c)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(c))K1(c,K,w);else w1(c,K,w)};var R8=(c,K)=>{let w=`SHA-${c.slice(-3)}`;switch(c){case"HS256":case"HS384":case"HS512":return{hash:w,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:w,name:"RSA-PSS",saltLength:parseInt(c.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:w,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:w,name:"ECDSA",namedCurve:K.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:c};default:throw new kc(`alg ${c} is not supported either by JOSE or your javascript runtime`)}};var g8=async(c,K,w)=>{if(K instanceof Uint8Array){if(!c.startsWith("HS"))throw TypeError($8(K,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",K,{hash:`SHA-${c.slice(-3)}`,name:"HMAC"},!1,[w])}return B8(K,c,w),K};var h2=(c)=>Math.floor(c.getTime()/1000);var P1=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,D4=(c)=>{let K=P1.exec(c);if(!K||K[4]&&K[1])throw TypeError("Invalid time period format");let w=parseFloat(K[2]),P=K[3].toLowerCase(),S;switch(P){case"sec":case"secs":case"second":case"seconds":case"s":S=Math.round(w);break;case"minute":case"minutes":case"min":case"mins":case"m":S=Math.round(w*60);break;case"hour":case"hours":case"hr":case"hrs":case"h":S=Math.round(w*3600);break;case"day":case"days":case"d":S=Math.round(w*86400);break;case"week":case"weeks":case"w":S=Math.round(w*604800);break;default:S=Math.round(w*31557600);break}if(K[1]==="-"||K[4]==="ago")return-S;return S};function X2(c,K){if(!Number.isFinite(K))throw TypeError(`Invalid ${c} input`);return K}class M6{#c;constructor(c){if(!J4(c))throw TypeError("JWT Claims Set MUST be an object");this.#c=structuredClone(c)}data(){return Tc.encode(JSON.stringify(this.#c))}get iss(){return this.#c.iss}set iss(c){this.#c.iss=c}get sub(){return this.#c.sub}set sub(c){this.#c.sub=c}get aud(){return this.#c.aud}set aud(c){this.#c.aud=c}set jti(c){this.#c.jti=c}set nbf(c){if(typeof c==="number")this.#c.nbf=X2("setNotBefore",c);else if(c instanceof Date)this.#c.nbf=X2("setNotBefore",h2(c));else this.#c.nbf=h2(new Date)+D4(c)}set exp(c){if(typeof c==="number")this.#c.exp=X2("setExpirationTime",c);else if(c instanceof Date)this.#c.exp=X2("setExpirationTime",h2(c));else this.#c.exp=h2(new Date)+D4(c)}set iat(c){if(typeof c>"u")this.#c.iat=h2(new Date);else if(c instanceof Date)this.#c.iat=X2("setIssuedAt",h2(c));else if(typeof c==="string")this.#c.iat=X2("setIssuedAt",h2(new Date)+D4(c));else this.#c.iat=X2("setIssuedAt",c)}}var k8=async(c,K,w)=>{let P=await g8(c,K,"sign");U8(c,P);let S=await crypto.subtle.sign(R8(c,P.algorithm),P,w);return new Uint8Array(S)};class b6{#c;#K;#w;constructor(c){if(!(c instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#c=c}setProtectedHeader(c){if(this.#K)throw TypeError("setProtectedHeader can only be called once");return this.#K=c,this}setUnprotectedHeader(c){if(this.#w)throw TypeError("setUnprotectedHeader can only be called once");return this.#w=c,this}async sign(c,K){if(!this.#K&&!this.#w)throw new S2("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Q8(this.#K,this.#w))throw new S2("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let w={...this.#K,...this.#w},P=H8(S2,new Map([["b64",!0]]),K?.crit,this.#K,w),S=!0;if(P.has("b64")){if(S=this.#K.b64,typeof S!=="boolean")throw new S2('The "b64" (base64url-encode payload) Header Parameter must be a boolean')}let{alg:h}=w;if(typeof h!=="string"||!h)throw new S2('JWS "alg" (Algorithm) Header Parameter missing or invalid');E8(h,c,"sign");let W=this.#c;if(S)W=Tc.encode(I4(W));let M;if(this.#K)M=Tc.encode(I4(JSON.stringify(this.#K)));else M=Tc.encode("");let J=N8(M,Tc.encode("."),W),O=await F8(c,h),G=await k8(h,O,J),V={signature:I4(G),payload:""};if(S)V.payload=V2.decode(W);if(this.#w)V.header=this.#w;if(this.#K)V.protected=V2.decode(M);return V}}class I6{#c;constructor(c){this.#c=new b6(c)}setProtectedHeader(c){return this.#c.setProtectedHeader(c),this}async sign(c,K){let w=await this.#c.sign(c,K);if(w.payload===void 0)throw TypeError("use the flattened module for creating JWS with b64: false");return`${w.protected}.${w.payload}.${w.signature}`}}class N4{#c;#K;constructor(c={}){this.#K=new M6(c)}setIssuer(c){return this.#K.iss=c,this}setSubject(c){return this.#K.sub=c,this}setAudience(c){return this.#K.aud=c,this}setJti(c){return this.#K.jti=c,this}setNotBefore(c){return this.#K.nbf=c,this}setExpirationTime(c){return this.#K.exp=c,this}setIssuedAt(c){return this.#K.iat=c,this}setProtectedHeader(c){return this.#c=c,this}async sign(c,K){let w=new I6(this.#K.data());if(w.setProtectedHeader(this.#c),Array.isArray(this.#c?.crit)&&this.#c.crit.includes("b64")&&this.#c.b64===!1)throw new c6("JWTs MUST NOT use unencoded payload");return w.sign(c,K)}}var JP=Object.freeze({status:"aborted"});function F(c,K,w){function P(M,J){var O;Object.defineProperty(M,"_zod",{value:M._zod??{},enumerable:!1}),(O=M._zod).traits??(O.traits=new Set),M._zod.traits.add(c),K(M,J);for(let G in W.prototype)if(!(G in M))Object.defineProperty(M,G,{value:W.prototype[G].bind(M)});M._zod.constr=W,M._zod.def=J}let S=w?.Parent??Object;class h extends S{}Object.defineProperty(h,"name",{value:c});function W(M){var J;let O=w?.Parent?new h:this;P(O,M),(J=O._zod).deferred??(J.deferred=[]);for(let G of O._zod.deferred)G();return O}return Object.defineProperty(W,"init",{value:P}),Object.defineProperty(W,Symbol.hasInstance,{value:(M)=>{if(w?.Parent&&M instanceof w.Parent)return!0;return M?._zod?.traits?.has(c)}}),Object.defineProperty(W,"name",{value:c}),W}var DP=Symbol("zod_brand");class ic extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class A2 extends Error{constructor(c){super(`Encountered unidirectional transform during encode: ${c}`);this.name="ZodEncodeError"}}var G4={};function nc(c){if(c)Object.assign(G4,c);return G4}var cc={};m4(cc,{unwrapMessage:()=>r2,uint8ArrayToHex:()=>E1,uint8ArrayToBase64url:()=>v1,uint8ArrayToBase64:()=>_8,stringifyPrimitive:()=>o8,shallowClone:()=>A8,safeExtend:()=>U1,required:()=>V1,randomString:()=>G1,propertyKeyTypes:()=>N6,promiseAllObject:()=>N1,primitiveTypes:()=>r8,prefixIssues:()=>C2,pick:()=>z1,partial:()=>H1,optionalKeys:()=>G6,omit:()=>$1,objectClone:()=>O1,numKeys:()=>j1,nullish:()=>m2,normalizeParams:()=>e,mergeDefs:()=>M2,merge:()=>Y1,jsonStringifyReplacer:()=>E2,joinValues:()=>I1,issue:()=>R2,isPlainObject:()=>B2,isObject:()=>F2,hexToUint8Array:()=>F1,getSizableOrigin:()=>C8,getParsedType:()=>X1,getLengthableOrigin:()=>y2,getEnumValues:()=>J6,getElementAtPath:()=>D1,floatSafeRemainder:()=>Z8,finalizeIssue:()=>Cc,extend:()=>Q1,escapeRegex:()=>z2,esc:()=>j4,defineLazy:()=>Kc,createTransparentProxy:()=>B1,cloneDef:()=>J1,clone:()=>xc,cleanRegex:()=>u2,cleanEnum:()=>L1,captureStackTrace:()=>X4,cached:()=>o2,base64urlToUint8Array:()=>q1,base64ToUint8Array:()=>y8,assignProp:()=>W2,assertNotEqual:()=>h1,assertNever:()=>M1,assertIs:()=>W1,assertEqual:()=>S1,assert:()=>b1,allowsEval:()=>D6,aborted:()=>b2,NUMBER_FORMAT_RANGES:()=>m8,Class:()=>f8,BIGINT_FORMAT_RANGES:()=>u8});function S1(c){return c}function h1(c){return c}function W1(c){}function M1(c){throw Error()}function b1(c){}function J6(c){let K=Object.values(c).filter((P)=>typeof P==="number");return Object.entries(c).filter(([P,S])=>K.indexOf(+P)===-1).map(([P,S])=>S)}function I1(c,K="|"){return c.map((w)=>o8(w)).join(K)}function E2(c,K){if(typeof K==="bigint")return K.toString();return K}function o2(c){return{get value(){{let w=c();return Object.defineProperty(this,"value",{value:w}),w}throw Error("cached value already set")}}}function m2(c){return c===null||c===void 0}function u2(c){let K=c.startsWith("^")?1:0,w=c.endsWith("$")?c.length-1:c.length;return c.slice(K,w)}function Z8(c,K){let w=(c.toString().split(".")[1]||"").length,P=K.toString(),S=(P.split(".")[1]||"").length;if(S===0&&/\d?e-\d?/.test(P)){let J=P.match(/\d?e-(\d?)/);if(J?.[1])S=Number.parseInt(J[1])}let h=w>S?w:S,W=Number.parseInt(c.toFixed(h).replace(".","")),M=Number.parseInt(K.toFixed(h).replace(".",""));return W%M/10**h}var x8=Symbol("evaluating");function Kc(c,K,w){let P=void 0;Object.defineProperty(c,K,{get(){if(P===x8)return;if(P===void 0)P=x8,P=w();return P},set(S){Object.defineProperty(c,K,{value:S})},configurable:!0})}function O1(c){return Object.create(Object.getPrototypeOf(c),Object.getOwnPropertyDescriptors(c))}function W2(c,K,w){Object.defineProperty(c,K,{value:w,writable:!0,enumerable:!0,configurable:!0})}function M2(...c){let K={};for(let w of c){let P=Object.getOwnPropertyDescriptors(w);Object.assign(K,P)}return Object.defineProperties({},K)}function J1(c){return M2(c._zod.def)}function D1(c,K){if(!K)return c;return K.reduce((w,P)=>w?.[P],c)}function N1(c){let K=Object.keys(c),w=K.map((P)=>c[P]);return Promise.all(w).then((P)=>{let S={};for(let h=0;h<K.length;h++)S[K[h]]=P[h];return S})}function G1(c=10){let w="";for(let P=0;P<c;P++)w+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return w}function j4(c){return JSON.stringify(c)}var X4="captureStackTrace"in Error?Error.captureStackTrace:(...c)=>{};function F2(c){return typeof c==="object"&&c!==null&&!Array.isArray(c)}var D6=o2(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(c){return!1}});function B2(c){if(F2(c)===!1)return!1;let K=c.constructor;if(K===void 0)return!0;let w=K.prototype;if(F2(w)===!1)return!1;if(Object.prototype.hasOwnProperty.call(w,"isPrototypeOf")===!1)return!1;return!0}function A8(c){if(B2(c))return{...c};if(Array.isArray(c))return[...c];return c}function j1(c){let K=0;for(let w in c)if(Object.prototype.hasOwnProperty.call(c,w))K++;return K}var X1=(c)=>{let K=typeof c;switch(K){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(c)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(c))return"array";if(c===null)return"null";if(c.then&&typeof c.then==="function"&&c.catch&&typeof c.catch==="function")return"promise";if(typeof Map<"u"&&c instanceof Map)return"map";if(typeof Set<"u"&&c instanceof Set)return"set";if(typeof Date<"u"&&c instanceof Date)return"date";if(typeof File<"u"&&c instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${K}`)}},N6=new Set(["string","number","symbol"]),r8=new Set(["string","number","bigint","boolean","symbol","undefined"]);function z2(c){return c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function xc(c,K,w){let P=new c._zod.constr(K??c._zod.def);if(!K||w?.parent)P._zod.parent=c;return P}function e(c){let K=c;if(!K)return{};if(typeof K==="string")return{error:()=>K};if(K?.message!==void 0){if(K?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");K.error=K.message}if(delete K.message,typeof K.error==="string")return{...K,error:()=>K.error};return K}function B1(c){let K;return new Proxy({},{get(w,P,S){return K??(K=c()),Reflect.get(K,P,S)},set(w,P,S,h){return K??(K=c()),Reflect.set(K,P,S,h)},has(w,P){return K??(K=c()),Reflect.has(K,P)},deleteProperty(w,P){return K??(K=c()),Reflect.deleteProperty(K,P)},ownKeys(w){return K??(K=c()),Reflect.ownKeys(K)},getOwnPropertyDescriptor(w,P){return K??(K=c()),Reflect.getOwnPropertyDescriptor(K,P)},defineProperty(w,P,S){return K??(K=c()),Reflect.defineProperty(K,P,S)}})}function o8(c){if(typeof c==="bigint")return c.toString()+"n";if(typeof c==="string")return`"${c}"`;return`${c}`}function G6(c){return Object.keys(c).filter((K)=>{return c[K]._zod.optin==="optional"&&c[K]._zod.optout==="optional"})}var m8={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},u8={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function z1(c,K){let w=c._zod.def,P=M2(c._zod.def,{get shape(){let S={};for(let h in K){if(!(h in w.shape))throw Error(`Unrecognized key: "${h}"`);if(!K[h])continue;S[h]=w.shape[h]}return W2(this,"shape",S),S},checks:[]});return xc(c,P)}function $1(c,K){let w=c._zod.def,P=M2(c._zod.def,{get shape(){let S={...c._zod.def.shape};for(let h in K){if(!(h in w.shape))throw Error(`Unrecognized key: "${h}"`);if(!K[h])continue;delete S[h]}return W2(this,"shape",S),S},checks:[]});return xc(c,P)}function Q1(c,K){if(!B2(K))throw Error("Invalid input to extend: expected a plain object");let w=c._zod.def.checks;if(w&&w.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let S=M2(c._zod.def,{get shape(){let h={...c._zod.def.shape,...K};return W2(this,"shape",h),h},checks:[]});return xc(c,S)}function U1(c,K){if(!B2(K))throw Error("Invalid input to safeExtend: expected a plain object");let w={...c._zod.def,get shape(){let P={...c._zod.def.shape,...K};return W2(this,"shape",P),P},checks:c._zod.def.checks};return xc(c,w)}function Y1(c,K){let w=M2(c._zod.def,{get shape(){let P={...c._zod.def.shape,...K._zod.def.shape};return W2(this,"shape",P),P},get catchall(){return K._zod.def.catchall},checks:[]});return xc(c,w)}function H1(c,K,w){let P=M2(K._zod.def,{get shape(){let S=K._zod.def.shape,h={...S};if(w)for(let W in w){if(!(W in S))throw Error(`Unrecognized key: "${W}"`);if(!w[W])continue;h[W]=c?new c({type:"optional",innerType:S[W]}):S[W]}else for(let W in S)h[W]=c?new c({type:"optional",innerType:S[W]}):S[W];return W2(this,"shape",h),h},checks:[]});return xc(K,P)}function V1(c,K,w){let P=M2(K._zod.def,{get shape(){let S=K._zod.def.shape,h={...S};if(w)for(let W in w){if(!(W in h))throw Error(`Unrecognized key: "${W}"`);if(!w[W])continue;h[W]=new c({type:"nonoptional",innerType:S[W]})}else for(let W in S)h[W]=new c({type:"nonoptional",innerType:S[W]});return W2(this,"shape",h),h},checks:[]});return xc(K,P)}function b2(c,K=0){if(c.aborted===!0)return!0;for(let w=K;w<c.issues.length;w++)if(c.issues[w]?.continue!==!0)return!0;return!1}function C2(c,K){return K.map((w)=>{var P;return(P=w).path??(P.path=[]),w.path.unshift(c),w})}function r2(c){return typeof c==="string"?c:c?.message}function Cc(c,K,w){let P={...c,path:c.path??[]};if(!c.message){let S=r2(c.inst?._zod.def?.error?.(c))??r2(K?.error?.(c))??r2(w.customError?.(c))??r2(w.localeError?.(c))??"Invalid input";P.message=S}if(delete P.inst,delete P.continue,!K?.reportInput)delete P.input;return P}function C8(c){if(c instanceof Set)return"set";if(c instanceof Map)return"map";if(c instanceof File)return"file";return"unknown"}function y2(c){if(Array.isArray(c))return"array";if(typeof c==="string")return"string";return"unknown"}function R2(...c){let[K,w,P]=c;if(typeof K==="string")return{message:K,code:"custom",input:w,inst:P};return{...K}}function L1(c){return Object.entries(c).filter(([K,w])=>{return Number.isNaN(Number.parseInt(K,10))}).map((K)=>K[1])}function y8(c){let K=atob(c),w=new Uint8Array(K.length);for(let P=0;P<K.length;P++)w[P]=K.charCodeAt(P);return w}function _8(c){let K="";for(let w=0;w<c.length;w++)K+=String.fromCharCode(c[w]);return btoa(K)}function q1(c){let K=c.replace(/-/g,"+").replace(/_/g,"/"),w="=".repeat((4-K.length%4)%4);return y8(K+w)}function v1(c){return _8(c).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function F1(c){let K=c.replace(/^0x/,"");if(K.length%2!==0)throw Error("Invalid hex string length");let w=new Uint8Array(K.length/2);for(let P=0;P<K.length;P+=2)w[P/2]=Number.parseInt(K.slice(P,P+2),16);return w}function E1(c){return Array.from(c).map((K)=>K.toString(16).padStart(2,"0")).join("")}class f8{constructor(...c){}}var e8=(c,K)=>{c.name="$ZodError",Object.defineProperty(c,"_zod",{value:c._zod,enumerable:!1}),Object.defineProperty(c,"issues",{value:K,enumerable:!1}),c.message=JSON.stringify(K,E2,2),Object.defineProperty(c,"toString",{value:()=>c.message,enumerable:!1})},B4=F("$ZodError",e8),j6=F("$ZodError",e8,{Parent:Error});function l8(c,K=(w)=>w.message){let w={},P=[];for(let S of c.issues)if(S.path.length>0)w[S.path[0]]=w[S.path[0]]||[],w[S.path[0]].push(K(S));else P.push(K(S));return{formErrors:P,fieldErrors:w}}function p8(c,K=(w)=>w.message){let w={_errors:[]},P=(S)=>{for(let h of S.issues)if(h.code==="invalid_union"&&h.errors.length)h.errors.map((W)=>P({issues:W}));else if(h.code==="invalid_key")P({issues:h.issues});else if(h.code==="invalid_element")P({issues:h.issues});else if(h.path.length===0)w._errors.push(K(h));else{let W=w,M=0;while(M<h.path.length){let J=h.path[M];if(M!==h.path.length-1)W[J]=W[J]||{_errors:[]};else W[J]=W[J]||{_errors:[]},W[J]._errors.push(K(h));W=W[J],M++}}};return P(c),w}var z4=(c)=>(K,w,P,S)=>{let h=P?Object.assign(P,{async:!1}):{async:!1},W=K._zod.run({value:w,issues:[]},h);if(W instanceof Promise)throw new ic;if(W.issues.length){let M=new(S?.Err??c)(W.issues.map((J)=>Cc(J,h,nc())));throw X4(M,S?.callee),M}return W.value};var $4=(c)=>async(K,w,P,S)=>{let h=P?Object.assign(P,{async:!0}):{async:!0},W=K._zod.run({value:w,issues:[]},h);if(W instanceof Promise)W=await W;if(W.issues.length){let M=new(S?.Err??c)(W.issues.map((J)=>Cc(J,h,nc())));throw X4(M,S?.callee),M}return W.value};var _2=(c)=>(K,w,P)=>{let S=P?{...P,async:!1}:{async:!1},h=K._zod.run({value:w,issues:[]},S);if(h instanceof Promise)throw new ic;return h.issues.length?{success:!1,error:new(c??B4)(h.issues.map((W)=>Cc(W,S,nc())))}:{success:!0,data:h.value}},T8=_2(j6),f2=(c)=>async(K,w,P)=>{let S=P?Object.assign(P,{async:!0}):{async:!0},h=K._zod.run({value:w,issues:[]},S);if(h instanceof Promise)h=await h;return h.issues.length?{success:!1,error:new c(h.issues.map((W)=>Cc(W,S,nc())))}:{success:!0,data:h.value}},i8=f2(j6),n8=(c)=>(K,w,P)=>{let S=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return z4(c)(K,w,S)};var t8=(c)=>(K,w,P)=>{return z4(c)(K,w,P)};var d8=(c)=>async(K,w,P)=>{let S=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return $4(c)(K,w,S)};var s8=(c)=>async(K,w,P)=>{return $4(c)(K,w,P)};var a8=(c)=>(K,w,P)=>{let S=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return _2(c)(K,w,S)};var c5=(c)=>(K,w,P)=>{return _2(c)(K,w,P)};var K5=(c)=>async(K,w,P)=>{let S=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return f2(c)(K,w,S)};var w5=(c)=>async(K,w,P)=>{return f2(c)(K,w,P)};var P5=/^[cC][^\s-]{8,}$/,S5=/^[0-9a-z]+$/,h5=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,W5=/^[0-9a-vA-V]{20}$/,M5=/^[A-Za-z0-9]{27}$/,b5=/^[a-zA-Z0-9_-]{21}$/,I5=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/;var O5=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,X6=(c)=>{if(!c)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${c}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)};var J5=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;function D5(){return new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}var N5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,G5=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,j5=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,X5=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,B5=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,B6=/^[A-Za-z0-9_-]*$/,z5=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/;var $5=/^\+(?:[0-9]){6,14}[0-9]$/,Q5="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",U5=new RegExp(`^${Q5}$`);function Y5(c){return typeof c.precision==="number"?c.precision===-1?"(?:[01]\\d|2[0-3]):[0-5]\\d":c.precision===0?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${c.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function H5(c){return new RegExp(`^${Y5(c)}$`)}function V5(c){let K=Y5({precision:c.precision}),w=["Z"];if(c.local)w.push("");if(c.offset)w.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let P=`${K}(?:${w.join("|")})`;return new RegExp(`^${Q5}T(?:${P})$`)}var L5=(c)=>{let K=c?`[\\s\\S]{${c?.minimum??0},${c?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${K}$`)};var q5=/^[^A-Z]*$/,v5=/^[^a-z]*$/;var Vc=F("$ZodCheck",(c,K)=>{var w;c._zod??(c._zod={}),c._zod.def=K,(w=c._zod).onattach??(w.onattach=[])});var F5=F("$ZodCheckMaxLength",(c,K)=>{var w;Vc.init(c,K),(w=c._zod.def).when??(w.when=(P)=>{let S=P.value;return!m2(S)&&S.length!==void 0}),c._zod.onattach.push((P)=>{let S=P._zod.bag.maximum??Number.POSITIVE_INFINITY;if(K.maximum<S)P._zod.bag.maximum=K.maximum}),c._zod.check=(P)=>{let S=P.value;if(S.length<=K.maximum)return;let W=y2(S);P.issues.push({origin:W,code:"too_big",maximum:K.maximum,inclusive:!0,input:S,inst:c,continue:!K.abort})}}),E5=F("$ZodCheckMinLength",(c,K)=>{var w;Vc.init(c,K),(w=c._zod.def).when??(w.when=(P)=>{let S=P.value;return!m2(S)&&S.length!==void 0}),c._zod.onattach.push((P)=>{let S=P._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(K.minimum>S)P._zod.bag.minimum=K.minimum}),c._zod.check=(P)=>{let S=P.value;if(S.length>=K.minimum)return;let W=y2(S);P.issues.push({origin:W,code:"too_small",minimum:K.minimum,inclusive:!0,input:S,inst:c,continue:!K.abort})}}),R5=F("$ZodCheckLengthEquals",(c,K)=>{var w;Vc.init(c,K),(w=c._zod.def).when??(w.when=(P)=>{let S=P.value;return!m2(S)&&S.length!==void 0}),c._zod.onattach.push((P)=>{let S=P._zod.bag;S.minimum=K.length,S.maximum=K.length,S.length=K.length}),c._zod.check=(P)=>{let S=P.value,h=S.length;if(h===K.length)return;let W=y2(S),M=h>K.length;P.issues.push({origin:W,...M?{code:"too_big",maximum:K.length}:{code:"too_small",minimum:K.length},inclusive:!0,exact:!0,input:P.value,inst:c,continue:!K.abort})}}),e2=F("$ZodCheckStringFormat",(c,K)=>{var w,P;if(Vc.init(c,K),c._zod.onattach.push((S)=>{let h=S._zod.bag;if(h.format=K.format,K.pattern)h.patterns??(h.patterns=new Set),h.patterns.add(K.pattern)}),K.pattern)(w=c._zod).check??(w.check=(S)=>{if(K.pattern.lastIndex=0,K.pattern.test(S.value))return;S.issues.push({origin:"string",code:"invalid_format",format:K.format,input:S.value,...K.pattern?{pattern:K.pattern.toString()}:{},inst:c,continue:!K.abort})});else(P=c._zod).check??(P.check=()=>{})}),g5=F("$ZodCheckRegex",(c,K)=>{e2.init(c,K),c._zod.check=(w)=>{if(K.pattern.lastIndex=0,K.pattern.test(w.value))return;w.issues.push({origin:"string",code:"invalid_format",format:"regex",input:w.value,pattern:K.pattern.toString(),inst:c,continue:!K.abort})}}),k5=F("$ZodCheckLowerCase",(c,K)=>{K.pattern??(K.pattern=q5),e2.init(c,K)}),x5=F("$ZodCheckUpperCase",(c,K)=>{K.pattern??(K.pattern=v5),e2.init(c,K)}),Z5=F("$ZodCheckIncludes",(c,K)=>{Vc.init(c,K);let w=z2(K.includes),P=new RegExp(typeof K.position==="number"?`^.{${K.position}}${w}`:w);K.pattern=P,c._zod.onattach.push((S)=>{let h=S._zod.bag;h.patterns??(h.patterns=new Set),h.patterns.add(P)}),c._zod.check=(S)=>{if(S.value.includes(K.includes,K.position))return;S.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:K.includes,input:S.value,inst:c,continue:!K.abort})}}),A5=F("$ZodCheckStartsWith",(c,K)=>{Vc.init(c,K);let w=new RegExp(`^${z2(K.prefix)}.*`);K.pattern??(K.pattern=w),c._zod.onattach.push((P)=>{let S=P._zod.bag;S.patterns??(S.patterns=new Set),S.patterns.add(w)}),c._zod.check=(P)=>{if(P.value.startsWith(K.prefix))return;P.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:K.prefix,input:P.value,inst:c,continue:!K.abort})}}),r5=F("$ZodCheckEndsWith",(c,K)=>{Vc.init(c,K);let w=new RegExp(`.*${z2(K.suffix)}$`);K.pattern??(K.pattern=w),c._zod.onattach.push((P)=>{let S=P._zod.bag;S.patterns??(S.patterns=new Set),S.patterns.add(w)}),c._zod.check=(P)=>{if(P.value.endsWith(K.suffix))return;P.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:K.suffix,input:P.value,inst:c,continue:!K.abort})}});var o5=F("$ZodCheckOverwrite",(c,K)=>{Vc.init(c,K),c._zod.check=(w)=>{w.value=K.tx(w.value)}});class z6{constructor(c=[]){if(this.content=[],this.indent=0,this)this.args=c}indented(c){this.indent+=1,c(this),this.indent-=1}write(c){if(typeof c==="function"){c(this,{execution:"sync"}),c(this,{execution:"async"});return}let w=c.split(`
`).filter((h)=>h),P=Math.min(...w.map((h)=>h.length-h.trimStart().length)),S=w.map((h)=>h.slice(P)).map((h)=>" ".repeat(this.indent*2)+h);for(let h of S)this.content.push(h)}compile(){let c=Function,K=this?.args,P=[...(this?.content??[""]).map((S)=>`  ${S}`)];return new c(...K,P.join(`
`))}}var u5={major:4,minor:1,patch:12};var Oc=F("$ZodType",(c,K)=>{var w;c??(c={}),c._zod.def=K,c._zod.bag=c._zod.bag||{},c._zod.version=u5;let P=[...c._zod.def.checks??[]];if(c._zod.traits.has("$ZodCheck"))P.unshift(c);for(let S of P)for(let h of S._zod.onattach)h(c);if(P.length===0)(w=c._zod).deferred??(w.deferred=[]),c._zod.deferred?.push(()=>{c._zod.run=c._zod.parse});else{let S=(W,M,J)=>{let O=b2(W),G;for(let V of M){if(V._zod.def.when){if(!V._zod.def.when(W))continue}else if(O)continue;let z=W.issues.length,L=V._zod.check(W);if(L instanceof Promise&&J?.async===!1)throw new ic;if(G||L instanceof Promise)G=(G??Promise.resolve()).then(async()=>{if(await L,W.issues.length===z)return;if(!O)O=b2(W,z)});else{if(W.issues.length===z)continue;if(!O)O=b2(W,z)}}if(G)return G.then(()=>{return W});return W},h=(W,M,J)=>{if(b2(W))return W.aborted=!0,W;let O=S(M,P,J);if(O instanceof Promise){if(J.async===!1)throw new ic;return O.then((G)=>c._zod.parse(G,J))}return c._zod.parse(O,J)};c._zod.run=(W,M)=>{if(M.skipChecks)return c._zod.parse(W,M);if(M.direction==="backward"){let O=c._zod.parse({value:W.value,issues:[]},{...M,skipChecks:!0});if(O instanceof Promise)return O.then((G)=>{return h(G,W,M)});return h(O,W,M)}let J=c._zod.parse(W,M);if(J instanceof Promise){if(M.async===!1)throw new ic;return J.then((O)=>S(O,P,M))}return S(J,P,M)}}c["~standard"]={validate:(S)=>{try{let h=T8(c,S);return h.success?{value:h.data}:{issues:h.error?.issues}}catch(h){return i8(c,S).then((W)=>W.success?{value:W.data}:{issues:W.error?.issues})}},vendor:"zod",version:1}}),H4=F("$ZodString",(c,K)=>{Oc.init(c,K),c._zod.pattern=[...c?._zod.bag?.patterns??[]].pop()??L5(c._zod.bag),c._zod.parse=(w,P)=>{if(K.coerce)try{w.value=String(w.value)}catch(S){}if(typeof w.value==="string")return w;return w.issues.push({expected:"string",code:"invalid_type",input:w.value,inst:c}),w}}),Sc=F("$ZodStringFormat",(c,K)=>{e2.init(c,K),H4.init(c,K)}),i5=F("$ZodGUID",(c,K)=>{K.pattern??(K.pattern=O5),Sc.init(c,K)}),n5=F("$ZodUUID",(c,K)=>{if(K.version){let P={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[K.version];if(P===void 0)throw Error(`Invalid UUID version: "${K.version}"`);K.pattern??(K.pattern=X6(P))}else K.pattern??(K.pattern=X6());Sc.init(c,K)}),t5=F("$ZodEmail",(c,K)=>{K.pattern??(K.pattern=J5),Sc.init(c,K)}),d5=F("$ZodURL",(c,K)=>{Sc.init(c,K),c._zod.check=(w)=>{try{let P=w.value.trim(),S=new URL(P);if(K.hostname){if(K.hostname.lastIndex=0,!K.hostname.test(S.hostname))w.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:z5.source,input:w.value,inst:c,continue:!K.abort})}if(K.protocol){if(K.protocol.lastIndex=0,!K.protocol.test(S.protocol.endsWith(":")?S.protocol.slice(0,-1):S.protocol))w.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:K.protocol.source,input:w.value,inst:c,continue:!K.abort})}if(K.normalize)w.value=S.href;else w.value=P;return}catch(P){w.issues.push({code:"invalid_format",format:"url",input:w.value,inst:c,continue:!K.abort})}}}),s5=F("$ZodEmoji",(c,K)=>{K.pattern??(K.pattern=D5()),Sc.init(c,K)}),a5=F("$ZodNanoID",(c,K)=>{K.pattern??(K.pattern=b5),Sc.init(c,K)}),c3=F("$ZodCUID",(c,K)=>{K.pattern??(K.pattern=P5),Sc.init(c,K)}),K3=F("$ZodCUID2",(c,K)=>{K.pattern??(K.pattern=S5),Sc.init(c,K)}),w3=F("$ZodULID",(c,K)=>{K.pattern??(K.pattern=h5),Sc.init(c,K)}),P3=F("$ZodXID",(c,K)=>{K.pattern??(K.pattern=W5),Sc.init(c,K)}),S3=F("$ZodKSUID",(c,K)=>{K.pattern??(K.pattern=M5),Sc.init(c,K)}),h3=F("$ZodISODateTime",(c,K)=>{K.pattern??(K.pattern=V5(K)),Sc.init(c,K)}),W3=F("$ZodISODate",(c,K)=>{K.pattern??(K.pattern=U5),Sc.init(c,K)}),M3=F("$ZodISOTime",(c,K)=>{K.pattern??(K.pattern=H5(K)),Sc.init(c,K)}),b3=F("$ZodISODuration",(c,K)=>{K.pattern??(K.pattern=I5),Sc.init(c,K)}),I3=F("$ZodIPv4",(c,K)=>{K.pattern??(K.pattern=N5),Sc.init(c,K),c._zod.onattach.push((w)=>{let P=w._zod.bag;P.format="ipv4"})}),O3=F("$ZodIPv6",(c,K)=>{K.pattern??(K.pattern=G5),Sc.init(c,K),c._zod.onattach.push((w)=>{let P=w._zod.bag;P.format="ipv6"}),c._zod.check=(w)=>{try{new URL(`http://[${w.value}]`)}catch{w.issues.push({code:"invalid_format",format:"ipv6",input:w.value,inst:c,continue:!K.abort})}}}),J3=F("$ZodCIDRv4",(c,K)=>{K.pattern??(K.pattern=j5),Sc.init(c,K)}),D3=F("$ZodCIDRv6",(c,K)=>{K.pattern??(K.pattern=X5),Sc.init(c,K),c._zod.check=(w)=>{let P=w.value.split("/");try{if(P.length!==2)throw Error();let[S,h]=P;if(!h)throw Error();let W=Number(h);if(`${W}`!==h)throw Error();if(W<0||W>128)throw Error();new URL(`http://[${S}]`)}catch{w.issues.push({code:"invalid_format",format:"cidrv6",input:w.value,inst:c,continue:!K.abort})}}});function N3(c){if(c==="")return!0;if(c.length%4!==0)return!1;try{return atob(c),!0}catch{return!1}}var G3=F("$ZodBase64",(c,K)=>{K.pattern??(K.pattern=B5),Sc.init(c,K),c._zod.onattach.push((w)=>{w._zod.bag.contentEncoding="base64"}),c._zod.check=(w)=>{if(N3(w.value))return;w.issues.push({code:"invalid_format",format:"base64",input:w.value,inst:c,continue:!K.abort})}});function g1(c){if(!B6.test(c))return!1;let K=c.replace(/[-_]/g,(P)=>P==="-"?"+":"/"),w=K.padEnd(Math.ceil(K.length/4)*4,"=");return N3(w)}var j3=F("$ZodBase64URL",(c,K)=>{K.pattern??(K.pattern=B6),Sc.init(c,K),c._zod.onattach.push((w)=>{w._zod.bag.contentEncoding="base64url"}),c._zod.check=(w)=>{if(g1(w.value))return;w.issues.push({code:"invalid_format",format:"base64url",input:w.value,inst:c,continue:!K.abort})}}),X3=F("$ZodE164",(c,K)=>{K.pattern??(K.pattern=$5),Sc.init(c,K)});function k1(c,K=null){try{let w=c.split(".");if(w.length!==3)return!1;let[P]=w;if(!P)return!1;let S=JSON.parse(atob(P));if("typ"in S&&S?.typ!=="JWT")return!1;if(!S.alg)return!1;if(K&&(!("alg"in S)||S.alg!==K))return!1;return!0}catch{return!1}}var B3=F("$ZodJWT",(c,K)=>{Sc.init(c,K),c._zod.check=(w)=>{if(k1(w.value,K.alg))return;w.issues.push({code:"invalid_format",format:"jwt",input:w.value,inst:c,continue:!K.abort})}});var z3=F("$ZodUnknown",(c,K)=>{Oc.init(c,K),c._zod.parse=(w)=>w}),$3=F("$ZodNever",(c,K)=>{Oc.init(c,K),c._zod.parse=(w,P)=>{return w.issues.push({expected:"never",code:"invalid_type",input:w.value,inst:c}),w}});function C5(c,K,w){if(c.issues.length)K.issues.push(...C2(w,c.issues));K.value[w]=c.value}var Q3=F("$ZodArray",(c,K)=>{Oc.init(c,K),c._zod.parse=(w,P)=>{let S=w.value;if(!Array.isArray(S))return w.issues.push({expected:"array",code:"invalid_type",input:S,inst:c}),w;w.value=Array(S.length);let h=[];for(let W=0;W<S.length;W++){let M=S[W],J=K.element._zod.run({value:M,issues:[]},P);if(J instanceof Promise)h.push(J.then((O)=>C5(O,w,W)));else C5(J,w,W)}if(h.length)return Promise.all(h).then(()=>w);return w}});function Y4(c,K,w,P){if(c.issues.length)K.issues.push(...C2(w,c.issues));if(c.value===void 0){if(w in P)K.value[w]=void 0}else K.value[w]=c.value}function U3(c){let K=Object.keys(c.shape);for(let P of K)if(!c.shape?.[P]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${P}": expected a Zod schema`);let w=G6(c.shape);return{...c,keys:K,keySet:new Set(K),numKeys:K.length,optionalKeys:new Set(w)}}function Y3(c,K,w,P,S,h){let W=[],M=S.keySet,J=S.catchall._zod,O=J.def.type;for(let G of Object.keys(K)){if(M.has(G))continue;if(O==="never"){W.push(G);continue}let V=J.run({value:K[G],issues:[]},P);if(V instanceof Promise)c.push(V.then((z)=>Y4(z,w,G,K)));else Y4(V,w,G,K)}if(W.length)w.issues.push({code:"unrecognized_keys",keys:W,input:K,inst:h});if(!c.length)return w;return Promise.all(c).then(()=>{return w})}var x1=F("$ZodObject",(c,K)=>{if(Oc.init(c,K),!Object.getOwnPropertyDescriptor(K,"shape")?.get){let M=K.shape;Object.defineProperty(K,"shape",{get:()=>{let J={...M};return Object.defineProperty(K,"shape",{value:J}),J}})}let P=o2(()=>U3(K));Kc(c._zod,"propValues",()=>{let M=K.shape,J={};for(let O in M){let G=M[O]._zod;if(G.values){J[O]??(J[O]=new Set);for(let V of G.values)J[O].add(V)}}return J});let S=F2,h=K.catchall,W;c._zod.parse=(M,J)=>{W??(W=P.value);let O=M.value;if(!S(O))return M.issues.push({expected:"object",code:"invalid_type",input:O,inst:c}),M;M.value={};let G=[],V=W.shape;for(let z of W.keys){let I=V[z]._zod.run({value:O[z],issues:[]},J);if(I instanceof Promise)G.push(I.then(($)=>Y4($,M,z,O)));else Y4(I,M,z,O)}if(!h)return G.length?Promise.all(G).then(()=>M):M;return Y3(G,O,M,J,P.value,c)}}),H3=F("$ZodObjectJIT",(c,K)=>{x1.init(c,K);let w=c._zod.parse,P=o2(()=>U3(K)),S=(z)=>{let L=new z6(["shape","payload","ctx"]),I=P.value,$=(B)=>{let D=j4(B);return`shape[${D}]._zod.run({ value: input[${D}], issues: [] }, ctx)`};L.write("const input = payload.value;");let q=Object.create(null),b=0;for(let B of I.keys)q[B]=`key_${b++}`;L.write("const newResult = {};");for(let B of I.keys){let D=q[B],H=j4(B);L.write(`const ${D} = ${$(B)};`),L.write(`
        if (${D}.issues.length) {
          payload.issues = payload.issues.concat(${D}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${H}, ...iss.path] : [${H}]
          })));
        }
        
        
        if (${D}.value === undefined) {
          if (${H} in input) {
            newResult[${H}] = undefined;
          }
        } else {
          newResult[${H}] = ${D}.value;
        }
        
      `)}L.write("payload.value = newResult;"),L.write("return payload;");let Y=L.compile();return(B,D)=>Y(z,B,D)},h,W=F2,M=!G4.jitless,O=M&&D6.value,G=K.catchall,V;c._zod.parse=(z,L)=>{V??(V=P.value);let I=z.value;if(!W(I))return z.issues.push({expected:"object",code:"invalid_type",input:I,inst:c}),z;if(M&&O&&L?.async===!1&&L.jitless!==!0){if(!h)h=S(K.shape);if(z=h(z,L),!G)return z;return Y3([],I,z,L,V,c)}return w(z,L)}});function y5(c,K,w,P){for(let h of c)if(h.issues.length===0)return K.value=h.value,K;let S=c.filter((h)=>!b2(h));if(S.length===1)return K.value=S[0].value,S[0];return K.issues.push({code:"invalid_union",input:K.value,inst:w,errors:c.map((h)=>h.issues.map((W)=>Cc(W,P,nc())))}),K}var V3=F("$ZodUnion",(c,K)=>{Oc.init(c,K),Kc(c._zod,"optin",()=>K.options.some((S)=>S._zod.optin==="optional")?"optional":void 0),Kc(c._zod,"optout",()=>K.options.some((S)=>S._zod.optout==="optional")?"optional":void 0),Kc(c._zod,"values",()=>{if(K.options.every((S)=>S._zod.values))return new Set(K.options.flatMap((S)=>Array.from(S._zod.values)));return}),Kc(c._zod,"pattern",()=>{if(K.options.every((S)=>S._zod.pattern)){let S=K.options.map((h)=>h._zod.pattern);return new RegExp(`^(${S.map((h)=>u2(h.source)).join("|")})$`)}return});let w=K.options.length===1,P=K.options[0]._zod.run;c._zod.parse=(S,h)=>{if(w)return P(S,h);let W=!1,M=[];for(let J of K.options){let O=J._zod.run({value:S.value,issues:[]},h);if(O instanceof Promise)M.push(O),W=!0;else{if(O.issues.length===0)return O;M.push(O)}}if(!W)return y5(M,S,c,h);return Promise.all(M).then((J)=>{return y5(J,S,c,h)})}});var L3=F("$ZodIntersection",(c,K)=>{Oc.init(c,K),c._zod.parse=(w,P)=>{let S=w.value,h=K.left._zod.run({value:S,issues:[]},P),W=K.right._zod.run({value:S,issues:[]},P);if(h instanceof Promise||W instanceof Promise)return Promise.all([h,W]).then(([J,O])=>{return _5(w,J,O)});return _5(w,h,W)}});function $6(c,K){if(c===K)return{valid:!0,data:c};if(c instanceof Date&&K instanceof Date&&+c===+K)return{valid:!0,data:c};if(B2(c)&&B2(K)){let w=Object.keys(K),P=Object.keys(c).filter((h)=>w.indexOf(h)!==-1),S={...c,...K};for(let h of P){let W=$6(c[h],K[h]);if(!W.valid)return{valid:!1,mergeErrorPath:[h,...W.mergeErrorPath]};S[h]=W.data}return{valid:!0,data:S}}if(Array.isArray(c)&&Array.isArray(K)){if(c.length!==K.length)return{valid:!1,mergeErrorPath:[]};let w=[];for(let P=0;P<c.length;P++){let S=c[P],h=K[P],W=$6(S,h);if(!W.valid)return{valid:!1,mergeErrorPath:[P,...W.mergeErrorPath]};w.push(W.data)}return{valid:!0,data:w}}return{valid:!1,mergeErrorPath:[]}}function _5(c,K,w){if(K.issues.length)c.issues.push(...K.issues);if(w.issues.length)c.issues.push(...w.issues);if(b2(c))return c;let P=$6(K.value,w.value);if(!P.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(P.mergeErrorPath)}`);return c.value=P.data,c}var q3=F("$ZodEnum",(c,K)=>{Oc.init(c,K);let w=J6(K.entries),P=new Set(w);c._zod.values=P,c._zod.pattern=new RegExp(`^(${w.filter((S)=>N6.has(typeof S)).map((S)=>typeof S==="string"?z2(S):S.toString()).join("|")})$`),c._zod.parse=(S,h)=>{let W=S.value;if(P.has(W))return S;return S.issues.push({code:"invalid_value",values:w,input:W,inst:c}),S}});var v3=F("$ZodTransform",(c,K)=>{Oc.init(c,K),c._zod.parse=(w,P)=>{if(P.direction==="backward")throw new A2(c.constructor.name);let S=K.transform(w.value,w);if(P.async)return(S instanceof Promise?S:Promise.resolve(S)).then((W)=>{return w.value=W,w});if(S instanceof Promise)throw new ic;return w.value=S,w}});function f5(c,K){if(c.issues.length&&K===void 0)return{issues:[],value:void 0};return c}var F3=F("$ZodOptional",(c,K)=>{Oc.init(c,K),c._zod.optin="optional",c._zod.optout="optional",Kc(c._zod,"values",()=>{return K.innerType._zod.values?new Set([...K.innerType._zod.values,void 0]):void 0}),Kc(c._zod,"pattern",()=>{let w=K.innerType._zod.pattern;return w?new RegExp(`^(${u2(w.source)})?$`):void 0}),c._zod.parse=(w,P)=>{if(K.innerType._zod.optin==="optional"){let S=K.innerType._zod.run(w,P);if(S instanceof Promise)return S.then((h)=>f5(h,w.value));return f5(S,w.value)}if(w.value===void 0)return w;return K.innerType._zod.run(w,P)}}),E3=F("$ZodNullable",(c,K)=>{Oc.init(c,K),Kc(c._zod,"optin",()=>K.innerType._zod.optin),Kc(c._zod,"optout",()=>K.innerType._zod.optout),Kc(c._zod,"pattern",()=>{let w=K.innerType._zod.pattern;return w?new RegExp(`^(${u2(w.source)}|null)$`):void 0}),Kc(c._zod,"values",()=>{return K.innerType._zod.values?new Set([...K.innerType._zod.values,null]):void 0}),c._zod.parse=(w,P)=>{if(w.value===null)return w;return K.innerType._zod.run(w,P)}}),R3=F("$ZodDefault",(c,K)=>{Oc.init(c,K),c._zod.optin="optional",Kc(c._zod,"values",()=>K.innerType._zod.values),c._zod.parse=(w,P)=>{if(P.direction==="backward")return K.innerType._zod.run(w,P);if(w.value===void 0)return w.value=K.defaultValue,w;let S=K.innerType._zod.run(w,P);if(S instanceof Promise)return S.then((h)=>e5(h,K));return e5(S,K)}});function e5(c,K){if(c.value===void 0)c.value=K.defaultValue;return c}var g3=F("$ZodPrefault",(c,K)=>{Oc.init(c,K),c._zod.optin="optional",Kc(c._zod,"values",()=>K.innerType._zod.values),c._zod.parse=(w,P)=>{if(P.direction==="backward")return K.innerType._zod.run(w,P);if(w.value===void 0)w.value=K.defaultValue;return K.innerType._zod.run(w,P)}}),k3=F("$ZodNonOptional",(c,K)=>{Oc.init(c,K),Kc(c._zod,"values",()=>{let w=K.innerType._zod.values;return w?new Set([...w].filter((P)=>P!==void 0)):void 0}),c._zod.parse=(w,P)=>{let S=K.innerType._zod.run(w,P);if(S instanceof Promise)return S.then((h)=>l5(h,c));return l5(S,c)}});function l5(c,K){if(!c.issues.length&&c.value===void 0)c.issues.push({code:"invalid_type",expected:"nonoptional",input:c.value,inst:K});return c}var x3=F("$ZodCatch",(c,K)=>{Oc.init(c,K),Kc(c._zod,"optin",()=>K.innerType._zod.optin),Kc(c._zod,"optout",()=>K.innerType._zod.optout),Kc(c._zod,"values",()=>K.innerType._zod.values),c._zod.parse=(w,P)=>{if(P.direction==="backward")return K.innerType._zod.run(w,P);let S=K.innerType._zod.run(w,P);if(S instanceof Promise)return S.then((h)=>{if(w.value=h.value,h.issues.length)w.value=K.catchValue({...w,error:{issues:h.issues.map((W)=>Cc(W,P,nc()))},input:w.value}),w.issues=[];return w});if(w.value=S.value,S.issues.length)w.value=K.catchValue({...w,error:{issues:S.issues.map((h)=>Cc(h,P,nc()))},input:w.value}),w.issues=[];return w}});var Z3=F("$ZodPipe",(c,K)=>{Oc.init(c,K),Kc(c._zod,"values",()=>K.in._zod.values),Kc(c._zod,"optin",()=>K.in._zod.optin),Kc(c._zod,"optout",()=>K.out._zod.optout),Kc(c._zod,"propValues",()=>K.in._zod.propValues),c._zod.parse=(w,P)=>{if(P.direction==="backward"){let h=K.out._zod.run(w,P);if(h instanceof Promise)return h.then((W)=>U4(W,K.in,P));return U4(h,K.in,P)}let S=K.in._zod.run(w,P);if(S instanceof Promise)return S.then((h)=>U4(h,K.out,P));return U4(S,K.out,P)}});function U4(c,K,w){if(c.issues.length)return c.aborted=!0,c;return K._zod.run({value:c.value,issues:c.issues},w)}var A3=F("$ZodReadonly",(c,K)=>{Oc.init(c,K),Kc(c._zod,"propValues",()=>K.innerType._zod.propValues),Kc(c._zod,"values",()=>K.innerType._zod.values),Kc(c._zod,"optin",()=>K.innerType._zod.optin),Kc(c._zod,"optout",()=>K.innerType._zod.optout),c._zod.parse=(w,P)=>{if(P.direction==="backward")return K.innerType._zod.run(w,P);let S=K.innerType._zod.run(w,P);if(S instanceof Promise)return S.then(p5);return p5(S)}});function p5(c){return c.value=Object.freeze(c.value),c}var r3=F("$ZodCustom",(c,K)=>{Vc.init(c,K),Oc.init(c,K),c._zod.parse=(w,P)=>{return w},c._zod.check=(w)=>{let P=w.value,S=K.fn(P);if(S instanceof Promise)return S.then((h)=>T5(h,w,P,c));T5(S,w,P,c);return}});function T5(c,K,w,P){if(!c){let S={code:"custom",input:w,inst:P,path:[...P._zod.def.path??[]],continue:!P._zod.def.abort};if(P._zod.def.params)S.params=P._zod.def.params;K.issues.push(R2(S))}}var kP=Symbol("ZodOutput"),xP=Symbol("ZodInput");class o3{constructor(){this._map=new WeakMap,this._idmap=new Map}add(c,...K){let w=K[0];if(this._map.set(c,w),w&&typeof w==="object"&&"id"in w){if(this._idmap.has(w.id))throw Error(`ID ${w.id} already exists in the registry`);this._idmap.set(w.id,c)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(c){let K=this._map.get(c);if(K&&typeof K==="object"&&"id"in K)this._idmap.delete(K.id);return this._map.delete(c),this}get(c){let K=c._zod.parent;if(K){let w={...this.get(K)??{}};delete w.id;let P={...w,...this._map.get(c)};return Object.keys(P).length?P:void 0}return this._map.get(c)}has(c){return this._map.has(c)}}function Z1(){return new o3}var l2=Z1();function m3(c,K){return new c({type:"string",...e(K)})}function Q6(c,K){return new c({type:"string",format:"email",check:"string_format",abort:!1,...e(K)})}function U6(c,K){return new c({type:"string",format:"guid",check:"string_format",abort:!1,...e(K)})}function u3(c,K){return new c({type:"string",format:"uuid",check:"string_format",abort:!1,...e(K)})}function C3(c,K){return new c({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...e(K)})}function y3(c,K){return new c({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...e(K)})}function _3(c,K){return new c({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...e(K)})}function f3(c,K){return new c({type:"string",format:"url",check:"string_format",abort:!1,...e(K)})}function e3(c,K){return new c({type:"string",format:"emoji",check:"string_format",abort:!1,...e(K)})}function l3(c,K){return new c({type:"string",format:"nanoid",check:"string_format",abort:!1,...e(K)})}function p3(c,K){return new c({type:"string",format:"cuid",check:"string_format",abort:!1,...e(K)})}function T3(c,K){return new c({type:"string",format:"cuid2",check:"string_format",abort:!1,...e(K)})}function i3(c,K){return new c({type:"string",format:"ulid",check:"string_format",abort:!1,...e(K)})}function n3(c,K){return new c({type:"string",format:"xid",check:"string_format",abort:!1,...e(K)})}function t3(c,K){return new c({type:"string",format:"ksuid",check:"string_format",abort:!1,...e(K)})}function d3(c,K){return new c({type:"string",format:"ipv4",check:"string_format",abort:!1,...e(K)})}function s3(c,K){return new c({type:"string",format:"ipv6",check:"string_format",abort:!1,...e(K)})}function a3(c,K){return new c({type:"string",format:"cidrv4",check:"string_format",abort:!1,...e(K)})}function cK(c,K){return new c({type:"string",format:"cidrv6",check:"string_format",abort:!1,...e(K)})}function KK(c,K){return new c({type:"string",format:"base64",check:"string_format",abort:!1,...e(K)})}function wK(c,K){return new c({type:"string",format:"base64url",check:"string_format",abort:!1,...e(K)})}function PK(c,K){return new c({type:"string",format:"e164",check:"string_format",abort:!1,...e(K)})}function SK(c,K){return new c({type:"string",format:"jwt",check:"string_format",abort:!1,...e(K)})}function hK(c,K){return new c({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...e(K)})}function WK(c,K){return new c({type:"string",format:"date",check:"string_format",...e(K)})}function MK(c,K){return new c({type:"string",format:"time",check:"string_format",precision:null,...e(K)})}function bK(c,K){return new c({type:"string",format:"duration",check:"string_format",...e(K)})}function IK(c){return new c({type:"unknown"})}function OK(c,K){return new c({type:"never",...e(K)})}function V4(c,K){return new F5({check:"max_length",...e(K),maximum:c})}function g2(c,K){return new E5({check:"min_length",...e(K),minimum:c})}function L4(c,K){return new R5({check:"length_equals",...e(K),length:c})}function Y6(c,K){return new g5({check:"string_format",format:"regex",...e(K),pattern:c})}function H6(c){return new k5({check:"string_format",format:"lowercase",...e(c)})}function V6(c){return new x5({check:"string_format",format:"uppercase",...e(c)})}function L6(c,K){return new Z5({check:"string_format",format:"includes",...e(K),includes:c})}function q6(c,K){return new A5({check:"string_format",format:"starts_with",...e(K),prefix:c})}function v6(c,K){return new r5({check:"string_format",format:"ends_with",...e(K),suffix:c})}function $2(c){return new o5({check:"overwrite",tx:c})}function F6(c){return $2((K)=>K.normalize(c))}function E6(){return $2((c)=>c.trim())}function R6(){return $2((c)=>c.toLowerCase())}function g6(){return $2((c)=>c.toUpperCase())}function JK(c,K,w){return new c({type:"array",element:K,...e(w)})}function DK(c,K,w){return new c({type:"custom",check:"custom",fn:K,...e(w)})}function NK(c){let K=A1((w)=>{return w.addIssue=(P)=>{if(typeof P==="string")w.issues.push(R2(P,w.value,K._zod.def));else{let S=P;if(S.fatal)S.continue=!1;S.code??(S.code="custom"),S.input??(S.input=w.value),S.inst??(S.inst=K),S.continue??(S.continue=!K._zod.def.abort),w.issues.push(R2(S))}},c(w.value,w)});return K}function A1(c,K){let w=new Vc({check:"custom",...e(K)});return w._zod.check=c,w}var p1=F("ZodISODateTime",(c,K)=>{h3.init(c,K),Wc.init(c,K)});function GK(c){return hK(p1,c)}var T1=F("ZodISODate",(c,K)=>{W3.init(c,K),Wc.init(c,K)});function jK(c){return WK(T1,c)}var i1=F("ZodISOTime",(c,K)=>{M3.init(c,K),Wc.init(c,K)});function XK(c){return MK(i1,c)}var n1=F("ZodISODuration",(c,K)=>{b3.init(c,K),Wc.init(c,K)});function BK(c){return bK(n1,c)}var zK=(c,K)=>{B4.init(c,K),c.name="ZodError",Object.defineProperties(c,{format:{value:(w)=>p8(c,w)},flatten:{value:(w)=>l8(c,w)},addIssue:{value:(w)=>{c.issues.push(w),c.message=JSON.stringify(c.issues,E2,2)}},addIssues:{value:(w)=>{c.issues.push(...w),c.message=JSON.stringify(c.issues,E2,2)}},isEmpty:{get(){return c.issues.length===0}}})},IS=F("ZodError",zK),Lc=F("ZodError",zK,{Parent:Error});var $K=z4(Lc),QK=$4(Lc),UK=_2(Lc),YK=f2(Lc),HK=n8(Lc),VK=t8(Lc),LK=d8(Lc),qK=s8(Lc),vK=a8(Lc),FK=c5(Lc),EK=K5(Lc),RK=w5(Lc);var Dc=F("ZodType",(c,K)=>{return Oc.init(c,K),c.def=K,c.type=K.type,Object.defineProperty(c,"_def",{value:K}),c.check=(...w)=>{return c.clone(cc.mergeDefs(K,{checks:[...K.checks??[],...w.map((P)=>typeof P==="function"?{_zod:{check:P,def:{check:"custom"},onattach:[]}}:P)]}))},c.clone=(w,P)=>xc(c,w,P),c.brand=()=>c,c.register=(w,P)=>{return w.add(c,P),c},c.parse=(w,P)=>$K(c,w,P,{callee:c.parse}),c.safeParse=(w,P)=>UK(c,w,P),c.parseAsync=async(w,P)=>QK(c,w,P,{callee:c.parseAsync}),c.safeParseAsync=async(w,P)=>YK(c,w,P),c.spa=c.safeParseAsync,c.encode=(w,P)=>HK(c,w,P),c.decode=(w,P)=>VK(c,w,P),c.encodeAsync=async(w,P)=>LK(c,w,P),c.decodeAsync=async(w,P)=>qK(c,w,P),c.safeEncode=(w,P)=>vK(c,w,P),c.safeDecode=(w,P)=>FK(c,w,P),c.safeEncodeAsync=async(w,P)=>EK(c,w,P),c.safeDecodeAsync=async(w,P)=>RK(c,w,P),c.refine=(w,P)=>c.check(y9(w,P)),c.superRefine=(w)=>c.check(_9(w)),c.overwrite=(w)=>c.check($2(w)),c.optional=()=>xK(c),c.nullable=()=>ZK(c),c.nullish=()=>xK(ZK(c)),c.nonoptional=(w)=>Z9(c,w),c.array=()=>Q9(c),c.or=(w)=>H9([c,w]),c.and=(w)=>L9(c,w),c.transform=(w)=>AK(c,F9(w)),c.default=(w)=>g9(c,w),c.prefault=(w)=>x9(c,w),c.catch=(w)=>r9(c,w),c.pipe=(w)=>AK(c,w),c.readonly=()=>u9(c),c.describe=(w)=>{let P=c.clone();return l2.add(P,{description:w}),P},Object.defineProperty(c,"description",{get(){return l2.get(c)?.description},configurable:!0}),c.meta=(...w)=>{if(w.length===0)return l2.get(c);let P=c.clone();return l2.add(P,w[0]),P},c.isOptional=()=>c.safeParse(void 0).success,c.isNullable=()=>c.safeParse(null).success,c}),rK=F("_ZodString",(c,K)=>{H4.init(c,K),Dc.init(c,K);let w=c._zod.bag;c.format=w.format??null,c.minLength=w.minimum??null,c.maxLength=w.maximum??null,c.regex=(...P)=>c.check(Y6(...P)),c.includes=(...P)=>c.check(L6(...P)),c.startsWith=(...P)=>c.check(q6(...P)),c.endsWith=(...P)=>c.check(v6(...P)),c.min=(...P)=>c.check(g2(...P)),c.max=(...P)=>c.check(V4(...P)),c.length=(...P)=>c.check(L4(...P)),c.nonempty=(...P)=>c.check(g2(1,...P)),c.lowercase=(P)=>c.check(H6(P)),c.uppercase=(P)=>c.check(V6(P)),c.trim=()=>c.check(E6()),c.normalize=(...P)=>c.check(F6(...P)),c.toLowerCase=()=>c.check(R6()),c.toUpperCase=()=>c.check(g6())}),a1=F("ZodString",(c,K)=>{H4.init(c,K),rK.init(c,K),c.email=(w)=>c.check(Q6(mK,w)),c.url=(w)=>c.check(f3(c9,w)),c.jwt=(w)=>c.check(SK(j9,w)),c.emoji=(w)=>c.check(e3(K9,w)),c.guid=(w)=>c.check(U6(gK,w)),c.uuid=(w)=>c.check(u3(v4,w)),c.uuidv4=(w)=>c.check(C3(v4,w)),c.uuidv6=(w)=>c.check(y3(v4,w)),c.uuidv7=(w)=>c.check(_3(v4,w)),c.nanoid=(w)=>c.check(l3(w9,w)),c.guid=(w)=>c.check(U6(gK,w)),c.cuid=(w)=>c.check(p3(P9,w)),c.cuid2=(w)=>c.check(T3(S9,w)),c.ulid=(w)=>c.check(i3(h9,w)),c.base64=(w)=>c.check(KK(D9,w)),c.base64url=(w)=>c.check(wK(N9,w)),c.xid=(w)=>c.check(n3(W9,w)),c.ksuid=(w)=>c.check(t3(M9,w)),c.ipv4=(w)=>c.check(d3(b9,w)),c.ipv6=(w)=>c.check(s3(I9,w)),c.cidrv4=(w)=>c.check(a3(O9,w)),c.cidrv6=(w)=>c.check(cK(J9,w)),c.e164=(w)=>c.check(PK(G9,w)),c.datetime=(w)=>c.check(GK(w)),c.date=(w)=>c.check(jK(w)),c.time=(w)=>c.check(XK(w)),c.duration=(w)=>c.check(BK(w))});function oK(c){return m3(a1,c)}var Wc=F("ZodStringFormat",(c,K)=>{Sc.init(c,K),rK.init(c,K)}),mK=F("ZodEmail",(c,K)=>{t5.init(c,K),Wc.init(c,K)});function uK(c){return Q6(mK,c)}var gK=F("ZodGUID",(c,K)=>{i5.init(c,K),Wc.init(c,K)});var v4=F("ZodUUID",(c,K)=>{n5.init(c,K),Wc.init(c,K)});var c9=F("ZodURL",(c,K)=>{d5.init(c,K),Wc.init(c,K)});var K9=F("ZodEmoji",(c,K)=>{s5.init(c,K),Wc.init(c,K)});var w9=F("ZodNanoID",(c,K)=>{a5.init(c,K),Wc.init(c,K)});var P9=F("ZodCUID",(c,K)=>{c3.init(c,K),Wc.init(c,K)});var S9=F("ZodCUID2",(c,K)=>{K3.init(c,K),Wc.init(c,K)});var h9=F("ZodULID",(c,K)=>{w3.init(c,K),Wc.init(c,K)});var W9=F("ZodXID",(c,K)=>{P3.init(c,K),Wc.init(c,K)});var M9=F("ZodKSUID",(c,K)=>{S3.init(c,K),Wc.init(c,K)});var b9=F("ZodIPv4",(c,K)=>{I3.init(c,K),Wc.init(c,K)});var I9=F("ZodIPv6",(c,K)=>{O3.init(c,K),Wc.init(c,K)});var O9=F("ZodCIDRv4",(c,K)=>{J3.init(c,K),Wc.init(c,K)});var J9=F("ZodCIDRv6",(c,K)=>{D3.init(c,K),Wc.init(c,K)});var D9=F("ZodBase64",(c,K)=>{G3.init(c,K),Wc.init(c,K)});var N9=F("ZodBase64URL",(c,K)=>{j3.init(c,K),Wc.init(c,K)});var G9=F("ZodE164",(c,K)=>{X3.init(c,K),Wc.init(c,K)});var j9=F("ZodJWT",(c,K)=>{B3.init(c,K),Wc.init(c,K)});var X9=F("ZodUnknown",(c,K)=>{z3.init(c,K),Dc.init(c,K)});function kK(){return IK(X9)}var B9=F("ZodNever",(c,K)=>{$3.init(c,K),Dc.init(c,K)});function z9(c){return OK(B9,c)}var $9=F("ZodArray",(c,K)=>{Q3.init(c,K),Dc.init(c,K),c.element=K.element,c.min=(w,P)=>c.check(g2(w,P)),c.nonempty=(w)=>c.check(g2(1,w)),c.max=(w,P)=>c.check(V4(w,P)),c.length=(w,P)=>c.check(L4(w,P)),c.unwrap=()=>c.element});function Q9(c,K){return JK($9,c,K)}var U9=F("ZodObject",(c,K)=>{H3.init(c,K),Dc.init(c,K),cc.defineLazy(c,"shape",()=>{return K.shape}),c.keyof=()=>q9(Object.keys(c._zod.def.shape)),c.catchall=(w)=>c.clone({...c._zod.def,catchall:w}),c.passthrough=()=>c.clone({...c._zod.def,catchall:kK()}),c.loose=()=>c.clone({...c._zod.def,catchall:kK()}),c.strict=()=>c.clone({...c._zod.def,catchall:z9()}),c.strip=()=>c.clone({...c._zod.def,catchall:void 0}),c.extend=(w)=>{return cc.extend(c,w)},c.safeExtend=(w)=>{return cc.safeExtend(c,w)},c.merge=(w)=>cc.merge(c,w),c.pick=(w)=>cc.pick(c,w),c.omit=(w)=>cc.omit(c,w),c.partial=(...w)=>cc.partial(yK,c,w[0]),c.required=(...w)=>cc.required(_K,c,w[0])});function CK(c,K){let w={type:"object",shape:c??{},...cc.normalizeParams(K)};return new U9(w)}var Y9=F("ZodUnion",(c,K)=>{V3.init(c,K),Dc.init(c,K),c.options=K.options});function H9(c,K){return new Y9({type:"union",options:c,...cc.normalizeParams(K)})}var V9=F("ZodIntersection",(c,K)=>{L3.init(c,K),Dc.init(c,K)});function L9(c,K){return new V9({type:"intersection",left:c,right:K})}var k6=F("ZodEnum",(c,K)=>{q3.init(c,K),Dc.init(c,K),c.enum=K.entries,c.options=Object.values(K.entries);let w=new Set(Object.keys(K.entries));c.extract=(P,S)=>{let h={};for(let W of P)if(w.has(W))h[W]=K.entries[W];else throw Error(`Key ${W} not found in enum`);return new k6({...K,checks:[],...cc.normalizeParams(S),entries:h})},c.exclude=(P,S)=>{let h={...K.entries};for(let W of P)if(w.has(W))delete h[W];else throw Error(`Key ${W} not found in enum`);return new k6({...K,checks:[],...cc.normalizeParams(S),entries:h})}});function q9(c,K){let w=Array.isArray(c)?Object.fromEntries(c.map((P)=>[P,P])):c;return new k6({type:"enum",entries:w,...cc.normalizeParams(K)})}var v9=F("ZodTransform",(c,K)=>{v3.init(c,K),Dc.init(c,K),c._zod.parse=(w,P)=>{if(P.direction==="backward")throw new A2(c.constructor.name);w.addIssue=(h)=>{if(typeof h==="string")w.issues.push(cc.issue(h,w.value,K));else{let W=h;if(W.fatal)W.continue=!1;W.code??(W.code="custom"),W.input??(W.input=w.value),W.inst??(W.inst=c),w.issues.push(cc.issue(W))}};let S=K.transform(w.value,w);if(S instanceof Promise)return S.then((h)=>{return w.value=h,w});return w.value=S,w}});function F9(c){return new v9({type:"transform",transform:c})}var yK=F("ZodOptional",(c,K)=>{F3.init(c,K),Dc.init(c,K),c.unwrap=()=>c._zod.def.innerType});function xK(c){return new yK({type:"optional",innerType:c})}var E9=F("ZodNullable",(c,K)=>{E3.init(c,K),Dc.init(c,K),c.unwrap=()=>c._zod.def.innerType});function ZK(c){return new E9({type:"nullable",innerType:c})}var R9=F("ZodDefault",(c,K)=>{R3.init(c,K),Dc.init(c,K),c.unwrap=()=>c._zod.def.innerType,c.removeDefault=c.unwrap});function g9(c,K){return new R9({type:"default",innerType:c,get defaultValue(){return typeof K==="function"?K():cc.shallowClone(K)}})}var k9=F("ZodPrefault",(c,K)=>{g3.init(c,K),Dc.init(c,K),c.unwrap=()=>c._zod.def.innerType});function x9(c,K){return new k9({type:"prefault",innerType:c,get defaultValue(){return typeof K==="function"?K():cc.shallowClone(K)}})}var _K=F("ZodNonOptional",(c,K)=>{k3.init(c,K),Dc.init(c,K),c.unwrap=()=>c._zod.def.innerType});function Z9(c,K){return new _K({type:"nonoptional",innerType:c,...cc.normalizeParams(K)})}var A9=F("ZodCatch",(c,K)=>{x3.init(c,K),Dc.init(c,K),c.unwrap=()=>c._zod.def.innerType,c.removeCatch=c.unwrap});function r9(c,K){return new A9({type:"catch",innerType:c,catchValue:typeof K==="function"?K:()=>K})}var o9=F("ZodPipe",(c,K)=>{Z3.init(c,K),Dc.init(c,K),c.in=K.in,c.out=K.out});function AK(c,K){return new o9({type:"pipe",in:c,out:K})}var m9=F("ZodReadonly",(c,K)=>{A3.init(c,K),Dc.init(c,K),c.unwrap=()=>c._zod.def.innerType});function u9(c){return new m9({type:"readonly",innerType:c})}var C9=F("ZodCustom",(c,K)=>{r3.init(c,K),Dc.init(c,K)});function y9(c,K={}){return DK(C9,c,K)}function _9(c){return NK(c)}class F4{params;#c=x2.ETokenAudiences.SYSTEM;#K=1;token;constructor(c){this.params=c}async signToken(){let{params:{credential:{tenantId:c,appId:K,modeId:w,secretKey:P},options:S}}=this;try{let h=new Uint8Array(Buffer.from(P,"base64")),W=await crypto.subtle.importKey("raw",h,{name:"HMAC",hash:"SHA-512"},!1,["sign","verify"]),M=await new N4({tenantId:c,appId:K,modeId:w,iss:c,aud:x2.ETokenAudiences.SYSTEM}).setProtectedHeader({alg:"HS512"}).sign(W);return this.token=M,M}catch(h){if(S?.logs)console.error("[BoolGuard] Sign token error:",h);throw h}}async ping(){let{token:c,params:{credential:{tenantId:K,appId:w,modeId:P},options:S}}=this;try{let h=c||await this.signToken(),W=new Headers;W.append("X-Tenant-ID",K),W.append("X-App-ID",w),W.append("X-Mode-ID",P),W.append("Authorization",`Bearer ${h}`);let M=await fetch(`${this.#c}/v${S?.version||this.#K}/tenant-app-modes/ping`,{method:"GET",headers:W});if(!M.ok)throw await M.json();return M.ok}catch(h){if(S?.logs)console.error("[BoolGuard] Ping error:",h);return!1}}async createPlainAccount({identity:c,password:K,metadata:w}){let{token:P,params:{credential:{tenantId:S,appId:h,modeId:W},options:M}}=this;try{let J=P||await this.signToken(),O=new Headers;O.append("X-Tenant-ID",S),O.append("X-App-ID",h),O.append("X-Mode-ID",W),O.append("Authorization",`Bearer ${J}`),O.append("Content-Type","application/json");let G=await fetch(`${this.#c}/v${M?.version||this.#K}/tenant-app-mode-accounts`,{method:"POST",headers:O,body:JSON.stringify({data:Object.freeze({type:"plain",identity:c,password:K,metadata:w})})});if(!G.ok)throw await G.json();let{data:V}=await G.json();return Object.freeze({account:V.account,credential:V.credential})}catch(J){if(M?.logs)console.error("[BoolGuard] Create plain account error:",J);throw J}}async createEmailAccount({identity:c,password:K,metadata:w}){let{token:P,params:{credential:{tenantId:S,appId:h,modeId:W},options:M}}=this;try{let J=P||await this.signToken(),O=new Headers;O.append("X-Tenant-ID",S),O.append("X-App-ID",h),O.append("X-Mode-ID",W),O.append("Authorization",`Bearer ${J}`),O.append("Content-Type","application/json");let G=await fetch(`${this.#c}/v${M?.version||this.#K}/tenant-app-mode-accounts`,{method:"POST",headers:O,body:JSON.stringify({data:Object.freeze({type:"email",identity:c,password:K,metadata:w})})});if(!G.ok)throw await G.json();let{data:V}=await G.json();return Object.freeze({account:V.account,credential:V.credential})}catch(J){if(M?.logs)console.error("[BoolGuard] Create email account error:",J);throw J}}async authenticate({identity:c,password:K}){let{token:w,params:{credential:{tenantId:P,appId:S,modeId:h},options:W}}=this;try{let M=w||await this.signToken(),J=await uK().safeParseAsync(c),O=new Headers;O.append("X-Tenant-ID",P),O.append("X-App-ID",S),O.append("X-Mode-ID",h),O.append("Authorization",`Bearer ${M}`),O.append("Content-Type","application/json");let G=await fetch(`${this.#c}/v${W?.version||this.#K}/tenant-app-mode-accounts/authenticate`,{method:"POST",headers:O,body:JSON.stringify({data:Object.freeze({type:!J.success?"plain":"email",identity:c,password:K})})});if(!G.ok)throw await G.json();let{data:V}=await G.json();return Object.freeze({account:V.account,credential:V.credential,token:V.token})}catch(M){if(W?.logs)console.error("[BoolGuard] Authenticate error:",M);throw M}}async verifyToken({token:c}){let{params:{credential:{tenantId:K,appId:w,modeId:P},options:S}}=this;try{let h=this.token||await this.signToken(),W=new Headers;W.append("X-Tenant-ID",K),W.append("X-App-ID",w),W.append("X-Mode-ID",P),W.append("Authorization",`Bearer ${h}`),W.append("Content-Type","application/json");let M=await fetch(`${this.#c}/v${S?.version||this.#K}/tenant-app-mode-accounts/verify`,{method:"POST",headers:W,body:JSON.stringify({data:Object.freeze({token:c})})});if(!M.ok)throw await M.json();let{data:J}=await M.json();return Object.freeze({account:J.account,credential:J.credential})}catch(h){if(S?.logs)console.error("[BoolGuard] Verify token error:",h);throw h}}}var Dh=async({credential:c,definition:K,options:w})=>{let P=new F4({credential:c,definition:K,options:w});if(await P.signToken(),!await P.ping())throw Error("Ping to Bool Guard service failed!");return[Yc.guardClient,P]};var f9=CK({authorization:oK().startsWith("Bearer ").min(24).transform((c)=>{let[K,w]=c.split(" ");return Object.freeze({schema:K,token:w})})});class x6{clientInstance;constructor(c){this.clientInstance=c}async start(c,K){let w=await f9.safeParseAsync(K.toJSON());if(!w.success)return c.set(Yc.authState,void 0);else{let{authorization:{token:P}}=w.data;try{let{account:S,credential:h}=await this.clientInstance.verifyToken({token:P}),W=Object.freeze({account:S,credential:h});return c.set(Yc.authState,W)}catch(S){return console.error(S),c.set(Yc.authState,void 0)}}}}Y2([O2(0,b4()),O2(1,W8())],x6.prototype,"start",null),x6=Y2([O8(),O2(0,b8(Yc.guardClient))],x6);export{Dh as loader,x6 as Middleware,Yc as Keys,a4 as Interceptor,x2 as Enums,F4 as Client,s4 as AuthState};

//# debugId=6BD6855EB86E29BB64756E2164756E21
