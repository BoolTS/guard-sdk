// @bun
var u5=Object.defineProperty;var lK=(w,K)=>{for(var W in K)u5(w,W,{get:K[W],enumerable:!0,configurable:!0,set:(J)=>K[W]=()=>J})};var pK=function(w,K,W,J){var P=arguments.length,I=P<3?K:J===null?J=Object.getOwnPropertyDescriptor(K,W):J,b;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")I=Reflect.decorate(w,K,W,J);else for(var G=w.length-1;G>=0;G--)if(b=w[G])I=(P<3?b(I):P>3?b(K,W,I):b(K,W))||I;return P>3&&I&&Object.defineProperty(K,W,I),I},Z2=(w,K)=>(W,J)=>K(W,J,w);var k2={};lK(k2,{ETokenAudiences:()=>b4});var b4;((K)=>K.SYSTEM="https://api-guard.booljs.com")(b4||={});var hw={};lK(hw,{service:()=>T5,guardMetadata:()=>m5,guardClient:()=>l5,authState:()=>y5});var y5=Symbol.for("__boolGuard::authState"),m5=Symbol.for("__boolGuard::guardMetadata"),T5=Symbol.for("__boolGuard::authService"),l5=Symbol.for("__boolGuard::guardClient");var p5=(w)=>(K,W)=>{Reflect.defineMetadata(hw.guardMetadata,w,K.constructor,W)};var f5=Object.create,{getPrototypeOf:e5,defineProperty:fK,getOwnPropertyNames:i5}=Object,d5=Object.prototype.hasOwnProperty,MK=(w,K,W)=>{W=w!=null?f5(e5(w)):{};let J=K||!w||!w.__esModule?fK(W,"default",{value:w,enumerable:!0}):W;for(let P of i5(w))if(!d5.call(J,P))fK(J,P,{get:()=>w[P],enumerable:!0});return J},p=(w,K)=>()=>(K||w((K={exports:{}}).exports,K),K.exports),M4=(w,K)=>{for(var W in K)fK(w,W,{get:K[W],enumerable:!0,configurable:!0,set:(J)=>K[W]=()=>J})},n5=import.meta.require,nK=p(()=>{/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var w;(function(K){(function(W){var J=typeof globalThis==="object"?globalThis:typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:M(),P=I(K);if(typeof J.Reflect<"u")P=I(J.Reflect,P);if(W(P,J),typeof J.Reflect>"u")J.Reflect=K;function I(O,D){return function(Q,N){if(Object.defineProperty(O,Q,{configurable:!0,writable:!0,value:N}),D)D(Q,N)}}function b(){try{return Function("return this;")()}catch(O){}}function G(){try{return(0,eval)("(function() { return this; })()")}catch(O){}}function M(){return b()||G()}})(function(W,J){var P=Object.prototype.hasOwnProperty,I=typeof Symbol==="function",b=I&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",G=I&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",M=typeof Object.create==="function",O={__proto__:[]}instanceof Array,D=!M&&!O,Q={create:M?function(){return pw(Object.create(null))}:O?function(){return pw({__proto__:null})}:function(){return pw({})},has:D?function(S,V){return P.call(S,V)}:function(S,V){return V in S},get:D?function(S,V){return P.call(S,V)?S[V]:void 0}:function(S,V){return S[V]}},N=Object.getPrototypeOf(Function),L=typeof Map==="function"&&typeof Map.prototype.entries==="function"?Map:oK(),k=typeof Set==="function"&&typeof Set.prototype.entries==="function"?Set:wK(),B=typeof WeakMap==="function"?WeakMap:cK(),v=I?Symbol.for("@reflect-metadata:registry"):void 0,A=nw(),c=tw(A);function x(S,V,H,g){if(!y(H)){if(!Pw(S))throw TypeError();if(!Jw(V))throw TypeError();if(!Jw(g)&&!y(g)&&!qw(g))throw TypeError();if(qw(g))g=void 0;return H=i(H),Ww(S,V,H,g)}else{if(!Pw(S))throw TypeError();if(!Mw(V))throw TypeError();return T(S,V)}}W("decorate",x);function R(S,V){function H(g,r){if(!Jw(g))throw TypeError();if(!y(r)&&!Qw(r))throw TypeError();m(S,V,g,r)}return H}W("metadata",R);function C(S,V,H,g){if(!Jw(H))throw TypeError();if(!y(g))g=i(g);return m(S,V,H,g)}W("defineMetadata",C);function o(S,V,H){if(!Jw(V))throw TypeError();if(!y(H))H=i(H);return ww(S,V,H)}W("hasMetadata",o);function _(S,V,H){if(!Jw(V))throw TypeError();if(!y(H))H=i(H);return a(S,V,H)}W("hasOwnMetadata",_);function E(S,V,H){if(!Jw(V))throw TypeError();if(!y(H))H=i(H);return d(S,V,H)}W("getMetadata",E);function X(S,V,H){if(!Jw(V))throw TypeError();if(!y(H))H=i(H);return Kw(S,V,H)}W("getOwnMetadata",X);function U(S,V){if(!Jw(S))throw TypeError();if(!y(V))V=i(V);return l(S,V)}W("getMetadataKeys",U);function q(S,V){if(!Jw(S))throw TypeError();if(!y(V))V=i(V);return Vw(S,V)}W("getOwnMetadataKeys",q);function u(S,V,H){if(!Jw(V))throw TypeError();if(!y(H))H=i(H);if(!Jw(V))throw TypeError();if(!y(H))H=i(H);var g=b2(V,H,!1);if(y(g))return!1;return g.OrdinaryDeleteMetadata(S,V,H)}W("deleteMetadata",u);function T(S,V){for(var H=S.length-1;H>=0;--H){var g=S[H],r=g(V);if(!y(r)&&!qw(r)){if(!Mw(r))throw TypeError();V=r}}return V}function Ww(S,V,H,g){for(var r=S.length-1;r>=0;--r){var Gw=S[r],Y=Gw(V,H,g);if(!y(Y)&&!qw(Y)){if(!Jw(Y))throw TypeError();g=Y}}return g}function ww(S,V,H){var g=a(S,V,H);if(g)return!0;var r=Hw(V);if(!qw(r))return ww(S,r,H);return!1}function a(S,V,H){var g=b2(V,H,!1);if(y(g))return!1;return ow(g.OrdinaryHasOwnMetadata(S,V,H))}function d(S,V,H){var g=a(S,V,H);if(g)return Kw(S,V,H);var r=Hw(V);if(!qw(r))return d(S,r,H);return}function Kw(S,V,H){var g=b2(V,H,!1);if(y(g))return;return g.OrdinaryGetOwnMetadata(S,V,H)}function m(S,V,H,g){var r=b2(H,g,!0);r.OrdinaryDefineOwnMetadata(S,V,H,g)}function l(S,V){var H=Vw(S,V),g=Hw(S);if(g===null)return H;var r=l(g,V);if(r.length<=0)return H;if(H.length<=0)return r;var Gw=new k,Y=[];for(var $=0,F=H;$<F.length;$++){var j=F[$],Z=Gw.has(j);if(!Z)Gw.add(j),Y.push(j)}for(var z=0,f=r;z<f.length;z++){var j=f[z],Z=Gw.has(j);if(!Z)Gw.add(j),Y.push(j)}return Y}function Vw(S,V){var H=b2(S,V,!1);if(!H)return[];return H.OrdinaryOwnMetadataKeys(S,V)}function kw(S){if(S===null)return 1;switch(typeof S){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return S===null?1:6;default:return 6}}function y(S){return S===void 0}function qw(S){return S===null}function rw(S){return typeof S==="symbol"}function Jw(S){return typeof S==="object"?S!==null:typeof S==="function"}function xw(S,V){switch(kw(S)){case 0:return S;case 1:return S;case 2:return S;case 3:return S;case 4:return S;case 5:return S}var H=V===3?"string":V===5?"number":"default",g=Bw(S,b);if(g!==void 0){var r=g.call(S,H);if(Jw(r))throw TypeError();return r}return zw(S,H==="default"?"number":H)}function zw(S,V){if(V==="string"){var H=S.toString;if(n(H)){var g=H.call(S);if(!Jw(g))return g}var r=S.valueOf;if(n(r)){var g=r.call(S);if(!Jw(g))return g}}else{var r=S.valueOf;if(n(r)){var g=r.call(S);if(!Jw(g))return g}var Gw=S.toString;if(n(Gw)){var g=Gw.call(S);if(!Jw(g))return g}}throw TypeError()}function ow(S){return!!S}function uw(S){return""+S}function i(S){var V=xw(S,3);if(rw(V))return V;return uw(V)}function Pw(S){return Array.isArray?Array.isArray(S):S instanceof Object?S instanceof Array:Object.prototype.toString.call(S)==="[object Array]"}function n(S){return typeof S==="function"}function Mw(S){return typeof S==="function"}function Qw(S){switch(kw(S)){case 3:return!0;case 4:return!0;default:return!1}}function Lw(S,V){return S===V||S!==S&&V!==V}function Bw(S,V){var H=S[V];if(H===void 0||H===null)return;if(!n(H))throw TypeError();return H}function lw(S){var V=Bw(S,G);if(!n(V))throw TypeError();var H=V.call(S);if(!Jw(H))throw TypeError();return H}function Ew(S){return S.value}function Uw(S){var V=S.next();return V.done?!1:V}function yw(S){var V=S.return;if(V)V.call(S)}function Hw(S){var V=Object.getPrototypeOf(S);if(typeof S!=="function"||S===N)return V;if(V!==N)return V;var H=S.prototype,g=H&&Object.getPrototypeOf(H);if(g==null||g===Object.prototype)return V;var r=g.constructor;if(typeof r!=="function")return V;if(r===S)return V;return r}function dw(){var S;if(!y(v)&&typeof J.Reflect<"u"&&!(v in J.Reflect)&&typeof J.Reflect.defineMetadata==="function")S=xK(J.Reflect);var V,H,g,r=new B,Gw={registerProvider:Y,getProvider:F,setProvider:Z};return Gw;function Y(z){if(!Object.isExtensible(Gw))throw Error("Cannot add provider to a frozen registry.");switch(!0){case S===z:break;case y(V):V=z;break;case V===z:break;case y(H):H=z;break;case H===z:break;default:if(g===void 0)g=new k;g.add(z);break}}function $(z,f){if(!y(V)){if(V.isProviderFor(z,f))return V;if(!y(H)){if(H.isProviderFor(z,f))return V;if(!y(g)){var s=lw(g);while(!0){var t=Uw(s);if(!t)return;var Nw=Ew(t);if(Nw.isProviderFor(z,f))return yw(s),Nw}}}}if(!y(S)&&S.isProviderFor(z,f))return S;return}function F(z,f){var s=r.get(z),t;if(!y(s))t=s.get(f);if(!y(t))return t;if(t=$(z,f),!y(t)){if(y(s))s=new L,r.set(z,s);s.set(f,t)}return t}function j(z){if(y(z))throw TypeError();return V===z||H===z||!y(g)&&g.has(z)}function Z(z,f,s){if(!j(s))throw Error("Metadata provider not registered.");var t=F(z,f);if(t!==s){if(!y(t))return!1;var Nw=r.get(z);if(y(Nw))Nw=new L,r.set(z,Nw);Nw.set(f,s)}return!0}}function nw(){var S;if(!y(v)&&Jw(J.Reflect)&&Object.isExtensible(J.Reflect))S=J.Reflect[v];if(y(S))S=dw();if(!y(v)&&Jw(J.Reflect)&&Object.isExtensible(J.Reflect))Object.defineProperty(J.Reflect,v,{enumerable:!1,configurable:!1,writable:!1,value:S});return S}function tw(S){var V=new B,H={isProviderFor:function(j,Z){var z=V.get(j);if(y(z))return!1;return z.has(Z)},OrdinaryDefineOwnMetadata:Y,OrdinaryHasOwnMetadata:r,OrdinaryGetOwnMetadata:Gw,OrdinaryOwnMetadataKeys:$,OrdinaryDeleteMetadata:F};return A.registerProvider(H),H;function g(j,Z,z){var f=V.get(j),s=!1;if(y(f)){if(!z)return;f=new L,V.set(j,f),s=!0}var t=f.get(Z);if(y(t)){if(!z)return;if(t=new L,f.set(Z,t),!S.setProvider(j,Z,H)){if(f.delete(Z),s)V.delete(j);throw Error("Wrong provider for target.")}}return t}function r(j,Z,z){var f=g(Z,z,!1);if(y(f))return!1;return ow(f.has(j))}function Gw(j,Z,z){var f=g(Z,z,!1);if(y(f))return;return f.get(j)}function Y(j,Z,z,f){var s=g(z,f,!0);s.set(j,Z)}function $(j,Z){var z=[],f=g(j,Z,!1);if(y(f))return z;var s=f.keys(),t=lw(s),Nw=0;while(!0){var S2=Uw(t);if(!S2)return z.length=Nw,z;var aw=Ew(S2);try{z[Nw]=aw}catch(vw){try{yw(t)}finally{throw vw}}Nw++}}function F(j,Z,z){var f=g(Z,z,!1);if(y(f))return!1;if(!f.delete(j))return!1;if(f.size===0){var s=V.get(Z);if(!y(s)){if(s.delete(z),s.size===0)V.delete(s)}}return!0}}function xK(S){var{defineMetadata:V,hasOwnMetadata:H,getOwnMetadata:g,getOwnMetadataKeys:r,deleteMetadata:Gw}=S,Y=new B,$={isProviderFor:function(F,j){var Z=Y.get(F);if(!y(Z)&&Z.has(j))return!0;if(r(F,j).length){if(y(Z))Z=new k,Y.set(F,Z);return Z.add(j),!0}return!1},OrdinaryDefineOwnMetadata:V,OrdinaryHasOwnMetadata:H,OrdinaryGetOwnMetadata:g,OrdinaryOwnMetadataKeys:r,OrdinaryDeleteMetadata:Gw};return $}function b2(S,V,H){var g=A.getProvider(S,V);if(!y(g))return g;if(H){if(A.setProvider(S,V,c))return c;throw Error("Illegal state.")}return}function oK(){var S={},V=[],H=function(){function $(F,j,Z){this._index=0,this._keys=F,this._values=j,this._selector=Z}return $.prototype["@@iterator"]=function(){return this},$.prototype[G]=function(){return this},$.prototype.next=function(){var F=this._index;if(F>=0&&F<this._keys.length){var j=this._selector(this._keys[F],this._values[F]);if(F+1>=this._keys.length)this._index=-1,this._keys=V,this._values=V;else this._index++;return{value:j,done:!1}}return{value:void 0,done:!0}},$.prototype.throw=function(F){if(this._index>=0)this._index=-1,this._keys=V,this._values=V;throw F},$.prototype.return=function(F){if(this._index>=0)this._index=-1,this._keys=V,this._values=V;return{value:F,done:!0}},$}(),g=function(){function $(){this._keys=[],this._values=[],this._cacheKey=S,this._cacheIndex=-2}return Object.defineProperty($.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),$.prototype.has=function(F){return this._find(F,!1)>=0},$.prototype.get=function(F){var j=this._find(F,!1);return j>=0?this._values[j]:void 0},$.prototype.set=function(F,j){var Z=this._find(F,!0);return this._values[Z]=j,this},$.prototype.delete=function(F){var j=this._find(F,!1);if(j>=0){var Z=this._keys.length;for(var z=j+1;z<Z;z++)this._keys[z-1]=this._keys[z],this._values[z-1]=this._values[z];if(this._keys.length--,this._values.length--,Lw(F,this._cacheKey))this._cacheKey=S,this._cacheIndex=-2;return!0}return!1},$.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=S,this._cacheIndex=-2},$.prototype.keys=function(){return new H(this._keys,this._values,r)},$.prototype.values=function(){return new H(this._keys,this._values,Gw)},$.prototype.entries=function(){return new H(this._keys,this._values,Y)},$.prototype["@@iterator"]=function(){return this.entries()},$.prototype[G]=function(){return this.entries()},$.prototype._find=function(F,j){if(!Lw(this._cacheKey,F)){this._cacheIndex=-1;for(var Z=0;Z<this._keys.length;Z++)if(Lw(this._keys[Z],F)){this._cacheIndex=Z;break}}if(this._cacheIndex<0&&j)this._cacheIndex=this._keys.length,this._keys.push(F),this._values.push(void 0);return this._cacheIndex},$}();return g;function r($,F){return $}function Gw($,F){return F}function Y($,F){return[$,F]}}function wK(){var S=function(){function V(){this._map=new L}return Object.defineProperty(V.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),V.prototype.has=function(H){return this._map.has(H)},V.prototype.add=function(H){return this._map.set(H,H),this},V.prototype.delete=function(H){return this._map.delete(H)},V.prototype.clear=function(){this._map.clear()},V.prototype.keys=function(){return this._map.keys()},V.prototype.values=function(){return this._map.keys()},V.prototype.entries=function(){return this._map.entries()},V.prototype["@@iterator"]=function(){return this.keys()},V.prototype[G]=function(){return this.keys()},V}();return S}function cK(){var S=16,V=Q.create(),H=g();return function(){function F(){this._key=g()}return F.prototype.has=function(j){var Z=r(j,!1);return Z!==void 0?Q.has(Z,this._key):!1},F.prototype.get=function(j){var Z=r(j,!1);return Z!==void 0?Q.get(Z,this._key):void 0},F.prototype.set=function(j,Z){var z=r(j,!0);return z[this._key]=Z,this},F.prototype.delete=function(j){var Z=r(j,!1);return Z!==void 0?delete Z[this._key]:!1},F.prototype.clear=function(){this._key=g()},F}();function g(){var F;do F="@@WeakMap@@"+$();while(Q.has(V,F));return V[F]=!0,F}function r(F,j){if(!P.call(F,H)){if(!j)return;Object.defineProperty(F,H,{value:Q.create()})}return F[H]}function Gw(F,j){for(var Z=0;Z<j;++Z)F[Z]=Math.random()*255|0;return F}function Y(F){if(typeof Uint8Array==="function"){var j=new Uint8Array(F);if(typeof crypto<"u")crypto.getRandomValues(j);else if(typeof msCrypto<"u")msCrypto.getRandomValues(j);else Gw(j,F);return j}return Gw(Array(F),F)}function $(){var F=Y(S);F[6]=F[6]&79|64,F[8]=F[8]&191|128;var j="";for(var Z=0;Z<S;++Z){var z=F[Z];if(Z===4||Z===6||Z===8)j+="-";if(z<16)j+="0";j+=z.toString(16).toLowerCase()}return j}}function pw(S){return S.__=void 0,delete S.__,S}})})(w||(w={}))}),U2=p((w,K)=>{K.exports=TypeError}),t5=p((w,K)=>{K.exports=n5("util").inspect}),OK=p((w,K)=>{var W=typeof Map==="function"&&Map.prototype,J=Object.getOwnPropertyDescriptor&&W?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,P=W&&J&&typeof J.get==="function"?J.get:null,I=W&&Map.prototype.forEach,b=typeof Set==="function"&&Set.prototype,G=Object.getOwnPropertyDescriptor&&b?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,M=b&&G&&typeof G.get==="function"?G.get:null,O=b&&Set.prototype.forEach,D=typeof WeakMap==="function"&&WeakMap.prototype,Q=D?WeakMap.prototype.has:null,N=typeof WeakSet==="function"&&WeakSet.prototype,L=N?WeakSet.prototype.has:null,k=typeof WeakRef==="function"&&WeakRef.prototype,B=k?WeakRef.prototype.deref:null,v=Boolean.prototype.valueOf,A=Object.prototype.toString,c=Function.prototype.toString,x=String.prototype.match,R=String.prototype.slice,C=String.prototype.replace,o=String.prototype.toUpperCase,_=String.prototype.toLowerCase,E=RegExp.prototype.test,X=Array.prototype.concat,U=Array.prototype.join,q=Array.prototype.slice,u=Math.floor,T=typeof BigInt==="function"?BigInt.prototype.valueOf:null,Ww=Object.getOwnPropertySymbols,ww=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?Symbol.prototype.toString:null,a=typeof Symbol==="function"&&typeof Symbol.iterator==="object",d=typeof Symbol==="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===a?"object":"symbol")?Symbol.toStringTag:null,Kw=Object.prototype.propertyIsEnumerable,m=(typeof Reflect==="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Y){return Y.__proto__}:null);function l(Y,$){if(Y===1/0||Y===-1/0||Y!==Y||Y&&Y>-1000&&Y<1000||E.call(/e/,$))return $;var F=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof Y==="number"){var j=Y<0?-u(-Y):u(Y);if(j!==Y){var Z=String(j),z=R.call($,Z.length+1);return C.call(Z,F,"$&_")+"."+C.call(C.call(z,/([0-9]{3})/g,"$&_"),/_$/,"")}}return C.call($,F,"$&_")}var Vw=t5(),kw=Vw.custom,y=Lw(kw)?kw:null,qw={__proto__:null,double:'"',single:"'"},rw={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};K.exports=function Y($,F,j,Z){var z=F||{};if(Ew(z,"quoteStyle")&&!Ew(qw,z.quoteStyle))throw TypeError('option "quoteStyle" must be "single" or "double"');if(Ew(z,"maxStringLength")&&(typeof z.maxStringLength==="number"?z.maxStringLength<0&&z.maxStringLength!==1/0:z.maxStringLength!==null))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var f=Ew(z,"customInspect")?z.customInspect:!0;if(typeof f!=="boolean"&&f!=="symbol")throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ew(z,"indent")&&z.indent!==null&&z.indent!=="\t"&&!(parseInt(z.indent,10)===z.indent&&z.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Ew(z,"numericSeparator")&&typeof z.numericSeparator!=="boolean")throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=z.numericSeparator;if(typeof $>"u")return"undefined";if($===null)return"null";if(typeof $==="boolean")return $?"true":"false";if(typeof $==="string")return wK($,z);if(typeof $==="number"){if($===0)return 1/0/$>0?"0":"-0";var t=String($);return s?l($,t):t}if(typeof $==="bigint"){var Nw=String($)+"n";return s?l($,Nw):Nw}var S2=typeof z.depth>"u"?5:z.depth;if(typeof j>"u")j=0;if(j>=S2&&S2>0&&typeof $==="object")return ow($)?"[Array]":"[Object]";var aw=g(z,j);if(typeof Z>"u")Z=[];else if(Hw(Z,$)>=0)return"[Circular]";function vw(X2,WK,r5){if(WK)Z=q.call(Z),Z.push(WK);if(r5){var I4={depth:z.depth};if(Ew(z,"quoteStyle"))I4.quoteStyle=z.quoteStyle;return Y(X2,I4,j+1,Z)}return Y(X2,z,j+1,Z)}if(typeof $==="function"&&!i($)){var a1=yw($),s1=Gw($,vw);return"[Function"+(a1?": "+a1:" (anonymous)")+"]"+(s1.length>0?" { "+U.call(s1,", ")+" }":"")}if(Lw($)){var w4=a?C.call(String($),/^(Symbol\(.*\))_[^)]*$/,"$1"):ww.call($);return typeof $==="object"&&!a?pw(w4):w4}if(oK($)){var j2="<"+_.call(String($.nodeName)),_K=$.attributes||[];for(var KK=0;KK<_K.length;KK++)j2+=" "+_K[KK].name+"="+Jw(xw(_K[KK].value),"double",z);if(j2+=">",$.childNodes&&$.childNodes.length)j2+="...";return j2+="</"+_.call(String($.nodeName))+">",j2}if(ow($)){if($.length===0)return"[]";var rK=Gw($,vw);if(aw&&!H(rK))return"["+r(rK,aw)+"]";return"[ "+U.call(rK,", ")+" ]"}if(Pw($)){var uK=Gw($,vw);if(!("cause"in Error.prototype)&&"cause"in $&&!Kw.call($,"cause"))return"{ ["+String($)+"] "+U.call(X.call("[cause]: "+vw($.cause),uK),", ")+" }";if(uK.length===0)return"["+String($)+"]";return"{ ["+String($)+"] "+U.call(uK,", ")+" }"}if(typeof $==="object"&&f){if(y&&typeof $[y]==="function"&&Vw)return Vw($,{depth:S2-j});else if(f!=="symbol"&&typeof $.inspect==="function")return $.inspect()}if(dw($)){var K4=[];if(I)I.call($,function(X2,WK){K4.push(vw(WK,$,!0)+" => "+vw(X2,$))});return V("Map",P.call($),K4,aw)}if(xK($)){var W4=[];if(O)O.call($,function(X2){W4.push(vw(X2,$))});return V("Set",M.call($),W4,aw)}if(nw($))return S("WeakMap");if(b2($))return S("WeakSet");if(tw($))return S("WeakRef");if(Mw($))return pw(vw(Number($)));if(Bw($))return pw(vw(T.call($)));if(Qw($))return pw(v.call($));if(n($))return pw(vw(String($)));if(typeof window<"u"&&$===window)return"{ [object Window] }";if(typeof globalThis<"u"&&$===globalThis||typeof global<"u"&&$===global)return"{ [object globalThis] }";if(!uw($)&&!i($)){var yK=Gw($,vw),J4=m?m($)===Object.prototype:$ instanceof Object||$.constructor===Object,mK=$ instanceof Object?"":"null prototype",P4=!J4&&d&&Object($)===$&&d in $?R.call(Uw($),8,-1):mK?"Object":"",_5=J4||typeof $.constructor!=="function"?"":$.constructor.name?$.constructor.name+" ":"",TK=_5+(P4||mK?"["+U.call(X.call([],P4||[],mK||[]),": ")+"] ":"");if(yK.length===0)return TK+"{}";if(aw)return TK+"{"+r(yK,aw)+"}";return TK+"{ "+U.call(yK,", ")+" }"}return String($)};function Jw(Y,$,F){var j=F.quoteStyle||$,Z=qw[j];return Z+Y+Z}function xw(Y){return C.call(String(Y),/"/g,"&quot;")}function zw(Y){return!d||!(typeof Y==="object"&&((d in Y)||typeof Y[d]<"u"))}function ow(Y){return Uw(Y)==="[object Array]"&&zw(Y)}function uw(Y){return Uw(Y)==="[object Date]"&&zw(Y)}function i(Y){return Uw(Y)==="[object RegExp]"&&zw(Y)}function Pw(Y){return Uw(Y)==="[object Error]"&&zw(Y)}function n(Y){return Uw(Y)==="[object String]"&&zw(Y)}function Mw(Y){return Uw(Y)==="[object Number]"&&zw(Y)}function Qw(Y){return Uw(Y)==="[object Boolean]"&&zw(Y)}function Lw(Y){if(a)return Y&&typeof Y==="object"&&Y instanceof Symbol;if(typeof Y==="symbol")return!0;if(!Y||typeof Y!=="object"||!ww)return!1;try{return ww.call(Y),!0}catch($){}return!1}function Bw(Y){if(!Y||typeof Y!=="object"||!T)return!1;try{return T.call(Y),!0}catch($){}return!1}var lw=Object.prototype.hasOwnProperty||function(Y){return Y in this};function Ew(Y,$){return lw.call(Y,$)}function Uw(Y){return A.call(Y)}function yw(Y){if(Y.name)return Y.name;var $=x.call(c.call(Y),/^function\s*([\w$]+)/);if($)return $[1];return null}function Hw(Y,$){if(Y.indexOf)return Y.indexOf($);for(var F=0,j=Y.length;F<j;F++)if(Y[F]===$)return F;return-1}function dw(Y){if(!P||!Y||typeof Y!=="object")return!1;try{P.call(Y);try{M.call(Y)}catch($){return!0}return Y instanceof Map}catch($){}return!1}function nw(Y){if(!Q||!Y||typeof Y!=="object")return!1;try{Q.call(Y,Q);try{L.call(Y,L)}catch($){return!0}return Y instanceof WeakMap}catch($){}return!1}function tw(Y){if(!B||!Y||typeof Y!=="object")return!1;try{return B.call(Y),!0}catch($){}return!1}function xK(Y){if(!M||!Y||typeof Y!=="object")return!1;try{M.call(Y);try{P.call(Y)}catch($){return!0}return Y instanceof Set}catch($){}return!1}function b2(Y){if(!L||!Y||typeof Y!=="object")return!1;try{L.call(Y,L);try{Q.call(Y,Q)}catch($){return!0}return Y instanceof WeakSet}catch($){}return!1}function oK(Y){if(!Y||typeof Y!=="object")return!1;if(typeof HTMLElement<"u"&&Y instanceof HTMLElement)return!0;return typeof Y.nodeName==="string"&&typeof Y.getAttribute==="function"}function wK(Y,$){if(Y.length>$.maxStringLength){var F=Y.length-$.maxStringLength,j="... "+F+" more character"+(F>1?"s":"");return wK(R.call(Y,0,$.maxStringLength),$)+j}var Z=rw[$.quoteStyle||"single"];Z.lastIndex=0;var z=C.call(C.call(Y,Z,"\\$1"),/[\x00-\x1f]/g,cK);return Jw(z,"single",$)}function cK(Y){var $=Y.charCodeAt(0),F={8:"b",9:"t",10:"n",12:"f",13:"r"}[$];if(F)return"\\"+F;return"\\x"+($<16?"0":"")+o.call($.toString(16))}function pw(Y){return"Object("+Y+")"}function S(Y){return Y+" { ? }"}function V(Y,$,F,j){var Z=j?r(F,j):U.call(F,", ");return Y+" ("+$+") {"+Z+"}"}function H(Y){for(var $=0;$<Y.length;$++)if(Hw(Y[$],`
`)>=0)return!1;return!0}function g(Y,$){var F;if(Y.indent==="\t")F="\t";else if(typeof Y.indent==="number"&&Y.indent>0)F=U.call(Array(Y.indent+1)," ");else return null;return{base:F,prev:U.call(Array($+1),F)}}function r(Y,$){if(Y.length===0)return"";var F=`
`+$.prev+$.base;return F+U.call(Y,","+F)+`
`+$.prev}function Gw(Y,$){var F=ow(Y),j=[];if(F){j.length=Y.length;for(var Z=0;Z<Y.length;Z++)j[Z]=Ew(Y,Z)?$(Y[Z],Y):""}var z=typeof Ww==="function"?Ww(Y):[],f;if(a){f={};for(var s=0;s<z.length;s++)f["$"+z[s]]=z[s]}for(var t in Y){if(!Ew(Y,t))continue;if(F&&String(Number(t))===t&&t<Y.length)continue;if(a&&f["$"+t]instanceof Symbol)continue;else if(E.call(/[^\w$]/,t))j.push($(t,Y)+": "+$(Y[t],Y));else j.push(t+": "+$(Y[t],Y))}if(typeof Ww==="function"){for(var Nw=0;Nw<z.length;Nw++)if(Kw.call(Y,z[Nw]))j.push("["+$(z[Nw])+"]: "+$(Y[z[Nw]],Y))}return j}}),a5=p((w,K)=>{var W=OK(),J=U2(),P=function(O,D,Q){var N=O,L;for(;(L=N.next)!=null;N=L)if(L.key===D){if(N.next=L.next,!Q)L.next=O.next,O.next=L;return L}},I=function(O,D){if(!O)return;var Q=P(O,D);return Q&&Q.value},b=function(O,D,Q){var N=P(O,D);if(N)N.value=Q;else O.next={key:D,next:O.next,value:Q}},G=function(O,D){if(!O)return!1;return!!P(O,D)},M=function(O,D){if(O)return P(O,D,!0)};K.exports=function(){var O,D={assert:function(Q){if(!D.has(Q))throw new J("Side channel does not contain "+W(Q))},delete:function(Q){var N=O&&O.next,L=M(O,Q);if(L&&N&&N===L)O=void 0;return!!L},get:function(Q){return I(O,Q)},has:function(Q){return G(O,Q)},set:function(Q,N){if(!O)O={next:void 0};b(O,Q,N)}};return D}}),O4=p((w,K)=>{K.exports=Object}),s5=p((w,K)=>{K.exports=Error}),w0=p((w,K)=>{K.exports=EvalError}),K0=p((w,K)=>{K.exports=RangeError}),W0=p((w,K)=>{K.exports=ReferenceError}),J0=p((w,K)=>{K.exports=SyntaxError}),P0=p((w,K)=>{K.exports=URIError}),I0=p((w,K)=>{K.exports=Math.abs}),b0=p((w,K)=>{K.exports=Math.floor}),G0=p((w,K)=>{K.exports=Math.max}),A0=p((w,K)=>{K.exports=Math.min}),M0=p((w,K)=>{K.exports=Math.pow}),O0=p((w,K)=>{K.exports=Math.round}),B0=p((w,K)=>{K.exports=Number.isNaN||function(W){return W!==W}}),N0=p((w,K)=>{var W=B0();K.exports=function(J){if(W(J)||J===0)return J;return J<0?-1:1}}),D0=p((w,K)=>{K.exports=Object.getOwnPropertyDescriptor}),B4=p((w,K)=>{var W=D0();if(W)try{W([],"length")}catch(J){W=null}K.exports=W}),Q0=p((w,K)=>{var W=Object.defineProperty||!1;if(W)try{W({},"a",{value:1})}catch(J){W=!1}K.exports=W}),$0=p((w,K)=>{K.exports=function(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function")return!1;if(typeof Symbol.iterator==="symbol")return!0;var W={},J=Symbol("test"),P=Object(J);if(typeof J==="string")return!1;if(Object.prototype.toString.call(J)!=="[object Symbol]")return!1;if(Object.prototype.toString.call(P)!=="[object Symbol]")return!1;var I=42;W[J]=I;for(var b in W)return!1;if(typeof Object.keys==="function"&&Object.keys(W).length!==0)return!1;if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(W).length!==0)return!1;var G=Object.getOwnPropertySymbols(W);if(G.length!==1||G[0]!==J)return!1;if(!Object.prototype.propertyIsEnumerable.call(W,J))return!1;if(typeof Object.getOwnPropertyDescriptor==="function"){var M=Object.getOwnPropertyDescriptor(W,J);if(M.value!==I||M.enumerable!==!0)return!1}return!0}}),Y0=p((w,K)=>{var W=typeof Symbol<"u"&&Symbol,J=$0();K.exports=function(){if(typeof W!=="function")return!1;if(typeof Symbol!=="function")return!1;if(typeof W("foo")!=="symbol")return!1;if(typeof Symbol("bar")!=="symbol")return!1;return J()}}),N4=p((w,K)=>{K.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null}),D4=p((w,K)=>{var W=O4();K.exports=W.getPrototypeOf||null}),S0=p((w,K)=>{var W="Function.prototype.bind called on incompatible ",J=Object.prototype.toString,P=Math.max,I="[object Function]",b=function(O,D){var Q=[];for(var N=0;N<O.length;N+=1)Q[N]=O[N];for(var L=0;L<D.length;L+=1)Q[L+O.length]=D[L];return Q},G=function(O,D){var Q=[];for(var N=D||0,L=0;N<O.length;N+=1,L+=1)Q[L]=O[N];return Q},M=function(O,D){var Q="";for(var N=0;N<O.length;N+=1)if(Q+=O[N],N+1<O.length)Q+=D;return Q};K.exports=function(O){var D=this;if(typeof D!=="function"||J.apply(D)!==I)throw TypeError(W+D);var Q=G(arguments,1),N,L=function(){if(this instanceof N){var c=D.apply(this,b(Q,arguments));if(Object(c)===c)return c;return this}return D.apply(O,b(Q,arguments))},k=P(0,D.length-Q.length),B=[];for(var v=0;v<k;v++)B[v]="$"+v;if(N=Function("binder","return function ("+M(B,",")+"){ return binder.apply(this,arguments); }")(L),D.prototype){var A=function(){};A.prototype=D.prototype,N.prototype=new A,A.prototype=null}return N}}),BK=p((w,K)=>{var W=S0();K.exports=Function.prototype.bind||W}),tK=p((w,K)=>{K.exports=Function.prototype.call}),Q4=p((w,K)=>{K.exports=Function.prototype.apply}),X0=p((w,K)=>{K.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply}),V0=p((w,K)=>{var W=BK(),J=Q4(),P=tK(),I=X0();K.exports=I||W.call(P,J)}),$4=p((w,K)=>{var W=BK(),J=U2(),P=tK(),I=V0();K.exports=function(b){if(b.length<1||typeof b[0]!=="function")throw new J("a function is required");return I(W,P,b)}}),L0=p((w,K)=>{var W=$4(),J=B4(),P;try{P=[].__proto__===Array.prototype}catch(M){if(!M||typeof M!=="object"||!("code"in M)||M.code!=="ERR_PROTO_ACCESS")throw M}var I=!!P&&J&&J(Object.prototype,"__proto__"),b=Object,G=b.getPrototypeOf;K.exports=I&&typeof I.get==="function"?W([I.get]):typeof G==="function"?function(M){return G(M==null?M:b(M))}:!1}),E0=p((w,K)=>{var W=N4(),J=D4(),P=L0();K.exports=W?function(I){return W(I)}:J?function(I){if(!I||typeof I!=="object"&&typeof I!=="function")throw TypeError("getProto: not an object");return J(I)}:P?function(I){return P(I)}:null}),U0=p((w,K)=>{var W=Function.prototype.call,J=Object.prototype.hasOwnProperty,P=BK();K.exports=P.call(W,J)}),aK=p((w,K)=>{var W,J=O4(),P=s5(),I=w0(),b=K0(),G=W0(),M=J0(),O=U2(),D=P0(),Q=I0(),N=b0(),L=G0(),k=A0(),B=M0(),v=O0(),A=N0(),c=Function,x=function(i){try{return c('"use strict"; return ('+i+").constructor;")()}catch(Pw){}},R=B4(),C=Q0(),o=function(){throw new O},_=R?function(){try{return arguments.callee,o}catch(i){try{return R(arguments,"callee").get}catch(Pw){return o}}}():o,E=Y0()(),X=E0(),U=D4(),q=N4(),u=Q4(),T=tK(),Ww={},ww=typeof Uint8Array>"u"||!X?W:X(Uint8Array),a={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?W:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?W:ArrayBuffer,"%ArrayIteratorPrototype%":E&&X?X([][Symbol.iterator]()):W,"%AsyncFromSyncIteratorPrototype%":W,"%AsyncFunction%":Ww,"%AsyncGenerator%":Ww,"%AsyncGeneratorFunction%":Ww,"%AsyncIteratorPrototype%":Ww,"%Atomics%":typeof Atomics>"u"?W:Atomics,"%BigInt%":typeof BigInt>"u"?W:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?W:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?W:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?W:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":P,"%eval%":eval,"%EvalError%":I,"%Float16Array%":typeof Float16Array>"u"?W:Float16Array,"%Float32Array%":typeof Float32Array>"u"?W:Float32Array,"%Float64Array%":typeof Float64Array>"u"?W:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?W:FinalizationRegistry,"%Function%":c,"%GeneratorFunction%":Ww,"%Int8Array%":typeof Int8Array>"u"?W:Int8Array,"%Int16Array%":typeof Int16Array>"u"?W:Int16Array,"%Int32Array%":typeof Int32Array>"u"?W:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":E&&X?X(X([][Symbol.iterator]())):W,"%JSON%":typeof JSON==="object"?JSON:W,"%Map%":typeof Map>"u"?W:Map,"%MapIteratorPrototype%":typeof Map>"u"||!E||!X?W:X(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":J,"%Object.getOwnPropertyDescriptor%":R,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?W:Promise,"%Proxy%":typeof Proxy>"u"?W:Proxy,"%RangeError%":b,"%ReferenceError%":G,"%Reflect%":typeof Reflect>"u"?W:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?W:Set,"%SetIteratorPrototype%":typeof Set>"u"||!E||!X?W:X(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?W:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":E&&X?X(""[Symbol.iterator]()):W,"%Symbol%":E?Symbol:W,"%SyntaxError%":M,"%ThrowTypeError%":_,"%TypedArray%":ww,"%TypeError%":O,"%Uint8Array%":typeof Uint8Array>"u"?W:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?W:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?W:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?W:Uint32Array,"%URIError%":D,"%WeakMap%":typeof WeakMap>"u"?W:WeakMap,"%WeakRef%":typeof WeakRef>"u"?W:WeakRef,"%WeakSet%":typeof WeakSet>"u"?W:WeakSet,"%Function.prototype.call%":T,"%Function.prototype.apply%":u,"%Object.defineProperty%":C,"%Object.getPrototypeOf%":U,"%Math.abs%":Q,"%Math.floor%":N,"%Math.max%":L,"%Math.min%":k,"%Math.pow%":B,"%Math.round%":v,"%Math.sign%":A,"%Reflect.getPrototypeOf%":q};if(X)try{null.error}catch(i){d=X(X(i)),a["%Error.prototype%"]=d}var d,Kw=function i(Pw){var n;if(Pw==="%AsyncFunction%")n=x("async function () {}");else if(Pw==="%GeneratorFunction%")n=x("function* () {}");else if(Pw==="%AsyncGeneratorFunction%")n=x("async function* () {}");else if(Pw==="%AsyncGenerator%"){var Mw=i("%AsyncGeneratorFunction%");if(Mw)n=Mw.prototype}else if(Pw==="%AsyncIteratorPrototype%"){var Qw=i("%AsyncGenerator%");if(Qw&&X)n=X(Qw.prototype)}return a[Pw]=n,n},m={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},l=BK(),Vw=U0(),kw=l.call(T,Array.prototype.concat),y=l.call(u,Array.prototype.splice),qw=l.call(T,String.prototype.replace),rw=l.call(T,String.prototype.slice),Jw=l.call(T,RegExp.prototype.exec),xw=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,zw=/\\(\\)?/g,ow=function(i){var Pw=rw(i,0,1),n=rw(i,-1);if(Pw==="%"&&n!=="%")throw new M("invalid intrinsic syntax, expected closing `%`");else if(n==="%"&&Pw!=="%")throw new M("invalid intrinsic syntax, expected opening `%`");var Mw=[];return qw(i,xw,function(Qw,Lw,Bw,lw){Mw[Mw.length]=Bw?qw(lw,zw,"$1"):Lw||Qw}),Mw},uw=function(i,Pw){var n=i,Mw;if(Vw(m,n))Mw=m[n],n="%"+Mw[0]+"%";if(Vw(a,n)){var Qw=a[n];if(Qw===Ww)Qw=Kw(n);if(typeof Qw>"u"&&!Pw)throw new O("intrinsic "+i+" exists, but is not available. Please file an issue!");return{alias:Mw,name:n,value:Qw}}throw new M("intrinsic "+i+" does not exist!")};K.exports=function(i,Pw){if(typeof i!=="string"||i.length===0)throw new O("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Pw!=="boolean")throw new O('"allowMissing" argument must be a boolean');if(Jw(/^%?[^%]*%?$/,i)===null)throw new M("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=ow(i),Mw=n.length>0?n[0]:"",Qw=uw("%"+Mw+"%",Pw),Lw=Qw.name,Bw=Qw.value,lw=!1,Ew=Qw.alias;if(Ew)Mw=Ew[0],y(n,kw([0,1],Ew));for(var Uw=1,yw=!0;Uw<n.length;Uw+=1){var Hw=n[Uw],dw=rw(Hw,0,1),nw=rw(Hw,-1);if((dw==='"'||dw==="'"||dw==="`"||(nw==='"'||nw==="'"||nw==="`"))&&dw!==nw)throw new M("property names with quotes must have matching quotes");if(Hw==="constructor"||!yw)lw=!0;if(Mw+="."+Hw,Lw="%"+Mw+"%",Vw(a,Lw))Bw=a[Lw];else if(Bw!=null){if(!(Hw in Bw)){if(!Pw)throw new O("base intrinsic for "+i+" exists, but the property is not available.");return}if(R&&Uw+1>=n.length){var tw=R(Bw,Hw);if(yw=!!tw,yw&&"get"in tw&&!("originalValue"in tw.get))Bw=tw.get;else Bw=Bw[Hw]}else yw=Vw(Bw,Hw),Bw=Bw[Hw];if(yw&&!lw)a[Lw]=Bw}}return Bw}}),Y4=p((w,K)=>{var W=aK(),J=$4(),P=J([W("%String.prototype.indexOf%")]);K.exports=function(I,b){var G=W(I,!!b);if(typeof G==="function"&&P(I,".prototype.")>-1)return J([G]);return G}}),S4=p((w,K)=>{var W=aK(),J=Y4(),P=OK(),I=U2(),b=W("%Map%",!0),G=J("Map.prototype.get",!0),M=J("Map.prototype.set",!0),O=J("Map.prototype.has",!0),D=J("Map.prototype.delete",!0),Q=J("Map.prototype.size",!0);K.exports=!!b&&function(){var N,L={assert:function(k){if(!L.has(k))throw new I("Side channel does not contain "+P(k))},delete:function(k){if(N){var B=D(N,k);if(Q(N)===0)N=void 0;return B}return!1},get:function(k){if(N)return G(N,k)},has:function(k){if(N)return O(N,k);return!1},set:function(k,B){if(!N)N=new b;M(N,k,B)}};return L}}),H0=p((w,K)=>{var W=aK(),J=Y4(),P=OK(),I=S4(),b=U2(),G=W("%WeakMap%",!0),M=J("WeakMap.prototype.get",!0),O=J("WeakMap.prototype.set",!0),D=J("WeakMap.prototype.has",!0),Q=J("WeakMap.prototype.delete",!0);K.exports=G?function(){var N,L,k={assert:function(B){if(!k.has(B))throw new b("Side channel does not contain "+P(B))},delete:function(B){if(G&&B&&(typeof B==="object"||typeof B==="function")){if(N)return Q(N,B)}else if(I){if(L)return L.delete(B)}return!1},get:function(B){if(G&&B&&(typeof B==="object"||typeof B==="function")){if(N)return M(N,B)}return L&&L.get(B)},has:function(B){if(G&&B&&(typeof B==="object"||typeof B==="function")){if(N)return D(N,B)}return!!L&&L.has(B)},set:function(B,v){if(G&&B&&(typeof B==="object"||typeof B==="function")){if(!N)N=new G;O(N,B,v)}else if(I){if(!L)L=I();L.set(B,v)}}};return k}:I}),X4=p((w,K)=>{var W=U2(),J=OK(),P=a5(),I=S4(),b=H0(),G=b||I||P;K.exports=function(){var M,O={assert:function(D){if(!O.has(D))throw new W("Side channel does not contain "+J(D))},delete:function(D){return!!M&&M.delete(D)},get:function(D){return M&&M.get(D)},has:function(D){return!!M&&M.has(D)},set:function(D,Q){if(!M)M=G();M.set(D,Q)}};return O}}),sK=p((w,K)=>{var W=String.prototype.replace,J=/%20/g,P={RFC1738:"RFC1738",RFC3986:"RFC3986"};K.exports={default:P.RFC3986,formatters:{RFC1738:function(I){return W.call(I,J,"+")},RFC3986:function(I){return String(I)}},RFC1738:P.RFC1738,RFC3986:P.RFC3986}}),V4=p((w,K)=>{var W=sK(),J=X4(),P=Object.prototype.hasOwnProperty,I=Array.isArray,b=J(),G=function(E,X){return b.set(E,X),E},M=function(E){return b.has(E)},O=function(E){return b.get(E)},D=function(E,X){b.set(E,X)},Q=function(){var E=[];for(var X=0;X<256;++X)E.push("%"+((X<16?"0":"")+X.toString(16)).toUpperCase());return E}(),N=function(E){while(E.length>1){var X=E.pop(),U=X.obj[X.prop];if(I(U)){var q=[];for(var u=0;u<U.length;++u)if(typeof U[u]<"u")q.push(U[u]);X.obj[X.prop]=q}}},L=function(E,X){var U=X&&X.plainObjects?{__proto__:null}:{};for(var q=0;q<E.length;++q)if(typeof E[q]<"u")U[q]=E[q];return U},k=function E(X,U,q){if(!U)return X;if(typeof U!=="object"&&typeof U!=="function"){if(I(X))X.push(U);else if(X&&typeof X==="object"){if(M(X)){var u=O(X)+1;X[u]=U,D(X,u)}else if(q&&(q.plainObjects||q.allowPrototypes)||!P.call(Object.prototype,U))X[U]=!0}else return[X,U];return X}if(!X||typeof X!=="object"){if(M(U)){var T=Object.keys(U),Ww=q&&q.plainObjects?{__proto__:null,0:X}:{0:X};for(var ww=0;ww<T.length;ww++){var a=parseInt(T[ww],10);Ww[a+1]=U[T[ww]]}return G(Ww,O(U)+1)}return[X].concat(U)}var d=X;if(I(X)&&!I(U))d=L(X,q);if(I(X)&&I(U))return U.forEach(function(Kw,m){if(P.call(X,m)){var l=X[m];if(l&&typeof l==="object"&&Kw&&typeof Kw==="object")X[m]=E(l,Kw,q);else X.push(Kw)}else X[m]=Kw}),X;return Object.keys(U).reduce(function(Kw,m){var l=U[m];if(P.call(Kw,m))Kw[m]=E(Kw[m],l,q);else Kw[m]=l;return Kw},d)},B=function(E,X){return Object.keys(X).reduce(function(U,q){return U[q]=X[q],U},E)},v=function(E,X,U){var q=E.replace(/\+/g," ");if(U==="iso-8859-1")return q.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(q)}catch(u){return q}},A=1024,c=function(E,X,U,q,u){if(E.length===0)return E;var T=E;if(typeof E==="symbol")T=Symbol.prototype.toString.call(E);else if(typeof E!=="string")T=String(E);if(U==="iso-8859-1")return escape(T).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});var Ww="";for(var ww=0;ww<T.length;ww+=A){var a=T.length>=A?T.slice(ww,ww+A):T,d=[];for(var Kw=0;Kw<a.length;++Kw){var m=a.charCodeAt(Kw);if(m===45||m===46||m===95||m===126||m>=48&&m<=57||m>=65&&m<=90||m>=97&&m<=122||u===W.RFC1738&&(m===40||m===41)){d[d.length]=a.charAt(Kw);continue}if(m<128){d[d.length]=Q[m];continue}if(m<2048){d[d.length]=Q[192|m>>6]+Q[128|m&63];continue}if(m<55296||m>=57344){d[d.length]=Q[224|m>>12]+Q[128|m>>6&63]+Q[128|m&63];continue}Kw+=1,m=65536+((m&1023)<<10|a.charCodeAt(Kw)&1023),d[d.length]=Q[240|m>>18]+Q[128|m>>12&63]+Q[128|m>>6&63]+Q[128|m&63]}Ww+=d.join("")}return Ww},x=function(E){var X=[{obj:{o:E},prop:"o"}],U=[];for(var q=0;q<X.length;++q){var u=X[q],T=u.obj[u.prop],Ww=Object.keys(T);for(var ww=0;ww<Ww.length;++ww){var a=Ww[ww],d=T[a];if(typeof d==="object"&&d!==null&&U.indexOf(d)===-1)X.push({obj:T,prop:a}),U.push(d)}}return N(X),E},R=function(E){return Object.prototype.toString.call(E)==="[object RegExp]"},C=function(E){if(!E||typeof E!=="object")return!1;return!!(E.constructor&&E.constructor.isBuffer&&E.constructor.isBuffer(E))},o=function(E,X,U,q){if(M(E)){var u=O(E)+1;return E[u]=X,D(E,u),E}var T=[].concat(E,X);if(T.length>U)return G(L(T,{plainObjects:q}),T.length-1);return T},_=function(E,X){if(I(E)){var U=[];for(var q=0;q<E.length;q+=1)U.push(X(E[q]));return U}return X(E)};K.exports={arrayToObject:L,assign:B,combine:o,compact:x,decode:v,encode:c,isBuffer:C,isOverflow:M,isRegExp:R,maybeMap:_,merge:k}}),q0=p((w,K)=>{var W=X4(),J=V4(),P=sK(),I=Object.prototype.hasOwnProperty,b={brackets:function(A){return A+"[]"},comma:"comma",indices:function(A,c){return A+"["+c+"]"},repeat:function(A){return A}},G=Array.isArray,M=Array.prototype.push,O=function(A,c){M.apply(A,G(c)?c:[c])},D=Date.prototype.toISOString,Q=P.default,N={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:J.encode,encodeValuesOnly:!1,filter:void 0,format:Q,formatter:P.formatters[Q],indices:!1,serializeDate:function(A){return D.call(A)},skipNulls:!1,strictNullHandling:!1},L=function(A){return typeof A==="string"||typeof A==="number"||typeof A==="boolean"||typeof A==="symbol"||typeof A==="bigint"},k={},B=function A(c,x,R,C,o,_,E,X,U,q,u,T,Ww,ww,a,d,Kw,m){var l=c,Vw=m,kw=0,y=!1;while((Vw=Vw.get(k))!==void 0&&!y){var qw=Vw.get(c);if(kw+=1,typeof qw<"u")if(qw===kw)throw RangeError("Cyclic object value");else y=!0;if(typeof Vw.get(k)>"u")kw=0}if(typeof q==="function")l=q(x,l);else if(l instanceof Date)l=Ww(l);else if(R==="comma"&&G(l))l=J.maybeMap(l,function(Bw){if(Bw instanceof Date)return Ww(Bw);return Bw});if(l===null){if(_)return U&&!d?U(x,N.encoder,Kw,"key",ww):x;l=""}if(L(l)||J.isBuffer(l)){if(U){var rw=d?x:U(x,N.encoder,Kw,"key",ww);return[a(rw)+"="+a(U(l,N.encoder,Kw,"value",ww))]}return[a(x)+"="+a(String(l))]}var Jw=[];if(typeof l>"u")return Jw;var xw;if(R==="comma"&&G(l)){if(d&&U)l=J.maybeMap(l,U);xw=[{value:l.length>0?l.join(",")||null:void 0}]}else if(G(q))xw=q;else{var zw=Object.keys(l);xw=u?zw.sort(u):zw}var ow=X?String(x).replace(/\./g,"%2E"):String(x),uw=C&&G(l)&&l.length===1?ow+"[]":ow;if(o&&G(l)&&l.length===0)return uw+"[]";for(var i=0;i<xw.length;++i){var Pw=xw[i],n=typeof Pw==="object"&&Pw&&typeof Pw.value<"u"?Pw.value:l[Pw];if(E&&n===null)continue;var Mw=T&&X?String(Pw).replace(/\./g,"%2E"):String(Pw),Qw=G(l)?typeof R==="function"?R(uw,Mw):uw:uw+(T?"."+Mw:"["+Mw+"]");m.set(c,kw);var Lw=W();Lw.set(k,m),O(Jw,A(n,Qw,R,C,o,_,E,X,R==="comma"&&d&&G(l)?null:U,q,u,T,Ww,ww,a,d,Kw,Lw))}return Jw},v=function(A){if(!A)return N;if(typeof A.allowEmptyArrays<"u"&&typeof A.allowEmptyArrays!=="boolean")throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof A.encodeDotInKeys<"u"&&typeof A.encodeDotInKeys!=="boolean")throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(A.encoder!==null&&typeof A.encoder<"u"&&typeof A.encoder!=="function")throw TypeError("Encoder has to be a function.");var c=A.charset||N.charset;if(typeof A.charset<"u"&&A.charset!=="utf-8"&&A.charset!=="iso-8859-1")throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var x=P.default;if(typeof A.format<"u"){if(!I.call(P.formatters,A.format))throw TypeError("Unknown format option provided.");x=A.format}var R=P.formatters[x],C=N.filter;if(typeof A.filter==="function"||G(A.filter))C=A.filter;var o;if(A.arrayFormat in b)o=A.arrayFormat;else if("indices"in A)o=A.indices?"indices":"repeat";else o=N.arrayFormat;if("commaRoundTrip"in A&&typeof A.commaRoundTrip!=="boolean")throw TypeError("`commaRoundTrip` must be a boolean, or absent");var _=typeof A.allowDots>"u"?A.encodeDotInKeys===!0?!0:N.allowDots:!!A.allowDots;return{addQueryPrefix:typeof A.addQueryPrefix==="boolean"?A.addQueryPrefix:N.addQueryPrefix,allowDots:_,allowEmptyArrays:typeof A.allowEmptyArrays==="boolean"?!!A.allowEmptyArrays:N.allowEmptyArrays,arrayFormat:o,charset:c,charsetSentinel:typeof A.charsetSentinel==="boolean"?A.charsetSentinel:N.charsetSentinel,commaRoundTrip:!!A.commaRoundTrip,delimiter:typeof A.delimiter>"u"?N.delimiter:A.delimiter,encode:typeof A.encode==="boolean"?A.encode:N.encode,encodeDotInKeys:typeof A.encodeDotInKeys==="boolean"?A.encodeDotInKeys:N.encodeDotInKeys,encoder:typeof A.encoder==="function"?A.encoder:N.encoder,encodeValuesOnly:typeof A.encodeValuesOnly==="boolean"?A.encodeValuesOnly:N.encodeValuesOnly,filter:C,format:x,formatter:R,serializeDate:typeof A.serializeDate==="function"?A.serializeDate:N.serializeDate,skipNulls:typeof A.skipNulls==="boolean"?A.skipNulls:N.skipNulls,sort:typeof A.sort==="function"?A.sort:null,strictNullHandling:typeof A.strictNullHandling==="boolean"?A.strictNullHandling:N.strictNullHandling}};K.exports=function(A,c){var x=A,R=v(c),C,o;if(typeof R.filter==="function")o=R.filter,x=o("",x);else if(G(R.filter))o=R.filter,C=o;var _=[];if(typeof x!=="object"||x===null)return"";var E=b[R.arrayFormat],X=E==="comma"&&R.commaRoundTrip;if(!C)C=Object.keys(x);if(R.sort)C.sort(R.sort);var U=W();for(var q=0;q<C.length;++q){var u=C[q],T=x[u];if(R.skipNulls&&T===null)continue;O(_,B(T,u,E,X,R.allowEmptyArrays,R.strictNullHandling,R.skipNulls,R.encodeDotInKeys,R.encode?R.encoder:null,R.filter,R.sort,R.allowDots,R.serializeDate,R.format,R.formatter,R.encodeValuesOnly,R.charset,U))}var Ww=_.join(R.delimiter),ww=R.addQueryPrefix===!0?"?":"";if(R.charsetSentinel)if(R.charset==="iso-8859-1")ww+="utf8=%26%2310003%3B&";else ww+="utf8=%E2%9C%93&";return Ww.length>0?ww+Ww:""}}),h0=p((w,K)=>{var W=V4(),J=Object.prototype.hasOwnProperty,P=Array.isArray,I={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:W.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1000,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},b=function(B){return B.replace(/&#(\d+);/g,function(v,A){return String.fromCharCode(parseInt(A,10))})},G=function(B,v,A){if(B&&typeof B==="string"&&v.comma&&B.indexOf(",")>-1)return B.split(",");if(v.throwOnLimitExceeded&&A>=v.arrayLimit)throw RangeError("Array limit exceeded. Only "+v.arrayLimit+" element"+(v.arrayLimit===1?"":"s")+" allowed in an array.");return B},M="utf8=%26%2310003%3B",O="utf8=%E2%9C%93",D=function(B,v){var A={__proto__:null},c=v.ignoreQueryPrefix?B.replace(/^\?/,""):B;c=c.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var x=v.parameterLimit===1/0?void 0:v.parameterLimit,R=c.split(v.delimiter,v.throwOnLimitExceeded?x+1:x);if(v.throwOnLimitExceeded&&R.length>x)throw RangeError("Parameter limit exceeded. Only "+x+" parameter"+(x===1?"":"s")+" allowed.");var C=-1,o,_=v.charset;if(v.charsetSentinel){for(o=0;o<R.length;++o)if(R[o].indexOf("utf8=")===0){if(R[o]===O)_="utf-8";else if(R[o]===M)_="iso-8859-1";C=o,o=R.length}}for(o=0;o<R.length;++o){if(o===C)continue;var E=R[o],X=E.indexOf("]="),U=X===-1?E.indexOf("="):X+1,q,u;if(U===-1)q=v.decoder(E,I.decoder,_,"key"),u=v.strictNullHandling?null:"";else if(q=v.decoder(E.slice(0,U),I.decoder,_,"key"),q!==null)u=W.maybeMap(G(E.slice(U+1),v,P(A[q])?A[q].length:0),function(Ww){return v.decoder(Ww,I.decoder,_,"value")});if(u&&v.interpretNumericEntities&&_==="iso-8859-1")u=b(String(u));if(E.indexOf("[]=")>-1)u=P(u)?[u]:u;if(q!==null){var T=J.call(A,q);if(T&&v.duplicates==="combine")A[q]=W.combine(A[q],u,v.arrayLimit,v.plainObjects);else if(!T||v.duplicates==="last")A[q]=u}}return A},Q=function(B,v,A,c){var x=0;if(B.length>0&&B[B.length-1]==="[]"){var R=B.slice(0,-1).join("");x=Array.isArray(v)&&v[R]?v[R].length:0}var C=c?v:G(v,A,x);for(var o=B.length-1;o>=0;--o){var _,E=B[o];if(E==="[]"&&A.parseArrays)if(W.isOverflow(C))_=C;else _=A.allowEmptyArrays&&(C===""||A.strictNullHandling&&C===null)?[]:W.combine([],C,A.arrayLimit,A.plainObjects);else{_=A.plainObjects?{__proto__:null}:{};var X=E.charAt(0)==="["&&E.charAt(E.length-1)==="]"?E.slice(1,-1):E,U=A.decodeDotInKeys?X.replace(/%2E/g,"."):X,q=parseInt(U,10);if(!A.parseArrays&&U==="")_={0:C};else if(!isNaN(q)&&E!==U&&String(q)===U&&q>=0&&(A.parseArrays&&q<=A.arrayLimit))_=[],_[q]=C;else if(U!=="__proto__")_[U]=C}C=_}return C},N=function(B,v){var A=v.allowDots?B.replace(/\.([^.[]+)/g,"[$1]"):B;if(v.depth<=0){if(!v.plainObjects&&J.call(Object.prototype,A)){if(!v.allowPrototypes)return}return[A]}var c=/(\[[^[\]]*])/,x=/(\[[^[\]]*])/g,R=c.exec(A),C=R?A.slice(0,R.index):A,o=[];if(C){if(!v.plainObjects&&J.call(Object.prototype,C)){if(!v.allowPrototypes)return}o.push(C)}var _=0;while((R=x.exec(A))!==null&&_<v.depth){_+=1;var E=R[1].slice(1,-1);if(!v.plainObjects&&J.call(Object.prototype,E)){if(!v.allowPrototypes)return}o.push(R[1])}if(R){if(v.strictDepth===!0)throw RangeError("Input depth exceeded depth option of "+v.depth+" and strictDepth is true");o.push("["+A.slice(R.index)+"]")}return o},L=function(B,v,A,c){if(!B)return;var x=N(B,A);if(!x)return;return Q(x,v,A,c)},k=function(B){if(!B)return I;if(typeof B.allowEmptyArrays<"u"&&typeof B.allowEmptyArrays!=="boolean")throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof B.decodeDotInKeys<"u"&&typeof B.decodeDotInKeys!=="boolean")throw TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(B.decoder!==null&&typeof B.decoder<"u"&&typeof B.decoder!=="function")throw TypeError("Decoder has to be a function.");if(typeof B.charset<"u"&&B.charset!=="utf-8"&&B.charset!=="iso-8859-1")throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof B.throwOnLimitExceeded<"u"&&typeof B.throwOnLimitExceeded!=="boolean")throw TypeError("`throwOnLimitExceeded` option must be a boolean");var v=typeof B.charset>"u"?I.charset:B.charset,A=typeof B.duplicates>"u"?I.duplicates:B.duplicates;if(A!=="combine"&&A!=="first"&&A!=="last")throw TypeError("The duplicates option must be either combine, first, or last");var c=typeof B.allowDots>"u"?B.decodeDotInKeys===!0?!0:I.allowDots:!!B.allowDots;return{allowDots:c,allowEmptyArrays:typeof B.allowEmptyArrays==="boolean"?!!B.allowEmptyArrays:I.allowEmptyArrays,allowPrototypes:typeof B.allowPrototypes==="boolean"?B.allowPrototypes:I.allowPrototypes,allowSparse:typeof B.allowSparse==="boolean"?B.allowSparse:I.allowSparse,arrayLimit:typeof B.arrayLimit==="number"?B.arrayLimit:I.arrayLimit,charset:v,charsetSentinel:typeof B.charsetSentinel==="boolean"?B.charsetSentinel:I.charsetSentinel,comma:typeof B.comma==="boolean"?B.comma:I.comma,decodeDotInKeys:typeof B.decodeDotInKeys==="boolean"?B.decodeDotInKeys:I.decodeDotInKeys,decoder:typeof B.decoder==="function"?B.decoder:I.decoder,delimiter:typeof B.delimiter==="string"||W.isRegExp(B.delimiter)?B.delimiter:I.delimiter,depth:typeof B.depth==="number"||B.depth===!1?+B.depth:I.depth,duplicates:A,ignoreQueryPrefix:B.ignoreQueryPrefix===!0,interpretNumericEntities:typeof B.interpretNumericEntities==="boolean"?B.interpretNumericEntities:I.interpretNumericEntities,parameterLimit:typeof B.parameterLimit==="number"?B.parameterLimit:I.parameterLimit,parseArrays:B.parseArrays!==!1,plainObjects:typeof B.plainObjects==="boolean"?B.plainObjects:I.plainObjects,strictDepth:typeof B.strictDepth==="boolean"?!!B.strictDepth:I.strictDepth,strictNullHandling:typeof B.strictNullHandling==="boolean"?B.strictNullHandling:I.strictNullHandling,throwOnLimitExceeded:typeof B.throwOnLimitExceeded==="boolean"?B.throwOnLimitExceeded:!1}};K.exports=function(B,v){var A=k(v);if(B===""||B===null||typeof B>"u")return A.plainObjects?{__proto__:null}:{};var c=typeof B==="string"?D(B,A):B,x=A.plainObjects?{__proto__:null}:{},R=Object.keys(c);for(var C=0;C<R.length;++C){var o=R[C],_=L(o,c[o],A,typeof B==="string");x=W.merge(x,_,A)}if(A.allowSparse===!0)return x;return W.compact(x)}}),F0=p((w,K)=>{var W=q0(),J=h0(),P=sK();K.exports={formats:P,parse:J,stringify:W}}),iW=MK(nK(),1),z0={};M4(z0,{zodSchemaKey:()=>j0,webSocketServerArgsKey:()=>Rw,webSocketMessageArgsKey:()=>PK,webSocketKey:()=>GK,webSocketEventKey:()=>Z0,webSocketEventArgumentsKey:()=>R0,webSocketConnectionArgsKey:()=>G2,webSocketCloseReasonArgsKey:()=>q4,webSocketCloseCodeArgsKey:()=>H4,routeModelArgsKey:()=>fw,responseStatusTextArgsKey:()=>_2,responseStatusArgsKey:()=>c2,responseHeadersArgsKey:()=>w2,responseBodyArgsKey:()=>o2,requestHeadersArgsKey:()=>V2,requestHeaderArgsKey:()=>M2,requestBodyArgsKey:()=>C2,requestArgsKey:()=>O2,queryArgsKey:()=>F4,paramsArgsKey:()=>h4,paramArgsKey:()=>x2,moduleKey:()=>JK,middlewareKey:()=>U4,interceptorKey:()=>L4,injectableKey:()=>E4,injectKey:()=>bK,httpServerArgsKey:()=>A2,guardKey:()=>w1,controllerKey:()=>IK,controllerHttpKey:()=>v0,contextArgsKey:()=>L2,containerKey:()=>g2,configKey:()=>eK,argumentsKey:()=>Xw});var Xw=Symbol.for("____boolTypescriptCore:arguments__"),R0=Symbol.for("____boolTypescriptCore:webSocketEventArguments__"),eK=Symbol.for("____boolTypescriptCore:config__"),IK=Symbol.for("____boolTypescriptCore:controller__"),L4=Symbol.for("____boolTypescriptCore:interceptor__"),w1=Symbol.for("____boolTypescriptCore:guard__"),v0=Symbol.for("____boolTypescriptCore:controller.http__"),bK=Symbol.for("____boolTypescriptCore:inject__"),E4=Symbol.for("____boolTypescriptCore:injectable__"),U4=Symbol.for("____boolTypescriptCore:middleware__"),JK=Symbol.for("____boolTypescriptCore:module__"),g2=Symbol.for("____boolTypescriptCore:container__"),j0=Symbol.for("____boolTypescriptCore:zodSchema__"),GK=Symbol.for("____boolTypescriptCore:webSocket__"),Z0=Symbol.for("____boolTypescriptCore:webSocket:event__"),Rw=Symbol.for("____boolTypescriptCore:webSocketArguments:server__"),G2=Symbol.for("____boolTypescriptCore:webSocketArguments:connection__"),PK=Symbol.for("____boolTypescriptCore:webSocketArguments:message__"),H4=Symbol.for("____boolTypescriptCore:webSocketArguments:closeCode__"),q4=Symbol.for("____boolTypescriptCore:webSocketArguments:closeReason__"),A2=Symbol.for("____boolTypescriptCore:httpArguments:server__"),V2=Symbol.for("____boolTypescriptCore:httpArguments:requestHeaders__"),M2=Symbol.for("____boolTypescriptCore:httpArguments:requestHeader__"),C2=Symbol.for("____boolTypescriptCore:httpArguments:requestBody__"),h4=Symbol.for("____boolTypescriptCore:httpArguments:params__"),x2=Symbol.for("____boolTypescriptCore:httpArguments:param__"),F4=Symbol.for("____boolTypescriptCore:httpArguments:query__"),O2=Symbol.for("____boolTypescriptCore:httpArguments:request__"),w2=Symbol.for("____boolTypescriptCore:httpArguments:responseHeaders__"),L2=Symbol.for("____boolTypescriptCore:httpArguments:context__"),fw=Symbol.for("____boolTypescriptCore:httpArguments:routeModel__"),o2=Symbol.for("____boolTypescriptCore:httpArguments:responseBody__"),c2=Symbol.for("____boolTypescriptCore:httpArguments:responseStatus__"),_2=Symbol.for("____boolTypescriptCore:httpArguments:responseStatusText__"),Sw={};M4(Sw,{successfulStatuses:()=>R4,serverErrorStatuses:()=>Z4,redirectionStatuses:()=>v4,informationalStatuses:()=>z4,httpStatuses:()=>k0,clientErrorStatuses:()=>j4});var z4=Object.freeze({CONTINUE:Object.freeze({status:100,statusText:"Continue"}),SWITCHING_PROTOCOLS:Object.freeze({status:101,statusText:"Switching Protocols"}),EARLY_HINTS:Object.freeze({status:103,statusText:"Early Hints"})}),R4=Object.freeze({OK:Object.freeze({status:200,statusText:"OK"}),CREATED:Object.freeze({status:201,statusText:"Created"}),ACCEPTED:Object.freeze({status:202,statusText:"Accepted"}),NON_AUTHORITATIVE_INFORMATION:Object.freeze({status:203,statusText:"Non-Authoritative Information"}),NO_CONTENT:Object.freeze({status:204,statusText:"No Content"}),RESET_CONTENT:Object.freeze({status:205,statusText:"Reset Content"}),PARTIAL_CONTENT:Object.freeze({status:206,statusText:"Partial Content"}),MULTI_STATUS:Object.freeze({status:207,statusText:"Multi-Status"}),ALREADY_REPORTED:Object.freeze({status:208,statusText:"Already Reported"}),IM_USED:Object.freeze({status:226,statusText:"IM Used"})}),v4=Object.freeze({MULTIPLE_CHOICES:Object.freeze({status:300,statusText:"Multiple Choices"}),MOVED_PERMANENTLY:Object.freeze({status:301,statusText:"Moved Permanently"}),FOUND:Object.freeze({status:302,statusText:"Found"}),SEE_OTHER:Object.freeze({status:303,statusText:"See Other"}),NOT_MODIFIED:Object.freeze({status:304,statusText:"Not Modified"}),UNUSED:Object.freeze({status:306,statusText:"Unused"}),TEMPORARY_REDIRECT:Object.freeze({status:307,statusText:"Temporary Redirect"}),PERMANENT_REDIRECT:Object.freeze({status:308,statusText:"Permanent Redirect"})}),j4=Object.freeze({BAD_REQUEST:Object.freeze({status:400,statusText:"Bad Request"}),UNAUTHORIZED:Object.freeze({status:401,statusText:"Unauthorized"}),PAYMENT_REQUIRED:Object.freeze({status:402,statusText:"Payment Required"}),FORBIDDEN:Object.freeze({status:403,statusText:"Forbidden"}),NOT_FOUND:Object.freeze({status:404,statusText:"Not Found"}),METHOD_NOT_ALLOWED:Object.freeze({status:405,statusText:"Method Not Allowed"}),NOT_ACCEPTABLE:Object.freeze({status:406,statusText:"Not Acceptable"}),PROXY_AUTHENTICATION_REQUIRED:Object.freeze({status:407,statusText:"Proxy Authentication Required"}),REQUEST_TIMEOUT:Object.freeze({status:408,statusText:"Request Timeout"}),CONFLICT:Object.freeze({status:409,statusText:"Conflict"}),GONE:Object.freeze({status:410,statusText:"Gone"}),LENGTH_REQUIRED:Object.freeze({status:411,statusText:"Length Required"}),PRECONDITION_FAILED:Object.freeze({status:412,statusText:"Precondition Failed"}),CONTENT_TOO_LARGE:Object.freeze({status:413,statusText:"Content Too Large"}),URI_TOO_LONG:Object.freeze({status:414,statusText:"URI Too Long"}),UNSUPPORTED_MEDIA_TYPE:Object.freeze({status:415,statusText:"Unsupported Media Type"}),RANGE_NOT_SATISFIABLE:Object.freeze({status:416,statusText:"Range Not Satisfiable"}),EXPECTATION_FAILED:Object.freeze({status:417,statusText:"Expectation Failed"}),I_AM_A_TEAPOT:Object.freeze({status:418,statusText:"I'm a teapot"}),MISDIRECTED_REQUEST:Object.freeze({status:421,statusText:"Misdirected Request"}),UNPROCESSABLE_CONTENT:Object.freeze({status:422,statusText:"Unprocessable Content"}),LOCKED:Object.freeze({status:423,statusText:"Locked"}),FAILED_DEPENDENCY:Object.freeze({status:424,statusText:"Failed Dependency"}),TOO_EARLY:Object.freeze({status:425,statusText:"Too Early"}),UPGRADE_REQUIRED:Object.freeze({status:426,statusText:"Upgrade Required"}),PRECONDITION_REQUIRED:Object.freeze({status:428,statusText:"Precondition Required"}),TOO_MANY_REQUESTS:Object.freeze({status:429,statusText:"Too Many Requests"}),REQUEST_HEADER_FIELDS_TOO_LARGE:Object.freeze({status:431,statusText:"Request Header Fields Too Large"}),UNAVAILABLE_FOR_LEGAL_REASONS:Object.freeze({status:451,statusText:"Unavailable For Legal Reasons"})}),Z4=Object.freeze({INTERNAL_SERVER_ERROR:Object.freeze({status:500,statusText:"Internal Server Error"}),NOT_IMPLEMENTED:Object.freeze({status:501,statusText:"Not Implemented"}),BAD_GATEWAY:Object.freeze({status:502,statusText:"Bad Gateway"}),SERVICE_UNAVAILABLE:Object.freeze({status:503,statusText:"Service Unavailable"}),GATEWAY_TIMEOUT:Object.freeze({status:504,statusText:"Gateway Timeout"}),HTTP_VERSION_NOT_SUPPORTED:Object.freeze({status:505,statusText:"HTTP Version Not Supported"}),VARIANT_ALSO_NEGOTIATES:Object.freeze({status:506,statusText:"Variant Also Negotiates"}),INSUFFICIENT_STORAGE:Object.freeze({status:507,statusText:"Insufficient Storage"}),LOOP_DETECTED:Object.freeze({status:508,statusText:"Loop Detected"}),NOT_EXTENDED:Object.freeze({status:510,statusText:"Not Extended"}),NETWORK_AUTHENTICATION_REQUIRED:Object.freeze({status:511,statusText:"Network Authentication Required"})}),k0=Object.freeze({...z4,...R4,...v4,...j4,...Z4}),k4=(w)=>(K,W,J)=>{if(!W)return;let P=Reflect.getOwnMetadata(Xw,K.constructor,W)||{};P[`argumentIndexes.${J}`]={index:J,type:V2,validationSchema:w},Reflect.defineMetadata(Xw,P,K.constructor,W)};var NK=(w)=>(K,W,J)=>{if(!W)return;let P=Reflect.getOwnMetadata(Xw,K.constructor,W)||{};P[`argumentIndexes.${J}`]={index:J,type:L2,key:w},Reflect.defineMetadata(Xw,P,K.constructor,W)},g4=()=>(w,K,W)=>{if(!K)return;let J=Reflect.getOwnMetadata(Xw,w.constructor,K)||{};J[`argumentIndexes.${W}`]={index:W,type:fw},Reflect.defineMetadata(Xw,J,w.constructor,K)};var C4=()=>(w)=>{if(!("enforce"in w.prototype)||typeof w.prototype.enforce!=="function")return;let K=void 0;return Reflect.defineMetadata(w1,K,w),w};var x4=(w)=>(K,W,J)=>{let P=Reflect.getMetadata(bK,K)||[];P[J]=w,Reflect.defineMetadata(bK,P,K)};var dW=Symbol("__bool:webSocket.upgrade__");var cw;(function(w){w.year="year",w.month="month",w.day="day",w.hours="hours",w.minutes="minutes",w.seconds="seconds",w.miliseconds="miliseconds"})(cw||(cw={}));var g0=(w,K,W=cw.day)=>{let J=w instanceof Date?w:new Date(w);switch(W){case cw.year:J.setFullYear(J.getFullYear()+K);break;case cw.month:J.setMonth(J.getMonth()+K);break;case cw.day:J.setDate(J.getDate()+K);break;case cw.hours:J.setHours(J.getHours()+K);break;case cw.minutes:J.setMinutes(J.getMinutes()+K);break;case cw.seconds:J.setSeconds(J.getSeconds()+K);break;case cw.miliseconds:J.setMilliseconds(J.getMilliseconds()+K);break}return J},C0=MK(F0(),1),{serve:x0}=globalThis.Bun,nW=async function(){}.constructor,G4=Object.freeze({black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,gray:90}),A4=Object.freeze({black:40,red:41,green:42,yellow:43,blue:44,magenta:45,cyan:46,white:47,gray:100}),sw=(w,K={})=>{let{color:W,backgroundColor:J,bold:P,underline:I}=K,b="";if(P)b+="\x1B[1m";if(I)b+="\x1B[4m";if(W&&G4[W])b+=`\x1B[${G4[W]}m`;if(J&&A4[J])b+=`\x1B[${A4[J]}m`;return`${b}${w}\x1B[0m`},K1=(w)=>{for(let[K,W]of Object.entries(Sw.httpStatuses)){if(W.status!==w)continue;return W.statusText}return"Unknown error"},o0=(w)=>{let{headers:K,method:W}=w,J=K.get("upgrade")?.toLowerCase()||"",P=K.get("connection")?.toLowerCase()||"";return W==="GET"&&J?.toLowerCase()==="websocket"&&P?.toLowerCase().includes("upgrade")};class AK extends Error{httpCode;message;data;constructor({httpCode:w,data:K,message:W}){super();this.httpCode=w,this.message=!W?.trim()?K1(w):W.trim(),this.data=K}}class W1 extends Error{httpCode;message;data;constructor({httpCode:w,data:K,message:W}){super();this.httpCode=w,this.message=!W?.trim()?K1(w):W.trim(),this.data=K}}var o4=["GET","HEAD","POST","PUT","DELETE","CONNECT","OPTIONS","TRACE","PATCH"],c0=(w)=>!!o4.find((K)=>K===w),_0=(w,K=new Headers)=>{if(K.set("Content-Type","application/json"),w instanceof AK||w instanceof W1)return new Response(JSON.stringify(w),{status:w.httpCode,statusText:w.message,headers:K});return new Response(JSON.stringify((()=>{switch(typeof w){case"object":return!(w instanceof Error)?w:{message:w.message,code:w.name,cause:w.cause};case"string":return{message:w};case"number":return{code:w};default:return}})()),{status:500,statusText:"INTERNAL SERVER ERROR",headers:K})};class iK{_staticMap=new Map;_dynamicMap=new Map;_options=void 0;constructor(...w){w.forEach((K)=>{K.staticEntries.forEach(([W,J])=>this.set(W,J,{isStatic:!0,isPassthrough:!0})),K.dynamicEntries.forEach(([W,J])=>this.set(W,J,{isStatic:!1}))})}get(w,K){return!{...this._options,...K}.isStatic?this._dynamicMap.get(w):this._staticMap.get(w)}has(w,K){return!{...this._options,...K}.isStatic?this._dynamicMap.has(w):this._staticMap.has(w)}set(w,K,W){let J={...this._options,...W};if(!J?.isStatic)this._dynamicMap.set(w,K);else if(!this._staticMap.has(w))this._staticMap.set(w,K);else if(!J.isPassthrough)throw Error(`${String(w)} already exists in context static collection.`);return this}setOptions(w){return this._options=w,this}get staticEntries(){return[...this._staticMap.entries()]}get dynamicEntries(){return[...this._dynamicMap.entries()]}}class c4{alias;#w=new Map;#K;constructor({alias:w}){let K=this._thinAlias(w);this.alias=K,this.#K=new URLPattern({pathname:K,baseURL:"https://www.booljs.com"})}test({pathname:w}){try{return this.#K.test({pathname:this._thinAlias(w),baseURL:"https://www.booljs.com"})}catch(K){return console.error(K),!1}}exec({pathname:w,method:K}){try{let W=this.#w.get(K);if(!W)return null;let J=this.#K.exec({pathname:this._thinAlias(w),baseURL:"https://www.booljs.com"});if(!J)return null;let P=J.pathname.groups;return Object.freeze({parameters:P,model:W})}catch(W){return console.error(W),null}}get({model:w}){if(!this.#w.get("GET"))this.#w.set("GET",w);return this}post({model:w}){if(!this.#w.get("POST"))this.#w.set("POST",w);return this}put({model:w}){if(!this.#w.get("PUT"))this.#w.set("PUT",w);return this}delete({model:w}){if(!this.#w.get("DELETE"))this.#w.set("DELETE",w);return this}connect({model:w}){if(!this.#w.get("CONNECT"))return this.#w.set("CONNECT",w);return this}options({model:w}){if(!this.#w.get("OPTIONS"))return this.#w.set("OPTIONS",w);return this}trace({model:w}){if(!this.#w.get("TRACE"))return this.#w.set("TRACE",w);return this}patch({model:w}){if(!this.#w.get("PATCH"))return this.#w.set("PATCH",w);return this}_thinAlias(w){return w.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}get _fullPath(){return this.alias.split("/").map((w,K)=>{let W=new RegExp(":([a-z0-9A-Z_.-]{1,})(\\(.*?\\))","g");if(!W.test(w)){if(W=new RegExp(":([a-z0-9A-Z_.-]{1,})","g"),!W.test(w))return w;return w.replace(W,(J,P)=>`${J}(.*?)`)}return w}).join("/")}get _filteredPath(){return this.alias.split("/").map((w,K)=>{let W=new RegExp(":([a-z0-9A-Z_.-]{1,})((.*?))","g");if(!W.test(w)){if(W=new RegExp(":([a-z0-9A-Z_.-]{1,})","g"),!W.test(w))return w;return w.replace(W,(J,P)=>"(.*?)")}return w.replace(W,(J,P,I)=>I)}).join("/")}}var r0=c4;class dK{alias;#w=new Map;#K;#J;#I;constructor({alias:w,guardHandlers:K=[],openInterceptorHandlers:W=[],closeInterceptorHandlers:J=[]}){this.alias=this._thinAlias(w),this.#K=K,this.#J=W,this.#I=J}route({alias:w}){let K=this._thinAlias(`${this.alias}/${w}`),W=this.#w.get(K),J=!W?new r0({alias:`${this.alias}/${w}`}):W;if(!W)this.#w.set(K,J);return J}_thinAlias(w){return w.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}get routes(){return this.#w}get pipes(){return Object.freeze({guardHandlers:[...this.#K],openInterceptorHandlers:[...this.#J],closeInterceptorHandlers:[...this.#I]})}}class B2{#w=new Map;add(...w){for(let K of w){if(this.#w.has(K.alias))continue;this.#w.set(K.alias,K)}return this}find({pathname:w,method:K}){for(let W of this.#w.values())for(let J of W.routes.values()){if(!J.test({pathname:w}))continue;let P=J.exec({pathname:w,method:K});if(!P)continue;return Object.freeze({...P,...W.pipes})}return null}}var tW=MK(nK(),1);class N2{_mapper=new Map;constructor(...w){w.forEach((K)=>{K.entries.forEach(([W,J])=>{this._mapper.set(W,J)})})}get(w){if(this._mapper.has(w))return this._mapper.get(w);if(typeof w!=="function")return;let K=Reflect.getMetadataKeys(w);if(![E4,IK,U4,w1,L4,GK].some((P)=>K.includes(P)))throw Error("Missing dependency declaration, please check @Injectable() used on dependency(ies).");let W=(Reflect.getOwnMetadata(bK,w)||[]).map((P)=>this.get(P)),J=new w(...W);return this._mapper.set(w,J),J}set(w,K){if(this._mapper.has(w))throw Error(`${String(w)} already exists in injector collection.`);this._mapper.set(w,K)}get entries(){return[...this._mapper.entries()]}}class _4{error;constructor(w){this.error=w}}class r4{eventName;metadata;_context=void 0;constructor({eventName:w,metadata:K}){this.eventName=w,this.metadata=K}bind(w){return this._context=w,this}execute(){if(this._context&&typeof this.metadata.descriptor.value==="function")this.metadata.descriptor.value=this.metadata.descriptor.value.bind(this._context);return Object.freeze({methodName:this.metadata.methodName,descriptor:this.metadata.descriptor,arguments:this.metadata.arguments})}}class J1{rawAlias;alias;routes=[];constructor(w="/"){this.rawAlias=w,this.alias=J1.thinAlias(w)}addRoutes(...w){for(let K of w)if(!this.routes.includes(K))this.routes.push(K);return this}bind(w){for(let K of this.routes)K.bind(w);return this}execute(){let w=new Map;for(let K of this.routes)w.set(`${this.alias}:::${K.eventName}`,K.execute());return w}static thinAlias(w){return w.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}}class E2{rawPrefix;prefix;routers=[];constructor(w="/"){this.rawPrefix=w,this.prefix=E2.thinPrefix(w)}addRouters(...w){for(let K=0;K<w.length;K++)if(!this.routers.includes(w[K]))this.routers.push(w[K]);for(let K of w)if(!this.routers.includes(K))this.routers.push(K);return this}execute(){let w=new Map;for(let K of this.routers){let W=K.execute();for(let[J,P]of W.entries())w.set(`/${E2.thinPrefix(`${this.prefix}/${J}`)}`,P)}return w}static thinPrefix(w){return w.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}}class u4{classConstructor;options;#w;#K;#J=new Map;#I;#A=900;#G;#b=new iK;constructor(w,K){this.classConstructor=w,this.options=K;let W=Reflect.getOwnMetadataKeys(w);if(!W.includes(g2)&&!W.includes(JK))throw Error(`Can not detect! ${w.name} class is not a container or module.`);this.#K=!W.includes(g2)?"MODULE":"CONTAINER",this.#A=typeof K.static?.cacheTimeInSeconds!=="number"?900:K.static.cacheTimeInSeconds,this.#I=Object.freeze({allowLogsMethods:this.options?.log?.methods||[],staticOption:this.options.static,allowOrigins:!this.options.cors?.origins?["*"]:typeof this.options.cors.origins!=="string"?this.options.cors.origins.includes("*")||this.options.cors.origins.length<1?["*"]:this.options.cors.origins:[this.options.cors.origins!=="*"?this.options.cors.origins:"*"],allowMethods:this.options.cors?.methods||o4,allowCredentials:!this.options.cors?.credentials?!1:!0,allowHeaders:!this.options.cors?.headers||this.options.cors.headers.includes("*")?["*"]:this.options.cors.headers,pipelineStrategy:(()=>{switch(K.pipelineStrategy?.type){case"SIMPLE":return Object.freeze({startMiddlewares:"FIFO",endMiddlewares:K.pipelineStrategy.targets?.middlewares||"FIFO",openInterceptors:"FIFO",closeInterceptors:K.pipelineStrategy.targets?.interceptors||"FIFO"});default:return Object.freeze({startMiddlewares:"FIFO",endMiddlewares:"FIFO",openInterceptors:"FIFO",closeInterceptors:"FIFO"})}})()})}static async create(w,K){let W=new u4(w,K);return await W.preLaunch(),W}useValidator(w){this.#G=w}async preLaunch(){if(this.#w)return this.#w;let{startMiddlewareHandlers:w,endMiddlewareHandlers:K,controllerRouterGroup:W,webSocketHttpRouterGroup:J,webSocketRouterGroup:P}=this.#K!=="MODULE"?await this.#$({containerClass:this.classConstructor,prefix:this.options.prefix,options:this.options}):await this.#M({moduleClass:this.classConstructor,prefix:this.options.prefix,options:this.options}),I=new Map,b=P.execute();for(let[G,M]of b.entries())I.set(G,M);return this.#w=Object.freeze({startMiddlewareHandlers:w,endMiddlewareHandlers:K,controllerRouterGroup:W,webSocketHttpRouterGroup:J,webSocketRouterGroup:P,webSocketsMap:I}),this.#w}async listen(){let w=x0({port:this.options.port,fetch:this.#O.bind(this),websocket:await this.#B.bind(this)()});this.#b.set(Rw,w)}async#O(w,K){let{allowLogsMethods:W,allowOrigins:J,allowMethods:P,allowHeaders:I,allowCredentials:b,staticOption:G}=this.#I,{startMiddlewareHandlers:M,endMiddlewareHandlers:O,controllerRouterGroup:D,webSocketHttpRouterGroup:Q}=await this.preLaunch(),N=performance.now(),L=new URL(w.url),k=C0.parse(L.searchParams.toString(),this.options.queryParser),B=w.headers.get("origin")||"*",v=w.method.toUpperCase(),A=new Headers;try{let c=new iK().setOptions({isStatic:!0}).set(A2,K).set(O2,w).set(M2,w.headers).set(w2,A).set(F4,k);if([...!b?[]:[{key:"Access-Control-Allow-Credentials",value:"true"}],{key:"Access-Control-Allow-Origin",value:J.includes("*")?"*":!J.includes(B)?J[0]:B},{key:"Access-Control-Allow-Methods",value:P.join(", ")},{key:"Access-Control-Allow-Headers",value:I.join(", ")}].forEach(({key:x,value:R})=>A.set(x,R)),!c0(v)||!P.includes(v))return this.finalizeResponse(new Response(void 0,{...Sw.clientErrorStatuses.METHOD_NOT_ALLOWED,headers:A}));if(o0(w))return await this.#N({request:w,server:K,context:c,url:L,query:k,method:v,responseHeaders:A,httpRouterGroup:Q,startMiddlewareHandlers:M,endMiddlewareHandlers:O});if(w.method.toUpperCase()==="OPTIONS")return this.finalizeResponse(J.includes("*")||J.includes(B)?new Response(void 0,{...Sw.successfulStatuses.NO_CONTENT,headers:A}):new Response(void 0,{...Sw.clientErrorStatuses.EXPECTATION_FAILED,headers:A}));if(G){let x=await this.#D({url:L,responseHeaders:A,path:G.path,headers:G.headers,cacheTimeInSeconds:G.cacheTimeInSeconds});if(x instanceof Response)return x}return await this.#Q({url:L,method:v,context:c,httpRouterGroup:D,startMiddlewareHandlers:M,endMiddlewareHandlers:O})}catch(c){return this.options.debug&&console.error(c),this.finalizeResponse(_0(c,A))}finally{if(W){let c=performance.now(),x=sw(L.pathname,{color:"blue"}),R=`${Bun.color("yellow","ansi")}${process.pid}`,C=sw(w.method,{color:"yellow",backgroundColor:"blue"}),o=sw(`${w.headers.get("x-forwarded-for")||w.headers.get("x-real-ip")||K.requestIP(w)?.address||"<Unknown>"}`,{color:"yellow"}),_=sw(`${Math.round((c-N+Number.EPSILON)*100)/100}ms`,{color:"yellow",backgroundColor:"blue"});W.includes(w.method.toUpperCase())&&console.info(`PID: ${R} - Method: ${C} - IP: ${o} - ${x} - Time: ${_}`)}}}async#B(){let{webSocketsMap:w}=await this.preLaunch();return{open:(K)=>{let W=`${K.data.pathname}:::open`,J=w.get(W);if(!J)return;let P=J.arguments||{},I=[];for(let[,b]of Object.entries(P))switch(b.type){case G2:I[b.index]=K;break;case Rw:I[b.index]=this.#b.get(Rw);break}J.descriptor.value(...I)},close:(K,W,J)=>{let P=`${K.data.pathname}:::close`,I=w.get(P);if(!I)return;let b=I.arguments||{},G=[];for(let[,M]of Object.entries(b))switch(M.type){case G2:G[M.index]=K;break;case H4:G[M.index]=W;break;case q4:G[M.index]=J;break;case Rw:G[M.index]=this.#b.get(Rw);break}I.descriptor.value(...G)},message:(K,W)=>{let J=`${K.data.pathname}:::message`,P=w.get(J);if(!P)return;let I=P.arguments||{},b=[];for(let[,G]of Object.entries(I))switch(G.type){case G2:b[G.index]=K;break;case PK:b[G.index]=W;break;case Rw:b[G.index]=this.#b.get(Rw);break}P.descriptor.value(...b)},drain:(K)=>{let W=`${K.data.pathname}:::drain`,J=w.get(W);if(!J)return;let P=J.arguments||{},I=[];for(let[,b]of Object.entries(P))switch(b.type){case G2:I[b.index]=K;break;case Rw:I[b.index]=this.#b.get(Rw);break}J.descriptor.value(...I)},ping:(K,W)=>{let J=`${K.data.pathname}:::ping`,P=w.get(J);if(!P)return;let I=P.arguments||{},b=[];for(let[,G]of Object.entries(I))switch(G.type){case G2:b[G.index]=K;break;case PK:b[G.index]=W;break;case Rw:b[G.index]=this.#b.get(Rw);break}P.descriptor.value(...b)},pong:(K,W)=>{let J=`${K.data.pathname}:::pong`,P=w.get(J);if(!P)return;let I=P.arguments||{},b=[];for(let[,G]of Object.entries(I))switch(G.type){case G2:b[G.index]=K;break;case PK:b[G.index]=W;break;case Rw:b[G.index]=this.#b.get(Rw);break}P.descriptor.value(...b)}}}async#N({request:w,server:K,context:W,url:J,query:P,method:I,responseHeaders:b,httpRouterGroup:G,startMiddlewareHandlers:M,endMiddlewareHandlers:O}){try{await this.#P({type:"START_MIDDLEWARES",handlers:M,context:W});let D=G.find({pathname:J.pathname,method:I}),Q=this.finalizeResponse(new Response(void 0,{...Sw.serverErrorStatuses.INTERNAL_SERVER_ERROR,headers:b}));if(D){let N=await this.#P({type:"GUARDS",handlers:D.guardHandlers,context:W});if(N!==!0)Q=this.finalizeResponse(new Response(void 0,{...!N||N==="UNAUTHORIZATION"?Sw.clientErrorStatuses.UNAUTHORIZED:Sw.clientErrorStatuses.FORBIDDEN,headers:b}));else{W.set(fw,D.model),await this.#P({type:"OPEN_INTERCEPTORS",handlers:D.openInterceptorHandlers,context:W});let L=await D.model.func(...[K,w,P]);if(await this.#P({type:"CLOSE_INTERCEPTORS",handlers:D.closeInterceptorHandlers,context:W}),typeof L!=="boolean"||!L)Q=this.finalizeResponse(new Response(void 0,{...Sw.serverErrorStatuses.INTERNAL_SERVER_ERROR,headers:b}));else Q=void 0}}return await this.#P({type:"END_MIDDLEWARES",handlers:O,context:W}),Q}catch(D){throw console.error(D),D}}async#D({url:w,path:K,headers:W,cacheTimeInSeconds:J,responseHeaders:P}){let I=`${K}/${w.pathname}`,b=this.#J.get(I);if(!b){let G=Bun.file(I);if(await G.exists()){if(W)for(let[M,O]of Object.entries(W))P.set(M,O);return P.set("Content-Type",G.type),this.finalizeResponse(new Response(await G.arrayBuffer(),{...Sw.successfulStatuses.OK,headers:P}))}}else{let G=new Date>b.expiredAt;if(G)this.#J.delete(I);let M=!G?b.file:Bun.file(I);if(await M.exists()){if(this.#J.set(I,Object.freeze({expiredAt:g0(new Date,this.#A,cw.seconds),file:M})),W)for(let[O,D]of Object.entries(W))P.set(O,D);return P.set("Content-Type",M.type),this.finalizeResponse(new Response(await M.arrayBuffer(),{...Sw.successfulStatuses.OK,headers:P}))}}}async#Q({context:w,url:K,method:W,httpRouterGroup:J,startMiddlewareHandlers:P=[],endMiddlewareHandlers:I=[]}){let b={isStatic:!0};w.setOptions(b),await this.#P({type:"START_MIDDLEWARES",handlers:P,context:w});let G=J.find({pathname:K.pathname,method:W});if(!G)w.setOptions({isStatic:!1}).set(c2,Sw.clientErrorStatuses.NOT_FOUND.status).set(_2,Sw.clientErrorStatuses.NOT_FOUND.statusText).set(o2,void 0);else{w.set(fw,G.model);let N=await this.#P({type:"GUARDS",handlers:G.guardHandlers,context:w});if(N!==!0)w.setOptions({isStatic:!1}).set(c2,!N||N==="UNAUTHORIZATION"?Sw.clientErrorStatuses.UNAUTHORIZED.status:Sw.clientErrorStatuses.FORBIDDEN.status).set(_2,!N||N==="UNAUTHORIZATION"?Sw.clientErrorStatuses.UNAUTHORIZED.statusText:Sw.clientErrorStatuses.FORBIDDEN.statusText).set(o2,void 0);else await this.#P({type:"OPEN_INTERCEPTORS",handlers:G.openInterceptorHandlers,context:w}),await this.#P({type:"CONTROLLER",context:w}),await this.#P({type:"CLOSE_INTERCEPTORS",handlers:G.closeInterceptorHandlers,context:w})}await this.#P({type:"END_MIDDLEWARES",handlers:I,context:w});let M=w.get(w2,{isStatic:!0})||new Headers,O=w.get(o2,{isStatic:!1})||void 0,D=w.get(c2,{isStatic:!1}),Q=w.get(_2,{isStatic:!1});return this.serializeResponse({status:typeof D!=="number"?W==="POST"?201:void 0:D,statusText:typeof Q!=="string"?void 0:Q,headers:M,data:O})}async#$({prefix:w="",startMiddlewareHandlers:K=[],endMiddlewareHandlers:W=[],guardHandlers:J=[],openInterceptorHandlers:P=[],closeInterceptorHandlers:I=[],controllerRouterGroup:b=new B2,webSocketHttpRouterGroup:G=new B2,webSocketRouterGroup:M=new E2,containerClass:O,options:D,extendInjector:Q}){if(!Reflect.getOwnMetadataKeys(O).includes(g2))throw Error(`[${O.name}] is not a container.`);let N=!Q?new N2:new N2(Q),L=Reflect.getOwnMetadata(g2,O),{loaders:k,middlewares:B,dependencies:v,modules:A,guards:c,interceptors:x,prefix:R,config:C}=L||{},{config:o}=Object.freeze({config:{...typeof D.config!=="function"?D.config:await D.config(),...typeof C!=="function"?typeof C!=="object"?void 0:("key"in C)&&("value"in C)&&typeof C.key==="symbol"?typeof C.value!=="function"?C.value:await C.value():C:await C()}});if(N.set(C&&"key"in C&&"value"in C&&typeof C.key==="symbol"?C.key:eK,o),k){let _=[];for(let[X,U]of Object.entries(k))_.push(async()=>{try{let q=await U({config:o});return console.info(`${sw(" INFO ",{color:"white",backgroundColor:"blue",bold:!0})} Loader [${X}] initialized successfully.`),q}catch(q){throw console.error(`${sw(" WARN ",{color:"yellow",backgroundColor:"red",bold:!0})} Loader [${X}] initialization failed.`),D.debug&&console.error(q),q}});let E=await Promise.all(_.map((X)=>X()));for(let[X,U]of E)N.set(X,U)}if(v){for(let _ of v)if(!N.get(_))throw Error(`Can not collect dependency [${_.name}].`)}if(B){let _=(E,X)=>!!E;for(let E of B){let X=N.get(E);if(!X||!_(X,E))throw Error(`Can not collect middleware [${E.name}].`);if(X.start&&typeof X.start==="function"){let U=Reflect.getOwnMetadata(Xw,E,"start")||{};K.push(Object.freeze({class:E,funcName:"start",func:X.start.bind(X),argumentsMetadata:U}))}if(X.end&&typeof X.end==="function"){let U=Reflect.getOwnMetadata(Xw,E,"end")||{};W.push(Object.freeze({class:E,funcName:"end",func:X.end.bind(X),argumentsMetadata:U}))}}}if(c){let _=(E,X)=>!!E;for(let E of c){let X=N.get(E);if(!X||!_(X,E))throw Error(`Can not collect guard [${E.name}].`);let U=Reflect.getOwnMetadata(Xw,E,"enforce")||{};J.push(Object.freeze({class:E,funcName:"enforce",func:X.enforce.bind(X),argumentsMetadata:U}))}}if(x){let _=(E,X)=>!!E;for(let E of x){let X=N.get(E);if(!X||!_(X,E))throw Error(`Can not collect interceptor [${E.name}].`);if(X){if(X.open&&typeof X.open==="function"){let U=Reflect.getOwnMetadata(Xw,E,"open")||{};P.push(Object.freeze({class:E,funcName:"open",func:X.open.bind(X),argumentsMetadata:U}))}if(X.close&&typeof X.close==="function"){let U=Reflect.getOwnMetadata(Xw,E,"close")||{};I.push(Object.freeze({class:E,funcName:"close",func:X.close.bind(X),argumentsMetadata:U}))}}}}if(A){let _=[w.trim(),R?.trim()||""].filter((E)=>E.length>0).join("/");for(let E of A)try{await this.#M({prefix:_,moduleClass:E,extendInjector:N,options:D,startMiddlewareHandlers:K,endMiddlewareHandlers:W,guardHandlers:[...J],openInterceptorHandlers:[...P],closeInterceptorHandlers:[...I],controllerRouterGroup:b,webSocketHttpRouterGroup:G,webSocketRouterGroup:M})}catch(X){throw console.group(`Can not resolve module: [${E.name}].`),console.error(X),console.groupEnd(),X}}return Object.freeze({startMiddlewareHandlers:K,endMiddlewareHandlers:W,controllerRouterGroup:b,webSocketHttpRouterGroup:G,webSocketRouterGroup:M})}async#M({prefix:w="",startMiddlewareHandlers:K=[],endMiddlewareHandlers:W=[],guardHandlers:J=[],openInterceptorHandlers:P=[],closeInterceptorHandlers:I=[],controllerRouterGroup:b=new B2,webSocketHttpRouterGroup:G=new B2,webSocketRouterGroup:M=new E2,moduleClass:O,options:D,extendInjector:Q}){if(!Reflect.getOwnMetadataKeys(O).includes(JK))throw Error(`[${O.name}] is not a module.`);let N=!Q?new N2:new N2(Q),L=Reflect.getOwnMetadata(JK,O),{loaders:k,middlewares:B,guards:v,interceptors:A,controllers:c,dependencies:x,webSockets:R,prefix:C,config:o}=L||{},_=[w.trim(),C?.trim()||""].filter((X)=>X.length>0).join("/"),{config:E}=Object.freeze({config:!o?void 0:{...typeof D.config!=="function"?D.config:await D.config(),...typeof o!=="function"?typeof o!=="object"?void 0:("key"in o)&&("value"in o)&&typeof o.key==="symbol"?typeof o.value!=="function"?o.value:await o.value():o:await o()}});if(E&&N.set(o&&"key"in o&&"value"in o&&typeof o.key==="symbol"?o.key:eK,E),k){let X=[];for(let[q,u]of Object.entries(k))X.push(async()=>{try{let T=await u({config:E});return console.info(`${sw(" INFO ",{color:"white",backgroundColor:"blue",bold:!0})} Loader [${q}] initialized successfully.`),T}catch(T){throw console.error(`${sw(" WARN ",{color:"yellow",backgroundColor:"red",bold:!0})} Loader [${q}] initialization failed.`),D.debug&&console.error(T),T}});let U=await Promise.all(X.map((q)=>q()));for(let q=0;q<U.length;q++){let[u,T]=U[q];N.set(u,T)}}if(x){for(let X of x)if(!N.get(X))throw Error(`Can not collect dependency [${X.name}].`)}if(B){let X=(U,q)=>!!U;for(let U of B){let q=N.get(U);if(!q||!X(q,U))throw Error(`Can not collect middleware [${U.name}].`);if(q.start&&typeof q.start==="function"){let u=Reflect.getOwnMetadata(Xw,U,"start")||{};K.push(Object.freeze({class:U,funcName:"start",func:q.start.bind(q),argumentsMetadata:u}))}if(q.end&&typeof q.end==="function"){let u=Reflect.getOwnMetadata(Xw,U,"end")||{};W.push(Object.freeze({class:U,funcName:"end",func:q.end.bind(q),argumentsMetadata:u}))}}}if(v){let X=(U,q)=>!!U;for(let U of v){let q=N.get(U);if(!q||!X(q,U))throw Error(`Can not collect guard [${U.name}].`);let u=Reflect.getOwnMetadata(Xw,U,"enforce")||{};J.push(Object.freeze({class:U,funcName:"enforce",func:q.enforce.bind(q),argumentsMetadata:u}))}}if(A){let X=(U,q)=>!!U;for(let U of A){let q=N.get(U);if(!q||!X(q,U))throw Error(`Can not collect interceptor [${U.name}].`);if(q){if(q.open&&typeof q.open==="function"){let u=Reflect.getOwnMetadata(Xw,U,"open")||{};P.push(Object.freeze({class:U,funcName:"open",func:q.open.bind(q),argumentsMetadata:u}))}if(q.close&&typeof q.close==="function"){let u=Reflect.getOwnMetadata(Xw,U,"close")||{};I.push(Object.freeze({class:U,funcName:"close",func:q.close.bind(q),argumentsMetadata:u}))}}}}if(c)for(let X of c)this.#Y({controllerConstructor:X,prefix:_,injector:N,httpRouterGroup:b,guardHandlers:[...J],openInterceptorHandlers:[...P],closeInterceptorHandlers:[...I]});if(R)for(let X of R)this.#S({webSocketConstructor:X,injector:N,prefix:_,webSocketHttpRouterGroup:G,webSocketRouterGroup:M});return Object.freeze({startMiddlewareHandlers:K,endMiddlewareHandlers:W,controllerRouterGroup:b,webSocketHttpRouterGroup:G,webSocketRouterGroup:M})}#Y({controllerConstructor:w,prefix:K="",injector:W=new N2,httpRouterGroup:J=new B2,guardHandlers:P=[],openInterceptorHandlers:I=[],closeInterceptorHandlers:b=[]}){if(!Reflect.getOwnMetadataKeys(w).includes(IK))throw Error(`[${w.name}] is not a controller.`);let G=W.get(w);if(!G)throw Error("Can not initialize controller.");let M=Reflect.getOwnMetadata(IK,w)||{prefix:"/",httpMetadata:[]},O=[K.trim(),M.prefix.trim()].filter((Q)=>Q.length>0).join("/"),D=new dK({alias:O,guardHandlers:P,openInterceptorHandlers:I,closeInterceptorHandlers:b});for(let Q of M.httpMetadata){if(typeof Q.descriptor.value!=="function")continue;let N=D.route({alias:Q.path}),L=Q.descriptor.value.bind(G),k=Object.freeze({class:w,funcName:Q.methodName,func:L,argumentsMetadata:Q.argumentsMetadata});switch(Q.httpMethod){case"GET":N.get({model:k});break;case"POST":N.post({model:k});break;case"PUT":N.put({model:k});break;case"PATCH":N.patch({model:k});break;case"DELETE":N.delete({model:k});break;case"OPTIONS":N.options({model:k});break}}return J.add(D)}async#W({data:w,validationSchema:K,argumentIndex:W,funcName:J}){if(!this.#G)return w;try{let P=await this.#G.validate(w,K,W,J);if(!(P instanceof _4))return P;throw new AK({httpCode:400,message:`Validation at the [${J.toString()}] method fails at positional argument [${W}].`,data:P.error})}catch(P){if(P instanceof AK)throw P;throw new W1({httpCode:500,message:`Validation at the [${J.toString()}] method error at positional argument [${W}].`,data:!(P instanceof Error)?P:[{message:P.message,code:P.name,cause:P.cause}]})}}#S({webSocketConstructor:w,prefix:K="",injector:W=new N2,webSocketHttpRouterGroup:J=new B2,webSocketRouterGroup:P=new E2,guardHandlers:I=[],openInterceptorHandlers:b=[],closeInterceptorHandlers:G=[]}){if(!Reflect.getOwnMetadataKeys(w).includes(GK))throw Error(`[${w.name}] is not a websocket route.`);let M=W.get(w);if(!M)throw Error("Can not initialize webSocket.");let O=Reflect.getOwnMetadata(GK,w)||{prefix:"/",events:[],http:[]},D=`/${K}/${O.prefix}`,Q=new dK({alias:D,guardHandlers:I,openInterceptorHandlers:b,closeInterceptorHandlers:G});for(let[L,k]of Object.entries(O.http)){if(typeof k.descriptor?.value!=="function")continue;let B=Q.route({alias:k.path}),v=k.descriptor.value.bind(M),A=Object.freeze({class:w,funcName:k.methodName,func:v,argumentsMetadata:k.argumentsMetadata});switch(k.httpMethod){case"GET":B.get({model:A});break;case"POST":B.post({model:A});break}}J.add(Q);let N=new J1(D);for(let[L,k]of Object.entries(O.events)){let B=new r4({eventName:L,metadata:k});N.addRoutes(B)}return N.bind(M),P.addRouters(N),Object.freeze({webSocketHttpRouterGroup:J,webSocketRouterGroup:P})}async#P({type:w,handlers:K,context:W}){let J={isStatic:!0};W.setOptions(J);let P=W.get(A2,J)||void 0,I=W.get(O2,J)||void 0,b=W.get(M2,J)||void 0,G=W.get(w2,J)||void 0,M=W.get(h4,J)||void 0,O=W.get(fw,J)||void 0;if(w==="START_MIDDLEWARES"||w==="END_MIDDLEWARES"){let D=w==="START_MIDDLEWARES"?this.#I.pipelineStrategy.startMiddlewares:this.#I.pipelineStrategy.endMiddlewares;for(let Q=D==="FIFO"?0:K.length-1;D==="FIFO"?Q<K.length:Q>-1;D==="FIFO"?Q++:Q--){let N=[],{func:L,funcName:k,argumentsMetadata:B}=K[Q];for(let[v,A]of Object.entries(B))switch(A.type){case L2:N[A.index]=!A.key?W:W.get(A.key,J);break;case O2:N[A.index]=I;break;case C2:N[A.index]=!A.validationSchema?await I?.[A.parser||"json"]():await this.#W({data:await I?.[A.parser||"json"](),validationSchema:A.validationSchema,argumentIndex:A.index,funcName:k});break;case V2:N[A.index]=!A.validationSchema?b:await this.#W({data:b?.toJSON(),validationSchema:A.validationSchema,argumentIndex:A.index,funcName:k});break;case M2:N[A.index]=!A.validationSchema?b?.get(A.key)||void 0:await this.#W({data:b?.get(A.key)||void 0,validationSchema:A.validationSchema,argumentIndex:A.index,funcName:k});break;case x2:N[A.index]=!A.validationSchema?M?.[A.key]||void 0:await this.#W({data:M?.[A.key]||void 0,validationSchema:A.validationSchema,argumentIndex:A.index,funcName:k});break;case fw:N[A.index]=void 0;break;case w2:N[A.index]=G;break;case A2:N[A.index]=P;break;default:N[A.index]=!A.validationSchema?W.get(A.type,J):await this.#W({data:W.get(A.type,J),validationSchema:A.validationSchema,argumentIndex:A.index,funcName:k});break}await L(...N)}}else if(w==="GUARDS"){if(!O||K.length===0)return!0;for(let D=0;D<K.length;D++){let Q=[],{func:N,funcName:L,argumentsMetadata:k}=K[D];for(let[v,A]of Object.entries(k))switch(A.type){case O2:Q[A.index]=I;break;case C2:Q[A.index]=!A.validationSchema?await I?.[A.parser||"json"]():await this.#W({data:await I?.[A.parser||"json"](),validationSchema:A.validationSchema,argumentIndex:A.index,funcName:L});break;case L2:Q[A.index]=!A.key?W:W.get(A.key);break;case V2:Q[A.index]=!A.validationSchema?b:await this.#W({data:b?.toJSON(),validationSchema:A.validationSchema,argumentIndex:A.index,funcName:L});break;case w2:Q[A.index]=G;break;case M2:Q[A.index]=!A.validationSchema?b?.get(A.key)||void 0:await this.#W({data:b?.get(A.key)||void 0,validationSchema:A.validationSchema,argumentIndex:A.index,funcName:L});break;case x2:Q[A.index]=!A.validationSchema?M?.[A.key]||void 0:await this.#W({data:M?.[A.key],validationSchema:A.validationSchema,argumentIndex:A.index,funcName:L});break;case fw:Q[A.index]=O;break;case A2:Q[A.index]=P;break;default:Q[A.index]=!A.validationSchema?W.get(A.type):await this.#W({data:W.get(A.type),validationSchema:A.validationSchema,argumentIndex:A.index,funcName:L});break}let B=await N(...Q);if(B!==!0)return B}return!0}else if(w==="OPEN_INTERCEPTORS"||w==="CLOSE_INTERCEPTORS"){if(!O)return;let D=w==="OPEN_INTERCEPTORS"?this.#I.pipelineStrategy.openInterceptors:this.#I.pipelineStrategy.closeInterceptors;for(let Q=D==="FIFO"?0:K.length-1;D==="FIFO"?Q<K.length:Q>-1;D==="FIFO"?Q++:Q--){let N=[],{func:L,funcName:k,argumentsMetadata:B}=K[Q];for(let[v,A]of Object.entries(B))switch(A.type){case O2:N[A.index]=I;break;case C2:N[A.index]=!A.validationSchema?await I?.[A.parser||"json"]():await this.#W({data:await I?.[A.parser||"json"](),validationSchema:A.validationSchema,argumentIndex:A.index,funcName:k});break;case L2:N[A.index]=!A.key?W:W.get(A.key);break;case V2:N[A.index]=!A.validationSchema?b:await this.#W({data:b?.toJSON(),validationSchema:A.validationSchema,argumentIndex:A.index,funcName:k});break;case M2:N[A.index]=!A.validationSchema?b?.get(A.key)||void 0:await this.#W({data:b?.get(A.key)||void 0,validationSchema:A.validationSchema,argumentIndex:A.index,funcName:k});break;case w2:N[A.index]=G;break;case x2:N[A.index]=!A.validationSchema?M?.[A.key]||void 0:await this.#W({data:M?.[A.key]||void 0,validationSchema:A.validationSchema,argumentIndex:A.index,funcName:k});break;case fw:N[A.index]=O;break;case A2:N[A.index]=P;break;default:N[A.index]=!A.validationSchema?W.get(A.type):await this.#W({data:W.get(A.type),validationSchema:A.validationSchema,argumentIndex:A.index,funcName:k});break}await L(...N)}}else if(w==="CONTROLLER"){if(!O){W.setOptions({isStatic:!1}).set(c2,404).set(_2,"Not found.");return}let D=[],{func:Q,funcName:N,argumentsMetadata:L}=O;for(let[k,B]of Object.entries(L))switch(B.type){case O2:D[B.index]=I;break;case C2:D[B.index]=!B.validationSchema?await I?.[B.parser||"json"]():await this.#W({data:await I?.[B.parser||"json"](),validationSchema:B.validationSchema,argumentIndex:B.index,funcName:N});break;case L2:D[B.index]=!B.key?W:W.get(B.key);break;case V2:D[B.index]=!B.validationSchema?b:await this.#W({data:b?.toJSON(),validationSchema:B.validationSchema,argumentIndex:B.index,funcName:N});break;case M2:D[B.index]=!B.validationSchema?b?.get(B.key)||void 0:await this.#W({data:b?.get(B.key)||void 0,validationSchema:B.validationSchema,argumentIndex:B.index,funcName:N});break;case w2:D[B.index]=G;break;case x2:D[B.index]=!B.validationSchema?M?.[B.key]||void 0:await this.#W({data:M?.[B.key]||void 0,validationSchema:B.validationSchema,argumentIndex:B.index,funcName:N});break;case fw:D[B.index]=O;break;case A2:D[B.index]=P;break;default:D[B.index]=!B.validationSchema?W.get(B.type):await this.#W({data:W.get(B.type),validationSchema:B.validationSchema,argumentIndex:B.index,funcName:N});break}W.set(o2,await Q(...D),{isStatic:!1})}return}serializeResponse({status:w,statusText:K,headers:W,data:J}){let P=W.get("Content-Type")||"text/plain",I=!w?!J?204:200:w,b=K1(I);if(P.includes("application/json"))return this.finalizeResponse(new Response(!J?void 0:J instanceof ReadableStream?J:JSON.stringify(J),{status:I,statusText:b,headers:W}));if(P.includes("text/plain")||P.includes("text/html"))return this.finalizeResponse(new Response(!J?void 0:J instanceof ReadableStream?J:String(J),{status:I,statusText:b,headers:W}));if(P.includes("application/octet-stream")){if(J instanceof Uint8Array||J instanceof ArrayBuffer||J instanceof Blob||J instanceof ReadableStream)return this.finalizeResponse(new Response(J,{status:I,statusText:b,headers:W}));throw Error("Invalid data type for application/octet-stream")}if(P.includes("multipart/form-data")){if(J instanceof FormData)return this.finalizeResponse(new Response(J,{status:I,statusText:b,headers:W}));throw Error("multipart/form-data requires FormData object")}return this.finalizeResponse(new Response(!J?void 0:String(J),{status:I,statusText:b,headers:W}))}finalizeResponse(w){return w.headers.set("X-Powered-By","Bool Typescript"),w}}var aW=MK(nK(),1);var u0=()=>NK(hw.authState);var y0=()=>(w)=>{Reflect.defineMetadata(hw.guardMetadata,void 0,w)};var P1=Object.freeze({status:"aborted"});function h(w,K,W){function J(G,M){if(!G._zod)Object.defineProperty(G,"_zod",{value:{def:M,constr:b,traits:new Set},enumerable:!1});if(G._zod.traits.has(w))return;G._zod.traits.add(w),K(G,M);let O=b.prototype,D=Object.keys(O);for(let Q=0;Q<D.length;Q++){let N=D[Q];if(!(N in G))G[N]=O[N].bind(G)}}let P=W?.Parent??Object;class I extends P{}Object.defineProperty(I,"name",{value:w});function b(G){var M;let O=W?.Parent?new I:this;J(O,G),(M=O._zod).deferred??(M.deferred=[]);for(let D of O._zod.deferred)D();return O}return Object.defineProperty(b,"init",{value:J}),Object.defineProperty(b,Symbol.hasInstance,{value:(G)=>{if(W?.Parent&&G instanceof W.Parent)return!0;return G?._zod?.traits?.has(w)}}),Object.defineProperty(b,"name",{value:w}),b}var m0=Symbol("zod_brand");class ew extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class r2 extends Error{constructor(w){super(`Encountered unidirectional transform during encode: ${w}`);this.name="ZodEncodeError"}}var DK={};function gw(w){if(w)Object.assign(DK,w);return DK}var bw={};lK(bw,{unwrapMessage:()=>u2,uint8ArrayToHex:()=>D9,uint8ArrayToBase64url:()=>B9,uint8ArrayToBase64:()=>d4,stringifyPrimitive:()=>SK,slugify:()=>b1,shallowClone:()=>T4,safeExtend:()=>I9,required:()=>A9,randomString:()=>a0,propertyKeyTypes:()=>A1,promiseAllObject:()=>t0,primitiveTypes:()=>l4,prefixIssues:()=>p2,pick:()=>W9,partial:()=>G9,parsedType:()=>O1,optionalKeys:()=>M1,omit:()=>J9,objectClone:()=>i0,numKeys:()=>s0,nullish:()=>T2,normalizeParams:()=>e,mergeDefs:()=>iw,merge:()=>b9,jsonStringifyReplacer:()=>q2,joinValues:()=>QK,issue:()=>h2,isPlainObject:()=>D2,isObject:()=>H2,hexToUint8Array:()=>N9,getSizableOrigin:()=>e4,getParsedType:()=>w9,getLengthableOrigin:()=>f2,getEnumValues:()=>y2,getElementAtPath:()=>n0,floatSafeRemainder:()=>m4,finalizeIssue:()=>mw,extend:()=>P9,escapeRegex:()=>Q2,esc:()=>$K,defineLazy:()=>Iw,createTransparentProxy:()=>K9,cloneDef:()=>d0,clone:()=>Cw,cleanRegex:()=>l2,cleanEnum:()=>M9,captureStackTrace:()=>YK,cached:()=>m2,base64urlToUint8Array:()=>O9,base64ToUint8Array:()=>i4,assignProp:()=>K2,assertNotEqual:()=>l0,assertNever:()=>f0,assertIs:()=>p0,assertEqual:()=>T0,assert:()=>e0,allowsEval:()=>G1,aborted:()=>W2,NUMBER_FORMAT_RANGES:()=>p4,Class:()=>n4,BIGINT_FORMAT_RANGES:()=>f4});function T0(w){return w}function l0(w){return w}function p0(w){}function f0(w){throw Error("Unexpected value in exhaustive check")}function e0(w){}function y2(w){let K=Object.values(w).filter((J)=>typeof J==="number");return Object.entries(w).filter(([J,P])=>K.indexOf(+J)===-1).map(([J,P])=>P)}function QK(w,K="|"){return w.map((W)=>SK(W)).join(K)}function q2(w,K){if(typeof K==="bigint")return K.toString();return K}function m2(w){return{get value(){{let W=w();return Object.defineProperty(this,"value",{value:W}),W}throw Error("cached value already set")}}}function T2(w){return w===null||w===void 0}function l2(w){let K=w.startsWith("^")?1:0,W=w.endsWith("$")?w.length-1:w.length;return w.slice(K,W)}function m4(w,K){let W=(w.toString().split(".")[1]||"").length,J=K.toString(),P=(J.split(".")[1]||"").length;if(P===0&&/\d?e-\d?/.test(J)){let M=J.match(/\d?e-(\d?)/);if(M?.[1])P=Number.parseInt(M[1])}let I=W>P?W:P,b=Number.parseInt(w.toFixed(I).replace(".","")),G=Number.parseInt(K.toFixed(I).replace(".",""));return b%G/10**I}var y4=Symbol("evaluating");function Iw(w,K,W){let J=void 0;Object.defineProperty(w,K,{get(){if(J===y4)return;if(J===void 0)J=y4,J=W();return J},set(P){Object.defineProperty(w,K,{value:P})},configurable:!0})}function i0(w){return Object.create(Object.getPrototypeOf(w),Object.getOwnPropertyDescriptors(w))}function K2(w,K,W){Object.defineProperty(w,K,{value:W,writable:!0,enumerable:!0,configurable:!0})}function iw(...w){let K={};for(let W of w){let J=Object.getOwnPropertyDescriptors(W);Object.assign(K,J)}return Object.defineProperties({},K)}function d0(w){return iw(w._zod.def)}function n0(w,K){if(!K)return w;return K.reduce((W,J)=>W?.[J],w)}function t0(w){let K=Object.keys(w),W=K.map((J)=>w[J]);return Promise.all(W).then((J)=>{let P={};for(let I=0;I<K.length;I++)P[K[I]]=J[I];return P})}function a0(w=10){let W="";for(let J=0;J<w;J++)W+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return W}function $K(w){return JSON.stringify(w)}function b1(w){return w.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}var YK="captureStackTrace"in Error?Error.captureStackTrace:(...w)=>{};function H2(w){return typeof w==="object"&&w!==null&&!Array.isArray(w)}var G1=m2(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(w){return!1}});function D2(w){if(H2(w)===!1)return!1;let K=w.constructor;if(K===void 0)return!0;if(typeof K!=="function")return!0;let W=K.prototype;if(H2(W)===!1)return!1;if(Object.prototype.hasOwnProperty.call(W,"isPrototypeOf")===!1)return!1;return!0}function T4(w){if(D2(w))return{...w};if(Array.isArray(w))return[...w];return w}function s0(w){let K=0;for(let W in w)if(Object.prototype.hasOwnProperty.call(w,W))K++;return K}var w9=(w)=>{let K=typeof w;switch(K){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(w)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(w))return"array";if(w===null)return"null";if(w.then&&typeof w.then==="function"&&w.catch&&typeof w.catch==="function")return"promise";if(typeof Map<"u"&&w instanceof Map)return"map";if(typeof Set<"u"&&w instanceof Set)return"set";if(typeof Date<"u"&&w instanceof Date)return"date";if(typeof File<"u"&&w instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${K}`)}},A1=new Set(["string","number","symbol"]),l4=new Set(["string","number","bigint","boolean","symbol","undefined"]);function Q2(w){return w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Cw(w,K,W){let J=new w._zod.constr(K??w._zod.def);if(!K||W?.parent)J._zod.parent=w;return J}function e(w){let K=w;if(!K)return{};if(typeof K==="string")return{error:()=>K};if(K?.message!==void 0){if(K?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");K.error=K.message}if(delete K.message,typeof K.error==="string")return{...K,error:()=>K.error};return K}function K9(w){let K;return new Proxy({},{get(W,J,P){return K??(K=w()),Reflect.get(K,J,P)},set(W,J,P,I){return K??(K=w()),Reflect.set(K,J,P,I)},has(W,J){return K??(K=w()),Reflect.has(K,J)},deleteProperty(W,J){return K??(K=w()),Reflect.deleteProperty(K,J)},ownKeys(W){return K??(K=w()),Reflect.ownKeys(K)},getOwnPropertyDescriptor(W,J){return K??(K=w()),Reflect.getOwnPropertyDescriptor(K,J)},defineProperty(W,J,P){return K??(K=w()),Reflect.defineProperty(K,J,P)}})}function SK(w){if(typeof w==="bigint")return w.toString()+"n";if(typeof w==="string")return`"${w}"`;return`${w}`}function M1(w){return Object.keys(w).filter((K)=>{return w[K]._zod.optin==="optional"&&w[K]._zod.optout==="optional"})}var p4={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},f4={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function W9(w,K){let W=w._zod.def,J=W.checks;if(J&&J.length>0)throw Error(".pick() cannot be used on object schemas containing refinements");let I=iw(w._zod.def,{get shape(){let b={};for(let G in K){if(!(G in W.shape))throw Error(`Unrecognized key: "${G}"`);if(!K[G])continue;b[G]=W.shape[G]}return K2(this,"shape",b),b},checks:[]});return Cw(w,I)}function J9(w,K){let W=w._zod.def,J=W.checks;if(J&&J.length>0)throw Error(".omit() cannot be used on object schemas containing refinements");let I=iw(w._zod.def,{get shape(){let b={...w._zod.def.shape};for(let G in K){if(!(G in W.shape))throw Error(`Unrecognized key: "${G}"`);if(!K[G])continue;delete b[G]}return K2(this,"shape",b),b},checks:[]});return Cw(w,I)}function P9(w,K){if(!D2(K))throw Error("Invalid input to extend: expected a plain object");let W=w._zod.def.checks;if(W&&W.length>0){let I=w._zod.def.shape;for(let b in K)if(Object.getOwnPropertyDescriptor(I,b)!==void 0)throw Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}let P=iw(w._zod.def,{get shape(){let I={...w._zod.def.shape,...K};return K2(this,"shape",I),I}});return Cw(w,P)}function I9(w,K){if(!D2(K))throw Error("Invalid input to safeExtend: expected a plain object");let W=iw(w._zod.def,{get shape(){let J={...w._zod.def.shape,...K};return K2(this,"shape",J),J}});return Cw(w,W)}function b9(w,K){let W=iw(w._zod.def,{get shape(){let J={...w._zod.def.shape,...K._zod.def.shape};return K2(this,"shape",J),J},get catchall(){return K._zod.def.catchall},checks:[]});return Cw(w,W)}function G9(w,K,W){let P=K._zod.def.checks;if(P&&P.length>0)throw Error(".partial() cannot be used on object schemas containing refinements");let b=iw(K._zod.def,{get shape(){let G=K._zod.def.shape,M={...G};if(W)for(let O in W){if(!(O in G))throw Error(`Unrecognized key: "${O}"`);if(!W[O])continue;M[O]=w?new w({type:"optional",innerType:G[O]}):G[O]}else for(let O in G)M[O]=w?new w({type:"optional",innerType:G[O]}):G[O];return K2(this,"shape",M),M},checks:[]});return Cw(K,b)}function A9(w,K,W){let J=iw(K._zod.def,{get shape(){let P=K._zod.def.shape,I={...P};if(W)for(let b in W){if(!(b in I))throw Error(`Unrecognized key: "${b}"`);if(!W[b])continue;I[b]=new w({type:"nonoptional",innerType:P[b]})}else for(let b in P)I[b]=new w({type:"nonoptional",innerType:P[b]});return K2(this,"shape",I),I}});return Cw(K,J)}function W2(w,K=0){if(w.aborted===!0)return!0;for(let W=K;W<w.issues.length;W++)if(w.issues[W]?.continue!==!0)return!0;return!1}function p2(w,K){return K.map((W)=>{var J;return(J=W).path??(J.path=[]),W.path.unshift(w),W})}function u2(w){return typeof w==="string"?w:w?.message}function mw(w,K,W){let J={...w,path:w.path??[]};if(!w.message){let P=u2(w.inst?._zod.def?.error?.(w))??u2(K?.error?.(w))??u2(W.customError?.(w))??u2(W.localeError?.(w))??"Invalid input";J.message=P}if(delete J.inst,delete J.continue,!K?.reportInput)delete J.input;return J}function e4(w){if(w instanceof Set)return"set";if(w instanceof Map)return"map";if(w instanceof File)return"file";return"unknown"}function f2(w){if(Array.isArray(w))return"array";if(typeof w==="string")return"string";return"unknown"}function O1(w){let K=typeof w;switch(K){case"number":return Number.isNaN(w)?"nan":"number";case"object":{if(w===null)return"null";if(Array.isArray(w))return"array";let W=w;if(W&&Object.getPrototypeOf(W)!==Object.prototype&&"constructor"in W&&W.constructor)return W.constructor.name}}return K}function h2(...w){let[K,W,J]=w;if(typeof K==="string")return{message:K,code:"custom",input:W,inst:J};return{...K}}function M9(w){return Object.entries(w).filter(([K,W])=>{return Number.isNaN(Number.parseInt(K,10))}).map((K)=>K[1])}function i4(w){let K=atob(w),W=new Uint8Array(K.length);for(let J=0;J<K.length;J++)W[J]=K.charCodeAt(J);return W}function d4(w){let K="";for(let W=0;W<w.length;W++)K+=String.fromCharCode(w[W]);return btoa(K)}function O9(w){let K=w.replace(/-/g,"+").replace(/_/g,"/"),W="=".repeat((4-K.length%4)%4);return i4(K+W)}function B9(w){return d4(w).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function N9(w){let K=w.replace(/^0x/,"");if(K.length%2!==0)throw Error("Invalid hex string length");let W=new Uint8Array(K.length/2);for(let J=0;J<K.length;J+=2)W[J/2]=Number.parseInt(K.slice(J,J+2),16);return W}function D9(w){return Array.from(w).map((K)=>K.toString(16).padStart(2,"0")).join("")}class n4{constructor(...w){}}var t4=(w,K)=>{w.name="$ZodError",Object.defineProperty(w,"_zod",{value:w._zod,enumerable:!1}),Object.defineProperty(w,"issues",{value:K,enumerable:!1}),w.message=JSON.stringify(K,q2,2),Object.defineProperty(w,"toString",{value:()=>w.message,enumerable:!1})},XK=h("$ZodError",t4),B1=h("$ZodError",t4,{Parent:Error});function N1(w,K=(W)=>W.message){let W={},J=[];for(let P of w.issues)if(P.path.length>0)W[P.path[0]]=W[P.path[0]]||[],W[P.path[0]].push(K(P));else J.push(K(P));return{formErrors:J,fieldErrors:W}}function D1(w,K=(W)=>W.message){let W={_errors:[]},J=(P)=>{for(let I of P.issues)if(I.code==="invalid_union"&&I.errors.length)I.errors.map((b)=>J({issues:b}));else if(I.code==="invalid_key")J({issues:I.issues});else if(I.code==="invalid_element")J({issues:I.issues});else if(I.path.length===0)W._errors.push(K(I));else{let b=W,G=0;while(G<I.path.length){let M=I.path[G];if(G!==I.path.length-1)b[M]=b[M]||{_errors:[]};else b[M]=b[M]||{_errors:[]},b[M]._errors.push(K(I));b=b[M],G++}}};return J(w),W}var VK=(w)=>(K,W,J,P)=>{let I=J?Object.assign(J,{async:!1}):{async:!1},b=K._zod.run({value:W,issues:[]},I);if(b instanceof Promise)throw new ew;if(b.issues.length){let G=new(P?.Err??w)(b.issues.map((M)=>mw(M,I,gw())));throw YK(G,P?.callee),G}return b.value};var LK=(w)=>async(K,W,J,P)=>{let I=J?Object.assign(J,{async:!0}):{async:!0},b=K._zod.run({value:W,issues:[]},I);if(b instanceof Promise)b=await b;if(b.issues.length){let G=new(P?.Err??w)(b.issues.map((M)=>mw(M,I,gw())));throw YK(G,P?.callee),G}return b.value};var e2=(w)=>(K,W,J)=>{let P=J?{...J,async:!1}:{async:!1},I=K._zod.run({value:W,issues:[]},P);if(I instanceof Promise)throw new ew;return I.issues.length?{success:!1,error:new(w??XK)(I.issues.map((b)=>mw(b,P,gw())))}:{success:!0,data:I.value}},a4=e2(B1),i2=(w)=>async(K,W,J)=>{let P=J?Object.assign(J,{async:!0}):{async:!0},I=K._zod.run({value:W,issues:[]},P);if(I instanceof Promise)I=await I;return I.issues.length?{success:!1,error:new w(I.issues.map((b)=>mw(b,P,gw())))}:{success:!0,data:I.value}},s4=i2(B1),w6=(w)=>(K,W,J)=>{let P=J?Object.assign(J,{direction:"backward"}):{direction:"backward"};return VK(w)(K,W,P)};var K6=(w)=>(K,W,J)=>{return VK(w)(K,W,J)};var W6=(w)=>async(K,W,J)=>{let P=J?Object.assign(J,{direction:"backward"}):{direction:"backward"};return LK(w)(K,W,P)};var J6=(w)=>async(K,W,J)=>{return LK(w)(K,W,J)};var P6=(w)=>(K,W,J)=>{let P=J?Object.assign(J,{direction:"backward"}):{direction:"backward"};return e2(w)(K,W,P)};var I6=(w)=>(K,W,J)=>{return e2(w)(K,W,J)};var b6=(w)=>async(K,W,J)=>{let P=J?Object.assign(J,{direction:"backward"}):{direction:"backward"};return i2(w)(K,W,P)};var G6=(w)=>async(K,W,J)=>{return i2(w)(K,W,J)};var A6=/^[cC][^\s-]{8,}$/,M6=/^[0-9a-z]+$/,O6=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,B6=/^[0-9a-vA-V]{20}$/,N6=/^[A-Za-z0-9]{27}$/,D6=/^[a-zA-Z0-9_-]{21}$/,Q6=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/;var $6=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Q1=(w)=>{if(!w)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${w}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)};var Y6=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;var $9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function S6(){return new RegExp($9,"u")}var X6=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,V6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/;var L6=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,E6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,U6=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,$1=/^[A-Za-z0-9_-]*$/;var H6=/^\+[1-9]\d{6,14}$/,q6="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",h6=new RegExp(`^${q6}$`);function F6(w){return typeof w.precision==="number"?w.precision===-1?"(?:[01]\\d|2[0-3]):[0-5]\\d":w.precision===0?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${w.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function z6(w){return new RegExp(`^${F6(w)}$`)}function R6(w){let K=F6({precision:w.precision}),W=["Z"];if(w.local)W.push("");if(w.offset)W.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let J=`${K}(?:${W.join("|")})`;return new RegExp(`^${q6}T(?:${J})$`)}var v6=(w)=>{let K=w?`[\\s\\S]{${w?.minimum??0},${w?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${K}$`)};var j6=/^[^A-Z]*$/,Z6=/^[^a-z]*$/;var jw=h("$ZodCheck",(w,K)=>{var W;w._zod??(w._zod={}),w._zod.def=K,(W=w._zod).onattach??(W.onattach=[])});var k6=h("$ZodCheckMaxLength",(w,K)=>{var W;jw.init(w,K),(W=w._zod.def).when??(W.when=(J)=>{let P=J.value;return!T2(P)&&P.length!==void 0}),w._zod.onattach.push((J)=>{let P=J._zod.bag.maximum??Number.POSITIVE_INFINITY;if(K.maximum<P)J._zod.bag.maximum=K.maximum}),w._zod.check=(J)=>{let P=J.value;if(P.length<=K.maximum)return;let b=f2(P);J.issues.push({origin:b,code:"too_big",maximum:K.maximum,inclusive:!0,input:P,inst:w,continue:!K.abort})}}),g6=h("$ZodCheckMinLength",(w,K)=>{var W;jw.init(w,K),(W=w._zod.def).when??(W.when=(J)=>{let P=J.value;return!T2(P)&&P.length!==void 0}),w._zod.onattach.push((J)=>{let P=J._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(K.minimum>P)J._zod.bag.minimum=K.minimum}),w._zod.check=(J)=>{let P=J.value;if(P.length>=K.minimum)return;let b=f2(P);J.issues.push({origin:b,code:"too_small",minimum:K.minimum,inclusive:!0,input:P,inst:w,continue:!K.abort})}}),C6=h("$ZodCheckLengthEquals",(w,K)=>{var W;jw.init(w,K),(W=w._zod.def).when??(W.when=(J)=>{let P=J.value;return!T2(P)&&P.length!==void 0}),w._zod.onattach.push((J)=>{let P=J._zod.bag;P.minimum=K.length,P.maximum=K.length,P.length=K.length}),w._zod.check=(J)=>{let P=J.value,I=P.length;if(I===K.length)return;let b=f2(P),G=I>K.length;J.issues.push({origin:b,...G?{code:"too_big",maximum:K.length}:{code:"too_small",minimum:K.length},inclusive:!0,exact:!0,input:J.value,inst:w,continue:!K.abort})}}),n2=h("$ZodCheckStringFormat",(w,K)=>{var W,J;if(jw.init(w,K),w._zod.onattach.push((P)=>{let I=P._zod.bag;if(I.format=K.format,K.pattern)I.patterns??(I.patterns=new Set),I.patterns.add(K.pattern)}),K.pattern)(W=w._zod).check??(W.check=(P)=>{if(K.pattern.lastIndex=0,K.pattern.test(P.value))return;P.issues.push({origin:"string",code:"invalid_format",format:K.format,input:P.value,...K.pattern?{pattern:K.pattern.toString()}:{},inst:w,continue:!K.abort})});else(J=w._zod).check??(J.check=()=>{})}),x6=h("$ZodCheckRegex",(w,K)=>{n2.init(w,K),w._zod.check=(W)=>{if(K.pattern.lastIndex=0,K.pattern.test(W.value))return;W.issues.push({origin:"string",code:"invalid_format",format:"regex",input:W.value,pattern:K.pattern.toString(),inst:w,continue:!K.abort})}}),o6=h("$ZodCheckLowerCase",(w,K)=>{K.pattern??(K.pattern=j6),n2.init(w,K)}),c6=h("$ZodCheckUpperCase",(w,K)=>{K.pattern??(K.pattern=Z6),n2.init(w,K)}),_6=h("$ZodCheckIncludes",(w,K)=>{jw.init(w,K);let W=Q2(K.includes),J=new RegExp(typeof K.position==="number"?`^.{${K.position}}${W}`:W);K.pattern=J,w._zod.onattach.push((P)=>{let I=P._zod.bag;I.patterns??(I.patterns=new Set),I.patterns.add(J)}),w._zod.check=(P)=>{if(P.value.includes(K.includes,K.position))return;P.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:K.includes,input:P.value,inst:w,continue:!K.abort})}}),r6=h("$ZodCheckStartsWith",(w,K)=>{jw.init(w,K);let W=new RegExp(`^${Q2(K.prefix)}.*`);K.pattern??(K.pattern=W),w._zod.onattach.push((J)=>{let P=J._zod.bag;P.patterns??(P.patterns=new Set),P.patterns.add(W)}),w._zod.check=(J)=>{if(J.value.startsWith(K.prefix))return;J.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:K.prefix,input:J.value,inst:w,continue:!K.abort})}}),u6=h("$ZodCheckEndsWith",(w,K)=>{jw.init(w,K);let W=new RegExp(`.*${Q2(K.suffix)}$`);K.pattern??(K.pattern=W),w._zod.onattach.push((J)=>{let P=J._zod.bag;P.patterns??(P.patterns=new Set),P.patterns.add(W)}),w._zod.check=(J)=>{if(J.value.endsWith(K.suffix))return;J.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:K.suffix,input:J.value,inst:w,continue:!K.abort})}});var y6=h("$ZodCheckOverwrite",(w,K)=>{jw.init(w,K),w._zod.check=(W)=>{W.value=K.tx(W.value)}});class Y1{constructor(w=[]){if(this.content=[],this.indent=0,this)this.args=w}indented(w){this.indent+=1,w(this),this.indent-=1}write(w){if(typeof w==="function"){w(this,{execution:"sync"}),w(this,{execution:"async"});return}let W=w.split(`
`).filter((I)=>I),J=Math.min(...W.map((I)=>I.length-I.trimStart().length)),P=W.map((I)=>I.slice(J)).map((I)=>" ".repeat(this.indent*2)+I);for(let I of P)this.content.push(I)}compile(){let w=Function,K=this?.args,J=[...(this?.content??[""]).map((P)=>`  ${P}`)];return new w(...K,J.join(`
`))}}var T6={major:4,minor:3,patch:5};var Dw=h("$ZodType",(w,K)=>{var W;w??(w={}),w._zod.def=K,w._zod.bag=w._zod.bag||{},w._zod.version=T6;let J=[...w._zod.def.checks??[]];if(w._zod.traits.has("$ZodCheck"))J.unshift(w);for(let P of J)for(let I of P._zod.onattach)I(w);if(J.length===0)(W=w._zod).deferred??(W.deferred=[]),w._zod.deferred?.push(()=>{w._zod.run=w._zod.parse});else{let P=(b,G,M)=>{let O=W2(b),D;for(let Q of G){if(Q._zod.def.when){if(!Q._zod.def.when(b))continue}else if(O)continue;let N=b.issues.length,L=Q._zod.check(b);if(L instanceof Promise&&M?.async===!1)throw new ew;if(D||L instanceof Promise)D=(D??Promise.resolve()).then(async()=>{if(await L,b.issues.length===N)return;if(!O)O=W2(b,N)});else{if(b.issues.length===N)continue;if(!O)O=W2(b,N)}}if(D)return D.then(()=>{return b});return b},I=(b,G,M)=>{if(W2(b))return b.aborted=!0,b;let O=P(G,J,M);if(O instanceof Promise){if(M.async===!1)throw new ew;return O.then((D)=>w._zod.parse(D,M))}return w._zod.parse(O,M)};w._zod.run=(b,G)=>{if(G.skipChecks)return w._zod.parse(b,G);if(G.direction==="backward"){let O=w._zod.parse({value:b.value,issues:[]},{...G,skipChecks:!0});if(O instanceof Promise)return O.then((D)=>{return I(D,b,G)});return I(O,b,G)}let M=w._zod.parse(b,G);if(M instanceof Promise){if(G.async===!1)throw new ew;return M.then((O)=>P(O,J,G))}return P(M,J,G)}}Iw(w,"~standard",()=>({validate:(P)=>{try{let I=a4(w,P);return I.success?{value:I.data}:{issues:I.error?.issues}}catch(I){return s4(w,P).then((b)=>b.success?{value:b.data}:{issues:b.error?.issues})}},vendor:"zod",version:1}))}),HK=h("$ZodString",(w,K)=>{Dw.init(w,K),w._zod.pattern=[...w?._zod.bag?.patterns??[]].pop()??v6(w._zod.bag),w._zod.parse=(W,J)=>{if(K.coerce)try{W.value=String(W.value)}catch(P){}if(typeof W.value==="string")return W;return W.issues.push({expected:"string",code:"invalid_type",input:W.value,inst:w}),W}}),Aw=h("$ZodStringFormat",(w,K)=>{n2.init(w,K),HK.init(w,K)}),a6=h("$ZodGUID",(w,K)=>{K.pattern??(K.pattern=$6),Aw.init(w,K)}),s6=h("$ZodUUID",(w,K)=>{if(K.version){let J={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[K.version];if(J===void 0)throw Error(`Invalid UUID version: "${K.version}"`);K.pattern??(K.pattern=Q1(J))}else K.pattern??(K.pattern=Q1());Aw.init(w,K)}),w8=h("$ZodEmail",(w,K)=>{K.pattern??(K.pattern=Y6),Aw.init(w,K)}),K8=h("$ZodURL",(w,K)=>{Aw.init(w,K),w._zod.check=(W)=>{try{let J=W.value.trim(),P=new URL(J);if(K.hostname){if(K.hostname.lastIndex=0,!K.hostname.test(P.hostname))W.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:K.hostname.source,input:W.value,inst:w,continue:!K.abort})}if(K.protocol){if(K.protocol.lastIndex=0,!K.protocol.test(P.protocol.endsWith(":")?P.protocol.slice(0,-1):P.protocol))W.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:K.protocol.source,input:W.value,inst:w,continue:!K.abort})}if(K.normalize)W.value=P.href;else W.value=J;return}catch(J){W.issues.push({code:"invalid_format",format:"url",input:W.value,inst:w,continue:!K.abort})}}}),W8=h("$ZodEmoji",(w,K)=>{K.pattern??(K.pattern=S6()),Aw.init(w,K)}),J8=h("$ZodNanoID",(w,K)=>{K.pattern??(K.pattern=D6),Aw.init(w,K)}),P8=h("$ZodCUID",(w,K)=>{K.pattern??(K.pattern=A6),Aw.init(w,K)}),I8=h("$ZodCUID2",(w,K)=>{K.pattern??(K.pattern=M6),Aw.init(w,K)}),b8=h("$ZodULID",(w,K)=>{K.pattern??(K.pattern=O6),Aw.init(w,K)}),G8=h("$ZodXID",(w,K)=>{K.pattern??(K.pattern=B6),Aw.init(w,K)}),A8=h("$ZodKSUID",(w,K)=>{K.pattern??(K.pattern=N6),Aw.init(w,K)}),M8=h("$ZodISODateTime",(w,K)=>{K.pattern??(K.pattern=R6(K)),Aw.init(w,K)}),O8=h("$ZodISODate",(w,K)=>{K.pattern??(K.pattern=h6),Aw.init(w,K)}),B8=h("$ZodISOTime",(w,K)=>{K.pattern??(K.pattern=z6(K)),Aw.init(w,K)}),N8=h("$ZodISODuration",(w,K)=>{K.pattern??(K.pattern=Q6),Aw.init(w,K)}),D8=h("$ZodIPv4",(w,K)=>{K.pattern??(K.pattern=X6),Aw.init(w,K),w._zod.bag.format="ipv4"}),Q8=h("$ZodIPv6",(w,K)=>{K.pattern??(K.pattern=V6),Aw.init(w,K),w._zod.bag.format="ipv6",w._zod.check=(W)=>{try{new URL(`http://[${W.value}]`)}catch{W.issues.push({code:"invalid_format",format:"ipv6",input:W.value,inst:w,continue:!K.abort})}}});var $8=h("$ZodCIDRv4",(w,K)=>{K.pattern??(K.pattern=L6),Aw.init(w,K)}),Y8=h("$ZodCIDRv6",(w,K)=>{K.pattern??(K.pattern=E6),Aw.init(w,K),w._zod.check=(W)=>{let J=W.value.split("/");try{if(J.length!==2)throw Error();let[P,I]=J;if(!I)throw Error();let b=Number(I);if(`${b}`!==I)throw Error();if(b<0||b>128)throw Error();new URL(`http://[${P}]`)}catch{W.issues.push({code:"invalid_format",format:"cidrv6",input:W.value,inst:w,continue:!K.abort})}}});function S8(w){if(w==="")return!0;if(w.length%4!==0)return!1;try{return atob(w),!0}catch{return!1}}var X8=h("$ZodBase64",(w,K)=>{K.pattern??(K.pattern=U6),Aw.init(w,K),w._zod.bag.contentEncoding="base64",w._zod.check=(W)=>{if(S8(W.value))return;W.issues.push({code:"invalid_format",format:"base64",input:W.value,inst:w,continue:!K.abort})}});function Y9(w){if(!$1.test(w))return!1;let K=w.replace(/[-_]/g,(J)=>J==="-"?"+":"/"),W=K.padEnd(Math.ceil(K.length/4)*4,"=");return S8(W)}var V8=h("$ZodBase64URL",(w,K)=>{K.pattern??(K.pattern=$1),Aw.init(w,K),w._zod.bag.contentEncoding="base64url",w._zod.check=(W)=>{if(Y9(W.value))return;W.issues.push({code:"invalid_format",format:"base64url",input:W.value,inst:w,continue:!K.abort})}}),L8=h("$ZodE164",(w,K)=>{K.pattern??(K.pattern=H6),Aw.init(w,K)});function S9(w,K=null){try{let W=w.split(".");if(W.length!==3)return!1;let[J]=W;if(!J)return!1;let P=JSON.parse(atob(J));if("typ"in P&&P?.typ!=="JWT")return!1;if(!P.alg)return!1;if(K&&(!("alg"in P)||P.alg!==K))return!1;return!0}catch{return!1}}var E8=h("$ZodJWT",(w,K)=>{Aw.init(w,K),w._zod.check=(W)=>{if(S9(W.value,K.alg))return;W.issues.push({code:"invalid_format",format:"jwt",input:W.value,inst:w,continue:!K.abort})}});var U8=h("$ZodUnknown",(w,K)=>{Dw.init(w,K),w._zod.parse=(W)=>W}),H8=h("$ZodNever",(w,K)=>{Dw.init(w,K),w._zod.parse=(W,J)=>{return W.issues.push({expected:"never",code:"invalid_type",input:W.value,inst:w}),W}});function l6(w,K,W){if(w.issues.length)K.issues.push(...p2(W,w.issues));K.value[W]=w.value}var q8=h("$ZodArray",(w,K)=>{Dw.init(w,K),w._zod.parse=(W,J)=>{let P=W.value;if(!Array.isArray(P))return W.issues.push({expected:"array",code:"invalid_type",input:P,inst:w}),W;W.value=Array(P.length);let I=[];for(let b=0;b<P.length;b++){let G=P[b],M=K.element._zod.run({value:G,issues:[]},J);if(M instanceof Promise)I.push(M.then((O)=>l6(O,W,b)));else l6(M,W,b)}if(I.length)return Promise.all(I).then(()=>W);return W}});function UK(w,K,W,J,P){if(w.issues.length){if(P&&!(W in J))return;K.issues.push(...p2(W,w.issues))}if(w.value===void 0){if(W in J)K.value[W]=void 0}else K.value[W]=w.value}function h8(w){let K=Object.keys(w.shape);for(let J of K)if(!w.shape?.[J]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${J}": expected a Zod schema`);let W=M1(w.shape);return{...w,keys:K,keySet:new Set(K),numKeys:K.length,optionalKeys:new Set(W)}}function F8(w,K,W,J,P,I){let b=[],G=P.keySet,M=P.catchall._zod,O=M.def.type,D=M.optout==="optional";for(let Q in K){if(G.has(Q))continue;if(O==="never"){b.push(Q);continue}let N=M.run({value:K[Q],issues:[]},J);if(N instanceof Promise)w.push(N.then((L)=>UK(L,W,Q,K,D)));else UK(N,W,Q,K,D)}if(b.length)W.issues.push({code:"unrecognized_keys",keys:b,input:K,inst:I});if(!w.length)return W;return Promise.all(w).then(()=>{return W})}var X9=h("$ZodObject",(w,K)=>{if(Dw.init(w,K),!Object.getOwnPropertyDescriptor(K,"shape")?.get){let G=K.shape;Object.defineProperty(K,"shape",{get:()=>{let M={...G};return Object.defineProperty(K,"shape",{value:M}),M}})}let J=m2(()=>h8(K));Iw(w._zod,"propValues",()=>{let G=K.shape,M={};for(let O in G){let D=G[O]._zod;if(D.values){M[O]??(M[O]=new Set);for(let Q of D.values)M[O].add(Q)}}return M});let P=H2,I=K.catchall,b;w._zod.parse=(G,M)=>{b??(b=J.value);let O=G.value;if(!P(O))return G.issues.push({expected:"object",code:"invalid_type",input:O,inst:w}),G;G.value={};let D=[],Q=b.shape;for(let N of b.keys){let L=Q[N],k=L._zod.optout==="optional",B=L._zod.run({value:O[N],issues:[]},M);if(B instanceof Promise)D.push(B.then((v)=>UK(v,G,N,O,k)));else UK(B,G,N,O,k)}if(!I)return D.length?Promise.all(D).then(()=>G):G;return F8(D,O,G,M,J.value,w)}}),z8=h("$ZodObjectJIT",(w,K)=>{X9.init(w,K);let W=w._zod.parse,J=m2(()=>h8(K)),P=(N)=>{let L=new Y1(["shape","payload","ctx"]),k=J.value,B=(x)=>{let R=$K(x);return`shape[${R}]._zod.run({ value: input[${R}], issues: [] }, ctx)`};L.write("const input = payload.value;");let v=Object.create(null),A=0;for(let x of k.keys)v[x]=`key_${A++}`;L.write("const newResult = {};");for(let x of k.keys){let R=v[x],C=$K(x),_=N[x]?._zod?.optout==="optional";if(L.write(`const ${R} = ${B(x)};`),_)L.write(`
        if (${R}.issues.length) {
          if (${C} in input) {
            payload.issues = payload.issues.concat(${R}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${C}, ...iss.path] : [${C}]
            })));
          }
        }
        
        if (${R}.value === undefined) {
          if (${C} in input) {
            newResult[${C}] = undefined;
          }
        } else {
          newResult[${C}] = ${R}.value;
        }
        
      `);else L.write(`
        if (${R}.issues.length) {
          payload.issues = payload.issues.concat(${R}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${C}, ...iss.path] : [${C}]
          })));
        }
        
        if (${R}.value === undefined) {
          if (${C} in input) {
            newResult[${C}] = undefined;
          }
        } else {
          newResult[${C}] = ${R}.value;
        }
        
      `)}L.write("payload.value = newResult;"),L.write("return payload;");let c=L.compile();return(x,R)=>c(N,x,R)},I,b=H2,G=!DK.jitless,O=G&&G1.value,D=K.catchall,Q;w._zod.parse=(N,L)=>{Q??(Q=J.value);let k=N.value;if(!b(k))return N.issues.push({expected:"object",code:"invalid_type",input:k,inst:w}),N;if(G&&O&&L?.async===!1&&L.jitless!==!0){if(!I)I=P(K.shape);if(N=I(N,L),!D)return N;return F8([],k,N,L,Q,w)}return W(N,L)}});function p6(w,K,W,J){for(let I of w)if(I.issues.length===0)return K.value=I.value,K;let P=w.filter((I)=>!W2(I));if(P.length===1)return K.value=P[0].value,P[0];return K.issues.push({code:"invalid_union",input:K.value,inst:W,errors:w.map((I)=>I.issues.map((b)=>mw(b,J,gw())))}),K}var R8=h("$ZodUnion",(w,K)=>{Dw.init(w,K),Iw(w._zod,"optin",()=>K.options.some((P)=>P._zod.optin==="optional")?"optional":void 0),Iw(w._zod,"optout",()=>K.options.some((P)=>P._zod.optout==="optional")?"optional":void 0),Iw(w._zod,"values",()=>{if(K.options.every((P)=>P._zod.values))return new Set(K.options.flatMap((P)=>Array.from(P._zod.values)));return}),Iw(w._zod,"pattern",()=>{if(K.options.every((P)=>P._zod.pattern)){let P=K.options.map((I)=>I._zod.pattern);return new RegExp(`^(${P.map((I)=>l2(I.source)).join("|")})$`)}return});let W=K.options.length===1,J=K.options[0]._zod.run;w._zod.parse=(P,I)=>{if(W)return J(P,I);let b=!1,G=[];for(let M of K.options){let O=M._zod.run({value:P.value,issues:[]},I);if(O instanceof Promise)G.push(O),b=!0;else{if(O.issues.length===0)return O;G.push(O)}}if(!b)return p6(G,P,w,I);return Promise.all(G).then((M)=>{return p6(M,P,w,I)})}});var v8=h("$ZodIntersection",(w,K)=>{Dw.init(w,K),w._zod.parse=(W,J)=>{let P=W.value,I=K.left._zod.run({value:P,issues:[]},J),b=K.right._zod.run({value:P,issues:[]},J);if(I instanceof Promise||b instanceof Promise)return Promise.all([I,b]).then(([M,O])=>{return f6(W,M,O)});return f6(W,I,b)}});function S1(w,K){if(w===K)return{valid:!0,data:w};if(w instanceof Date&&K instanceof Date&&+w===+K)return{valid:!0,data:w};if(D2(w)&&D2(K)){let W=Object.keys(K),J=Object.keys(w).filter((I)=>W.indexOf(I)!==-1),P={...w,...K};for(let I of J){let b=S1(w[I],K[I]);if(!b.valid)return{valid:!1,mergeErrorPath:[I,...b.mergeErrorPath]};P[I]=b.data}return{valid:!0,data:P}}if(Array.isArray(w)&&Array.isArray(K)){if(w.length!==K.length)return{valid:!1,mergeErrorPath:[]};let W=[];for(let J=0;J<w.length;J++){let P=w[J],I=K[J],b=S1(P,I);if(!b.valid)return{valid:!1,mergeErrorPath:[J,...b.mergeErrorPath]};W.push(b.data)}return{valid:!0,data:W}}return{valid:!1,mergeErrorPath:[]}}function f6(w,K,W){let J=new Map,P;for(let G of K.issues)if(G.code==="unrecognized_keys"){P??(P=G);for(let M of G.keys){if(!J.has(M))J.set(M,{});J.get(M).l=!0}}else w.issues.push(G);for(let G of W.issues)if(G.code==="unrecognized_keys")for(let M of G.keys){if(!J.has(M))J.set(M,{});J.get(M).r=!0}else w.issues.push(G);let I=[...J].filter(([,G])=>G.l&&G.r).map(([G])=>G);if(I.length&&P)w.issues.push({...P,keys:I});if(W2(w))return w;let b=S1(K.value,W.value);if(!b.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(b.mergeErrorPath)}`);return w.value=b.data,w}var j8=h("$ZodEnum",(w,K)=>{Dw.init(w,K);let W=y2(K.entries),J=new Set(W);w._zod.values=J,w._zod.pattern=new RegExp(`^(${W.filter((P)=>A1.has(typeof P)).map((P)=>typeof P==="string"?Q2(P):P.toString()).join("|")})$`),w._zod.parse=(P,I)=>{let b=P.value;if(J.has(b))return P;return P.issues.push({code:"invalid_value",values:W,input:b,inst:w}),P}});var Z8=h("$ZodTransform",(w,K)=>{Dw.init(w,K),w._zod.parse=(W,J)=>{if(J.direction==="backward")throw new r2(w.constructor.name);let P=K.transform(W.value,W);if(J.async)return(P instanceof Promise?P:Promise.resolve(P)).then((b)=>{return W.value=b,W});if(P instanceof Promise)throw new ew;return W.value=P,W}});function e6(w,K){if(w.issues.length&&K===void 0)return{issues:[],value:void 0};return w}var X1=h("$ZodOptional",(w,K)=>{Dw.init(w,K),w._zod.optin="optional",w._zod.optout="optional",Iw(w._zod,"values",()=>{return K.innerType._zod.values?new Set([...K.innerType._zod.values,void 0]):void 0}),Iw(w._zod,"pattern",()=>{let W=K.innerType._zod.pattern;return W?new RegExp(`^(${l2(W.source)})?$`):void 0}),w._zod.parse=(W,J)=>{if(K.innerType._zod.optin==="optional"){let P=K.innerType._zod.run(W,J);if(P instanceof Promise)return P.then((I)=>e6(I,W.value));return e6(P,W.value)}if(W.value===void 0)return W;return K.innerType._zod.run(W,J)}}),k8=h("$ZodExactOptional",(w,K)=>{X1.init(w,K),Iw(w._zod,"values",()=>K.innerType._zod.values),Iw(w._zod,"pattern",()=>K.innerType._zod.pattern),w._zod.parse=(W,J)=>{return K.innerType._zod.run(W,J)}}),g8=h("$ZodNullable",(w,K)=>{Dw.init(w,K),Iw(w._zod,"optin",()=>K.innerType._zod.optin),Iw(w._zod,"optout",()=>K.innerType._zod.optout),Iw(w._zod,"pattern",()=>{let W=K.innerType._zod.pattern;return W?new RegExp(`^(${l2(W.source)}|null)$`):void 0}),Iw(w._zod,"values",()=>{return K.innerType._zod.values?new Set([...K.innerType._zod.values,null]):void 0}),w._zod.parse=(W,J)=>{if(W.value===null)return W;return K.innerType._zod.run(W,J)}}),C8=h("$ZodDefault",(w,K)=>{Dw.init(w,K),w._zod.optin="optional",Iw(w._zod,"values",()=>K.innerType._zod.values),w._zod.parse=(W,J)=>{if(J.direction==="backward")return K.innerType._zod.run(W,J);if(W.value===void 0)return W.value=K.defaultValue,W;let P=K.innerType._zod.run(W,J);if(P instanceof Promise)return P.then((I)=>i6(I,K));return i6(P,K)}});function i6(w,K){if(w.value===void 0)w.value=K.defaultValue;return w}var x8=h("$ZodPrefault",(w,K)=>{Dw.init(w,K),w._zod.optin="optional",Iw(w._zod,"values",()=>K.innerType._zod.values),w._zod.parse=(W,J)=>{if(J.direction==="backward")return K.innerType._zod.run(W,J);if(W.value===void 0)W.value=K.defaultValue;return K.innerType._zod.run(W,J)}}),o8=h("$ZodNonOptional",(w,K)=>{Dw.init(w,K),Iw(w._zod,"values",()=>{let W=K.innerType._zod.values;return W?new Set([...W].filter((J)=>J!==void 0)):void 0}),w._zod.parse=(W,J)=>{let P=K.innerType._zod.run(W,J);if(P instanceof Promise)return P.then((I)=>d6(I,w));return d6(P,w)}});function d6(w,K){if(!w.issues.length&&w.value===void 0)w.issues.push({code:"invalid_type",expected:"nonoptional",input:w.value,inst:K});return w}var c8=h("$ZodCatch",(w,K)=>{Dw.init(w,K),Iw(w._zod,"optin",()=>K.innerType._zod.optin),Iw(w._zod,"optout",()=>K.innerType._zod.optout),Iw(w._zod,"values",()=>K.innerType._zod.values),w._zod.parse=(W,J)=>{if(J.direction==="backward")return K.innerType._zod.run(W,J);let P=K.innerType._zod.run(W,J);if(P instanceof Promise)return P.then((I)=>{if(W.value=I.value,I.issues.length)W.value=K.catchValue({...W,error:{issues:I.issues.map((b)=>mw(b,J,gw()))},input:W.value}),W.issues=[];return W});if(W.value=P.value,P.issues.length)W.value=K.catchValue({...W,error:{issues:P.issues.map((I)=>mw(I,J,gw()))},input:W.value}),W.issues=[];return W}});var _8=h("$ZodPipe",(w,K)=>{Dw.init(w,K),Iw(w._zod,"values",()=>K.in._zod.values),Iw(w._zod,"optin",()=>K.in._zod.optin),Iw(w._zod,"optout",()=>K.out._zod.optout),Iw(w._zod,"propValues",()=>K.in._zod.propValues),w._zod.parse=(W,J)=>{if(J.direction==="backward"){let I=K.out._zod.run(W,J);if(I instanceof Promise)return I.then((b)=>EK(b,K.in,J));return EK(I,K.in,J)}let P=K.in._zod.run(W,J);if(P instanceof Promise)return P.then((I)=>EK(I,K.out,J));return EK(P,K.out,J)}});function EK(w,K,W){if(w.issues.length)return w.aborted=!0,w;return K._zod.run({value:w.value,issues:w.issues},W)}var r8=h("$ZodReadonly",(w,K)=>{Dw.init(w,K),Iw(w._zod,"propValues",()=>K.innerType._zod.propValues),Iw(w._zod,"values",()=>K.innerType._zod.values),Iw(w._zod,"optin",()=>K.innerType?._zod?.optin),Iw(w._zod,"optout",()=>K.innerType?._zod?.optout),w._zod.parse=(W,J)=>{if(J.direction==="backward")return K.innerType._zod.run(W,J);let P=K.innerType._zod.run(W,J);if(P instanceof Promise)return P.then(n6);return n6(P)}});function n6(w){return w.value=Object.freeze(w.value),w}var u8=h("$ZodCustom",(w,K)=>{jw.init(w,K),Dw.init(w,K),w._zod.parse=(W,J)=>{return W},w._zod.check=(W)=>{let J=W.value,P=K.fn(J);if(P instanceof Promise)return P.then((I)=>t6(I,W,J,w));t6(P,W,J,w);return}});function t6(w,K,W,J){if(!w){let P={code:"custom",input:W,inst:J,path:[...J._zod.def.path??[]],continue:!J._zod.def.abort};if(J._zod.def.params)P.params=J._zod.def.params;K.issues.push(h2(P))}}var V9=()=>{let w={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"},map:{unit:"entries",verb:"to have"}};function K(P){return w[P]??null}let W={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},J={nan:"NaN"};return(P)=>{switch(P.code){case"invalid_type":{let I=J[P.expected]??P.expected,b=O1(P.input),G=J[b]??b;return`Invalid input: expected ${I}, received ${G}`}case"invalid_value":if(P.values.length===1)return`Invalid input: expected ${SK(P.values[0])}`;return`Invalid option: expected one of ${QK(P.values,"|")}`;case"too_big":{let I=P.inclusive?"<=":"<",b=K(P.origin);if(b)return`Too big: expected ${P.origin??"value"} to have ${I}${P.maximum.toString()} ${b.unit??"elements"}`;return`Too big: expected ${P.origin??"value"} to be ${I}${P.maximum.toString()}`}case"too_small":{let I=P.inclusive?">=":">",b=K(P.origin);if(b)return`Too small: expected ${P.origin} to have ${I}${P.minimum.toString()} ${b.unit}`;return`Too small: expected ${P.origin} to be ${I}${P.minimum.toString()}`}case"invalid_format":{let I=P;if(I.format==="starts_with")return`Invalid string: must start with "${I.prefix}"`;if(I.format==="ends_with")return`Invalid string: must end with "${I.suffix}"`;if(I.format==="includes")return`Invalid string: must include "${I.includes}"`;if(I.format==="regex")return`Invalid string: must match pattern ${I.pattern}`;return`Invalid ${W[I.format]??P.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${P.divisor}`;case"unrecognized_keys":return`Unrecognized key${P.keys.length>1?"s":""}: ${QK(P.keys,", ")}`;case"invalid_key":return`Invalid key in ${P.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${P.origin}`;default:return"Invalid input"}}};function V1(){return{localeError:V9()}}var y8,L9=Symbol("ZodOutput"),E9=Symbol("ZodInput");class m8{constructor(){this._map=new WeakMap,this._idmap=new Map}add(w,...K){let W=K[0];if(this._map.set(w,W),W&&typeof W==="object"&&"id"in W)this._idmap.set(W.id,w);return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(w){let K=this._map.get(w);if(K&&typeof K==="object"&&"id"in K)this._idmap.delete(K.id);return this._map.delete(w),this}get(w){let K=w._zod.parent;if(K){let W={...this.get(K)??{}};delete W.id;let J={...W,...this._map.get(w)};return Object.keys(J).length?J:void 0}return this._map.get(w)}has(w){return this._map.has(w)}}function T8(){return new m8}(y8=globalThis).__zod_globalRegistry??(y8.__zod_globalRegistry=T8());var J2=globalThis.__zod_globalRegistry;function l8(w,K){return new w({type:"string",...e(K)})}function L1(w,K){return new w({type:"string",format:"email",check:"string_format",abort:!1,...e(K)})}function E1(w,K){return new w({type:"string",format:"guid",check:"string_format",abort:!1,...e(K)})}function p8(w,K){return new w({type:"string",format:"uuid",check:"string_format",abort:!1,...e(K)})}function f8(w,K){return new w({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...e(K)})}function e8(w,K){return new w({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...e(K)})}function i8(w,K){return new w({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...e(K)})}function d8(w,K){return new w({type:"string",format:"url",check:"string_format",abort:!1,...e(K)})}function n8(w,K){return new w({type:"string",format:"emoji",check:"string_format",abort:!1,...e(K)})}function t8(w,K){return new w({type:"string",format:"nanoid",check:"string_format",abort:!1,...e(K)})}function a8(w,K){return new w({type:"string",format:"cuid",check:"string_format",abort:!1,...e(K)})}function s8(w,K){return new w({type:"string",format:"cuid2",check:"string_format",abort:!1,...e(K)})}function w3(w,K){return new w({type:"string",format:"ulid",check:"string_format",abort:!1,...e(K)})}function K3(w,K){return new w({type:"string",format:"xid",check:"string_format",abort:!1,...e(K)})}function W3(w,K){return new w({type:"string",format:"ksuid",check:"string_format",abort:!1,...e(K)})}function J3(w,K){return new w({type:"string",format:"ipv4",check:"string_format",abort:!1,...e(K)})}function P3(w,K){return new w({type:"string",format:"ipv6",check:"string_format",abort:!1,...e(K)})}function I3(w,K){return new w({type:"string",format:"cidrv4",check:"string_format",abort:!1,...e(K)})}function b3(w,K){return new w({type:"string",format:"cidrv6",check:"string_format",abort:!1,...e(K)})}function G3(w,K){return new w({type:"string",format:"base64",check:"string_format",abort:!1,...e(K)})}function A3(w,K){return new w({type:"string",format:"base64url",check:"string_format",abort:!1,...e(K)})}function M3(w,K){return new w({type:"string",format:"e164",check:"string_format",abort:!1,...e(K)})}function U1(w,K){return new w({type:"string",format:"jwt",check:"string_format",abort:!1,...e(K)})}function O3(w,K){return new w({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...e(K)})}function B3(w,K){return new w({type:"string",format:"date",check:"string_format",...e(K)})}function N3(w,K){return new w({type:"string",format:"time",check:"string_format",precision:null,...e(K)})}function D3(w,K){return new w({type:"string",format:"duration",check:"string_format",...e(K)})}function Q3(w){return new w({type:"unknown"})}function $3(w,K){return new w({type:"never",...e(K)})}function qK(w,K){return new k6({check:"max_length",...e(K),maximum:w})}function F2(w,K){return new g6({check:"min_length",...e(K),minimum:w})}function hK(w,K){return new C6({check:"length_equals",...e(K),length:w})}function H1(w,K){return new x6({check:"string_format",format:"regex",...e(K),pattern:w})}function q1(w){return new o6({check:"string_format",format:"lowercase",...e(w)})}function h1(w){return new c6({check:"string_format",format:"uppercase",...e(w)})}function F1(w,K){return new _6({check:"string_format",format:"includes",...e(K),includes:w})}function z1(w,K){return new r6({check:"string_format",format:"starts_with",...e(K),prefix:w})}function R1(w,K){return new u6({check:"string_format",format:"ends_with",...e(K),suffix:w})}function P2(w){return new y6({check:"overwrite",tx:w})}function v1(w){return P2((K)=>K.normalize(w))}function j1(){return P2((w)=>w.trim())}function Z1(){return P2((w)=>w.toLowerCase())}function k1(){return P2((w)=>w.toUpperCase())}function g1(){return P2((w)=>b1(w))}function Y3(w,K,W){return new w({type:"array",element:K,...e(W)})}function S3(w,K,W){return new w({type:"custom",check:"custom",fn:K,...e(W)})}function X3(w){let K=U9((W)=>{return W.addIssue=(J)=>{if(typeof J==="string")W.issues.push(h2(J,W.value,K._zod.def));else{let P=J;if(P.fatal)P.continue=!1;P.code??(P.code="custom"),P.input??(P.input=W.value),P.inst??(P.inst=K),P.continue??(P.continue=!K._zod.def.abort),W.issues.push(h2(P))}},w(W.value,W)});return K}function U9(w,K){let W=new jw({check:"custom",...e(K)});return W._zod.check=w,W}function C1(w){let K=w?.target??"draft-2020-12";if(K==="draft-4")K="draft-04";if(K==="draft-7")K="draft-07";return{processors:w.processors??{},metadataRegistry:w?.metadata??J2,target:K,unrepresentable:w?.unrepresentable??"throw",override:w?.override??(()=>{}),io:w?.io??"output",counter:0,seen:new Map,cycles:w?.cycles??"ref",reused:w?.reused??"inline",external:w?.external??void 0}}function Yw(w,K,W={path:[],schemaPath:[]}){var J;let P=w._zod.def,I=K.seen.get(w);if(I){if(I.count++,W.schemaPath.includes(w))I.cycle=W.path;return I.schema}let b={schema:{},count:1,cycle:void 0,path:W.path};K.seen.set(w,b);let G=w._zod.toJSONSchema?.();if(G)b.schema=G;else{let D={...W,schemaPath:[...W.schemaPath,w],path:W.path};if(w._zod.processJSONSchema)w._zod.processJSONSchema(K,b.schema,D);else{let N=b.schema,L=K.processors[P.type];if(!L)throw Error(`[toJSONSchema]: Non-representable type encountered: ${P.type}`);L(w,K,N,D)}let Q=w._zod.parent;if(Q){if(!b.ref)b.ref=Q;Yw(Q,K,D),K.seen.get(Q).isParent=!0}}let M=K.metadataRegistry.get(w);if(M)Object.assign(b.schema,M);if(K.io==="input"&&Fw(w))delete b.schema.examples,delete b.schema.default;if(K.io==="input"&&b.schema._prefault)(J=b.schema).default??(J.default=b.schema._prefault);return delete b.schema._prefault,K.seen.get(w).schema}function x1(w,K){let W=w.seen.get(K);if(!W)throw Error("Unprocessed schema. This is a bug in Zod.");let J=new Map;for(let b of w.seen.entries()){let G=w.metadataRegistry.get(b[0])?.id;if(G){let M=J.get(G);if(M&&M!==b[0])throw Error(`Duplicate schema id "${G}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);J.set(G,b[0])}}let P=(b)=>{let G=w.target==="draft-2020-12"?"$defs":"definitions";if(w.external){let Q=w.external.registry.get(b[0])?.id,N=w.external.uri??((k)=>k);if(Q)return{ref:N(Q)};let L=b[1].defId??b[1].schema.id??`schema${w.counter++}`;return b[1].defId=L,{defId:L,ref:`${N("__shared")}#/${G}/${L}`}}if(b[1]===W)return{ref:"#"};let O=`${"#"}/${G}/`,D=b[1].schema.id??`__schema${w.counter++}`;return{defId:D,ref:O+D}},I=(b)=>{if(b[1].schema.$ref)return;let G=b[1],{ref:M,defId:O}=P(b);if(G.def={...G.schema},O)G.defId=O;let D=G.schema;for(let Q in D)delete D[Q];D.$ref=M};if(w.cycles==="throw")for(let b of w.seen.entries()){let G=b[1];if(G.cycle)throw Error(`Cycle detected: #/${G.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let b of w.seen.entries()){let G=b[1];if(K===b[0]){I(b);continue}if(w.external){let O=w.external.registry.get(b[0])?.id;if(K!==b[0]&&O){I(b);continue}}if(w.metadataRegistry.get(b[0])?.id){I(b);continue}if(G.cycle){I(b);continue}if(G.count>1){if(w.reused==="ref"){I(b);continue}}}}function o1(w,K){let W=w.seen.get(K);if(!W)throw Error("Unprocessed schema. This is a bug in Zod.");let J=(b)=>{let G=w.seen.get(b);if(G.ref===null)return;let M=G.def??G.schema,O={...M},D=G.ref;if(G.ref=null,D){J(D);let N=w.seen.get(D),L=N.schema;if(L.$ref&&(w.target==="draft-07"||w.target==="draft-04"||w.target==="openapi-3.0"))M.allOf=M.allOf??[],M.allOf.push(L);else Object.assign(M,L);if(Object.assign(M,O),b._zod.parent===D)for(let B in M){if(B==="$ref"||B==="allOf")continue;if(!(B in O))delete M[B]}if(L.$ref)for(let B in M){if(B==="$ref"||B==="allOf")continue;if(B in N.def&&JSON.stringify(M[B])===JSON.stringify(N.def[B]))delete M[B]}}let Q=b._zod.parent;if(Q&&Q!==D){J(Q);let N=w.seen.get(Q);if(N?.schema.$ref){if(M.$ref=N.schema.$ref,N.def)for(let L in M){if(L==="$ref"||L==="allOf")continue;if(L in N.def&&JSON.stringify(M[L])===JSON.stringify(N.def[L]))delete M[L]}}}w.override({zodSchema:b,jsonSchema:M,path:G.path??[]})};for(let b of[...w.seen.entries()].reverse())J(b[0]);let P={};if(w.target==="draft-2020-12")P.$schema="https://json-schema.org/draft/2020-12/schema";else if(w.target==="draft-07")P.$schema="http://json-schema.org/draft-07/schema#";else if(w.target==="draft-04")P.$schema="http://json-schema.org/draft-04/schema#";else if(w.target==="openapi-3.0");if(w.external?.uri){let b=w.external.registry.get(K)?.id;if(!b)throw Error("Schema is missing an `id` property");P.$id=w.external.uri(b)}Object.assign(P,W.def??W.schema);let I=w.external?.defs??{};for(let b of w.seen.entries()){let G=b[1];if(G.def&&G.defId)I[G.defId]=G.def}if(w.external);else if(Object.keys(I).length>0)if(w.target==="draft-2020-12")P.$defs=I;else P.definitions=I;try{let b=JSON.parse(JSON.stringify(P));return Object.defineProperty(b,"~standard",{value:{...K["~standard"],jsonSchema:{input:t2(K,"input",w.processors),output:t2(K,"output",w.processors)}},enumerable:!1,writable:!1}),b}catch(b){throw Error("Error converting schema to JSON.")}}function Fw(w,K){let W=K??{seen:new Set};if(W.seen.has(w))return!1;W.seen.add(w);let J=w._zod.def;if(J.type==="transform")return!0;if(J.type==="array")return Fw(J.element,W);if(J.type==="set")return Fw(J.valueType,W);if(J.type==="lazy")return Fw(J.getter(),W);if(J.type==="promise"||J.type==="optional"||J.type==="nonoptional"||J.type==="nullable"||J.type==="readonly"||J.type==="default"||J.type==="prefault")return Fw(J.innerType,W);if(J.type==="intersection")return Fw(J.left,W)||Fw(J.right,W);if(J.type==="record"||J.type==="map")return Fw(J.keyType,W)||Fw(J.valueType,W);if(J.type==="pipe")return Fw(J.in,W)||Fw(J.out,W);if(J.type==="object"){for(let P in J.shape)if(Fw(J.shape[P],W))return!0;return!1}if(J.type==="union"){for(let P of J.options)if(Fw(P,W))return!0;return!1}if(J.type==="tuple"){for(let P of J.items)if(Fw(P,W))return!0;if(J.rest&&Fw(J.rest,W))return!0;return!1}return!1}var V3=(w,K={})=>(W)=>{let J=C1({...W,processors:K});return Yw(w,J),x1(J,w),o1(J,w)},t2=(w,K,W={})=>(J)=>{let{libraryOptions:P,target:I}=J??{},b=C1({...P??{},target:I,io:K,processors:W});return Yw(w,b),x1(b,w),o1(b,w)};var H9={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},L3=(w,K,W,J)=>{let P=W;P.type="string";let{minimum:I,maximum:b,format:G,patterns:M,contentEncoding:O}=w._zod.bag;if(typeof I==="number")P.minLength=I;if(typeof b==="number")P.maxLength=b;if(G){if(P.format=H9[G]??G,P.format==="")delete P.format;if(G==="time")delete P.format}if(O)P.contentEncoding=O;if(M&&M.size>0){let D=[...M];if(D.length===1)P.pattern=D[0].source;else if(D.length>1)P.allOf=[...D.map((Q)=>({...K.target==="draft-07"||K.target==="draft-04"||K.target==="openapi-3.0"?{type:"string"}:{},pattern:Q.source}))]}};var E3=(w,K,W,J)=>{W.not={}};var U3=(w,K,W,J)=>{};var H3=(w,K,W,J)=>{let P=w._zod.def,I=y2(P.entries);if(I.every((b)=>typeof b==="number"))W.type="number";if(I.every((b)=>typeof b==="string"))W.type="string";W.enum=I};var q3=(w,K,W,J)=>{if(K.unrepresentable==="throw")throw Error("Custom types cannot be represented in JSON Schema")};var h3=(w,K,W,J)=>{if(K.unrepresentable==="throw")throw Error("Transforms cannot be represented in JSON Schema")};var F3=(w,K,W,J)=>{let P=W,I=w._zod.def,{minimum:b,maximum:G}=w._zod.bag;if(typeof b==="number")P.minItems=b;if(typeof G==="number")P.maxItems=G;P.type="array",P.items=Yw(I.element,K,{...J,path:[...J.path,"items"]})},z3=(w,K,W,J)=>{let P=W,I=w._zod.def;P.type="object",P.properties={};let b=I.shape;for(let O in b)P.properties[O]=Yw(b[O],K,{...J,path:[...J.path,"properties",O]});let G=new Set(Object.keys(b)),M=new Set([...G].filter((O)=>{let D=I.shape[O]._zod;if(K.io==="input")return D.optin===void 0;else return D.optout===void 0}));if(M.size>0)P.required=Array.from(M);if(I.catchall?._zod.def.type==="never")P.additionalProperties=!1;else if(!I.catchall){if(K.io==="output")P.additionalProperties=!1}else if(I.catchall)P.additionalProperties=Yw(I.catchall,K,{...J,path:[...J.path,"additionalProperties"]})},R3=(w,K,W,J)=>{let P=w._zod.def,I=P.inclusive===!1,b=P.options.map((G,M)=>Yw(G,K,{...J,path:[...J.path,I?"oneOf":"anyOf",M]}));if(I)W.oneOf=b;else W.anyOf=b},v3=(w,K,W,J)=>{let P=w._zod.def,I=Yw(P.left,K,{...J,path:[...J.path,"allOf",0]}),b=Yw(P.right,K,{...J,path:[...J.path,"allOf",1]}),G=(O)=>("allOf"in O)&&Object.keys(O).length===1,M=[...G(I)?I.allOf:[I],...G(b)?b.allOf:[b]];W.allOf=M};var j3=(w,K,W,J)=>{let P=w._zod.def,I=Yw(P.innerType,K,J),b=K.seen.get(w);if(K.target==="openapi-3.0")b.ref=P.innerType,W.nullable=!0;else W.anyOf=[I,{type:"null"}]},Z3=(w,K,W,J)=>{let P=w._zod.def;Yw(P.innerType,K,J);let I=K.seen.get(w);I.ref=P.innerType},k3=(w,K,W,J)=>{let P=w._zod.def;Yw(P.innerType,K,J);let I=K.seen.get(w);I.ref=P.innerType,W.default=JSON.parse(JSON.stringify(P.defaultValue))},g3=(w,K,W,J)=>{let P=w._zod.def;Yw(P.innerType,K,J);let I=K.seen.get(w);if(I.ref=P.innerType,K.io==="input")W._prefault=JSON.parse(JSON.stringify(P.defaultValue))},C3=(w,K,W,J)=>{let P=w._zod.def;Yw(P.innerType,K,J);let I=K.seen.get(w);I.ref=P.innerType;let b;try{b=P.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}W.default=b},x3=(w,K,W,J)=>{let P=w._zod.def,I=K.io==="input"?P.in._zod.def.type==="transform"?P.out:P.in:P.out;Yw(I,K,J);let b=K.seen.get(w);b.ref=I},o3=(w,K,W,J)=>{let P=w._zod.def;Yw(P.innerType,K,J);let I=K.seen.get(w);I.ref=P.innerType,W.readOnly=!0};var c1=(w,K,W,J)=>{let P=w._zod.def;Yw(P.innerType,K,J);let I=K.seen.get(w);I.ref=P.innerType};var o9=h("ZodISODateTime",(w,K)=>{M8.init(w,K),Ow.init(w,K)});function c3(w){return O3(o9,w)}var c9=h("ZodISODate",(w,K)=>{O8.init(w,K),Ow.init(w,K)});function _3(w){return B3(c9,w)}var _9=h("ZodISOTime",(w,K)=>{B8.init(w,K),Ow.init(w,K)});function r3(w){return N3(_9,w)}var r9=h("ZodISODuration",(w,K)=>{N8.init(w,K),Ow.init(w,K)});function u3(w){return D3(r9,w)}var m3=(w,K)=>{XK.init(w,K),w.name="ZodError",Object.defineProperties(w,{format:{value:(W)=>D1(w,W)},flatten:{value:(W)=>N1(w,W)},addIssue:{value:(W)=>{w.issues.push(W),w.message=JSON.stringify(w.issues,q2,2)}},addIssues:{value:(W)=>{w.issues.push(...W),w.message=JSON.stringify(w.issues,q2,2)}},isEmpty:{get(){return w.issues.length===0}}})},AP=h("ZodError",m3),Zw=h("ZodError",m3,{Parent:Error});var T3=VK(Zw),l3=LK(Zw),p3=e2(Zw),f3=i2(Zw),e3=w6(Zw),i3=K6(Zw),d3=W6(Zw),n3=J6(Zw),t3=P6(Zw),a3=I6(Zw),s3=b6(Zw),w5=G6(Zw);var $w=h("ZodType",(w,K)=>{return Dw.init(w,K),Object.assign(w["~standard"],{jsonSchema:{input:t2(w,"input"),output:t2(w,"output")}}),w.toJSONSchema=V3(w,{}),w.def=K,w.type=K.type,Object.defineProperty(w,"_def",{value:K}),w.check=(...W)=>{return w.clone(bw.mergeDefs(K,{checks:[...K.checks??[],...W.map((J)=>typeof J==="function"?{_zod:{check:J,def:{check:"custom"},onattach:[]}}:J)]}),{parent:!0})},w.with=w.check,w.clone=(W,J)=>Cw(w,W,J),w.brand=()=>w,w.register=(W,J)=>{return W.add(w,J),w},w.parse=(W,J)=>T3(w,W,J,{callee:w.parse}),w.safeParse=(W,J)=>p3(w,W,J),w.parseAsync=async(W,J)=>l3(w,W,J,{callee:w.parseAsync}),w.safeParseAsync=async(W,J)=>f3(w,W,J),w.spa=w.safeParseAsync,w.encode=(W,J)=>e3(w,W,J),w.decode=(W,J)=>i3(w,W,J),w.encodeAsync=async(W,J)=>d3(w,W,J),w.decodeAsync=async(W,J)=>n3(w,W,J),w.safeEncode=(W,J)=>t3(w,W,J),w.safeDecode=(W,J)=>a3(w,W,J),w.safeEncodeAsync=async(W,J)=>s3(w,W,J),w.safeDecodeAsync=async(W,J)=>w5(w,W,J),w.refine=(W,J)=>w.check(ZW(W,J)),w.superRefine=(W)=>w.check(kW(W)),w.overwrite=(W)=>w.check(P2(W)),w.optional=()=>J5(w),w.exactOptional=()=>XW(w),w.nullable=()=>P5(w),w.nullish=()=>J5(P5(w)),w.nonoptional=(W)=>qW(w,W),w.array=()=>AW(w),w.or=(W)=>BW([w,W]),w.and=(W)=>DW(w,W),w.transform=(W)=>I5(w,YW(W)),w.default=(W)=>EW(w,W),w.prefault=(W)=>HW(w,W),w.catch=(W)=>FW(w,W),w.pipe=(W)=>I5(w,W),w.readonly=()=>vW(w),w.describe=(W)=>{let J=w.clone();return J2.add(J,{description:W}),J},Object.defineProperty(w,"description",{get(){return J2.get(w)?.description},configurable:!0}),w.meta=(...W)=>{if(W.length===0)return J2.get(w);let J=w.clone();return J2.add(J,W[0]),J},w.isOptional=()=>w.safeParse(void 0).success,w.isNullable=()=>w.safeParse(null).success,w.apply=(W)=>W(w),w}),b5=h("_ZodString",(w,K)=>{HK.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(J,P,I)=>L3(w,J,P,I);let W=w._zod.bag;w.format=W.format??null,w.minLength=W.minimum??null,w.maxLength=W.maximum??null,w.regex=(...J)=>w.check(H1(...J)),w.includes=(...J)=>w.check(F1(...J)),w.startsWith=(...J)=>w.check(z1(...J)),w.endsWith=(...J)=>w.check(R1(...J)),w.min=(...J)=>w.check(F2(...J)),w.max=(...J)=>w.check(qK(...J)),w.length=(...J)=>w.check(hK(...J)),w.nonempty=(...J)=>w.check(F2(1,...J)),w.lowercase=(J)=>w.check(q1(J)),w.uppercase=(J)=>w.check(h1(J)),w.trim=()=>w.check(j1()),w.normalize=(...J)=>w.check(v1(...J)),w.toLowerCase=()=>w.check(Z1()),w.toUpperCase=()=>w.check(k1()),w.slugify=()=>w.check(g1())}),m9=h("ZodString",(w,K)=>{HK.init(w,K),b5.init(w,K),w.email=(W)=>w.check(L1(A5,W)),w.url=(W)=>w.check(d8(T9,W)),w.jwt=(W)=>w.check(U1(O5,W)),w.emoji=(W)=>w.check(n8(l9,W)),w.guid=(W)=>w.check(E1(K5,W)),w.uuid=(W)=>w.check(p8(FK,W)),w.uuidv4=(W)=>w.check(f8(FK,W)),w.uuidv6=(W)=>w.check(e8(FK,W)),w.uuidv7=(W)=>w.check(i8(FK,W)),w.nanoid=(W)=>w.check(t8(p9,W)),w.guid=(W)=>w.check(E1(K5,W)),w.cuid=(W)=>w.check(a8(f9,W)),w.cuid2=(W)=>w.check(s8(e9,W)),w.ulid=(W)=>w.check(w3(i9,W)),w.base64=(W)=>w.check(G3(KW,W)),w.base64url=(W)=>w.check(A3(WW,W)),w.xid=(W)=>w.check(K3(d9,W)),w.ksuid=(W)=>w.check(W3(n9,W)),w.ipv4=(W)=>w.check(J3(t9,W)),w.ipv6=(W)=>w.check(P3(a9,W)),w.cidrv4=(W)=>w.check(I3(s9,W)),w.cidrv6=(W)=>w.check(b3(wW,W)),w.e164=(W)=>w.check(M3(JW,W)),w.datetime=(W)=>w.check(c3(W)),w.date=(W)=>w.check(_3(W)),w.time=(W)=>w.check(r3(W)),w.duration=(W)=>w.check(u3(W))});function G5(w){return l8(m9,w)}var Ow=h("ZodStringFormat",(w,K)=>{Aw.init(w,K),b5.init(w,K)}),A5=h("ZodEmail",(w,K)=>{w8.init(w,K),Ow.init(w,K)});function M5(w){return L1(A5,w)}var K5=h("ZodGUID",(w,K)=>{a6.init(w,K),Ow.init(w,K)});var FK=h("ZodUUID",(w,K)=>{s6.init(w,K),Ow.init(w,K)});var T9=h("ZodURL",(w,K)=>{K8.init(w,K),Ow.init(w,K)});var l9=h("ZodEmoji",(w,K)=>{W8.init(w,K),Ow.init(w,K)});var p9=h("ZodNanoID",(w,K)=>{J8.init(w,K),Ow.init(w,K)});var f9=h("ZodCUID",(w,K)=>{P8.init(w,K),Ow.init(w,K)});var e9=h("ZodCUID2",(w,K)=>{I8.init(w,K),Ow.init(w,K)});var i9=h("ZodULID",(w,K)=>{b8.init(w,K),Ow.init(w,K)});var d9=h("ZodXID",(w,K)=>{G8.init(w,K),Ow.init(w,K)});var n9=h("ZodKSUID",(w,K)=>{A8.init(w,K),Ow.init(w,K)});var t9=h("ZodIPv4",(w,K)=>{D8.init(w,K),Ow.init(w,K)});var a9=h("ZodIPv6",(w,K)=>{Q8.init(w,K),Ow.init(w,K)});var s9=h("ZodCIDRv4",(w,K)=>{$8.init(w,K),Ow.init(w,K)});var wW=h("ZodCIDRv6",(w,K)=>{Y8.init(w,K),Ow.init(w,K)});var KW=h("ZodBase64",(w,K)=>{X8.init(w,K),Ow.init(w,K)});var WW=h("ZodBase64URL",(w,K)=>{V8.init(w,K),Ow.init(w,K)});var JW=h("ZodE164",(w,K)=>{L8.init(w,K),Ow.init(w,K)});var O5=h("ZodJWT",(w,K)=>{E8.init(w,K),Ow.init(w,K)});function B5(w){return U1(O5,w)}var PW=h("ZodUnknown",(w,K)=>{U8.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(W,J,P)=>U3(w,W,J,P)});function W5(){return Q3(PW)}var IW=h("ZodNever",(w,K)=>{H8.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(W,J,P)=>E3(w,W,J,P)});function bW(w){return $3(IW,w)}var GW=h("ZodArray",(w,K)=>{q8.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(W,J,P)=>F3(w,W,J,P),w.element=K.element,w.min=(W,J)=>w.check(F2(W,J)),w.nonempty=(W)=>w.check(F2(1,W)),w.max=(W,J)=>w.check(qK(W,J)),w.length=(W,J)=>w.check(hK(W,J)),w.unwrap=()=>w.element});function AW(w,K){return Y3(GW,w,K)}var MW=h("ZodObject",(w,K)=>{z8.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(W,J,P)=>z3(w,W,J,P),bw.defineLazy(w,"shape",()=>{return K.shape}),w.keyof=()=>QW(Object.keys(w._zod.def.shape)),w.catchall=(W)=>w.clone({...w._zod.def,catchall:W}),w.passthrough=()=>w.clone({...w._zod.def,catchall:W5()}),w.loose=()=>w.clone({...w._zod.def,catchall:W5()}),w.strict=()=>w.clone({...w._zod.def,catchall:bW()}),w.strip=()=>w.clone({...w._zod.def,catchall:void 0}),w.extend=(W)=>{return bw.extend(w,W)},w.safeExtend=(W)=>{return bw.safeExtend(w,W)},w.merge=(W)=>bw.merge(w,W),w.pick=(W)=>bw.pick(w,W),w.omit=(W)=>bw.omit(w,W),w.partial=(...W)=>bw.partial(D5,w,W[0]),w.required=(...W)=>bw.required(Q5,w,W[0])});function N5(w,K){let W={type:"object",shape:w??{},...bw.normalizeParams(K)};return new MW(W)}var OW=h("ZodUnion",(w,K)=>{R8.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(W,J,P)=>R3(w,W,J,P),w.options=K.options});function BW(w,K){return new OW({type:"union",options:w,...bw.normalizeParams(K)})}var NW=h("ZodIntersection",(w,K)=>{v8.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(W,J,P)=>v3(w,W,J,P)});function DW(w,K){return new NW({type:"intersection",left:w,right:K})}var _1=h("ZodEnum",(w,K)=>{j8.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(J,P,I)=>H3(w,J,P,I),w.enum=K.entries,w.options=Object.values(K.entries);let W=new Set(Object.keys(K.entries));w.extract=(J,P)=>{let I={};for(let b of J)if(W.has(b))I[b]=K.entries[b];else throw Error(`Key ${b} not found in enum`);return new _1({...K,checks:[],...bw.normalizeParams(P),entries:I})},w.exclude=(J,P)=>{let I={...K.entries};for(let b of J)if(W.has(b))delete I[b];else throw Error(`Key ${b} not found in enum`);return new _1({...K,checks:[],...bw.normalizeParams(P),entries:I})}});function QW(w,K){let W=Array.isArray(w)?Object.fromEntries(w.map((J)=>[J,J])):w;return new _1({type:"enum",entries:W,...bw.normalizeParams(K)})}var $W=h("ZodTransform",(w,K)=>{Z8.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(W,J,P)=>h3(w,W,J,P),w._zod.parse=(W,J)=>{if(J.direction==="backward")throw new r2(w.constructor.name);W.addIssue=(I)=>{if(typeof I==="string")W.issues.push(bw.issue(I,W.value,K));else{let b=I;if(b.fatal)b.continue=!1;b.code??(b.code="custom"),b.input??(b.input=W.value),b.inst??(b.inst=w),W.issues.push(bw.issue(b))}};let P=K.transform(W.value,W);if(P instanceof Promise)return P.then((I)=>{return W.value=I,W});return W.value=P,W}});function YW(w){return new $W({type:"transform",transform:w})}var D5=h("ZodOptional",(w,K)=>{X1.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(W,J,P)=>c1(w,W,J,P),w.unwrap=()=>w._zod.def.innerType});function J5(w){return new D5({type:"optional",innerType:w})}var SW=h("ZodExactOptional",(w,K)=>{k8.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(W,J,P)=>c1(w,W,J,P),w.unwrap=()=>w._zod.def.innerType});function XW(w){return new SW({type:"optional",innerType:w})}var VW=h("ZodNullable",(w,K)=>{g8.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(W,J,P)=>j3(w,W,J,P),w.unwrap=()=>w._zod.def.innerType});function P5(w){return new VW({type:"nullable",innerType:w})}var LW=h("ZodDefault",(w,K)=>{C8.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(W,J,P)=>k3(w,W,J,P),w.unwrap=()=>w._zod.def.innerType,w.removeDefault=w.unwrap});function EW(w,K){return new LW({type:"default",innerType:w,get defaultValue(){return typeof K==="function"?K():bw.shallowClone(K)}})}var UW=h("ZodPrefault",(w,K)=>{x8.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(W,J,P)=>g3(w,W,J,P),w.unwrap=()=>w._zod.def.innerType});function HW(w,K){return new UW({type:"prefault",innerType:w,get defaultValue(){return typeof K==="function"?K():bw.shallowClone(K)}})}var Q5=h("ZodNonOptional",(w,K)=>{o8.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(W,J,P)=>Z3(w,W,J,P),w.unwrap=()=>w._zod.def.innerType});function qW(w,K){return new Q5({type:"nonoptional",innerType:w,...bw.normalizeParams(K)})}var hW=h("ZodCatch",(w,K)=>{c8.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(W,J,P)=>C3(w,W,J,P),w.unwrap=()=>w._zod.def.innerType,w.removeCatch=w.unwrap});function FW(w,K){return new hW({type:"catch",innerType:w,catchValue:typeof K==="function"?K:()=>K})}var zW=h("ZodPipe",(w,K)=>{_8.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(W,J,P)=>x3(w,W,J,P),w.in=K.in,w.out=K.out});function I5(w,K){return new zW({type:"pipe",in:w,out:K})}var RW=h("ZodReadonly",(w,K)=>{r8.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(W,J,P)=>o3(w,W,J,P),w.unwrap=()=>w._zod.def.innerType});function vW(w){return new RW({type:"readonly",innerType:w})}var jW=h("ZodCustom",(w,K)=>{u8.init(w,K),$w.init(w,K),w._zod.processJSONSchema=(W,J,P)=>q3(w,W,J,P)});function ZW(w,K={}){return S3(jW,w,K)}function kW(w){return X3(w)}gw(V1());var $5=N5({authorization:G5().startsWith("Bearer ").transform((w,K)=>{let[W,J]=w.split(" ");if(!B5().safeParse(J).success)return K.addIssue("Token must be match jsonwebtoken format."),P1;return Object.freeze({schema:W,token:J})})});class r1{clientInstance;constructor(w){this.clientInstance=w}async enforce(w,K,W){if(!this.clientInstance)throw Error("Bool guard instance not found.");let J=Reflect.getOwnMetadataKeys(w.class,w.funcName),P=Reflect.getOwnMetadataKeys(w.class),I=J.includes(hw.guardMetadata),b=P.includes(hw.guardMetadata);if(!I&&!b)return!0;let G=await $5.safeParseAsync(K.toJSON());if(!G.success)return!1;try{let{authorization:{token:M}}=G.data,{account:O,credential:D}=await this.clientInstance.verifyToken({token:M}),Q=Object.freeze({account:O,credential:D});return W.set(hw.authState,Q),!0}catch{return!1}}}pK([Z2(0,g4()),Z2(1,k4()),Z2(2,NK())],r1.prototype,"enforce",null),r1=pK([C4(),Z2(0,x4(hw.guardClient))],r1);var zK=new TextEncoder,RK=new TextDecoder;function Y5(...w){let K=w.reduce((P,{length:I})=>P+I,0),W=new Uint8Array(K),J=0;for(let P of w)W.set(P,J),J+=P.length;return W}function vK(w){let K=new Uint8Array(w.length);for(let W=0;W<w.length;W++){let J=w.charCodeAt(W);if(J>127)throw TypeError("non-ASCII string encountered in encode()");K[W]=J}return K}function S5(w){if(Uint8Array.prototype.toBase64)return w.toBase64();let K=32768,W=[];for(let J=0;J<w.length;J+=K)W.push(String.fromCharCode.apply(null,w.subarray(J,J+K)));return btoa(W.join(""))}function X5(w){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(w);let K=atob(w),W=new Uint8Array(K.length);for(let J=0;J<K.length;J++)W[J]=K.charCodeAt(J);return W}function V5(w){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof w==="string"?w:RK.decode(w),{alphabet:"base64url"});let K=w;if(K instanceof Uint8Array)K=RK.decode(K);K=K.replace(/-/g,"+").replace(/_/g,"/");try{return X5(K)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function jK(w){let K=w;if(typeof K==="string")K=zK.encode(K);if(Uint8Array.prototype.toBase64)return K.toBase64({alphabet:"base64url",omitPadding:!0});return S5(K).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class ZK extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(w,K){super(w,K);this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class _w extends ZK{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class I2 extends ZK{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class u1 extends ZK{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}var Tw=(w,K="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${K} must be ${w}`),z2=(w,K)=>w.name===K;function y1(w){return parseInt(w.name.slice(4),10)}function gW(w){switch(w){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}function CW(w,K){if(K&&!w.usages.includes(K))throw TypeError(`CryptoKey does not support this operation, its usages must include ${K}.`)}function L5(w,K,W){switch(K){case"HS256":case"HS384":case"HS512":{if(!z2(w.algorithm,"HMAC"))throw Tw("HMAC");let J=parseInt(K.slice(2),10);if(y1(w.algorithm.hash)!==J)throw Tw(`SHA-${J}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!z2(w.algorithm,"RSASSA-PKCS1-v1_5"))throw Tw("RSASSA-PKCS1-v1_5");let J=parseInt(K.slice(2),10);if(y1(w.algorithm.hash)!==J)throw Tw(`SHA-${J}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!z2(w.algorithm,"RSA-PSS"))throw Tw("RSA-PSS");let J=parseInt(K.slice(2),10);if(y1(w.algorithm.hash)!==J)throw Tw(`SHA-${J}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!z2(w.algorithm,"Ed25519"))throw Tw("Ed25519");break}case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":{if(!z2(w.algorithm,K))throw Tw(K);break}case"ES256":case"ES384":case"ES512":{if(!z2(w.algorithm,"ECDSA"))throw Tw("ECDSA");let J=gW(K);if(w.algorithm.namedCurve!==J)throw Tw(J,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}CW(w,W)}function E5(w,K,...W){if(W=W.filter(Boolean),W.length>2){let J=W.pop();w+=`one of type ${W.join(", ")}, or ${J}.`}else if(W.length===2)w+=`one of type ${W[0]} or ${W[1]}.`;else w+=`of type ${W[0]}.`;if(K==null)w+=` Received ${K}`;else if(typeof K==="function"&&K.name)w+=` Received function ${K.name}`;else if(typeof K==="object"&&K!=null){if(K.constructor?.name)w+=` Received an instance of ${K.constructor.name}`}return w}var U5=(w,...K)=>E5("Key must be ",w,...K),m1=(w,K,...W)=>E5(`Key for the ${w} algorithm must be `,K,...W);var T1=(w)=>{if(w?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return w instanceof CryptoKey}catch{return!1}},l1=(w)=>w?.[Symbol.toStringTag]==="KeyObject",p1=(w)=>T1(w)||l1(w);function H5(...w){let K=w.filter(Boolean);if(K.length===0||K.length===1)return!0;let W;for(let J of K){let P=Object.keys(J);if(!W||W.size===0){W=new Set(P);continue}for(let I of P){if(W.has(I))return!1;W.add(I)}}return!0}var xW=(w)=>typeof w==="object"&&w!==null;function kK(w){if(!xW(w)||Object.prototype.toString.call(w)!=="[object Object]")return!1;if(Object.getPrototypeOf(w)===null)return!0;let K=w;while(Object.getPrototypeOf(K)!==null)K=Object.getPrototypeOf(K);return Object.getPrototypeOf(w)===K}function q5(w,K){if(w.startsWith("RS")||w.startsWith("PS")){let{modulusLength:W}=K.algorithm;if(typeof W!=="number"||W<2048)throw TypeError(`${w} requires key modulusLength to be 2048 bits or larger`)}}function oW(w){let K,W;switch(w.kty){case"AKP":{switch(w.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":K={name:w.alg},W=w.priv?["sign"]:["verify"];break;default:throw new _w('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(w.alg){case"PS256":case"PS384":case"PS512":K={name:"RSA-PSS",hash:`SHA-${w.alg.slice(-3)}`},W=w.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":K={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${w.alg.slice(-3)}`},W=w.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":K={name:"RSA-OAEP",hash:`SHA-${parseInt(w.alg.slice(-3),10)||1}`},W=w.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new _w('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(w.alg){case"ES256":K={name:"ECDSA",namedCurve:"P-256"},W=w.d?["sign"]:["verify"];break;case"ES384":K={name:"ECDSA",namedCurve:"P-384"},W=w.d?["sign"]:["verify"];break;case"ES512":K={name:"ECDSA",namedCurve:"P-521"},W=w.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":K={name:"ECDH",namedCurve:w.crv},W=w.d?["deriveBits"]:[];break;default:throw new _w('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(w.alg){case"Ed25519":case"EdDSA":K={name:"Ed25519"},W=w.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":K={name:w.crv},W=w.d?["deriveBits"]:[];break;default:throw new _w('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new _w('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:K,keyUsages:W}}async function h5(w){if(!w.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:K,keyUsages:W}=oW(w),J={...w};if(J.kty!=="AKP")delete J.alg;return delete J.use,crypto.subtle.importKey("jwk",J,K,w.ext??(w.d||w.priv?!1:!0),w.key_ops??W)}function F5(w,K,W,J,P){if(P.crit!==void 0&&J?.crit===void 0)throw new w('"crit" (Critical) Header Parameter MUST be integrity protected');if(!J||J.crit===void 0)return new Set;if(!Array.isArray(J.crit)||J.crit.length===0||J.crit.some((b)=>typeof b!=="string"||b.length===0))throw new w('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let I;if(W!==void 0)I=new Map([...Object.entries(W),...K.entries()]);else I=K;for(let b of J.crit){if(!I.has(b))throw new _w(`Extension Header Parameter "${b}" is not recognized`);if(P[b]===void 0)throw new w(`Extension Header Parameter "${b}" is missing`);if(I.get(b)&&J[b]===void 0)throw new w(`Extension Header Parameter "${b}" MUST be integrity protected`)}return new Set(J.crit)}var s2=(w)=>kK(w)&&typeof w.kty==="string",z5=(w)=>w.kty!=="oct"&&(w.kty==="AKP"&&typeof w.priv==="string"||typeof w.d==="string"),R5=(w)=>w.kty!=="oct"&&w.d===void 0&&w.priv===void 0,v5=(w)=>w.kty==="oct"&&typeof w.k==="string";var R2,j5=async(w,K,W,J=!1)=>{R2||=new WeakMap;let P=R2.get(w);if(P?.[W])return P[W];let I=await h5({...K,alg:W});if(J)Object.freeze(w);if(!P)R2.set(w,{[W]:I});else P[W]=I;return I},_W=(w,K)=>{R2||=new WeakMap;let W=R2.get(w);if(W?.[K])return W[K];let J=w.type==="public",P=J?!0:!1,I;if(w.asymmetricKeyType==="x25519"){switch(K){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}I=w.toCryptoKey(w.asymmetricKeyType,P,J?[]:["deriveBits"])}if(w.asymmetricKeyType==="ed25519"){if(K!=="EdDSA"&&K!=="Ed25519")throw TypeError("given KeyObject instance cannot be used for this algorithm");I=w.toCryptoKey(w.asymmetricKeyType,P,[J?"verify":"sign"])}switch(w.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":{if(K!==w.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");I=w.toCryptoKey(w.asymmetricKeyType,P,[J?"verify":"sign"])}}if(w.asymmetricKeyType==="rsa"){let b;switch(K){case"RSA-OAEP":b="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":b="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":b="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":b="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(K.startsWith("RSA-OAEP"))return w.toCryptoKey({name:"RSA-OAEP",hash:b},P,J?["encrypt"]:["decrypt"]);I=w.toCryptoKey({name:K.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:b},P,[J?"verify":"sign"])}if(w.asymmetricKeyType==="ec"){let G=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(w.asymmetricKeyDetails?.namedCurve);if(!G)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(K==="ES256"&&G==="P-256")I=w.toCryptoKey({name:"ECDSA",namedCurve:G},P,[J?"verify":"sign"]);if(K==="ES384"&&G==="P-384")I=w.toCryptoKey({name:"ECDSA",namedCurve:G},P,[J?"verify":"sign"]);if(K==="ES512"&&G==="P-521")I=w.toCryptoKey({name:"ECDSA",namedCurve:G},P,[J?"verify":"sign"]);if(K.startsWith("ECDH-ES"))I=w.toCryptoKey({name:"ECDH",namedCurve:G},P,J?[]:["deriveBits"])}if(!I)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(!W)R2.set(w,{[K]:I});else W[K]=I;return I};async function Z5(w,K){if(w instanceof Uint8Array)return w;if(T1(w))return w;if(l1(w)){if(w.type==="secret")return w.export();if("toCryptoKey"in w&&typeof w.toCryptoKey==="function")try{return _W(w,K)}catch(J){if(J instanceof TypeError)throw J}let W=w.export({format:"jwk"});return j5(w,W,K)}if(s2(w)){if(w.k)return V5(w.k);return j5(w,w,K,!0)}throw Error("unreachable")}var v2=(w)=>w?.[Symbol.toStringTag],f1=(w,K,W)=>{if(K.use!==void 0){let J;switch(W){case"sign":case"verify":J="sig";break;case"encrypt":case"decrypt":J="enc";break}if(K.use!==J)throw TypeError(`Invalid key for this operation, its "use" must be "${J}" when present`)}if(K.alg!==void 0&&K.alg!==w)throw TypeError(`Invalid key for this operation, its "alg" must be "${w}" when present`);if(Array.isArray(K.key_ops)){let J;switch(!0){case(W==="sign"||W==="verify"):case w==="dir":case w.includes("CBC-HS"):J=W;break;case w.startsWith("PBES2"):J="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(w):if(!w.includes("GCM")&&w.endsWith("KW"))J=W==="encrypt"?"wrapKey":"unwrapKey";else J=W;break;case(W==="encrypt"&&w.startsWith("RSA")):J="wrapKey";break;case W==="decrypt":J=w.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(J&&K.key_ops?.includes?.(J)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${J}" when present`)}return!0},rW=(w,K,W)=>{if(K instanceof Uint8Array)return;if(s2(K)){if(v5(K)&&f1(w,K,W))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!p1(K))throw TypeError(m1(w,K,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(K.type!=="secret")throw TypeError(`${v2(K)} instances for symmetric algorithms must be of type "secret"`)},uW=(w,K,W)=>{if(s2(K))switch(W){case"decrypt":case"sign":if(z5(K)&&f1(w,K,W))return;throw TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if(R5(K)&&f1(w,K,W))return;throw TypeError("JSON Web Key for this operation must be a public JWK")}if(!p1(K))throw TypeError(m1(w,K,"CryptoKey","KeyObject","JSON Web Key"));if(K.type==="secret")throw TypeError(`${v2(K)} instances for asymmetric algorithms must not be of type "secret"`);if(K.type==="public")switch(W){case"sign":throw TypeError(`${v2(K)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${v2(K)} instances for asymmetric algorithm decryption must be of type "private"`)}if(K.type==="private")switch(W){case"verify":throw TypeError(`${v2(K)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${v2(K)} instances for asymmetric algorithm encryption must be of type "public"`)}};function k5(w,K,W){switch(w.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":rW(w,K,W);break;default:uW(w,K,W)}}function g5(w,K){let W=`SHA-${w.slice(-3)}`;switch(w){case"HS256":case"HS384":case"HS512":return{hash:W,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:W,name:"RSA-PSS",saltLength:parseInt(w.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:W,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:W,name:"ECDSA",namedCurve:K.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:w};default:throw new _w(`alg ${w} is not supported either by JOSE or your javascript runtime`)}}async function C5(w,K,W){if(K instanceof Uint8Array){if(!w.startsWith("HS"))throw TypeError(U5(K,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",K,{hash:`SHA-${w.slice(-3)}`,name:"HMAC"},!1,[W])}return L5(K,w,W),K}var $2=(w)=>Math.floor(w.getTime()/1000),x5=60,o5=x5*60,i1=o5*24,yW=i1*7,mW=i1*365.25,TW=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function e1(w){let K=TW.exec(w);if(!K||K[4]&&K[1])throw TypeError("Invalid time period format");let W=parseFloat(K[2]),J=K[3].toLowerCase(),P;switch(J){case"sec":case"secs":case"second":case"seconds":case"s":P=Math.round(W);break;case"minute":case"minutes":case"min":case"mins":case"m":P=Math.round(W*x5);break;case"hour":case"hours":case"hr":case"hrs":case"h":P=Math.round(W*o5);break;case"day":case"days":case"d":P=Math.round(W*i1);break;case"week":case"weeks":case"w":P=Math.round(W*yW);break;default:P=Math.round(W*mW);break}if(K[1]==="-"||K[4]==="ago")return-P;return P}function Y2(w,K){if(!Number.isFinite(K))throw TypeError(`Invalid ${w} input`);return K}class d1{#w;constructor(w){if(!kK(w))throw TypeError("JWT Claims Set MUST be an object");this.#w=structuredClone(w)}data(){return zK.encode(JSON.stringify(this.#w))}get iss(){return this.#w.iss}set iss(w){this.#w.iss=w}get sub(){return this.#w.sub}set sub(w){this.#w.sub=w}get aud(){return this.#w.aud}set aud(w){this.#w.aud=w}set jti(w){this.#w.jti=w}set nbf(w){if(typeof w==="number")this.#w.nbf=Y2("setNotBefore",w);else if(w instanceof Date)this.#w.nbf=Y2("setNotBefore",$2(w));else this.#w.nbf=$2(new Date)+e1(w)}set exp(w){if(typeof w==="number")this.#w.exp=Y2("setExpirationTime",w);else if(w instanceof Date)this.#w.exp=Y2("setExpirationTime",$2(w));else this.#w.exp=$2(new Date)+e1(w)}set iat(w){if(w===void 0)this.#w.iat=$2(new Date);else if(w instanceof Date)this.#w.iat=Y2("setIssuedAt",$2(w));else if(typeof w==="string")this.#w.iat=Y2("setIssuedAt",$2(new Date)+e1(w));else this.#w.iat=Y2("setIssuedAt",w)}}async function c5(w,K,W){let J=await C5(w,K,"sign");q5(w,J);let P=await crypto.subtle.sign(g5(w,J.algorithm),J,W);return new Uint8Array(P)}class n1{#w;#K;#J;constructor(w){if(!(w instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#w=w}setProtectedHeader(w){if(this.#K)throw TypeError("setProtectedHeader can only be called once");return this.#K=w,this}setUnprotectedHeader(w){if(this.#J)throw TypeError("setUnprotectedHeader can only be called once");return this.#J=w,this}async sign(w,K){if(!this.#K&&!this.#J)throw new I2("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!H5(this.#K,this.#J))throw new I2("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let W={...this.#K,...this.#J},J=F5(I2,new Map([["b64",!0]]),K?.crit,this.#K,W),P=!0;if(J.has("b64")){if(P=this.#K.b64,typeof P!=="boolean")throw new I2('The "b64" (base64url-encode payload) Header Parameter must be a boolean')}let{alg:I}=W;if(typeof I!=="string"||!I)throw new I2('JWS "alg" (Algorithm) Header Parameter missing or invalid');k5(I,w,"sign");let b,G;if(P)b=jK(this.#w),G=vK(b);else G=this.#w,b="";let M,O;if(this.#K)M=jK(JSON.stringify(this.#K)),O=vK(M);else M="",O=new Uint8Array;let D=Y5(O,vK("."),G),Q=await Z5(w,I),N=await c5(I,Q,D),L={signature:jK(N),payload:b};if(this.#J)L.header=this.#J;if(this.#K)L.protected=M;return L}}class t1{#w;constructor(w){this.#w=new n1(w)}setProtectedHeader(w){return this.#w.setProtectedHeader(w),this}async sign(w,K){let W=await this.#w.sign(w,K);if(W.payload===void 0)throw TypeError("use the flattened module for creating JWS with b64: false");return`${W.protected}.${W.payload}.${W.signature}`}}class gK{#w;#K;constructor(w={}){this.#K=new d1(w)}setIssuer(w){return this.#K.iss=w,this}setSubject(w){return this.#K.sub=w,this}setAudience(w){return this.#K.aud=w,this}setJti(w){return this.#K.jti=w,this}setNotBefore(w){return this.#K.nbf=w,this}setExpirationTime(w){return this.#K.exp=w,this}setIssuedAt(w){return this.#K.iat=w,this}setProtectedHeader(w){return this.#w=w,this}async sign(w,K){let W=new t1(this.#K.data());if(W.setProtectedHeader(this.#w),Array.isArray(this.#w?.crit)&&this.#w.crit.includes("b64")&&this.#w.b64===!1)throw new u1("JWTs MUST NOT use unencoded payload");return W.sign(w,K)}}class CK{params;#w=k2.ETokenAudiences.SYSTEM;#K=1;token;constructor(w){this.params=w}async signToken(){let{params:{credential:{tenantId:w,appId:K,modeId:W,secretKey:J},options:P}}=this;try{let I=new Uint8Array(Buffer.from(J,"base64")),b=await crypto.subtle.importKey("raw",I,{name:"HMAC",hash:"SHA-512"},!1,["sign","verify"]),G=await new gK({tenantId:w,appId:K,modeId:W,iss:w,aud:k2.ETokenAudiences.SYSTEM}).setProtectedHeader({alg:"HS512"}).sign(b);return this.token=G,G}catch(I){if(P?.logs)console.error("[BoolGuard] Sign token error:",I);throw I}}async ping(){let{token:w,params:{credential:{tenantId:K,appId:W,modeId:J},options:P}}=this;try{let I=w||await this.signToken(),b=new Headers;b.append("X-Tenant-ID",K),b.append("X-App-ID",W),b.append("X-Mode-ID",J),b.append("Authorization",`Bearer ${I}`);let G=await fetch(`${this.#w}/v${P?.version||this.#K}/tenant-app-modes/ping`,{method:"GET",headers:b});if(!G.ok)throw await G.json();return G.ok}catch(I){if(P?.logs)console.error("[BoolGuard] Ping error:",I);return!1}}async createPlainAccount({identity:w,password:K,metadata:W}){let{token:J,params:{credential:{tenantId:P,appId:I,modeId:b},options:G}}=this;try{let M=J||await this.signToken(),O=new Headers;O.append("X-Tenant-ID",P),O.append("X-App-ID",I),O.append("X-Mode-ID",b),O.append("Authorization",`Bearer ${M}`),O.append("Content-Type","application/json");let D=await fetch(`${this.#w}/v${G?.version||this.#K}/tenant-app-mode-accounts`,{method:"POST",headers:O,body:JSON.stringify({data:Object.freeze({type:"plain",identity:w,password:K,metadata:W})})});if(!D.ok)throw await D.json();let{data:Q}=await D.json();return Object.freeze({account:Q.account,credential:Q.credential})}catch(M){if(G?.logs)console.error("[BoolGuard] Create plain account error:",M);throw M}}async createEmailAccount({identity:w,password:K,metadata:W}){let{token:J,params:{credential:{tenantId:P,appId:I,modeId:b},options:G}}=this;try{let M=J||await this.signToken(),O=new Headers;O.append("X-Tenant-ID",P),O.append("X-App-ID",I),O.append("X-Mode-ID",b),O.append("Authorization",`Bearer ${M}`),O.append("Content-Type","application/json");let D=await fetch(`${this.#w}/v${G?.version||this.#K}/tenant-app-mode-accounts`,{method:"POST",headers:O,body:JSON.stringify({data:Object.freeze({type:"email",identity:w,password:K,metadata:W})})});if(!D.ok)throw await D.json();let{data:Q}=await D.json();return Object.freeze({account:Q.account,credential:Q.credential})}catch(M){if(G?.logs)console.error("[BoolGuard] Create email account error:",M);throw M}}async authenticate({identity:w,password:K}){let{token:W,params:{credential:{tenantId:J,appId:P,modeId:I},options:b}}=this;try{let G=W||await this.signToken(),M=await M5().safeParseAsync(w),O=new Headers;O.append("X-Tenant-ID",J),O.append("X-App-ID",P),O.append("X-Mode-ID",I),O.append("Authorization",`Bearer ${G}`),O.append("Content-Type","application/json");let D=await fetch(`${this.#w}/v${b?.version||this.#K}/tenant-app-mode-accounts/authenticate`,{method:"POST",headers:O,body:JSON.stringify({data:Object.freeze({type:!M.success?"plain":"email",identity:w,password:K})})});if(!D.ok)throw await D.json();let{data:Q}=await D.json();return Object.freeze({account:Q.account,credential:Q.credential,token:Q.token})}catch(G){if(b?.logs)console.error("[BoolGuard] Authenticate error:",G);throw G}}async verifyToken({token:w}){let{params:{credential:{tenantId:K,appId:W,modeId:J},options:P}}=this;try{let I=this.token||await this.signToken(),b=new Headers;b.append("X-Tenant-ID",K),b.append("X-App-ID",W),b.append("X-Mode-ID",J),b.append("Authorization",`Bearer ${I}`),b.append("Content-Type","application/json");let G=await fetch(`${this.#w}/v${P?.version||this.#K}/tenant-app-mode-accounts/verify`,{method:"POST",headers:b,body:JSON.stringify({data:Object.freeze({token:w})})});if(!G.ok)throw await G.json();let{data:M}=await G.json();return Object.freeze({account:M.account,credential:M.credential})}catch(I){if(P?.logs)console.error("[BoolGuard] Verify token error:",I);throw I}}}var IG=async({credential:w,definition:K,options:W})=>{let J=new CK({credential:w,definition:K,options:W});if(await J.signToken(),!await J.ping())throw Error("Ping to Bool Guard service failed!");return[hw.guardClient,J]};export{IG as loader,hw as Keys,r1 as Guard,k2 as Enums,y0 as ControllerGuard,CK as Client,u0 as AuthState,p5 as ActionGuard};

//# debugId=1835EC4B754100B564756E2164756E21
