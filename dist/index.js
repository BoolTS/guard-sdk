// @bun
var g1=Object.defineProperty;var T6=(K,w)=>{for(var b in w)g1(K,b,{get:w[b],enumerable:!0,configurable:!0,set:(S)=>w[b]=()=>S})};var q4=function(K,w,b,S){var W=arguments.length,I=W<3?w:S===null?S=Object.getOwnPropertyDescriptor(w,b):S,P;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")I=Reflect.decorate(K,w,b,S);else for(var M=K.length-1;M>=0;M--)if(P=K[M])I=(W<3?P(I):W>3?P(w,b,I):P(w,b))||I;return W>3&&I&&Object.defineProperty(w,b,I),I},D4=(K,w)=>(b,S)=>w(b,S,K);var A4={};T6(A4,{ETokenAudiences:()=>IK});var IK;((w)=>w.SYSTEM="https://api-guard.booljs.com")(IK||={});var $2={};T6($2,{service:()=>Z1,guardMetadata:()=>k1,guardClient:()=>A1,authState:()=>j1});var j1=Symbol.for("__boolGuard::authState"),k1=Symbol.for("__boolGuard::guardMetadata"),Z1=Symbol.for("__boolGuard::authService"),A1=Symbol.for("__boolGuard::guardClient");var c1=(K)=>(w,b)=>{Reflect.defineMetadata($2.guardMetadata,K,w.constructor,b)};var u1=Object.create,{getPrototypeOf:C1,defineProperty:l6,getOwnPropertyNames:x1}=Object,o1=Object.prototype.hasOwnProperty,J6=(K,w,b)=>{b=K!=null?u1(C1(K)):{};let S=w||!K||!K.__esModule?l6(b,"default",{value:K,enumerable:!0}):b;for(let W of x1(K))if(!o1.call(S,W))l6(S,W,{get:()=>K[W],enumerable:!0});return S},m=(K,w)=>()=>(w||K((w={exports:{}}).exports,w),w.exports),r1=(K,w)=>{for(var b in w)l6(K,b,{get:w[b],enumerable:!0,configurable:!0,set:(S)=>w[b]=()=>S})},y1=import.meta.require,d6=m(()=>{/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var K;(function(w){(function(b){var S=typeof globalThis==="object"?globalThis:typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:O(),W=I(w);if(typeof S.Reflect<"u")W=I(S.Reflect,W);if(b(W,S),typeof S.Reflect>"u")S.Reflect=w;function I(J,$){return function(H,X){if(Object.defineProperty(J,H,{configurable:!0,writable:!0,value:X}),$)$(H,X)}}function P(){try{return Function("return this;")()}catch(J){}}function M(){try{return(0,eval)("(function() { return this; })()")}catch(J){}}function O(){return P()||M()}})(function(b,S){var W=Object.prototype.hasOwnProperty,I=typeof Symbol==="function",P=I&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",M=I&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",O=typeof Object.create==="function",J={__proto__:[]}instanceof Array,$=!O&&!J,H={create:O?function(){return l2(Object.create(null))}:J?function(){return l2({__proto__:null})}:function(){return l2({})},has:$?function(U,L){return W.call(U,L)}:function(U,L){return L in U},get:$?function(U,L){return W.call(U,L)?U[L]:void 0}:function(U,L){return U[L]}},X=Object.getPrototypeOf(Function),F=typeof Map==="function"&&typeof Map.prototype.entries==="function"?Map:C6(),D=typeof Set==="function"&&typeof Set.prototype.entries==="function"?Set:d4(),Y=typeof WeakMap==="function"?WeakMap:x6(),v=I?Symbol.for("@reflect-metadata:registry"):void 0,N=a2(),q=s2(N);function Q(U,L,E,c){if(!_(E)){if(!a(U))throw TypeError();if(!t(L))throw TypeError();if(!t(c)&&!_(c)&&!V2(c))throw TypeError();if(V2(c))c=void 0;return E=p(E),K2(U,L,E,c)}else{if(!a(U))throw TypeError();if(!I2(L))throw TypeError();return y(U,L)}}b("decorate",Q);function G(U,L){function E(c,o){if(!t(c))throw TypeError();if(!_(o)&&!D2(o))throw TypeError();g2(U,L,c,o)}return E}b("metadata",G);function h(U,L,E,c){if(!t(E))throw TypeError();if(!_(c))c=p(c);return g2(U,L,E,c)}b("defineMetadata",h);function x(U,L,E){if(!t(L))throw TypeError();if(!_(E))E=p(E);return O2(U,L,E)}b("hasMetadata",x);function V(U,L,E){if(!t(L))throw TypeError();if(!_(E))E=p(E);return b2(U,L,E)}b("hasOwnMetadata",V);function C(U,L,E){if(!t(L))throw TypeError();if(!_(E))E=p(E);return X2(U,L,E)}b("getMetadata",C);function k(U,L,E){if(!t(L))throw TypeError();if(!_(E))E=p(E);return R2(U,L,E)}b("getOwnMetadata",k);function u(U,L){if(!t(U))throw TypeError();if(!_(L))L=p(L);return l(U,L)}b("getMetadataKeys",u);function r(U,L){if(!t(U))throw TypeError();if(!_(L))L=p(L);return z2(U,L)}b("getOwnMetadataKeys",r);function e(U,L,E){if(!t(L))throw TypeError();if(!_(E))E=p(E);if(!t(L))throw TypeError();if(!_(E))E=p(E);var c=N4(L,E,!1);if(_(c))return!1;return c.OrdinaryDeleteMetadata(U,L,E)}b("deleteMetadata",e);function y(U,L){for(var E=U.length-1;E>=0;--E){var c=U[E],o=c(L);if(!_(o)&&!V2(o)){if(!I2(o))throw TypeError();L=o}}return L}function K2(U,L,E,c){for(var o=U.length-1;o>=0;--o){var S2=U[o],z=S2(L,E,c);if(!_(z)&&!V2(z)){if(!t(z))throw TypeError();c=z}}return c}function O2(U,L,E){var c=b2(U,L,E);if(c)return!0;var o=H2(L);if(!V2(o))return O2(U,o,E);return!1}function b2(U,L,E){var c=N4(L,E,!1);if(_(c))return!1;return c2(c.OrdinaryHasOwnMetadata(U,L,E))}function X2(U,L,E){var c=b2(U,L,E);if(c)return R2(U,L,E);var o=H2(L);if(!V2(o))return X2(U,o,E);return}function R2(U,L,E){var c=N4(L,E,!1);if(_(c))return;return c.OrdinaryGetOwnMetadata(U,L,E)}function g2(U,L,E,c){var o=N4(E,c,!0);o.OrdinaryDefineOwnMetadata(U,L,E,c)}function l(U,L){var E=z2(U,L),c=H2(U);if(c===null)return E;var o=l(c,L);if(o.length<=0)return E;if(E.length<=0)return o;var S2=new D,z=[];for(var B=0,g=E;B<g.length;B++){var Z=g[B],A=S2.has(Z);if(!A)S2.add(Z),z.push(Z)}for(var j=0,f=o;j<f.length;j++){var Z=f[j],A=S2.has(Z);if(!A)S2.add(Z),z.push(Z)}return z}function z2(U,L){var E=N4(U,L,!1);if(!E)return[];return E.OrdinaryOwnMetadataKeys(U,L)}function j2(U){if(U===null)return 1;switch(typeof U){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return U===null?1:6;default:return 6}}function _(U){return U===void 0}function V2(U){return U===null}function x2(U){return typeof U==="symbol"}function t(U){return typeof U==="object"?U!==null:typeof U==="function"}function A2(U,L){switch(j2(U)){case 0:return U;case 1:return U;case 2:return U;case 3:return U;case 4:return U;case 5:return U}var E=L===3?"string":L===5?"number":"default",c=M2(U,P);if(c!==void 0){var o=c.call(U,E);if(t(o))throw TypeError();return o}return h2(U,E==="default"?"number":E)}function h2(U,L){if(L==="string"){var E=U.toString;if(i(E)){var c=E.call(U);if(!t(c))return c}var o=U.valueOf;if(i(o)){var c=o.call(U);if(!t(c))return c}}else{var o=U.valueOf;if(i(o)){var c=o.call(U);if(!t(c))return c}var S2=U.toString;if(i(S2)){var c=S2.call(U);if(!t(c))return c}}throw TypeError()}function c2(U){return!!U}function o2(U){return""+U}function p(U){var L=A2(U,3);if(x2(L))return L;return o2(L)}function a(U){return Array.isArray?Array.isArray(U):U instanceof Object?U instanceof Array:Object.prototype.toString.call(U)==="[object Array]"}function i(U){return typeof U==="function"}function I2(U){return typeof U==="function"}function D2(U){switch(j2(U)){case 3:return!0;case 4:return!0;default:return!1}}function U2(U,L){return U===L||U!==U&&L!==L}function M2(U,L){var E=U[L];if(E===void 0||E===null)return;if(!i(E))throw TypeError();return E}function T2(U){var L=M2(U,M);if(!i(L))throw TypeError();var E=L.call(U);if(!t(E))throw TypeError();return E}function Q2(U){return U.value}function Y2(U){var L=U.next();return L.done?!1:L}function r2(U){var L=U.return;if(L)L.call(U)}function H2(U){var L=Object.getPrototypeOf(U);if(typeof U!=="function"||U===X)return L;if(L!==X)return L;var E=U.prototype,c=E&&Object.getPrototypeOf(E);if(c==null||c===Object.prototype)return L;var o=c.constructor;if(typeof o!=="function")return L;if(o===U)return L;return o}function t2(){var U;if(!_(v)&&typeof S.Reflect<"u"&&!(v in S.Reflect)&&typeof S.Reflect.defineMetadata==="function")U=u6(S.Reflect);var L,E,c,o=new Y,S2={registerProvider:z,getProvider:g,setProvider:A};return S2;function z(j){if(!Object.isExtensible(S2))throw Error("Cannot add provider to a frozen registry.");switch(!0){case U===j:break;case _(L):L=j;break;case L===j:break;case _(E):E=j;break;case E===j:break;default:if(c===void 0)c=new D;c.add(j);break}}function B(j,f){if(!_(L)){if(L.isProviderFor(j,f))return L;if(!_(E)){if(E.isProviderFor(j,f))return L;if(!_(c)){var d=T2(c);while(!0){var n=Y2(d);if(!n)return;var J2=Q2(n);if(J2.isProviderFor(j,f))return r2(d),J2}}}}if(!_(U)&&U.isProviderFor(j,f))return U;return}function g(j,f){var d=o.get(j),n;if(!_(d))n=d.get(f);if(!_(n))return n;if(n=B(j,f),!_(n)){if(_(d))d=new F,o.set(j,d);d.set(f,n)}return n}function Z(j){if(_(j))throw TypeError();return L===j||E===j||!_(c)&&c.has(j)}function A(j,f,d){if(!Z(d))throw Error("Metadata provider not registered.");var n=g(j,f);if(n!==d){if(!_(n))return!1;var J2=o.get(j);if(_(J2))J2=new F,o.set(j,J2);J2.set(f,d)}return!0}}function a2(){var U;if(!_(v)&&t(S.Reflect)&&Object.isExtensible(S.Reflect))U=S.Reflect[v];if(_(U))U=t2();if(!_(v)&&t(S.Reflect)&&Object.isExtensible(S.Reflect))Object.defineProperty(S.Reflect,v,{enumerable:!1,configurable:!1,writable:!1,value:U});return U}function s2(U){var L=new Y,E={isProviderFor:function(Z,A){var j=L.get(Z);if(_(j))return!1;return j.has(A)},OrdinaryDefineOwnMetadata:z,OrdinaryHasOwnMetadata:o,OrdinaryGetOwnMetadata:S2,OrdinaryOwnMetadataKeys:B,OrdinaryDeleteMetadata:g};return N.registerProvider(E),E;function c(Z,A,j){var f=L.get(Z),d=!1;if(_(f)){if(!j)return;f=new F,L.set(Z,f),d=!0}var n=f.get(A);if(_(n)){if(!j)return;if(n=new F,f.set(A,n),!U.setProvider(Z,A,E)){if(f.delete(A),d)L.delete(Z);throw Error("Wrong provider for target.")}}return n}function o(Z,A,j){var f=c(A,j,!1);if(_(f))return!1;return c2(f.has(Z))}function S2(Z,A,j){var f=c(A,j,!1);if(_(f))return;return f.get(Z)}function z(Z,A,j,f){var d=c(j,f,!0);d.set(Z,A)}function B(Z,A){var j=[],f=c(Z,A,!1);if(_(f))return j;var d=f.keys(),n=T2(d),J2=0;while(!0){var V4=Y2(n);if(!V4)return j.length=J2,j;var K4=Q2(V4);try{j[J2]=K4}catch(F2){try{r2(n)}finally{throw F2}}J2++}}function g(Z,A,j){var f=c(A,j,!1);if(_(f))return!1;if(!f.delete(Z))return!1;if(f.size===0){var d=L.get(A);if(!_(d)){if(d.delete(j),d.size===0)L.delete(d)}}return!0}}function u6(U){var{defineMetadata:L,hasOwnMetadata:E,getOwnMetadata:c,getOwnMetadataKeys:o,deleteMetadata:S2}=U,z=new Y,B={isProviderFor:function(g,Z){var A=z.get(g);if(!_(A)&&A.has(Z))return!0;if(o(g,Z).length){if(_(A))A=new D,z.set(g,A);return A.add(Z),!0}return!1},OrdinaryDefineOwnMetadata:L,OrdinaryHasOwnMetadata:E,OrdinaryGetOwnMetadata:c,OrdinaryOwnMetadataKeys:o,OrdinaryDeleteMetadata:S2};return B}function N4(U,L,E){var c=N.getProvider(U,L);if(!_(c))return c;if(E){if(N.setProvider(U,L,q))return q;throw Error("Illegal state.")}return}function C6(){var U={},L=[],E=function(){function B(g,Z,A){this._index=0,this._keys=g,this._values=Z,this._selector=A}return B.prototype["@@iterator"]=function(){return this},B.prototype[M]=function(){return this},B.prototype.next=function(){var g=this._index;if(g>=0&&g<this._keys.length){var Z=this._selector(this._keys[g],this._values[g]);if(g+1>=this._keys.length)this._index=-1,this._keys=L,this._values=L;else this._index++;return{value:Z,done:!1}}return{value:void 0,done:!0}},B.prototype.throw=function(g){if(this._index>=0)this._index=-1,this._keys=L,this._values=L;throw g},B.prototype.return=function(g){if(this._index>=0)this._index=-1,this._keys=L,this._values=L;return{value:g,done:!0}},B}(),c=function(){function B(){this._keys=[],this._values=[],this._cacheKey=U,this._cacheIndex=-2}return Object.defineProperty(B.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),B.prototype.has=function(g){return this._find(g,!1)>=0},B.prototype.get=function(g){var Z=this._find(g,!1);return Z>=0?this._values[Z]:void 0},B.prototype.set=function(g,Z){var A=this._find(g,!0);return this._values[A]=Z,this},B.prototype.delete=function(g){var Z=this._find(g,!1);if(Z>=0){var A=this._keys.length;for(var j=Z+1;j<A;j++)this._keys[j-1]=this._keys[j],this._values[j-1]=this._values[j];if(this._keys.length--,this._values.length--,U2(g,this._cacheKey))this._cacheKey=U,this._cacheIndex=-2;return!0}return!1},B.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=U,this._cacheIndex=-2},B.prototype.keys=function(){return new E(this._keys,this._values,o)},B.prototype.values=function(){return new E(this._keys,this._values,S2)},B.prototype.entries=function(){return new E(this._keys,this._values,z)},B.prototype["@@iterator"]=function(){return this.entries()},B.prototype[M]=function(){return this.entries()},B.prototype._find=function(g,Z){if(!U2(this._cacheKey,g)){this._cacheIndex=-1;for(var A=0;A<this._keys.length;A++)if(U2(this._keys[A],g)){this._cacheIndex=A;break}}if(this._cacheIndex<0&&Z)this._cacheIndex=this._keys.length,this._keys.push(g),this._values.push(void 0);return this._cacheIndex},B}();return c;function o(B,g){return B}function S2(B,g){return g}function z(B,g){return[B,g]}}function d4(){var U=function(){function L(){this._map=new F}return Object.defineProperty(L.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),L.prototype.has=function(E){return this._map.has(E)},L.prototype.add=function(E){return this._map.set(E,E),this},L.prototype.delete=function(E){return this._map.delete(E)},L.prototype.clear=function(){this._map.clear()},L.prototype.keys=function(){return this._map.keys()},L.prototype.values=function(){return this._map.keys()},L.prototype.entries=function(){return this._map.entries()},L.prototype["@@iterator"]=function(){return this.keys()},L.prototype[M]=function(){return this.keys()},L}();return U}function x6(){var U=16,L=H.create(),E=c();return function(){function g(){this._key=c()}return g.prototype.has=function(Z){var A=o(Z,!1);return A!==void 0?H.has(A,this._key):!1},g.prototype.get=function(Z){var A=o(Z,!1);return A!==void 0?H.get(A,this._key):void 0},g.prototype.set=function(Z,A){var j=o(Z,!0);return j[this._key]=A,this},g.prototype.delete=function(Z){var A=o(Z,!1);return A!==void 0?delete A[this._key]:!1},g.prototype.clear=function(){this._key=c()},g}();function c(){var g;do g="@@WeakMap@@"+B();while(H.has(L,g));return L[g]=!0,g}function o(g,Z){if(!W.call(g,E)){if(!Z)return;Object.defineProperty(g,E,{value:H.create()})}return g[E]}function S2(g,Z){for(var A=0;A<Z;++A)g[A]=Math.random()*255|0;return g}function z(g){if(typeof Uint8Array==="function"){var Z=new Uint8Array(g);if(typeof crypto<"u")crypto.getRandomValues(Z);else if(typeof msCrypto<"u")msCrypto.getRandomValues(Z);else S2(Z,g);return Z}return S2(Array(g),g)}function B(){var g=z(U);g[6]=g[6]&79|64,g[8]=g[8]&191|128;var Z="";for(var A=0;A<U;++A){var j=g[A];if(A===4||A===6||A===8)Z+="-";if(j<16)Z+="0";Z+=j.toString(16).toLowerCase()}return Z}}function l2(U){return U.__=void 0,delete U.__,U}})})(K||(K={}))}),h4=m((K,w)=>{w.exports=TypeError}),_1=m((K,w)=>{w.exports=y1("util").inspect}),N6=m((K,w)=>{var b=typeof Map==="function"&&Map.prototype,S=Object.getOwnPropertyDescriptor&&b?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,W=b&&S&&typeof S.get==="function"?S.get:null,I=b&&Map.prototype.forEach,P=typeof Set==="function"&&Set.prototype,M=Object.getOwnPropertyDescriptor&&P?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,O=P&&M&&typeof M.get==="function"?M.get:null,J=P&&Set.prototype.forEach,$=typeof WeakMap==="function"&&WeakMap.prototype,H=$?WeakMap.prototype.has:null,X=typeof WeakSet==="function"&&WeakSet.prototype,F=X?WeakSet.prototype.has:null,D=typeof WeakRef==="function"&&WeakRef.prototype,Y=D?WeakRef.prototype.deref:null,v=Boolean.prototype.valueOf,N=Object.prototype.toString,q=Function.prototype.toString,Q=String.prototype.match,G=String.prototype.slice,h=String.prototype.replace,x=String.prototype.toUpperCase,V=String.prototype.toLowerCase,C=RegExp.prototype.test,k=Array.prototype.concat,u=Array.prototype.join,r=Array.prototype.slice,e=Math.floor,y=typeof BigInt==="function"?BigInt.prototype.valueOf:null,K2=Object.getOwnPropertySymbols,O2=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?Symbol.prototype.toString:null,b2=typeof Symbol==="function"&&typeof Symbol.iterator==="object",X2=typeof Symbol==="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===b2?"object":"symbol")?Symbol.toStringTag:null,R2=Object.prototype.propertyIsEnumerable,g2=(typeof Reflect==="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(z){return z.__proto__}:null);function l(z,B){if(z===1/0||z===-1/0||z!==z||z&&z>-1000&&z<1000||C.call(/e/,B))return B;var g=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof z==="number"){var Z=z<0?-e(-z):e(z);if(Z!==z){var A=String(Z),j=G.call(B,A.length+1);return h.call(A,g,"$&_")+"."+h.call(h.call(j,/([0-9]{3})/g,"$&_"),/_$/,"")}}return h.call(B,g,"$&_")}var z2=_1(),j2=z2.custom,_=U2(j2)?j2:null,V2={__proto__:null,double:'"',single:"'"},x2={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};w.exports=function z(B,g,Z,A){var j=g||{};if(Q2(j,"quoteStyle")&&!Q2(V2,j.quoteStyle))throw TypeError('option "quoteStyle" must be "single" or "double"');if(Q2(j,"maxStringLength")&&(typeof j.maxStringLength==="number"?j.maxStringLength<0&&j.maxStringLength!==1/0:j.maxStringLength!==null))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var f=Q2(j,"customInspect")?j.customInspect:!0;if(typeof f!=="boolean"&&f!=="symbol")throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Q2(j,"indent")&&j.indent!==null&&j.indent!=="\t"&&!(parseInt(j.indent,10)===j.indent&&j.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Q2(j,"numericSeparator")&&typeof j.numericSeparator!=="boolean")throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var d=j.numericSeparator;if(typeof B>"u")return"undefined";if(B===null)return"null";if(typeof B==="boolean")return B?"true":"false";if(typeof B==="string")return d4(B,j);if(typeof B==="number"){if(B===0)return 1/0/B>0?"0":"-0";var n=String(B);return d?l(B,n):n}if(typeof B==="bigint"){var J2=String(B)+"n";return d?l(B,J2):J2}var V4=typeof j.depth>"u"?5:j.depth;if(typeof Z>"u")Z=0;if(Z>=V4&&V4>0&&typeof B==="object")return c2(B)?"[Array]":"[Object]";var K4=c(j,Z);if(typeof A>"u")A=[];else if(H2(A,B)>=0)return"[Circular]";function F2(L4,a4,R1){if(a4)A=r.call(A),A.push(a4);if(R1){var WK={depth:j.depth};if(Q2(j,"quoteStyle"))WK.quoteStyle=j.quoteStyle;return z(L4,WK,Z+1,A)}return z(L4,j,Z+1,A)}if(typeof B==="function"&&!p(B)){var t8=r2(B),a8=S2(B,F2);return"[Function"+(t8?": "+t8:" (anonymous)")+"]"+(a8.length>0?" { "+u.call(a8,", ")+" }":"")}if(U2(B)){var s8=b2?h.call(String(B),/^(Symbol\(.*\))_[^)]*$/,"$1"):O2.call(B);return typeof B==="object"&&!b2?l2(s8):s8}if(C6(B)){var Z4="<"+V.call(String(B.nodeName)),o6=B.attributes||[];for(var t4=0;t4<o6.length;t4++)Z4+=" "+o6[t4].name+"="+t(A2(o6[t4].value),"double",j);if(Z4+=">",B.childNodes&&B.childNodes.length)Z4+="...";return Z4+="</"+V.call(String(B.nodeName))+">",Z4}if(c2(B)){if(B.length===0)return"[]";var r6=S2(B,F2);if(K4&&!E(r6))return"["+o(r6,K4)+"]";return"[ "+u.call(r6,", ")+" ]"}if(a(B)){var y6=S2(B,F2);if(!("cause"in Error.prototype)&&"cause"in B&&!R2.call(B,"cause"))return"{ ["+String(B)+"] "+u.call(k.call("[cause]: "+F2(B.cause),y6),", ")+" }";if(y6.length===0)return"["+String(B)+"]";return"{ ["+String(B)+"] "+u.call(y6,", ")+" }"}if(typeof B==="object"&&f){if(_&&typeof B[_]==="function"&&z2)return z2(B,{depth:V4-Z});else if(f!=="symbol"&&typeof B.inspect==="function")return B.inspect()}if(t2(B)){var KK=[];if(I)I.call(B,function(L4,a4){KK.push(F2(a4,B,!0)+" => "+F2(L4,B))});return L("Map",W.call(B),KK,K4)}if(u6(B)){var wK=[];if(J)J.call(B,function(L4){wK.push(F2(L4,B))});return L("Set",O.call(B),wK,K4)}if(a2(B))return U("WeakMap");if(N4(B))return U("WeakSet");if(s2(B))return U("WeakRef");if(I2(B))return l2(F2(Number(B)));if(M2(B))return l2(F2(y.call(B)));if(D2(B))return l2(v.call(B));if(i(B))return l2(F2(String(B)));if(typeof window<"u"&&B===window)return"{ [object Window] }";if(typeof globalThis<"u"&&B===globalThis||typeof global<"u"&&B===global)return"{ [object globalThis] }";if(!o2(B)&&!p(B)){var _6=S2(B,F2),bK=g2?g2(B)===Object.prototype:B instanceof Object||B.constructor===Object,m6=B instanceof Object?"":"null prototype",SK=!bK&&X2&&Object(B)===B&&X2 in B?G.call(Y2(B),8,-1):m6?"Object":"",E1=bK||typeof B.constructor!=="function"?"":B.constructor.name?B.constructor.name+" ":"",f6=E1+(SK||m6?"["+u.call(k.call([],SK||[],m6||[]),": ")+"] ":"");if(_6.length===0)return f6+"{}";if(K4)return f6+"{"+o(_6,K4)+"}";return f6+"{ "+u.call(_6,", ")+" }"}return String(B)};function t(z,B,g){var Z=g.quoteStyle||B,A=V2[Z];return A+z+A}function A2(z){return h.call(String(z),/"/g,"&quot;")}function h2(z){return!X2||!(typeof z==="object"&&((X2 in z)||typeof z[X2]<"u"))}function c2(z){return Y2(z)==="[object Array]"&&h2(z)}function o2(z){return Y2(z)==="[object Date]"&&h2(z)}function p(z){return Y2(z)==="[object RegExp]"&&h2(z)}function a(z){return Y2(z)==="[object Error]"&&h2(z)}function i(z){return Y2(z)==="[object String]"&&h2(z)}function I2(z){return Y2(z)==="[object Number]"&&h2(z)}function D2(z){return Y2(z)==="[object Boolean]"&&h2(z)}function U2(z){if(b2)return z&&typeof z==="object"&&z instanceof Symbol;if(typeof z==="symbol")return!0;if(!z||typeof z!=="object"||!O2)return!1;try{return O2.call(z),!0}catch(B){}return!1}function M2(z){if(!z||typeof z!=="object"||!y)return!1;try{return y.call(z),!0}catch(B){}return!1}var T2=Object.prototype.hasOwnProperty||function(z){return z in this};function Q2(z,B){return T2.call(z,B)}function Y2(z){return N.call(z)}function r2(z){if(z.name)return z.name;var B=Q.call(q.call(z),/^function\s*([\w$]+)/);if(B)return B[1];return null}function H2(z,B){if(z.indexOf)return z.indexOf(B);for(var g=0,Z=z.length;g<Z;g++)if(z[g]===B)return g;return-1}function t2(z){if(!W||!z||typeof z!=="object")return!1;try{W.call(z);try{O.call(z)}catch(B){return!0}return z instanceof Map}catch(B){}return!1}function a2(z){if(!H||!z||typeof z!=="object")return!1;try{H.call(z,H);try{F.call(z,F)}catch(B){return!0}return z instanceof WeakMap}catch(B){}return!1}function s2(z){if(!Y||!z||typeof z!=="object")return!1;try{return Y.call(z),!0}catch(B){}return!1}function u6(z){if(!O||!z||typeof z!=="object")return!1;try{O.call(z);try{W.call(z)}catch(B){return!0}return z instanceof Set}catch(B){}return!1}function N4(z){if(!F||!z||typeof z!=="object")return!1;try{F.call(z,F);try{H.call(z,H)}catch(B){return!0}return z instanceof WeakSet}catch(B){}return!1}function C6(z){if(!z||typeof z!=="object")return!1;if(typeof HTMLElement<"u"&&z instanceof HTMLElement)return!0;return typeof z.nodeName==="string"&&typeof z.getAttribute==="function"}function d4(z,B){if(z.length>B.maxStringLength){var g=z.length-B.maxStringLength,Z="... "+g+" more character"+(g>1?"s":"");return d4(G.call(z,0,B.maxStringLength),B)+Z}var A=x2[B.quoteStyle||"single"];A.lastIndex=0;var j=h.call(h.call(z,A,"\\$1"),/[\x00-\x1f]/g,x6);return t(j,"single",B)}function x6(z){var B=z.charCodeAt(0),g={8:"b",9:"t",10:"n",12:"f",13:"r"}[B];if(g)return"\\"+g;return"\\x"+(B<16?"0":"")+x.call(B.toString(16))}function l2(z){return"Object("+z+")"}function U(z){return z+" { ? }"}function L(z,B,g,Z){var A=Z?o(g,Z):u.call(g,", ");return z+" ("+B+") {"+A+"}"}function E(z){for(var B=0;B<z.length;B++)if(H2(z[B],`
`)>=0)return!1;return!0}function c(z,B){var g;if(z.indent==="\t")g="\t";else if(typeof z.indent==="number"&&z.indent>0)g=u.call(Array(z.indent+1)," ");else return null;return{base:g,prev:u.call(Array(B+1),g)}}function o(z,B){if(z.length===0)return"";var g=`
`+B.prev+B.base;return g+u.call(z,","+g)+`
`+B.prev}function S2(z,B){var g=c2(z),Z=[];if(g){Z.length=z.length;for(var A=0;A<z.length;A++)Z[A]=Q2(z,A)?B(z[A],z):""}var j=typeof K2==="function"?K2(z):[],f;if(b2){f={};for(var d=0;d<j.length;d++)f["$"+j[d]]=j[d]}for(var n in z){if(!Q2(z,n))continue;if(g&&String(Number(n))===n&&n<z.length)continue;if(b2&&f["$"+n]instanceof Symbol)continue;else if(C.call(/[^\w$]/,n))Z.push(B(n,z)+": "+B(z[n],z));else Z.push(n+": "+B(z[n],z))}if(typeof K2==="function"){for(var J2=0;J2<j.length;J2++)if(R2.call(z,j[J2]))Z.push("["+B(j[J2])+"]: "+B(z[j[J2]],z))}return Z}}),m1=m((K,w)=>{var b=N6(),S=h4(),W=function(J,$,H){var X=J,F;for(;(F=X.next)!=null;X=F)if(F.key===$){if(X.next=F.next,!H)F.next=J.next,J.next=F;return F}},I=function(J,$){if(!J)return;var H=W(J,$);return H&&H.value},P=function(J,$,H){var X=W(J,$);if(X)X.value=H;else J.next={key:$,next:J.next,value:H}},M=function(J,$){if(!J)return!1;return!!W(J,$)},O=function(J,$){if(J)return W(J,$,!0)};w.exports=function(){var J,$={assert:function(H){if(!$.has(H))throw new S("Side channel does not contain "+b(H))},delete:function(H){var X=J&&J.next,F=O(J,H);if(F&&X&&X===F)J=void 0;return!!F},get:function(H){return I(J,H)},has:function(H){return M(J,H)},set:function(H,X){if(!J)J={next:void 0};P(J,H,X)}};return $}}),OK=m((K,w)=>{w.exports=Object}),f1=m((K,w)=>{w.exports=Error}),T1=m((K,w)=>{w.exports=EvalError}),l1=m((K,w)=>{w.exports=RangeError}),p1=m((K,w)=>{w.exports=ReferenceError}),i1=m((K,w)=>{w.exports=SyntaxError}),e1=m((K,w)=>{w.exports=URIError}),n1=m((K,w)=>{w.exports=Math.abs}),d1=m((K,w)=>{w.exports=Math.floor}),t1=m((K,w)=>{w.exports=Math.max}),a1=m((K,w)=>{w.exports=Math.min}),s1=m((K,w)=>{w.exports=Math.pow}),Kw=m((K,w)=>{w.exports=Math.round}),ww=m((K,w)=>{w.exports=Number.isNaN||function(b){return b!==b}}),bw=m((K,w)=>{var b=ww();w.exports=function(S){if(b(S)||S===0)return S;return S<0?-1:1}}),Sw=m((K,w)=>{w.exports=Object.getOwnPropertyDescriptor}),JK=m((K,w)=>{var b=Sw();if(b)try{b([],"length")}catch(S){b=null}w.exports=b}),Ww=m((K,w)=>{var b=Object.defineProperty||!1;if(b)try{b({},"a",{value:1})}catch(S){b=!1}w.exports=b}),Iw=m((K,w)=>{w.exports=function(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function")return!1;if(typeof Symbol.iterator==="symbol")return!0;var b={},S=Symbol("test"),W=Object(S);if(typeof S==="string")return!1;if(Object.prototype.toString.call(S)!=="[object Symbol]")return!1;if(Object.prototype.toString.call(W)!=="[object Symbol]")return!1;var I=42;b[S]=I;for(var P in b)return!1;if(typeof Object.keys==="function"&&Object.keys(b).length!==0)return!1;if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(b).length!==0)return!1;var M=Object.getOwnPropertySymbols(b);if(M.length!==1||M[0]!==S)return!1;if(!Object.prototype.propertyIsEnumerable.call(b,S))return!1;if(typeof Object.getOwnPropertyDescriptor==="function"){var O=Object.getOwnPropertyDescriptor(b,S);if(O.value!==I||O.enumerable!==!0)return!1}return!0}}),Pw=m((K,w)=>{var b=typeof Symbol<"u"&&Symbol,S=Iw();w.exports=function(){if(typeof b!=="function")return!1;if(typeof Symbol!=="function")return!1;if(typeof b("foo")!=="symbol")return!1;if(typeof Symbol("bar")!=="symbol")return!1;return S()}}),NK=m((K,w)=>{w.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null}),DK=m((K,w)=>{var b=OK();w.exports=b.getPrototypeOf||null}),Mw=m((K,w)=>{var b="Function.prototype.bind called on incompatible ",S=Object.prototype.toString,W=Math.max,I="[object Function]",P=function(J,$){var H=[];for(var X=0;X<J.length;X+=1)H[X]=J[X];for(var F=0;F<$.length;F+=1)H[F+J.length]=$[F];return H},M=function(J,$){var H=[];for(var X=$||0,F=0;X<J.length;X+=1,F+=1)H[F]=J[X];return H},O=function(J,$){var H="";for(var X=0;X<J.length;X+=1)if(H+=J[X],X+1<J.length)H+=$;return H};w.exports=function(J){var $=this;if(typeof $!=="function"||S.apply($)!==I)throw TypeError(b+$);var H=M(arguments,1),X,F=function(){if(this instanceof X){var q=$.apply(this,P(H,arguments));if(Object(q)===q)return q;return this}return $.apply(J,P(H,arguments))},D=W(0,$.length-H.length),Y=[];for(var v=0;v<D;v++)Y[v]="$"+v;if(X=Function("binder","return function ("+O(Y,",")+"){ return binder.apply(this,arguments); }")(F),$.prototype){var N=function(){};N.prototype=$.prototype,X.prototype=new N,N.prototype=null}return X}}),D6=m((K,w)=>{var b=Mw();w.exports=Function.prototype.bind||b}),t6=m((K,w)=>{w.exports=Function.prototype.call}),$K=m((K,w)=>{w.exports=Function.prototype.apply}),Ow=m((K,w)=>{w.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply}),Jw=m((K,w)=>{var b=D6(),S=$K(),W=t6(),I=Ow();w.exports=I||b.call(W,S)}),GK=m((K,w)=>{var b=D6(),S=h4(),W=t6(),I=Jw();w.exports=function(P){if(P.length<1||typeof P[0]!=="function")throw new S("a function is required");return I(b,W,P)}}),Nw=m((K,w)=>{var b=GK(),S=JK(),W;try{W=[].__proto__===Array.prototype}catch(O){if(!O||typeof O!=="object"||!("code"in O)||O.code!=="ERR_PROTO_ACCESS")throw O}var I=!!W&&S&&S(Object.prototype,"__proto__"),P=Object,M=P.getPrototypeOf;w.exports=I&&typeof I.get==="function"?b([I.get]):typeof M==="function"?function(O){return M(O==null?O:P(O))}:!1}),Dw=m((K,w)=>{var b=NK(),S=DK(),W=Nw();w.exports=b?function(I){return b(I)}:S?function(I){if(!I||typeof I!=="object"&&typeof I!=="function")throw TypeError("getProto: not an object");return S(I)}:W?function(I){return W(I)}:null}),$w=m((K,w)=>{var b=Function.prototype.call,S=Object.prototype.hasOwnProperty,W=D6();w.exports=W.call(b,S)}),a6=m((K,w)=>{var b,S=OK(),W=f1(),I=T1(),P=l1(),M=p1(),O=i1(),J=h4(),$=e1(),H=n1(),X=d1(),F=t1(),D=a1(),Y=s1(),v=Kw(),N=bw(),q=Function,Q=function(p){try{return q('"use strict"; return ('+p+").constructor;")()}catch(a){}},G=JK(),h=Ww(),x=function(){throw new J},V=G?function(){try{return arguments.callee,x}catch(p){try{return G(arguments,"callee").get}catch(a){return x}}}():x,C=Pw()(),k=Dw(),u=DK(),r=NK(),e=$K(),y=t6(),K2={},O2=typeof Uint8Array>"u"||!k?b:k(Uint8Array),b2={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?b:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?b:ArrayBuffer,"%ArrayIteratorPrototype%":C&&k?k([][Symbol.iterator]()):b,"%AsyncFromSyncIteratorPrototype%":b,"%AsyncFunction%":K2,"%AsyncGenerator%":K2,"%AsyncGeneratorFunction%":K2,"%AsyncIteratorPrototype%":K2,"%Atomics%":typeof Atomics>"u"?b:Atomics,"%BigInt%":typeof BigInt>"u"?b:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?b:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?b:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?b:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":W,"%eval%":eval,"%EvalError%":I,"%Float16Array%":typeof Float16Array>"u"?b:Float16Array,"%Float32Array%":typeof Float32Array>"u"?b:Float32Array,"%Float64Array%":typeof Float64Array>"u"?b:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?b:FinalizationRegistry,"%Function%":q,"%GeneratorFunction%":K2,"%Int8Array%":typeof Int8Array>"u"?b:Int8Array,"%Int16Array%":typeof Int16Array>"u"?b:Int16Array,"%Int32Array%":typeof Int32Array>"u"?b:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":C&&k?k(k([][Symbol.iterator]())):b,"%JSON%":typeof JSON==="object"?JSON:b,"%Map%":typeof Map>"u"?b:Map,"%MapIteratorPrototype%":typeof Map>"u"||!C||!k?b:k(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":S,"%Object.getOwnPropertyDescriptor%":G,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?b:Promise,"%Proxy%":typeof Proxy>"u"?b:Proxy,"%RangeError%":P,"%ReferenceError%":M,"%Reflect%":typeof Reflect>"u"?b:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?b:Set,"%SetIteratorPrototype%":typeof Set>"u"||!C||!k?b:k(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?b:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":C&&k?k(""[Symbol.iterator]()):b,"%Symbol%":C?Symbol:b,"%SyntaxError%":O,"%ThrowTypeError%":V,"%TypedArray%":O2,"%TypeError%":J,"%Uint8Array%":typeof Uint8Array>"u"?b:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?b:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?b:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?b:Uint32Array,"%URIError%":$,"%WeakMap%":typeof WeakMap>"u"?b:WeakMap,"%WeakRef%":typeof WeakRef>"u"?b:WeakRef,"%WeakSet%":typeof WeakSet>"u"?b:WeakSet,"%Function.prototype.call%":y,"%Function.prototype.apply%":e,"%Object.defineProperty%":h,"%Object.getPrototypeOf%":u,"%Math.abs%":H,"%Math.floor%":X,"%Math.max%":F,"%Math.min%":D,"%Math.pow%":Y,"%Math.round%":v,"%Math.sign%":N,"%Reflect.getPrototypeOf%":r};if(k)try{null.error}catch(p){X2=k(k(p)),b2["%Error.prototype%"]=X2}var X2,R2=function p(a){var i;if(a==="%AsyncFunction%")i=Q("async function () {}");else if(a==="%GeneratorFunction%")i=Q("function* () {}");else if(a==="%AsyncGeneratorFunction%")i=Q("async function* () {}");else if(a==="%AsyncGenerator%"){var I2=p("%AsyncGeneratorFunction%");if(I2)i=I2.prototype}else if(a==="%AsyncIteratorPrototype%"){var D2=p("%AsyncGenerator%");if(D2&&k)i=k(D2.prototype)}return b2[a]=i,i},g2={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},l=D6(),z2=$w(),j2=l.call(y,Array.prototype.concat),_=l.call(e,Array.prototype.splice),V2=l.call(y,String.prototype.replace),x2=l.call(y,String.prototype.slice),t=l.call(y,RegExp.prototype.exec),A2=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,h2=/\\(\\)?/g,c2=function(p){var a=x2(p,0,1),i=x2(p,-1);if(a==="%"&&i!=="%")throw new O("invalid intrinsic syntax, expected closing `%`");else if(i==="%"&&a!=="%")throw new O("invalid intrinsic syntax, expected opening `%`");var I2=[];return V2(p,A2,function(D2,U2,M2,T2){I2[I2.length]=M2?V2(T2,h2,"$1"):U2||D2}),I2},o2=function(p,a){var i=p,I2;if(z2(g2,i))I2=g2[i],i="%"+I2[0]+"%";if(z2(b2,i)){var D2=b2[i];if(D2===K2)D2=R2(i);if(typeof D2>"u"&&!a)throw new J("intrinsic "+p+" exists, but is not available. Please file an issue!");return{alias:I2,name:i,value:D2}}throw new O("intrinsic "+p+" does not exist!")};w.exports=function(p,a){if(typeof p!=="string"||p.length===0)throw new J("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof a!=="boolean")throw new J('"allowMissing" argument must be a boolean');if(t(/^%?[^%]*%?$/,p)===null)throw new O("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=c2(p),I2=i.length>0?i[0]:"",D2=o2("%"+I2+"%",a),U2=D2.name,M2=D2.value,T2=!1,Q2=D2.alias;if(Q2)I2=Q2[0],_(i,j2([0,1],Q2));for(var Y2=1,r2=!0;Y2<i.length;Y2+=1){var H2=i[Y2],t2=x2(H2,0,1),a2=x2(H2,-1);if((t2==='"'||t2==="'"||t2==="`"||(a2==='"'||a2==="'"||a2==="`"))&&t2!==a2)throw new O("property names with quotes must have matching quotes");if(H2==="constructor"||!r2)T2=!0;if(I2+="."+H2,U2="%"+I2+"%",z2(b2,U2))M2=b2[U2];else if(M2!=null){if(!(H2 in M2)){if(!a)throw new J("base intrinsic for "+p+" exists, but the property is not available.");return}if(G&&Y2+1>=i.length){var s2=G(M2,H2);if(r2=!!s2,r2&&"get"in s2&&!("originalValue"in s2.get))M2=s2.get;else M2=M2[H2]}else r2=z2(M2,H2),M2=M2[H2];if(r2&&!T2)b2[U2]=M2}}return M2}}),BK=m((K,w)=>{var b=a6(),S=GK(),W=S([b("%String.prototype.indexOf%")]);w.exports=function(I,P){var M=b(I,!!P);if(typeof M==="function"&&W(I,".prototype.")>-1)return S([M]);return M}}),XK=m((K,w)=>{var b=a6(),S=BK(),W=N6(),I=h4(),P=b("%Map%",!0),M=S("Map.prototype.get",!0),O=S("Map.prototype.set",!0),J=S("Map.prototype.has",!0),$=S("Map.prototype.delete",!0),H=S("Map.prototype.size",!0);w.exports=!!P&&function(){var X,F={assert:function(D){if(!F.has(D))throw new I("Side channel does not contain "+W(D))},delete:function(D){if(X){var Y=$(X,D);if(H(X)===0)X=void 0;return Y}return!1},get:function(D){if(X)return M(X,D)},has:function(D){if(X)return J(X,D);return!1},set:function(D,Y){if(!X)X=new P;O(X,D,Y)}};return F}}),Gw=m((K,w)=>{var b=a6(),S=BK(),W=N6(),I=XK(),P=h4(),M=b("%WeakMap%",!0),O=S("WeakMap.prototype.get",!0),J=S("WeakMap.prototype.set",!0),$=S("WeakMap.prototype.has",!0),H=S("WeakMap.prototype.delete",!0);w.exports=M?function(){var X,F,D={assert:function(Y){if(!D.has(Y))throw new P("Side channel does not contain "+W(Y))},delete:function(Y){if(M&&Y&&(typeof Y==="object"||typeof Y==="function")){if(X)return H(X,Y)}else if(I){if(F)return F.delete(Y)}return!1},get:function(Y){if(M&&Y&&(typeof Y==="object"||typeof Y==="function")){if(X)return O(X,Y)}return F&&F.get(Y)},has:function(Y){if(M&&Y&&(typeof Y==="object"||typeof Y==="function")){if(X)return $(X,Y)}return!!F&&F.has(Y)},set:function(Y,v){if(M&&Y&&(typeof Y==="object"||typeof Y==="function")){if(!X)X=new M;J(X,Y,v)}else if(I){if(!F)F=I();F.set(Y,v)}}};return D}:I}),Bw=m((K,w)=>{var b=h4(),S=N6(),W=m1(),I=XK(),P=Gw(),M=P||I||W;w.exports=function(){var O,J={assert:function($){if(!J.has($))throw new b("Side channel does not contain "+S($))},delete:function($){return!!O&&O.delete($)},get:function($){return O&&O.get($)},has:function($){return!!O&&O.has($)},set:function($,H){if(!O)O=M();O.set($,H)}};return J}}),s6=m((K,w)=>{var b=String.prototype.replace,S=/%20/g,W={RFC1738:"RFC1738",RFC3986:"RFC3986"};w.exports={default:W.RFC3986,formatters:{RFC1738:function(I){return b.call(I,S,"+")},RFC3986:function(I){return String(I)}},RFC1738:W.RFC1738,RFC3986:W.RFC3986}}),zK=m((K,w)=>{var b=s6(),S=Object.prototype.hasOwnProperty,W=Array.isArray,I=function(){var q=[];for(var Q=0;Q<256;++Q)q.push("%"+((Q<16?"0":"")+Q.toString(16)).toUpperCase());return q}(),P=function(q){while(q.length>1){var Q=q.pop(),G=Q.obj[Q.prop];if(W(G)){var h=[];for(var x=0;x<G.length;++x)if(typeof G[x]<"u")h.push(G[x]);Q.obj[Q.prop]=h}}},M=function(q,Q){var G=Q&&Q.plainObjects?{__proto__:null}:{};for(var h=0;h<q.length;++h)if(typeof q[h]<"u")G[h]=q[h];return G},O=function q(Q,G,h){if(!G)return Q;if(typeof G!=="object"&&typeof G!=="function"){if(W(Q))Q.push(G);else if(Q&&typeof Q==="object"){if(h&&(h.plainObjects||h.allowPrototypes)||!S.call(Object.prototype,G))Q[G]=!0}else return[Q,G];return Q}if(!Q||typeof Q!=="object")return[Q].concat(G);var x=Q;if(W(Q)&&!W(G))x=M(Q,h);if(W(Q)&&W(G))return G.forEach(function(V,C){if(S.call(Q,C)){var k=Q[C];if(k&&typeof k==="object"&&V&&typeof V==="object")Q[C]=q(k,V,h);else Q.push(V)}else Q[C]=V}),Q;return Object.keys(G).reduce(function(V,C){var k=G[C];if(S.call(V,C))V[C]=q(V[C],k,h);else V[C]=k;return V},x)},J=function(q,Q){return Object.keys(Q).reduce(function(G,h){return G[h]=Q[h],G},q)},$=function(q,Q,G){var h=q.replace(/\+/g," ");if(G==="iso-8859-1")return h.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(h)}catch(x){return h}},H=1024,X=function(q,Q,G,h,x){if(q.length===0)return q;var V=q;if(typeof q==="symbol")V=Symbol.prototype.toString.call(q);else if(typeof q!=="string")V=String(q);if(G==="iso-8859-1")return escape(V).replace(/%u[0-9a-f]{4}/gi,function(K2){return"%26%23"+parseInt(K2.slice(2),16)+"%3B"});var C="";for(var k=0;k<V.length;k+=H){var u=V.length>=H?V.slice(k,k+H):V,r=[];for(var e=0;e<u.length;++e){var y=u.charCodeAt(e);if(y===45||y===46||y===95||y===126||y>=48&&y<=57||y>=65&&y<=90||y>=97&&y<=122||x===b.RFC1738&&(y===40||y===41)){r[r.length]=u.charAt(e);continue}if(y<128){r[r.length]=I[y];continue}if(y<2048){r[r.length]=I[192|y>>6]+I[128|y&63];continue}if(y<55296||y>=57344){r[r.length]=I[224|y>>12]+I[128|y>>6&63]+I[128|y&63];continue}e+=1,y=65536+((y&1023)<<10|u.charCodeAt(e)&1023),r[r.length]=I[240|y>>18]+I[128|y>>12&63]+I[128|y>>6&63]+I[128|y&63]}C+=r.join("")}return C},F=function(q){var Q=[{obj:{o:q},prop:"o"}],G=[];for(var h=0;h<Q.length;++h){var x=Q[h],V=x.obj[x.prop],C=Object.keys(V);for(var k=0;k<C.length;++k){var u=C[k],r=V[u];if(typeof r==="object"&&r!==null&&G.indexOf(r)===-1)Q.push({obj:V,prop:u}),G.push(r)}}return P(Q),q},D=function(q){return Object.prototype.toString.call(q)==="[object RegExp]"},Y=function(q){if(!q||typeof q!=="object")return!1;return!!(q.constructor&&q.constructor.isBuffer&&q.constructor.isBuffer(q))},v=function(q,Q){return[].concat(q,Q)},N=function(q,Q){if(W(q)){var G=[];for(var h=0;h<q.length;h+=1)G.push(Q(q[h]));return G}return Q(q)};w.exports={arrayToObject:M,assign:J,combine:v,compact:F,decode:$,encode:X,isBuffer:Y,isRegExp:D,maybeMap:N,merge:O}}),Xw=m((K,w)=>{var b=Bw(),S=zK(),W=s6(),I=Object.prototype.hasOwnProperty,P={brackets:function(N){return N+"[]"},comma:"comma",indices:function(N,q){return N+"["+q+"]"},repeat:function(N){return N}},M=Array.isArray,O=Array.prototype.push,J=function(N,q){O.apply(N,M(q)?q:[q])},$=Date.prototype.toISOString,H=W.default,X={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:S.encode,encodeValuesOnly:!1,filter:void 0,format:H,formatter:W.formatters[H],indices:!1,serializeDate:function(N){return $.call(N)},skipNulls:!1,strictNullHandling:!1},F=function(N){return typeof N==="string"||typeof N==="number"||typeof N==="boolean"||typeof N==="symbol"||typeof N==="bigint"},D={},Y=function N(q,Q,G,h,x,V,C,k,u,r,e,y,K2,O2,b2,X2,R2,g2){var l=q,z2=g2,j2=0,_=!1;while((z2=z2.get(D))!==void 0&&!_){var V2=z2.get(q);if(j2+=1,typeof V2<"u")if(V2===j2)throw RangeError("Cyclic object value");else _=!0;if(typeof z2.get(D)>"u")j2=0}if(typeof r==="function")l=r(Q,l);else if(l instanceof Date)l=K2(l);else if(G==="comma"&&M(l))l=S.maybeMap(l,function(M2){if(M2 instanceof Date)return K2(M2);return M2});if(l===null){if(V)return u&&!X2?u(Q,X.encoder,R2,"key",O2):Q;l=""}if(F(l)||S.isBuffer(l)){if(u){var x2=X2?Q:u(Q,X.encoder,R2,"key",O2);return[b2(x2)+"="+b2(u(l,X.encoder,R2,"value",O2))]}return[b2(Q)+"="+b2(String(l))]}var t=[];if(typeof l>"u")return t;var A2;if(G==="comma"&&M(l)){if(X2&&u)l=S.maybeMap(l,u);A2=[{value:l.length>0?l.join(",")||null:void 0}]}else if(M(r))A2=r;else{var h2=Object.keys(l);A2=e?h2.sort(e):h2}var c2=k?String(Q).replace(/\./g,"%2E"):String(Q),o2=h&&M(l)&&l.length===1?c2+"[]":c2;if(x&&M(l)&&l.length===0)return o2+"[]";for(var p=0;p<A2.length;++p){var a=A2[p],i=typeof a==="object"&&a&&typeof a.value<"u"?a.value:l[a];if(C&&i===null)continue;var I2=y&&k?String(a).replace(/\./g,"%2E"):String(a),D2=M(l)?typeof G==="function"?G(o2,I2):o2:o2+(y?"."+I2:"["+I2+"]");g2.set(q,j2);var U2=b();U2.set(D,g2),J(t,N(i,D2,G,h,x,V,C,k,G==="comma"&&X2&&M(l)?null:u,r,e,y,K2,O2,b2,X2,R2,U2))}return t},v=function(N){if(!N)return X;if(typeof N.allowEmptyArrays<"u"&&typeof N.allowEmptyArrays!=="boolean")throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof N.encodeDotInKeys<"u"&&typeof N.encodeDotInKeys!=="boolean")throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(N.encoder!==null&&typeof N.encoder<"u"&&typeof N.encoder!=="function")throw TypeError("Encoder has to be a function.");var q=N.charset||X.charset;if(typeof N.charset<"u"&&N.charset!=="utf-8"&&N.charset!=="iso-8859-1")throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var Q=W.default;if(typeof N.format<"u"){if(!I.call(W.formatters,N.format))throw TypeError("Unknown format option provided.");Q=N.format}var G=W.formatters[Q],h=X.filter;if(typeof N.filter==="function"||M(N.filter))h=N.filter;var x;if(N.arrayFormat in P)x=N.arrayFormat;else if("indices"in N)x=N.indices?"indices":"repeat";else x=X.arrayFormat;if("commaRoundTrip"in N&&typeof N.commaRoundTrip!=="boolean")throw TypeError("`commaRoundTrip` must be a boolean, or absent");var V=typeof N.allowDots>"u"?N.encodeDotInKeys===!0?!0:X.allowDots:!!N.allowDots;return{addQueryPrefix:typeof N.addQueryPrefix==="boolean"?N.addQueryPrefix:X.addQueryPrefix,allowDots:V,allowEmptyArrays:typeof N.allowEmptyArrays==="boolean"?!!N.allowEmptyArrays:X.allowEmptyArrays,arrayFormat:x,charset:q,charsetSentinel:typeof N.charsetSentinel==="boolean"?N.charsetSentinel:X.charsetSentinel,commaRoundTrip:!!N.commaRoundTrip,delimiter:typeof N.delimiter>"u"?X.delimiter:N.delimiter,encode:typeof N.encode==="boolean"?N.encode:X.encode,encodeDotInKeys:typeof N.encodeDotInKeys==="boolean"?N.encodeDotInKeys:X.encodeDotInKeys,encoder:typeof N.encoder==="function"?N.encoder:X.encoder,encodeValuesOnly:typeof N.encodeValuesOnly==="boolean"?N.encodeValuesOnly:X.encodeValuesOnly,filter:h,format:Q,formatter:G,serializeDate:typeof N.serializeDate==="function"?N.serializeDate:X.serializeDate,skipNulls:typeof N.skipNulls==="boolean"?N.skipNulls:X.skipNulls,sort:typeof N.sort==="function"?N.sort:null,strictNullHandling:typeof N.strictNullHandling==="boolean"?N.strictNullHandling:X.strictNullHandling}};w.exports=function(N,q){var Q=N,G=v(q),h,x;if(typeof G.filter==="function")x=G.filter,Q=x("",Q);else if(M(G.filter))x=G.filter,h=x;var V=[];if(typeof Q!=="object"||Q===null)return"";var C=P[G.arrayFormat],k=C==="comma"&&G.commaRoundTrip;if(!h)h=Object.keys(Q);if(G.sort)h.sort(G.sort);var u=b();for(var r=0;r<h.length;++r){var e=h[r],y=Q[e];if(G.skipNulls&&y===null)continue;J(V,Y(y,e,C,k,G.allowEmptyArrays,G.strictNullHandling,G.skipNulls,G.encodeDotInKeys,G.encode?G.encoder:null,G.filter,G.sort,G.allowDots,G.serializeDate,G.format,G.formatter,G.encodeValuesOnly,G.charset,u))}var K2=V.join(G.delimiter),O2=G.addQueryPrefix===!0?"?":"";if(G.charsetSentinel)if(G.charset==="iso-8859-1")O2+="utf8=%26%2310003%3B&";else O2+="utf8=%E2%9C%93&";return K2.length>0?O2+K2:""}}),zw=m((K,w)=>{var b=zK(),S=Object.prototype.hasOwnProperty,W=Array.isArray,I={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:b.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1000,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},P=function(D){return D.replace(/&#(\d+);/g,function(Y,v){return String.fromCharCode(parseInt(v,10))})},M=function(D,Y,v){if(D&&typeof D==="string"&&Y.comma&&D.indexOf(",")>-1)return D.split(",");if(Y.throwOnLimitExceeded&&v>=Y.arrayLimit)throw RangeError("Array limit exceeded. Only "+Y.arrayLimit+" element"+(Y.arrayLimit===1?"":"s")+" allowed in an array.");return D},O="utf8=%26%2310003%3B",J="utf8=%E2%9C%93",$=function(D,Y){var v={__proto__:null},N=Y.ignoreQueryPrefix?D.replace(/^\?/,""):D;N=N.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var q=Y.parameterLimit===1/0?void 0:Y.parameterLimit,Q=N.split(Y.delimiter,Y.throwOnLimitExceeded?q+1:q);if(Y.throwOnLimitExceeded&&Q.length>q)throw RangeError("Parameter limit exceeded. Only "+q+" parameter"+(q===1?"":"s")+" allowed.");var G=-1,h,x=Y.charset;if(Y.charsetSentinel){for(h=0;h<Q.length;++h)if(Q[h].indexOf("utf8=")===0){if(Q[h]===J)x="utf-8";else if(Q[h]===O)x="iso-8859-1";G=h,h=Q.length}}for(h=0;h<Q.length;++h){if(h===G)continue;var V=Q[h],C=V.indexOf("]="),k=C===-1?V.indexOf("="):C+1,u,r;if(k===-1)u=Y.decoder(V,I.decoder,x,"key"),r=Y.strictNullHandling?null:"";else u=Y.decoder(V.slice(0,k),I.decoder,x,"key"),r=b.maybeMap(M(V.slice(k+1),Y,W(v[u])?v[u].length:0),function(y){return Y.decoder(y,I.decoder,x,"value")});if(r&&Y.interpretNumericEntities&&x==="iso-8859-1")r=P(String(r));if(V.indexOf("[]=")>-1)r=W(r)?[r]:r;var e=S.call(v,u);if(e&&Y.duplicates==="combine")v[u]=b.combine(v[u],r);else if(!e||Y.duplicates==="last")v[u]=r}return v},H=function(D,Y,v,N){var q=0;if(D.length>0&&D[D.length-1]==="[]"){var Q=D.slice(0,-1).join("");q=Array.isArray(Y)&&Y[Q]?Y[Q].length:0}var G=N?Y:M(Y,v,q);for(var h=D.length-1;h>=0;--h){var x,V=D[h];if(V==="[]"&&v.parseArrays)x=v.allowEmptyArrays&&(G===""||v.strictNullHandling&&G===null)?[]:b.combine([],G);else{x=v.plainObjects?{__proto__:null}:{};var C=V.charAt(0)==="["&&V.charAt(V.length-1)==="]"?V.slice(1,-1):V,k=v.decodeDotInKeys?C.replace(/%2E/g,"."):C,u=parseInt(k,10);if(!v.parseArrays&&k==="")x={0:G};else if(!isNaN(u)&&V!==k&&String(u)===k&&u>=0&&(v.parseArrays&&u<=v.arrayLimit))x=[],x[u]=G;else if(k!=="__proto__")x[k]=G}G=x}return G},X=function(D,Y,v,N){if(!D)return;var q=v.allowDots?D.replace(/\.([^.[]+)/g,"[$1]"):D,Q=/(\[[^[\]]*])/,G=/(\[[^[\]]*])/g,h=v.depth>0&&Q.exec(q),x=h?q.slice(0,h.index):q,V=[];if(x){if(!v.plainObjects&&S.call(Object.prototype,x)){if(!v.allowPrototypes)return}V.push(x)}var C=0;while(v.depth>0&&(h=G.exec(q))!==null&&C<v.depth){if(C+=1,!v.plainObjects&&S.call(Object.prototype,h[1].slice(1,-1))){if(!v.allowPrototypes)return}V.push(h[1])}if(h){if(v.strictDepth===!0)throw RangeError("Input depth exceeded depth option of "+v.depth+" and strictDepth is true");V.push("["+q.slice(h.index)+"]")}return H(V,Y,v,N)},F=function(D){if(!D)return I;if(typeof D.allowEmptyArrays<"u"&&typeof D.allowEmptyArrays!=="boolean")throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof D.decodeDotInKeys<"u"&&typeof D.decodeDotInKeys!=="boolean")throw TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(D.decoder!==null&&typeof D.decoder<"u"&&typeof D.decoder!=="function")throw TypeError("Decoder has to be a function.");if(typeof D.charset<"u"&&D.charset!=="utf-8"&&D.charset!=="iso-8859-1")throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof D.throwOnLimitExceeded<"u"&&typeof D.throwOnLimitExceeded!=="boolean")throw TypeError("`throwOnLimitExceeded` option must be a boolean");var Y=typeof D.charset>"u"?I.charset:D.charset,v=typeof D.duplicates>"u"?I.duplicates:D.duplicates;if(v!=="combine"&&v!=="first"&&v!=="last")throw TypeError("The duplicates option must be either combine, first, or last");var N=typeof D.allowDots>"u"?D.decodeDotInKeys===!0?!0:I.allowDots:!!D.allowDots;return{allowDots:N,allowEmptyArrays:typeof D.allowEmptyArrays==="boolean"?!!D.allowEmptyArrays:I.allowEmptyArrays,allowPrototypes:typeof D.allowPrototypes==="boolean"?D.allowPrototypes:I.allowPrototypes,allowSparse:typeof D.allowSparse==="boolean"?D.allowSparse:I.allowSparse,arrayLimit:typeof D.arrayLimit==="number"?D.arrayLimit:I.arrayLimit,charset:Y,charsetSentinel:typeof D.charsetSentinel==="boolean"?D.charsetSentinel:I.charsetSentinel,comma:typeof D.comma==="boolean"?D.comma:I.comma,decodeDotInKeys:typeof D.decodeDotInKeys==="boolean"?D.decodeDotInKeys:I.decodeDotInKeys,decoder:typeof D.decoder==="function"?D.decoder:I.decoder,delimiter:typeof D.delimiter==="string"||b.isRegExp(D.delimiter)?D.delimiter:I.delimiter,depth:typeof D.depth==="number"||D.depth===!1?+D.depth:I.depth,duplicates:v,ignoreQueryPrefix:D.ignoreQueryPrefix===!0,interpretNumericEntities:typeof D.interpretNumericEntities==="boolean"?D.interpretNumericEntities:I.interpretNumericEntities,parameterLimit:typeof D.parameterLimit==="number"?D.parameterLimit:I.parameterLimit,parseArrays:D.parseArrays!==!1,plainObjects:typeof D.plainObjects==="boolean"?D.plainObjects:I.plainObjects,strictDepth:typeof D.strictDepth==="boolean"?!!D.strictDepth:I.strictDepth,strictNullHandling:typeof D.strictNullHandling==="boolean"?D.strictNullHandling:I.strictNullHandling,throwOnLimitExceeded:typeof D.throwOnLimitExceeded==="boolean"?D.throwOnLimitExceeded:!1}};w.exports=function(D,Y){var v=F(Y);if(D===""||D===null||typeof D>"u")return v.plainObjects?{__proto__:null}:{};var N=typeof D==="string"?$(D,v):D,q=v.plainObjects?{__proto__:null}:{},Q=Object.keys(N);for(var G=0;G<Q.length;++G){var h=Q[G],x=X(h,N[h],v,typeof D==="string");q=b.merge(q,x,v)}if(v.allowSparse===!0)return q;return b.compact(q)}}),Uw=m((K,w)=>{var b=Xw(),S=zw(),W=s6();w.exports={formats:W,parse:S,stringify:b}}),rb=J6(d6(),1),Qw={};r1(Qw,{zodSchemaKey:()=>Vw,webSocketServerArgsKey:()=>G4,webSocketMessageArgsKey:()=>K6,webSocketKey:()=>M6,webSocketEventKey:()=>Lw,webSocketEventArgumentsKey:()=>Yw,webSocketConnectionArgsKey:()=>B4,webSocketCloseReasonArgsKey:()=>HK,webSocketCloseCodeArgsKey:()=>YK,routeModelArgsKey:()=>_2,responseStatusTextArgsKey:()=>LK,responseStatusArgsKey:()=>b6,responseHeadersArgsKey:()=>y2,responseBodyArgsKey:()=>w6,requestHeadersArgsKey:()=>b4,requestHeaderArgsKey:()=>i2,requestBodyArgsKey:()=>X4,requestArgsKey:()=>e2,queryArgsKey:()=>VK,paramsArgsKey:()=>i6,paramArgsKey:()=>z4,moduleKey:()=>s4,middlewareKey:()=>w8,interceptorKey:()=>UK,injectableKey:()=>QK,injectKey:()=>P6,httpServerArgsKey:()=>p2,guardKey:()=>K8,controllerKey:()=>I6,controllerHttpKey:()=>Hw,contextArgsKey:()=>S4,containerKey:()=>$4,configKey:()=>p6,argumentsKey:()=>L2});var L2=Symbol.for("____boolTypescriptCore:arguments__"),Yw=Symbol.for("____boolTypescriptCore:webSocketEventArguments__"),p6=Symbol.for("____boolTypescriptCore:config__"),I6=Symbol.for("____boolTypescriptCore:controller__"),UK=Symbol.for("____boolTypescriptCore:interceptor__"),K8=Symbol.for("____boolTypescriptCore:guard__"),Hw=Symbol.for("____boolTypescriptCore:controller.http__"),P6=Symbol.for("____boolTypescriptCore:inject__"),QK=Symbol.for("____boolTypescriptCore:injectable__"),w8=Symbol.for("____boolTypescriptCore:middleware__"),s4=Symbol.for("____boolTypescriptCore:module__"),$4=Symbol.for("____boolTypescriptCore:container__"),Vw=Symbol.for("____boolTypescriptCore:zodSchema__"),M6=Symbol.for("____boolTypescriptCore:webSocket__"),Lw=Symbol.for("____boolTypescriptCore:webSocket:event__"),G4=Symbol.for("____boolTypescriptCore:webSocketArguments:server__"),B4=Symbol.for("____boolTypescriptCore:webSocketArguments:connection__"),K6=Symbol.for("____boolTypescriptCore:webSocketArguments:message__"),YK=Symbol.for("____boolTypescriptCore:webSocketArguments:closeCode__"),HK=Symbol.for("____boolTypescriptCore:webSocketArguments:closeReason__"),p2=Symbol.for("____boolTypescriptCore:httpArguments:server__"),b4=Symbol.for("____boolTypescriptCore:httpArguments:requestHeaders__"),i2=Symbol.for("____boolTypescriptCore:httpArguments:requestHeader__"),X4=Symbol.for("____boolTypescriptCore:httpArguments:requestBody__"),i6=Symbol.for("____boolTypescriptCore:httpArguments:params__"),z4=Symbol.for("____boolTypescriptCore:httpArguments:param__"),VK=Symbol.for("____boolTypescriptCore:httpArguments:query__"),e2=Symbol.for("____boolTypescriptCore:httpArguments:request__"),y2=Symbol.for("____boolTypescriptCore:httpArguments:responseHeaders__"),S4=Symbol.for("____boolTypescriptCore:httpArguments:context__"),_2=Symbol.for("____boolTypescriptCore:httpArguments:routeModel__"),w6=Symbol.for("____boolTypescriptCore:httpArguments:responseBody__"),b6=Symbol.for("____boolTypescriptCore:httpArguments:responseStatus__"),LK=Symbol.for("____boolTypescriptCore:httpArguments:responseStatusText__"),qK=(K)=>(w,b,S)=>{if(!b)return;let W=Reflect.getOwnMetadata(L2,w.constructor,b)||{};W[`argumentIndexes.${S}`]={index:S,type:b4,validationSchema:K},Reflect.defineMetadata(L2,W,w.constructor,b)};var $6=(K)=>(w,b,S)=>{if(!b)return;let W=Reflect.getOwnMetadata(L2,w.constructor,b)||{};W[`argumentIndexes.${S}`]={index:S,type:S4,key:K},Reflect.defineMetadata(L2,W,w.constructor,b)},hK=()=>(K,w,b)=>{if(!w)return;let S=Reflect.getOwnMetadata(L2,K.constructor,w)||{};S[`argumentIndexes.${b}`]={index:b,type:_2},Reflect.defineMetadata(L2,S,K.constructor,w)};var FK=()=>(K)=>{if(!("enforce"in K.prototype)||typeof K.prototype.enforce!=="function")return;let w=void 0;return Reflect.defineMetadata(K8,w,K),K};var vK=(K)=>(w,b,S)=>{let W=Reflect.getMetadata(P6,w)||[];W[S]=K,Reflect.defineMetadata(P6,W,w)};var EK=()=>(K)=>{Reflect.defineMetadata(w8,void 0,K)};var yb=Symbol("__bool:webSocket.upgrade__");var qw=Object.freeze({400:"BAD_REQUEST",401:"UNAUTHORIZED",402:"PAYMENT_REQUIRED",403:"FORBIDDEN",404:"NOT_FOUND",405:"METHOD_NOT_ALLOWED",406:"NOT_ACCEPTABLE",407:"PROXY_AUTHENCATION_REQUIRED",408:"REQUEST_TIMEOUT",409:"CONFLICT",410:"GONE",411:"LENGTH_REQUIRED",412:"PRECONDITION_FAILED",413:"PAYLOAD_TOO_LARGE",414:"URI_TOO_LONG",415:"UNSUPPORTED_MEDIA_TYPE",416:"RANGE_NOT_SATISFIABLE",417:"EXPECTATION_FAILED",418:"IM_A_TEAPOT",421:"MISDIRECTED_REQUEST",422:"UNPROCESSABLE_ENTITY",423:"LOCKED",424:"FAILED_DEPENDENCY",425:"TOO_EARLY_",426:"UPGRAGE_REQUIRED",428:"PRECONDITION_REQUIRED",429:"TOO_MANY_REQUESTS",431:"REQUEST_HEADER_FIELDS_TOO_LARGE",451:"UNAVAILABLE_FOR_LEGAL_REASONS"});class c4 extends Error{httpCode;message;data;constructor({httpCode:K,data:w,message:b}){super();this.httpCode=K,this.message=!b?.trim()?qw[K]:b.trim(),this.data=w}}var hw=Object.freeze({500:"INTERNAL_SERVER_ERROR",501:"NOT_IMPLEMENTED",502:"BAD_GATEWAY",503:"SERVICE_UNAVAILABLE",504:"GATEWAY_TIMEOUT",505:"HTTP_VERSION_NOT_SUPPORTED",506:"VARIANT_ALSO_NEGOTIATES",507:"INSUFFICIENT_STORAGE",508:"LOOP_DETECTED",510:"NOT_EXTENDED",511:"NETWORK_AUTHENTICATION_REQUIRED"});class b8 extends Error{httpCode;message;data;constructor({httpCode:K,data:w,message:b}){super();this.httpCode=K,this.message=!b?.trim()?hw[K]:b.trim(),this.data=w}}var Fw=(K,w=new Headers)=>{if(w.set("Content-Type","application/json"),K instanceof c4||K instanceof b8)return new Response(JSON.stringify(K),{status:K.httpCode,statusText:K.message,headers:w});return new Response(JSON.stringify((()=>{switch(typeof K){case"object":return!(K instanceof Error)?K:{message:K.message,code:K.name,cause:K.cause};case"string":return{message:K};case"number":return{code:K};default:return}})()),{status:500,statusText:"INTERNAL SERVER ERROR",headers:w})},u2;(function(K){K.year="year",K.month="month",K.day="day",K.hours="hours",K.minutes="minutes",K.seconds="seconds",K.miliseconds="miliseconds"})(u2||(u2={}));var vw=(K,w,b=u2.day)=>{let S=K instanceof Date?K:new Date(K);switch(b){case u2.year:S.setFullYear(S.getFullYear()+w);break;case u2.month:S.setMonth(S.getMonth()+w);break;case u2.day:S.setDate(S.getDate()+w);break;case u2.hours:S.setHours(S.getHours()+w);break;case u2.minutes:S.setMinutes(S.getMinutes()+w);break;case u2.seconds:S.setSeconds(S.getSeconds()+w);break;case u2.miliseconds:S.setMilliseconds(S.getMilliseconds()+w);break}return S},Ew=J6(Uw(),1),_b=async function(){}.constructor,PK=Object.freeze({black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,gray:90}),MK=Object.freeze({black:40,red:41,green:42,yellow:43,blue:44,magenta:45,cyan:46,white:47,gray:100}),w4=(K,w={})=>{let{color:b,backgroundColor:S,bold:W,underline:I}=w,P="";if(W)P+="\x1B[1m";if(I)P+="\x1B[4m";if(b&&PK[b])P+=`\x1B[${PK[b]}m`;if(S&&MK[S])P+=`\x1B[${MK[S]}m`;return`${P}${K}\x1B[0m`},Rw=(K)=>{let{headers:w,method:b}=K,S=w.get("upgrade")?.toLowerCase()||"",W=w.get("connection")?.toLowerCase()||"";return b==="GET"&&S?.toLowerCase()==="websocket"&&W?.toLowerCase().includes("upgrade")};class S6{_staticMap=new Map;_dynamicMap=new Map;_options=void 0;constructor(...K){K.forEach((w)=>{w.staticEntries.forEach(([b,S])=>this.set(b,S,{isStatic:!0,isPassthrough:!0})),w.dynamicEntries.forEach(([b,S])=>this.set(b,S,{isStatic:!1}))})}get(K,w){return!(w||this._options)?.isStatic?this._dynamicMap.get(K):this._staticMap.get(K)}has(K,w){return!(w||this._options)?.isStatic?this._dynamicMap.has(K):this._staticMap.has(K)}set(K,w,b){let S=b||this._options;if(!S?.isStatic)this._dynamicMap.set(K,w);else if(!this._staticMap.has(K))this._staticMap.set(K,w);else if(!S.isPassthrough)throw Error(`${String(K)} already exists in context static collection.`);return this}setOptions(K){return this._options=K,this}get staticEntries(){return[...this._staticMap.entries()]}get dynamicEntries(){return[...this._dynamicMap.entries()]}}class n2{static rootPattern=":([a-z0-9A-Z_-]{1,})";static innerRootPattern="([a-z0-9A-Z_-]{1,})";alias;_map=new Map;constructor(K){this.alias=this._thinAlias(K)}test(K,w){try{let b=this._map.get(w),S=this.alias.split("/"),W=this._thinAlias(K).split("/");if(!b)return;if(S.length!==W.length)return;let I=Object(),P=this.alias.replace(new RegExp(n2.rootPattern,"g"),n2.innerRootPattern);if(!new RegExp(P).test(this._thinAlias(K)))return;for(let M=0;M<S.length;M++){let O=S[M],J=W[M];if(!new RegExp(n2.rootPattern,"g").test(O)){if(O!==J)return}else{let $=!1;if(O.replace(new RegExp(n2.rootPattern,"g"),(H,X,F)=>{if(F===0)J.replace(new RegExp(n2.innerRootPattern,"g"),(D,Y,v)=>{if(v===0)Object.assign(I,{[X]:D});return D});return H}),$)return}continue}return Object.freeze({parameters:I,model:b})}catch(b){return console.error(b),!1}}isMatch(K,w){try{if(!this._map.get(w))return;let b=this.alias.split("/"),S=this._thinAlias(K).split("/");if(b.length!==S.length)return!1;let W=Object();for(let I=0;I<b.length;I++){let P=b[I],M=S[I];if(!new RegExp(n2.rootPattern,"g").test(P)){if(P!==M)return!1}else{let O=!1;if(P.replace(new RegExp(n2.rootPattern,"g"),(J,$,H)=>{if(!new RegExp(H,"g").test(M))O=!0;else Object.assign(W,{[$]:M});return""}),O)return!1}continue}return!0}catch(b){console.error(b);return}}get(K){if(!this._map.get("GET"))this._map.set("GET",K);return this}post(K){if(!this._map.get("POST"))this._map.set("POST",K);return this}put(K){if(!this._map.get("PUT"))this._map.set("PUT",K);return this}delete(K){if(!this._map.get("DELETE"))this._map.set("DELETE",K);return this}connect(K){if(!this._map.get("CONNECT"))return this._map.set("CONNECT",K);return this}options(K){if(!this._map.get("OPTIONS"))return this._map.set("OPTIONS",K);return this}trace(K){if(!this._map.get("TRACE"))return this._map.set("TRACE",K);return this}patch(K){if(!this._map.get("PATCH"))return this._map.set("PATCH",K);return this}_thinAlias(K){return K.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}get _fullPath(){return this.alias.split("/").map((K,w)=>{let b=new RegExp(":([a-z0-9A-Z_.-]{1,})(\\(.*?\\))","g");if(!b.test(K)){if(b=new RegExp(":([a-z0-9A-Z_.-]{1,})","g"),!b.test(K))return K;return K.replace(b,(S,W)=>`${S}(.*?)`)}return K}).join("/")}get _filteredPath(){return this.alias.split("/").map((K,w)=>{let b=new RegExp(":([a-z0-9A-Z_.-]{1,})((.*?))","g");if(!b.test(K)){if(b=new RegExp(":([a-z0-9A-Z_.-]{1,})","g"),!b.test(K))return K;return K.replace(b,(S,W)=>"(.*?)")}return K.replace(b,(S,W,I)=>I)}).join("/")}}var gw=n2;class e6{alias;_routes=new Map;constructor(K){this.alias=this._thinAlias(K)}route(K){let w=this._thinAlias(`${this.alias}/${K}`),b=this._routes.get(w),S=!b?new gw(`${this.alias}/${K}`):b;if(!b)this._routes.set(w,S);return S}_thinAlias(K){return K.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}get routes(){return this._routes}}class n6{_routers=new Map;add(...K){for(let w of K){if(this._routers.has(w.alias))continue;this._routers.set(w.alias,w)}return this}find(K,w){for(let b of this._routers.values())for(let S of b.routes.values()){let W=S.test(K,w);if(!W)continue;return W}return}}var mb=J6(d6(),1);class W6{_mapper=new Map;constructor(...K){K.forEach((w)=>{w.entries.forEach(([b,S])=>{this._mapper.set(b,S)})})}get(K){if(this._mapper.has(K))return this._mapper.get(K);if(typeof K!=="function")return;let w=Reflect.getMetadataKeys(K);if(![QK,I6,w8,K8,UK,M6].some((W)=>w.includes(W)))throw Error("Missing dependency declaration, please check @Injectable() used on dependency(ies).");let b=(Reflect.getOwnMetadata(P6,K)||[]).map((W)=>this.get(W)),S=new K(...b);return this._mapper.set(K,S),S}set(K,w){if(this._mapper.has(K))throw Error(`${String(K)} already exists in injector collection.`);this._mapper.set(K,w)}get entries(){return[...this._mapper.entries()]}}class RK{error;constructor(K){this.error=K}}var jw=RK;class gK{eventName;metadata;_context=void 0;constructor({eventName:K,metadata:w}){this.eventName=K,this.metadata=w}bind(K){return this._context=K,this}execute(){if(this._context&&typeof this.metadata.descriptor.value==="function")this.metadata.descriptor.value=this.metadata.descriptor.value.bind(this._context);return Object.freeze({methodName:this.metadata.methodName,descriptor:this.metadata.descriptor,arguments:this.metadata.arguments})}}class S8{rawAlias;alias;routes=[];constructor(K="/"){this.rawAlias=K,this.alias=S8.thinAlias(K)}addRoutes(...K){for(let w of K)if(!this.routes.includes(w))this.routes.push(w);return this}bind(K){for(let w of this.routes)w.bind(K);return this}execute(){let K=new Map;for(let w of this.routes)K.set(`${this.alias}:::${w.eventName}`,w.execute());return K}static thinAlias(K){return K.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}}class O6{rawPrefix;prefix;routers=[];constructor(K="/"){this.rawPrefix=K,this.prefix=O6.thinPrefix(K)}addRouters(...K){for(let w=0;w<K.length;w++)if(!this.routers.includes(K[w]))this.routers.push(K[w]);for(let w of K)if(!this.routers.includes(w))this.routers.push(w);return this}execute(){let K=new Map;for(let w of this.routers){let b=w.execute();for(let[S,W]of b.entries())K.set(`/${O6.thinPrefix(`${this.prefix}/${S}`)}`,W)}return K}static thinPrefix(K){return K.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}}class kw{classConstructor;options;#K;#w;#b=new W6;#S=new Map;#I;#P=900;#W;constructor(K,w){if(this.classConstructor=K,this.options=w,this.#w=Reflect.getOwnMetadataKeys(K),!this.#w.includes($4)&&!this.#w.includes(s4))throw Error(`Can not detect! ${K.name} class is not a container or module.`);this.#P=typeof w.static?.cacheTimeInSeconds!=="number"?900:w.static.cacheTimeInSeconds,this.#I=Object.freeze({allowLogsMethods:this.options?.log?.methods||[],staticOption:this.options.static,allowOrigins:!this.options.cors?.origins?["*"]:typeof this.options.cors.origins!=="string"?this.options.cors.origins.includes("*")||this.options.cors.origins.length<1?["*"]:this.options.cors.origins:[this.options.cors.origins!=="*"?this.options.cors.origins:"*"],allowMethods:this.options.cors?.methods||["GET","POST","PUT","PATCH","DELETE","OPTIONS"],allowCredentials:!this.options.cors?.credentials?!1:!0,allowHeaders:!this.options.cors?.headers||this.options.cors.headers.includes("*")?["*"]:this.options.cors.headers})}useValidator(K){this.#W=K}async preLaunch(){if(this.#K)return this.#K;let K=!this.#w.includes($4)?void 0:Reflect.getOwnMetadata($4,this.classConstructor),w=!this.#w.includes($4)?[this.classConstructor]:K?.modules||[],b=!K?void 0:await this.containerResolution({containerClass:this.classConstructor,options:this.options,extendInjector:this.#b}),S=await Promise.all(w.map((P)=>this.moduleResolution({moduleClass:P,options:this.options,extendInjector:!b?this.#b:b.injector})));if([...new Set(S.map((P)=>P.prefix))].length!==S.length)throw Error("Module prefix should be unique.");let W=new Map;for(let P of S){let M=P.webSocketRouterGroup.execute();for(let[O,J]of M.entries())W.set(O,J)}let I=Object.freeze({containerMetadata:K,modulesConverted:w,resolutedContainer:b,resolutedModules:S,webSocketsMap:W});return this.#K=I,I}async listen(){let{allowLogsMethods:K,allowOrigins:w,allowMethods:b,allowHeaders:S,allowCredentials:W,staticOption:I}=this.#I,{resolutedContainer:P,resolutedModules:M,webSocketsMap:O}=await this.preLaunch(),J=Bun.serve({port:this.options.port,fetch:async($,H)=>{let X=performance.now(),F=new URL($.url),D=Ew.parse(F.searchParams.toString(),this.options.queryParser),Y=$.headers.get("origin")||"*",v=$.method.toUpperCase(),N=new Headers,q=new S6().setOptions({isStatic:!0}).set(p2,H).set(e2,$).set(i2,$.headers).set(y2,N).set(VK,D);try{let Q=Rw($),G;if(Q){for(let u of M){let r=u.webSocketHttpRouterGroup.find(F.pathname,$.method);if(r){G=Object.freeze({route:r,resolution:u});break}}if(!G)return this.finalizeResponse(new Response(JSON.stringify({httpCode:404,message:"Route not found.",data:void 0}),{status:404,statusText:"Not found.",headers:N}));let k=await this.webSocketFetcher({request:$,server:H},{query:D,responseHeaders:N,route:G.route,moduleResolution:G.resolution});return k instanceof Response?k:void 0}if([...!W?[]:[{key:"Access-Control-Allow-Credentials",value:"true"}],{key:"Access-Control-Allow-Origin",value:w.includes("*")?"*":!w.includes(Y)?w[0]:Y},{key:"Access-Control-Allow-Methods",value:b.join(", ")},{key:"Access-Control-Allow-Headers",value:S.join(", ")}].forEach(({key:k,value:u})=>N.set(k,u)),!b.includes(v))return this.finalizeResponse(new Response(void 0,{status:405,statusText:"Method Not Allowed.",headers:N}));if($.method.toUpperCase()==="OPTIONS")return this.finalizeResponse(w.includes("*")||w.includes(Y)?new Response(void 0,{status:204,statusText:"No Content.",headers:N}):new Response(void 0,{status:417,statusText:"Expectation Failed.",headers:N}));if(I){let{path:k,headers:u}=I,r=`${k}/${F.pathname}`,e=this.#S.get(r);if(!e){let y=Bun.file(r);if(await y.exists()){if(u)for(let[K2,O2]of Object.entries(u))N.set(K2,O2);return N.set("Content-Type",y.type),this.finalizeResponse(new Response(await y.arrayBuffer(),{status:200,statusText:"SUCCESS",headers:N}))}}else{let y=new Date>e.expiredAt;if(y)this.#S.delete(r);let K2=!y?e.file:Bun.file(r);if(await K2.exists()){if(this.#S.set(r,Object.freeze({expiredAt:vw(new Date,this.#P,u2.seconds),file:K2})),u)for(let[O2,b2]of Object.entries(u))N.set(O2,b2);return N.set("Content-Type",K2.type),this.finalizeResponse(new Response(await K2.arrayBuffer(),{status:200,statusText:"SUCCESS",headers:N}))}}}if(P){let{context:k}=await this.httpFetcher({context:q,resolutedMap:{injector:P.injector,startMiddlewareGroup:P.startMiddlewareGroup,guardGroup:P.guardGroup},options:{isContainer:!0}});q=k}for(let k of M){let u=k.controllerRouterGroup.find(F.pathname,v);if(u){G=Object.freeze({route:u,resolution:k});break}}if(!G)q.setOptions({isStatic:!1}).set(b6,404).set(LK,"Not found.").set(w6,JSON.stringify({httpCode:404,message:"Route not found.",data:void 0}));else{let{context:k}=await this.httpFetcher({context:q,route:G.route,resolutedMap:G.resolution});q=k}if(P){let{context:k}=await this.httpFetcher({context:q,resolutedMap:{injector:P.injector,endMiddlewareGroup:P.endMiddlewareGroup},options:{isContainer:!0}});q=k}let h=q.get(y2,{isStatic:!0})||new Headers,x=q.get(w6,{isStatic:!1})||void 0,V=q.get(b6,{isStatic:!1}),C=q.get(b6,{isStatic:!1});return this.serializeResponse({status:typeof V!=="number"?void 0:V,statusText:typeof C!=="string"?void 0:C,headers:h,data:x})}catch(Q){return this.options.debug&&console.error(Q),this.finalizeResponse(Fw(Q,N))}finally{if(K){let Q=performance.now(),G=w4(F.pathname,{color:"blue"}),h=`${Bun.color("yellow","ansi")}${process.pid}`,x=w4($.method,{color:"yellow",backgroundColor:"blue"}),V=w4(`${$.headers.get("x-forwarded-for")||$.headers.get("x-real-ip")||H.requestIP($)?.address||"<Unknown>"}`,{color:"yellow"}),C=w4(`${Math.round((Q-X+Number.EPSILON)*100)/100}ms`,{color:"yellow",backgroundColor:"blue"});K.includes($.method.toUpperCase())&&console.info(`PID: ${h} - Method: ${x} - IP: ${V} - ${G} - Time: ${C}`)}}},websocket:{open:($)=>{let H=`${$.data.pathname}:::open`,X=O.get(H);if(!X)return;let F=X.arguments||{},D=[];for(let[Y,v]of Object.entries(F))switch(v.type){case B4:D[v.index]=$;break;case G4:D[v.index]=J;break}X.descriptor.value(...D)},close:($,H,X)=>{let F=`${$.data.pathname}:::close`,D=O.get(F);if(!D)return;let Y=D.arguments||{},v=[];for(let[N,q]of Object.entries(Y))switch(q.type){case B4:v[q.index]=$;break;case G4:v[q.index]=J;break;case YK:v[q.index]=H;break;case HK:v[q.index]=X;break}D.descriptor.value(...v)},message:($,H)=>{let X=`${$.data.pathname}:::message`,F=O.get(X);if(!F)return;let D=F.arguments||{},Y=[];for(let[v,N]of Object.entries(D))switch(N.type){case B4:Y[N.index]=$;break;case K6:Y[N.index]=H;break;case G4:Y[N.index]=J;break}F.descriptor.value(...Y)},drain:($)=>{let H=`${$.data.pathname}:::drain`,X=O.get(H);if(!X)return;let F=X.arguments||{},D=[];for(let[Y,v]of Object.entries(F))switch(v.type){case B4:D[v.index]=$;break;case G4:D[v.index]=J;break}X.descriptor.value(...D)},ping:($,H)=>{let X=`${$.data.pathname}:::ping`,F=O.get(X);if(!F)return;let D=F.arguments||{},Y=[];for(let[v,N]of Object.entries(D))switch(N.type){case B4:Y[N.index]=$;break;case G4:Y[N.index]=J;break;case K6:Y[N.index]=H;break}F.descriptor.value(...Y)},pong:($,H)=>{let X=`${$.data.pathname}:::pong`,F=O.get(X);if(!F)return;let D=F.arguments||{},Y=[];for(let[v,N]of Object.entries(D))switch(N.type){case B4:Y[N.index]=$;break;case G4:Y[N.index]=J;break;case K6:Y[N.index]=H;break}F.descriptor.value(...Y)}}})}async containerResolution({containerClass:K,options:w,extendInjector:b}){if(!Reflect.getOwnMetadataKeys(K).includes($4))throw Error(`${K.name} is not a container.`);let S=new W6(b),W=Reflect.getOwnMetadata($4,K),{loaders:I,middlewares:P,guards:M,dependencies:O,config:J}=W||{},{config:$}=Object.freeze({config:{...typeof w.config!=="function"?w.config:await w.config(),...typeof J!=="function"?typeof J!=="object"?void 0:("key"in J)&&("value"in J)&&typeof J.key==="symbol"?typeof J.value!=="function"?J.value:await J.value():J:await J()}});if(S.set(J&&"key"in J&&"value"in J&&typeof J.key==="symbol"?J.key:p6,$),I){let D=[];for(let[v,N]of Object.entries(I))D.push(async()=>{try{let q=await N({config:$});return console.info(`${w4(" INFO ",{color:"white",backgroundColor:"blue",bold:!0})} Loader [${v}] initialized successfully.`),q}catch(q){throw console.error(`${w4(" WARN ",{color:"yellow",backgroundColor:"red",bold:!0})} Loader [${v}] initialization failed.`),w.debug&&console.error(q),q}});let Y=await Promise.all(D.map((v)=>v()));for(let[v,N]of Y)S.set(v,N)}!O||O.map((D)=>S.get(D));let H=[],X=[];!P||P.forEach((D)=>{let Y=S.get(D);if(Y.start&&typeof Y.start==="function"){let v=Reflect.getOwnMetadata(L2,D,"start")||{};H.push(Object.freeze({class:D,funcName:"start",func:Y.start.bind(Y),argumentsMetadata:v}))}if(Y.end&&typeof Y.end==="function"){let v=Reflect.getOwnMetadata(L2,D,"end")||{};X.push(Object.freeze({class:D,funcName:"end",func:Y.end.bind(Y),argumentsMetadata:v}))}});let F=!M?[]:M.map((D)=>{let Y=S.get(D),v=Reflect.getOwnMetadata(L2,D,"enforce")||{};return Object.freeze({class:D,funcName:"enforce",func:Y.enforce.bind(Y),argumentsMetadata:v})});return Object.freeze({injector:S,startMiddlewareGroup:H,endMiddlewareGroup:X,guardGroup:F})}async moduleResolution({moduleClass:K,options:w,extendInjector:b}){if(!Reflect.getOwnMetadataKeys(K).includes(s4))throw Error(`${K.name} is not a module.`);let S=new W6(b),W=Reflect.getOwnMetadata(s4,K),{loaders:I,middlewares:P,guards:M,interceptors:O,controllers:J,dependencies:$,webSockets:H,prefix:X,config:F}=W||{},D=`${w.prefix||""}/${X||""}`,{config:Y}=Object.freeze({config:!F?void 0:{...typeof w.config!=="function"?w.config:await w.config(),...typeof F!=="function"?typeof F!=="object"?void 0:("key"in F)&&("value"in F)&&typeof F.key==="symbol"?typeof F.value!=="function"?F.value:await F.value():F:await F()}});if(Y&&S.set(F&&"key"in F&&"value"in F&&typeof F.key==="symbol"?F.key:p6,Y),I){let C=[];for(let[u,r]of Object.entries(I))C.push(async()=>{try{let e=await r({config:Y});return console.info(`${w4(" INFO ",{color:"white",backgroundColor:"blue",bold:!0})} Loader [${u}] initialized successfully.`),e}catch(e){throw console.error(`${w4(" WARN ",{color:"yellow",backgroundColor:"red",bold:!0})} Loader [${u}] initialization failed.`),w.debug&&console.error(e),e}});let k=await Promise.all(C.map((u)=>u()));for(let u=0;u<k.length;u++){let[r,e]=k[u];S.set(r,e)}}!$||$.map((C)=>S.get(C));let v=[],N=[];!P||P.forEach((C)=>{let k=S.get(C);if(k.start&&typeof k.start==="function"){let u=Reflect.getOwnMetadata(L2,C,"start")||{};v.push(Object.freeze({class:C,funcName:"start",func:k.start.bind(k),argumentsMetadata:u}))}if(k.end&&typeof k.end==="function"){let u=Reflect.getOwnMetadata(L2,C,"end")||{};N.push(Object.freeze({class:C,funcName:"end",func:k.end.bind(k),argumentsMetadata:u}))}});let q=!M?[]:M.map((C)=>{let k=S.get(C),u=Reflect.getOwnMetadata(L2,C,"enforce")||{};return Object.freeze({class:C,funcName:"enforce",func:k.enforce.bind(k),argumentsMetadata:u})}),Q=[],G=[];!O||O.forEach((C)=>{let k=S.get(C);if(k.open&&typeof k.open==="function"){let u=Reflect.getOwnMetadata(L2,C,"open")||{};Q.push(Object.freeze({class:C,funcName:"open",func:k.open.bind(k),argumentsMetadata:u}))}if(k.close&&typeof k.close==="function"){let u=Reflect.getOwnMetadata(L2,C,"close")||{};G.push(Object.freeze({class:C,funcName:"close",func:k.close.bind(k),argumentsMetadata:u}))}});let h=new n6;!J||J.forEach((C)=>this.initControllerInstance({controllerConstructor:C,httpRouterGroup:h,injector:S,prefix:D}));let x=new n6,V=new O6;return H&&H.forEach((C)=>this.initWebSocketInstance({webSocketConstructor:C,httpRouterGroup:x,webSocketRouterGroup:V,injector:S,prefix:D})),Object.freeze({prefix:X||"",injector:S,startMiddlewareGroup:v,endMiddlewareGroup:N,guardGroup:q,openInterceptorGroup:Q,closeInterceptorGroup:G,controllerRouterGroup:h,webSocketHttpRouterGroup:x,webSocketRouterGroup:V})}async argumentsResolution(K,w,b,S){if(!this.#W)return K;try{let W=await this.#W.validate(K,w,b,S);if(!(W instanceof jw))return W;throw new c4({httpCode:400,message:`Validation at the [${S.toString()}] method fails at positional argument [${b}].`,data:W.error})}catch(W){if(W instanceof c4)throw W;throw new b8({httpCode:500,message:`Validation at the [${S.toString()}] method error at positional argument [${b}].`,data:!(W instanceof Error)?W:[{message:W.message,code:W.name,cause:W.cause}]})}}initControllerInstance({controllerConstructor:K,httpRouterGroup:w,injector:b,prefix:S}){if(!Reflect.getOwnMetadataKeys(K).includes(I6))throw Error(`${K.name} is not a controller.`);let W=b.get(K);if(!W)throw Error("Can not initialize controller.");let I=Reflect.getOwnMetadata(I6,K)||{prefix:"/",httpMetadata:[]},P=new e6(`/${S||""}/${I.prefix}`);return I.httpMetadata.forEach((M)=>{if(typeof M.descriptor.value!=="function")return;let O=P.route(M.path),J=M.descriptor.value.bind(W),$=Object.freeze({class:K,funcName:M.methodName,func:J,argumentsMetadata:M.argumentsMetadata});switch(M.httpMethod){case"GET":return O.get($);case"POST":return O.post($);case"PUT":return O.put($);case"PATCH":return O.patch($);case"DELETE":return O.delete($);case"OPTIONS":return O.options($)}}),w.add(P)}initWebSocketInstance({injector:K,httpRouterGroup:w,prefix:b,webSocketRouterGroup:S,webSocketConstructor:W}){if(!Reflect.getOwnMetadataKeys(W).includes(M6))throw Error(`${W.name} is not a websocket route.`);let I=K.get(W);if(!I)throw Error("Can not initialize webSocket.");let P=Reflect.getOwnMetadata(M6,W)||{prefix:"/",events:[],http:[]},M=`/${b||""}/${P.prefix}`,O=new e6(M);for(let[$,H]of Object.entries(P.http)){if(typeof H.descriptor?.value!=="function")continue;let X=O.route(H.path),F=H.descriptor.value.bind(I),D=Object.freeze({class:W,funcName:H.methodName,func:F,argumentsMetadata:H.argumentsMetadata});switch(H.httpMethod){case"GET":X.get(D);break;case"POST":X.post(D);break}}w.add(O);let J=new S8(M);for(let[$,H]of Object.entries(P.events)){let X=new gK({eventName:$,metadata:H});J.addRoutes(X)}return J.bind(I),S.addRouters(J),Object.freeze({httpRouterGroup:w,webSocketRouterGroup:S})}serializeResponse({status:K,statusText:w,headers:b,data:S}){let W=b.get("Content-Type")||"text/plain";if(W.includes("application/json"))return this.finalizeResponse(new Response(S instanceof ReadableStream?S:JSON.stringify(S),{status:K,statusText:w,headers:b}));if(W.includes("text/plain")||W.includes("text/html"))return this.finalizeResponse(new Response(S instanceof ReadableStream?S:String(S),{status:K,statusText:w,headers:b}));if(W.includes("application/octet-stream")){if(S instanceof Uint8Array||S instanceof ArrayBuffer||S instanceof Blob||S instanceof ReadableStream)return this.finalizeResponse(new Response(S,{status:K,statusText:w,headers:b}));throw Error("Invalid data type for application/octet-stream")}if(W.includes("multipart/form-data")){if(S instanceof FormData)return this.finalizeResponse(new Response(S,{status:K,statusText:w,headers:b}));throw Error("multipart/form-data requires FormData object")}return this.finalizeResponse(new Response(String(S),{status:K,statusText:w,headers:b}))}finalizeResponse(K){return K.headers.set("X-Powered-By","Bool Typescript"),K}async httpFetcher({context:K,route:w,options:b,resolutedMap:S}){let W={isStatic:!0},I=(!K?new S6:new S6(K)).setOptions(W);if(w)I.set(i6,w.parameters).set(_2,w.model);let P=I.get(p2,W)||void 0,M=I.get(e2,W)||void 0,O=I.get(i2,W)||void 0,J=I.get(y2,W)||void 0,$=I.get(i6,W)||void 0,H=I.get(_2,W)||void 0;if(S){let{startMiddlewareGroup:X,guardGroup:F}=S;if(X)for(let D=0;D<X.length;D++){let Y=[],{func:v,funcName:N,argumentsMetadata:q}=X[D];for(let[Q,G]of Object.entries(q))switch(G.type){case S4:Y[G.index]=!G.key?I:I.get(G.key,W);break;case e2:Y[G.index]=!G.validationSchema?M:await this.argumentsResolution(M,G.validationSchema,G.index,N);break;case X4:Y[G.index]=!G.validationSchema?await M?.[G.parser||"json"]():await this.argumentsResolution(await M?.[G.parser||"json"](),G.validationSchema,G.index,N);break;case b4:Y[G.index]=!G.validationSchema?O:await this.argumentsResolution(O?.toJSON(),G.validationSchema,G.index,N);break;case i2:Y[G.index]=!G.validationSchema?O?.get(G.key)||void 0:await this.argumentsResolution(O?.get(G.key)||void 0,G.validationSchema,G.index,N);break;case z4:Y[G.index]=!G.validationSchema?$?.[G.key]||void 0:await this.argumentsResolution($?.[G.key]||void 0,G.validationSchema,G.index,N);break;case _2:Y[G.index]=H;break;case y2:Y[G.index]=J;break;case p2:Y[G.index]=P;break;default:Y[G.index]=!G.validationSchema?!I.has(G.type,W)?void 0:I.get(G.type,W):await this.argumentsResolution(!(G.type in I)?void 0:I.get(G.type,W),G.validationSchema,G.index,N);break}await v(...Y)}if(F)for(let D=0;D<F.length;D++){let Y=[],{func:v,funcName:N,argumentsMetadata:q}=F[D];for(let[G,h]of Object.entries(q))switch(h.type){case e2:Y[h.index]=!h.validationSchema?M:await this.argumentsResolution(M,h.validationSchema,h.index,N);break;case X4:Y[h.index]=!h.validationSchema?await M?.[h.parser||"json"]():await this.argumentsResolution(await M?.[h.parser||"json"](),h.validationSchema,h.index,N);break;case S4:Y[h.index]=!h.key?I:I.get(h.key);break;case b4:Y[h.index]=!h.validationSchema?O:await this.argumentsResolution(O?.toJSON(),h.validationSchema,h.index,N);break;case y2:Y[h.index]=J;break;case i2:Y[h.index]=!h.validationSchema?O?.get(h.key)||void 0:await this.argumentsResolution(O?.get(h.key)||void 0,h.validationSchema,h.index,N);break;case z4:Y[h.index]=!h.validationSchema?$?.[h.key]||void 0:await this.argumentsResolution($?.[h.key],h.validationSchema,h.index,N);break;case _2:Y[h.index]=H;break;case p2:Y[h.index]=P;break;default:Y[h.index]=!h.validationSchema?!I.has(h.type)?void 0:I.get(h.type):await this.argumentsResolution(I.get(h.type),h.validationSchema,h.index,N);break}let Q=await v(...Y);if(typeof Q!=="boolean"||!Q)throw new c4({httpCode:401,message:"Unauthorization.",data:void 0})}}if(H&&!b?.isContainer){if(S&&"openInterceptorGroup"in S&&S.openInterceptorGroup){let{openInterceptorGroup:v}=S;for(let N=0;N<v.length;N++){let q=[],{func:Q,funcName:G,argumentsMetadata:h}=v[N];for(let[x,V]of Object.entries(h))switch(V.type){case e2:q[V.index]=!V.validationSchema?M:await this.argumentsResolution(M,V.validationSchema,V.index,G);break;case X4:q[V.index]=!V.validationSchema?await M?.[V.parser||"json"]():await this.argumentsResolution(await M?.[V.parser||"json"](),V.validationSchema,V.index,G);break;case S4:q[V.index]=!V.key?I:I.get(V.key);break;case b4:q[V.index]=!V.validationSchema?O:await this.argumentsResolution(O?.toJSON(),V.validationSchema,V.index,G);break;case i2:q[V.index]=!V.validationSchema?O?.get(V.key)||void 0:await this.argumentsResolution(O?.get(V.key)||void 0,V.validationSchema,V.index,G);break;case y2:q[V.index]=J;break;case z4:q[V.index]=!V.validationSchema?$?.[V.key]||void 0:await this.argumentsResolution($?.[V.key]||void 0,V.validationSchema,V.index,G);break;case _2:q[V.index]=H;break;case p2:q[V.index]=P;break;default:q[V.index]=!V.validationSchema?!I.has(V.type)?void 0:I.get(V.type):await this.argumentsResolution(I.get(V.type),V.validationSchema,V.index,G);break}await Q(...q)}}let X=[],{func:F,funcName:D,argumentsMetadata:Y}=H;for(let[v,N]of Object.entries(Y))switch(N.type){case e2:X[N.index]=!N.validationSchema?M:await this.argumentsResolution(M,N.validationSchema,N.index,D);break;case X4:X[N.index]=!N.validationSchema?await M?.[N.parser||"json"]():await this.argumentsResolution(await M?.[N.parser||"json"](),N.validationSchema,N.index,D);break;case S4:X[N.index]=!N.key?I:I.get(N.key);break;case b4:X[N.index]=!N.validationSchema?O:await this.argumentsResolution(O?.toJSON(),N.validationSchema,N.index,D);break;case i2:X[N.index]=!N.validationSchema?O?.get(N.key)||void 0:await this.argumentsResolution(O?.get(N.key)||void 0,N.validationSchema,N.index,D);break;case y2:X[N.index]=J;break;case z4:X[N.index]=!N.validationSchema?$?.[N.key]||void 0:await this.argumentsResolution($?.[N.key]||void 0,N.validationSchema,N.index,D);break;case _2:X[N.index]=H;break;case p2:X[N.index]=P;break;default:X[N.index]=!N.validationSchema?!I.has(N.type)?void 0:I.get(N.type):await this.argumentsResolution(I.get(N.type),N.validationSchema,N.index,D);break}if(I.set(w6,await F(...X),{isStatic:!1}),S&&"closeInterceptorGroup"in S&&S.closeInterceptorGroup){let{closeInterceptorGroup:v}=S;for(let N=0;N<v.length;N++){let q=[],{func:Q,funcName:G,argumentsMetadata:h}=v[N];for(let[x,V]of Object.entries(h))switch(V.type){case e2:q[V.index]=!V.validationSchema?M:await this.argumentsResolution(M,V.validationSchema,V.index,G);break;case X4:q[V.index]=!V.validationSchema?await M?.[V.parser||"json"]():await this.argumentsResolution(await M?.[V.parser||"json"](),V.validationSchema,V.index,G);break;case S4:q[V.index]=!V.key?I:I.get(V.key);break;case b4:q[V.index]=!V.validationSchema?O:await this.argumentsResolution(O?.toJSON(),V.validationSchema,V.index,G);break;case y2:q[V.index]=I.get(V.type);break;case i2:q[V.index]=!V.validationSchema?O?.get(V.key)||void 0:await this.argumentsResolution(O?.get(V.key)||void 0,V.validationSchema,V.index,G);break;case z4:q[V.index]=!V.validationSchema?$?.[V.key]||void 0:await this.argumentsResolution($?.[V.key]||void 0,V.validationSchema,V.index,G);break;case _2:q[V.index]=H;break;case p2:q[V.index]=P;break;default:q[V.index]=!V.validationSchema?!I.has(V.type)?void 0:I.get(V.type):await this.argumentsResolution(I.get(V.type),V.validationSchema,V.index,G);break}await Q(...q)}}}if(S){let{endMiddlewareGroup:X}=S;if(X)for(let F=0;F<X.length;F++){let D=[],{func:Y,funcName:v,argumentsMetadata:N}=X[F];for(let[q,Q]of Object.entries(N))switch(Q.type){case e2:D[Q.index]=!Q.validationSchema?M:await this.argumentsResolution(M,Q.validationSchema,Q.index,v);break;case X4:D[Q.index]=!Q.validationSchema?await M?.[Q.parser||"json"]():await this.argumentsResolution(await M?.[Q.parser||"json"](),Q.validationSchema,Q.index,v);break;case S4:D[Q.index]=!Q.key?I:I.get(Q.key);break;case b4:D[Q.index]=!Q.validationSchema?O:await this.argumentsResolution(O?.toJSON(),Q.validationSchema,Q.index,v);break;case y2:D[Q.index]=I.get(Q.type);break;case i2:D[Q.index]=!Q.validationSchema?O?.get(Q.key)||void 0:await this.argumentsResolution(O?.get(Q.key)||void 0,Q.validationSchema,Q.index,v);break;case z4:D[Q.index]=!Q.validationSchema?$?.[Q.key]||void 0:await this.argumentsResolution($?.[Q.key]||void 0,Q.validationSchema,Q.index,v);break;case _2:D[Q.index]=H;break;case p2:D[Q.index]=P;break;default:D[Q.index]=!Q.validationSchema?!I.has(Q.type)?void 0:I.get(Q.type):await this.argumentsResolution(!(Q.type in I)?void 0:I.get(Q.type),Q.validationSchema,Q.index,v);break}await Y(...D)}}return Object.freeze({context:I})}async webSocketFetcher(K,w){let{request:b,server:S}=K,{query:W,responseHeaders:I,route:{model:P}}=w,M=await P.func(...[S,b,W]);if(typeof M!=="boolean")return this.finalizeResponse(new Response(JSON.stringify({httpCode:500,message:"Can not detect webSocket upgrade result.",data:void 0}),{status:500,statusText:"Internal server error.",headers:I}));if(!M)return this.finalizeResponse(new Response(JSON.stringify({httpCode:500,message:"Can not upgrade.",data:void 0}),{status:500,statusText:"Internal server error.",headers:I}));return M}}var fb=J6(d6(),1);var W8=()=>$6($2.authState);var Zw=()=>(K)=>{Reflect.defineMetadata($2.guardMetadata,void 0,K)};class I8{enforce(K,w){if(Reflect.getOwnMetadataKeys(K.class,K.funcName).includes($2.guardMetadata))return!w?!1:!0;if(Reflect.getOwnMetadataKeys(K.class).includes($2.guardMetadata))return!w?!1:!0;return!0}}q4([D4(0,hK()),D4(1,W8())],I8.prototype,"enforce",null),I8=q4([FK()],I8);var G6=new TextEncoder,B6=new TextDecoder;function jK(...K){let w=K.reduce((W,{length:I})=>W+I,0),b=new Uint8Array(w),S=0;for(let W of K)b.set(W,S),S+=W.length;return b}function X6(K){let w=new Uint8Array(K.length);for(let b=0;b<K.length;b++){let S=K.charCodeAt(b);if(S>127)throw TypeError("non-ASCII string encountered in encode()");w[b]=S}return w}function kK(K){if(Uint8Array.prototype.toBase64)return K.toBase64();let w=32768,b=[];for(let S=0;S<K.length;S+=w)b.push(String.fromCharCode.apply(null,K.subarray(S,S+w)));return btoa(b.join(""))}function ZK(K){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(K);let w=atob(K),b=new Uint8Array(w.length);for(let S=0;S<w.length;S++)b[S]=w.charCodeAt(S);return b}function AK(K){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof K==="string"?K:B6.decode(K),{alphabet:"base64url"});let w=K;if(w instanceof Uint8Array)w=B6.decode(w);w=w.replace(/-/g,"+").replace(/_/g,"/");try{return ZK(w)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function z6(K){let w=K;if(typeof w==="string")w=G6.encode(w);if(Uint8Array.prototype.toBase64)return w.toBase64({alphabet:"base64url",omitPadding:!0});return kK(w).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class U6 extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(K,w){super(K,w);this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class C2 extends U6{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class W4 extends U6{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class P8 extends U6{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}var m2=(K,w="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${w} must be ${K}`),F4=(K,w)=>K.name===w;function M8(K){return parseInt(K.name.slice(4),10)}function Aw(K){switch(K){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}function cw(K,w){if(w&&!K.usages.includes(w))throw TypeError(`CryptoKey does not support this operation, its usages must include ${w}.`)}function cK(K,w,b){switch(w){case"HS256":case"HS384":case"HS512":{if(!F4(K.algorithm,"HMAC"))throw m2("HMAC");let S=parseInt(w.slice(2),10);if(M8(K.algorithm.hash)!==S)throw m2(`SHA-${S}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!F4(K.algorithm,"RSASSA-PKCS1-v1_5"))throw m2("RSASSA-PKCS1-v1_5");let S=parseInt(w.slice(2),10);if(M8(K.algorithm.hash)!==S)throw m2(`SHA-${S}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!F4(K.algorithm,"RSA-PSS"))throw m2("RSA-PSS");let S=parseInt(w.slice(2),10);if(M8(K.algorithm.hash)!==S)throw m2(`SHA-${S}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!F4(K.algorithm,"Ed25519"))throw m2("Ed25519");break}case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":{if(!F4(K.algorithm,w))throw m2(w);break}case"ES256":case"ES384":case"ES512":{if(!F4(K.algorithm,"ECDSA"))throw m2("ECDSA");let S=Aw(w);if(K.algorithm.namedCurve!==S)throw m2(S,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}cw(K,b)}function uK(K,w,...b){if(b=b.filter(Boolean),b.length>2){let S=b.pop();K+=`one of type ${b.join(", ")}, or ${S}.`}else if(b.length===2)K+=`one of type ${b[0]} or ${b[1]}.`;else K+=`of type ${b[0]}.`;if(w==null)K+=` Received ${w}`;else if(typeof w==="function"&&w.name)K+=` Received function ${w.name}`;else if(typeof w==="object"&&w!=null){if(w.constructor?.name)K+=` Received an instance of ${w.constructor.name}`}return K}var CK=(K,...w)=>uK("Key must be ",K,...w),O8=(K,w,...b)=>uK(`Key for the ${K} algorithm must be `,w,...b);var J8=(K)=>{if(K?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return K instanceof CryptoKey}catch{return!1}},N8=(K)=>K?.[Symbol.toStringTag]==="KeyObject",D8=(K)=>J8(K)||N8(K);function xK(...K){let w=K.filter(Boolean);if(w.length===0||w.length===1)return!0;let b;for(let S of w){let W=Object.keys(S);if(!b||b.size===0){b=new Set(W);continue}for(let I of W){if(b.has(I))return!1;b.add(I)}}return!0}var uw=(K)=>typeof K==="object"&&K!==null;function Q6(K){if(!uw(K)||Object.prototype.toString.call(K)!=="[object Object]")return!1;if(Object.getPrototypeOf(K)===null)return!0;let w=K;while(Object.getPrototypeOf(w)!==null)w=Object.getPrototypeOf(w);return Object.getPrototypeOf(K)===w}function oK(K,w){if(K.startsWith("RS")||K.startsWith("PS")){let{modulusLength:b}=w.algorithm;if(typeof b!=="number"||b<2048)throw TypeError(`${K} requires key modulusLength to be 2048 bits or larger`)}}function Cw(K){let w,b;switch(K.kty){case"AKP":{switch(K.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":w={name:K.alg},b=K.priv?["sign"]:["verify"];break;default:throw new C2('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(K.alg){case"PS256":case"PS384":case"PS512":w={name:"RSA-PSS",hash:`SHA-${K.alg.slice(-3)}`},b=K.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":w={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${K.alg.slice(-3)}`},b=K.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":w={name:"RSA-OAEP",hash:`SHA-${parseInt(K.alg.slice(-3),10)||1}`},b=K.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new C2('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(K.alg){case"ES256":w={name:"ECDSA",namedCurve:"P-256"},b=K.d?["sign"]:["verify"];break;case"ES384":w={name:"ECDSA",namedCurve:"P-384"},b=K.d?["sign"]:["verify"];break;case"ES512":w={name:"ECDSA",namedCurve:"P-521"},b=K.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":w={name:"ECDH",namedCurve:K.crv},b=K.d?["deriveBits"]:[];break;default:throw new C2('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(K.alg){case"Ed25519":case"EdDSA":w={name:"Ed25519"},b=K.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":w={name:K.crv},b=K.d?["deriveBits"]:[];break;default:throw new C2('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new C2('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:w,keyUsages:b}}async function rK(K){if(!K.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:w,keyUsages:b}=Cw(K),S={...K};if(S.kty!=="AKP")delete S.alg;return delete S.use,crypto.subtle.importKey("jwk",S,w,K.ext??(K.d||K.priv?!1:!0),K.key_ops??b)}function yK(K,w,b,S,W){if(W.crit!==void 0&&S?.crit===void 0)throw new K('"crit" (Critical) Header Parameter MUST be integrity protected');if(!S||S.crit===void 0)return new Set;if(!Array.isArray(S.crit)||S.crit.length===0||S.crit.some((P)=>typeof P!=="string"||P.length===0))throw new K('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let I;if(b!==void 0)I=new Map([...Object.entries(b),...w.entries()]);else I=w;for(let P of S.crit){if(!I.has(P))throw new C2(`Extension Header Parameter "${P}" is not recognized`);if(W[P]===void 0)throw new K(`Extension Header Parameter "${P}" is missing`);if(I.get(P)&&S[P]===void 0)throw new K(`Extension Header Parameter "${P}" MUST be integrity protected`)}return new Set(S.crit)}var u4=(K)=>Q6(K)&&typeof K.kty==="string",_K=(K)=>K.kty!=="oct"&&(K.kty==="AKP"&&typeof K.priv==="string"||typeof K.d==="string"),mK=(K)=>K.kty!=="oct"&&K.d===void 0&&K.priv===void 0,fK=(K)=>K.kty==="oct"&&typeof K.k==="string";var v4,TK=async(K,w,b,S=!1)=>{v4||=new WeakMap;let W=v4.get(K);if(W?.[b])return W[b];let I=await rK({...w,alg:b});if(S)Object.freeze(K);if(!W)v4.set(K,{[b]:I});else W[b]=I;return I},ow=(K,w)=>{v4||=new WeakMap;let b=v4.get(K);if(b?.[w])return b[w];let S=K.type==="public",W=S?!0:!1,I;if(K.asymmetricKeyType==="x25519"){switch(w){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}I=K.toCryptoKey(K.asymmetricKeyType,W,S?[]:["deriveBits"])}if(K.asymmetricKeyType==="ed25519"){if(w!=="EdDSA"&&w!=="Ed25519")throw TypeError("given KeyObject instance cannot be used for this algorithm");I=K.toCryptoKey(K.asymmetricKeyType,W,[S?"verify":"sign"])}switch(K.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":{if(w!==K.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");I=K.toCryptoKey(K.asymmetricKeyType,W,[S?"verify":"sign"])}}if(K.asymmetricKeyType==="rsa"){let P;switch(w){case"RSA-OAEP":P="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":P="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":P="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":P="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(w.startsWith("RSA-OAEP"))return K.toCryptoKey({name:"RSA-OAEP",hash:P},W,S?["encrypt"]:["decrypt"]);I=K.toCryptoKey({name:w.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:P},W,[S?"verify":"sign"])}if(K.asymmetricKeyType==="ec"){let M=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(K.asymmetricKeyDetails?.namedCurve);if(!M)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(w==="ES256"&&M==="P-256")I=K.toCryptoKey({name:"ECDSA",namedCurve:M},W,[S?"verify":"sign"]);if(w==="ES384"&&M==="P-384")I=K.toCryptoKey({name:"ECDSA",namedCurve:M},W,[S?"verify":"sign"]);if(w==="ES512"&&M==="P-521")I=K.toCryptoKey({name:"ECDSA",namedCurve:M},W,[S?"verify":"sign"]);if(w.startsWith("ECDH-ES"))I=K.toCryptoKey({name:"ECDH",namedCurve:M},W,S?[]:["deriveBits"])}if(!I)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(!b)v4.set(K,{[w]:I});else b[w]=I;return I};async function lK(K,w){if(K instanceof Uint8Array)return K;if(J8(K))return K;if(N8(K)){if(K.type==="secret")return K.export();if("toCryptoKey"in K&&typeof K.toCryptoKey==="function")try{return ow(K,w)}catch(S){if(S instanceof TypeError)throw S}let b=K.export({format:"jwk"});return TK(K,b,w)}if(u4(K)){if(K.k)return AK(K.k);return TK(K,K,w,!0)}throw Error("unreachable")}var E4=(K)=>K?.[Symbol.toStringTag],$8=(K,w,b)=>{if(w.use!==void 0){let S;switch(b){case"sign":case"verify":S="sig";break;case"encrypt":case"decrypt":S="enc";break}if(w.use!==S)throw TypeError(`Invalid key for this operation, its "use" must be "${S}" when present`)}if(w.alg!==void 0&&w.alg!==K)throw TypeError(`Invalid key for this operation, its "alg" must be "${K}" when present`);if(Array.isArray(w.key_ops)){let S;switch(!0){case(b==="sign"||b==="verify"):case K==="dir":case K.includes("CBC-HS"):S=b;break;case K.startsWith("PBES2"):S="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(K):if(!K.includes("GCM")&&K.endsWith("KW"))S=b==="encrypt"?"wrapKey":"unwrapKey";else S=b;break;case(b==="encrypt"&&K.startsWith("RSA")):S="wrapKey";break;case b==="decrypt":S=K.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(S&&w.key_ops?.includes?.(S)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${S}" when present`)}return!0},rw=(K,w,b)=>{if(w instanceof Uint8Array)return;if(u4(w)){if(fK(w)&&$8(K,w,b))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!D8(w))throw TypeError(O8(K,w,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(w.type!=="secret")throw TypeError(`${E4(w)} instances for symmetric algorithms must be of type "secret"`)},yw=(K,w,b)=>{if(u4(w))switch(b){case"decrypt":case"sign":if(_K(w)&&$8(K,w,b))return;throw TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if(mK(w)&&$8(K,w,b))return;throw TypeError("JSON Web Key for this operation must be a public JWK")}if(!D8(w))throw TypeError(O8(K,w,"CryptoKey","KeyObject","JSON Web Key"));if(w.type==="secret")throw TypeError(`${E4(w)} instances for asymmetric algorithms must not be of type "secret"`);if(w.type==="public")switch(b){case"sign":throw TypeError(`${E4(w)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${E4(w)} instances for asymmetric algorithm decryption must be of type "private"`)}if(w.type==="private")switch(b){case"verify":throw TypeError(`${E4(w)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${E4(w)} instances for asymmetric algorithm encryption must be of type "public"`)}};function pK(K,w,b){switch(K.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":rw(K,w,b);break;default:yw(K,w,b)}}function iK(K,w){let b=`SHA-${K.slice(-3)}`;switch(K){case"HS256":case"HS384":case"HS512":return{hash:b,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:b,name:"RSA-PSS",saltLength:parseInt(K.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:b,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:b,name:"ECDSA",namedCurve:w.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:K};default:throw new C2(`alg ${K} is not supported either by JOSE or your javascript runtime`)}}async function eK(K,w,b){if(w instanceof Uint8Array){if(!K.startsWith("HS"))throw TypeError(CK(w,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",w,{hash:`SHA-${K.slice(-3)}`,name:"HMAC"},!1,[b])}return cK(w,K,b),w}var U4=(K)=>Math.floor(K.getTime()/1000),nK=60,dK=nK*60,B8=dK*24,_w=B8*7,mw=B8*365.25,fw=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function G8(K){let w=fw.exec(K);if(!w||w[4]&&w[1])throw TypeError("Invalid time period format");let b=parseFloat(w[2]),S=w[3].toLowerCase(),W;switch(S){case"sec":case"secs":case"second":case"seconds":case"s":W=Math.round(b);break;case"minute":case"minutes":case"min":case"mins":case"m":W=Math.round(b*nK);break;case"hour":case"hours":case"hr":case"hrs":case"h":W=Math.round(b*dK);break;case"day":case"days":case"d":W=Math.round(b*B8);break;case"week":case"weeks":case"w":W=Math.round(b*_w);break;default:W=Math.round(b*mw);break}if(w[1]==="-"||w[4]==="ago")return-W;return W}function Q4(K,w){if(!Number.isFinite(w))throw TypeError(`Invalid ${K} input`);return w}class X8{#K;constructor(K){if(!Q6(K))throw TypeError("JWT Claims Set MUST be an object");this.#K=structuredClone(K)}data(){return G6.encode(JSON.stringify(this.#K))}get iss(){return this.#K.iss}set iss(K){this.#K.iss=K}get sub(){return this.#K.sub}set sub(K){this.#K.sub=K}get aud(){return this.#K.aud}set aud(K){this.#K.aud=K}set jti(K){this.#K.jti=K}set nbf(K){if(typeof K==="number")this.#K.nbf=Q4("setNotBefore",K);else if(K instanceof Date)this.#K.nbf=Q4("setNotBefore",U4(K));else this.#K.nbf=U4(new Date)+G8(K)}set exp(K){if(typeof K==="number")this.#K.exp=Q4("setExpirationTime",K);else if(K instanceof Date)this.#K.exp=Q4("setExpirationTime",U4(K));else this.#K.exp=U4(new Date)+G8(K)}set iat(K){if(K===void 0)this.#K.iat=U4(new Date);else if(K instanceof Date)this.#K.iat=Q4("setIssuedAt",U4(K));else if(typeof K==="string")this.#K.iat=Q4("setIssuedAt",U4(new Date)+G8(K));else this.#K.iat=Q4("setIssuedAt",K)}}async function tK(K,w,b){let S=await eK(K,w,"sign");oK(K,S);let W=await crypto.subtle.sign(iK(K,S.algorithm),S,b);return new Uint8Array(W)}class z8{#K;#w;#b;constructor(K){if(!(K instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#K=K}setProtectedHeader(K){if(this.#w)throw TypeError("setProtectedHeader can only be called once");return this.#w=K,this}setUnprotectedHeader(K){if(this.#b)throw TypeError("setUnprotectedHeader can only be called once");return this.#b=K,this}async sign(K,w){if(!this.#w&&!this.#b)throw new W4("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!xK(this.#w,this.#b))throw new W4("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let b={...this.#w,...this.#b},S=yK(W4,new Map([["b64",!0]]),w?.crit,this.#w,b),W=!0;if(S.has("b64")){if(W=this.#w.b64,typeof W!=="boolean")throw new W4('The "b64" (base64url-encode payload) Header Parameter must be a boolean')}let{alg:I}=b;if(typeof I!=="string"||!I)throw new W4('JWS "alg" (Algorithm) Header Parameter missing or invalid');pK(I,K,"sign");let P,M;if(W)P=z6(this.#K),M=X6(P);else M=this.#K,P="";let O,J;if(this.#w)O=z6(JSON.stringify(this.#w)),J=X6(O);else O="",J=new Uint8Array;let $=jK(J,X6("."),M),H=await lK(K,I),X=await tK(I,H,$),F={signature:z6(X),payload:P};if(this.#b)F.header=this.#b;if(this.#w)F.protected=O;return F}}class U8{#K;constructor(K){this.#K=new z8(K)}setProtectedHeader(K){return this.#K.setProtectedHeader(K),this}async sign(K,w){let b=await this.#K.sign(K,w);if(b.payload===void 0)throw TypeError("use the flattened module for creating JWS with b64: false");return`${b.protected}.${b.payload}.${b.signature}`}}class Y6{#K;#w;constructor(K={}){this.#w=new X8(K)}setIssuer(K){return this.#w.iss=K,this}setSubject(K){return this.#w.sub=K,this}setAudience(K){return this.#w.aud=K,this}setJti(K){return this.#w.jti=K,this}setNotBefore(K){return this.#w.nbf=K,this}setExpirationTime(K){return this.#w.exp=K,this}setIssuedAt(K){return this.#w.iat=K,this}setProtectedHeader(K){return this.#K=K,this}async sign(K,w){let b=new U8(this.#w.data());if(b.setProtectedHeader(this.#K),Array.isArray(this.#K?.crit)&&this.#K.crit.includes("b64")&&this.#K.b64===!1)throw new P8("JWTs MUST NOT use unencoded payload");return b.sign(K,w)}}var Q8=Object.freeze({status:"aborted"});function R(K,w,b){function S(M,O){if(!M._zod)Object.defineProperty(M,"_zod",{value:{def:O,constr:P,traits:new Set},enumerable:!1});if(M._zod.traits.has(K))return;M._zod.traits.add(K),w(M,O);let J=P.prototype,$=Object.keys(J);for(let H=0;H<$.length;H++){let X=$[H];if(!(X in M))M[X]=J[X].bind(M)}}let W=b?.Parent??Object;class I extends W{}Object.defineProperty(I,"name",{value:K});function P(M){var O;let J=b?.Parent?new I:this;S(J,M),(O=J._zod).deferred??(O.deferred=[]);for(let $ of J._zod.deferred)$();return J}return Object.defineProperty(P,"init",{value:S}),Object.defineProperty(P,Symbol.hasInstance,{value:(M)=>{if(b?.Parent&&M instanceof b.Parent)return!0;return M?._zod?.traits?.has(K)}}),Object.defineProperty(P,"name",{value:K}),P}var Tw=Symbol("zod_brand");class d2 extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class C4 extends Error{constructor(K){super(`Encountered unidirectional transform during encode: ${K}`);this.name="ZodEncodeError"}}var H6={};function k2(K){if(K)Object.assign(H6,K);return H6}var s={};T6(s,{unwrapMessage:()=>x4,uint8ArrayToHex:()=>X9,uint8ArrayToBase64url:()=>G9,uint8ArrayToBase64:()=>P5,stringifyPrimitive:()=>h6,slugify:()=>H8,shallowClone:()=>K5,safeExtend:()=>M9,required:()=>N9,randomString:()=>K9,propertyKeyTypes:()=>L8,promiseAllObject:()=>sw,primitiveTypes:()=>w5,prefixIssues:()=>m4,pick:()=>W9,partial:()=>J9,optionalKeys:()=>q8,omit:()=>I9,objectClone:()=>dw,numKeys:()=>w9,nullish:()=>y4,normalizeParams:()=>T,mergeDefs:()=>P4,merge:()=>O9,jsonStringifyReplacer:()=>g4,joinValues:()=>V6,issue:()=>j4,isPlainObject:()=>Y4,isObject:()=>R4,hexToUint8Array:()=>B9,getSizableOrigin:()=>W5,getParsedType:()=>b9,getLengthableOrigin:()=>f4,getEnumValues:()=>o4,getElementAtPath:()=>aw,floatSafeRemainder:()=>sK,finalizeIssue:()=>f2,extend:()=>P9,escapeRegex:()=>H4,esc:()=>L6,defineLazy:()=>w2,createTransparentProxy:()=>S9,cloneDef:()=>tw,clone:()=>Z2,cleanRegex:()=>_4,cleanEnum:()=>D9,captureStackTrace:()=>q6,cached:()=>r4,base64urlToUint8Array:()=>$9,base64ToUint8Array:()=>I5,assignProp:()=>I4,assertNotEqual:()=>pw,assertNever:()=>ew,assertIs:()=>iw,assertEqual:()=>lw,assert:()=>nw,allowsEval:()=>V8,aborted:()=>M4,NUMBER_FORMAT_RANGES:()=>b5,Class:()=>M5,BIGINT_FORMAT_RANGES:()=>S5});function lw(K){return K}function pw(K){return K}function iw(K){}function ew(K){throw Error("Unexpected value in exhaustive check")}function nw(K){}function o4(K){let w=Object.values(K).filter((S)=>typeof S==="number");return Object.entries(K).filter(([S,W])=>w.indexOf(+S)===-1).map(([S,W])=>W)}function V6(K,w="|"){return K.map((b)=>h6(b)).join(w)}function g4(K,w){if(typeof w==="bigint")return w.toString();return w}function r4(K){return{get value(){{let b=K();return Object.defineProperty(this,"value",{value:b}),b}throw Error("cached value already set")}}}function y4(K){return K===null||K===void 0}function _4(K){let w=K.startsWith("^")?1:0,b=K.endsWith("$")?K.length-1:K.length;return K.slice(w,b)}function sK(K,w){let b=(K.toString().split(".")[1]||"").length,S=w.toString(),W=(S.split(".")[1]||"").length;if(W===0&&/\d?e-\d?/.test(S)){let O=S.match(/\d?e-(\d?)/);if(O?.[1])W=Number.parseInt(O[1])}let I=b>W?b:W,P=Number.parseInt(K.toFixed(I).replace(".","")),M=Number.parseInt(w.toFixed(I).replace(".",""));return P%M/10**I}var aK=Symbol("evaluating");function w2(K,w,b){let S=void 0;Object.defineProperty(K,w,{get(){if(S===aK)return;if(S===void 0)S=aK,S=b();return S},set(W){Object.defineProperty(K,w,{value:W})},configurable:!0})}function dw(K){return Object.create(Object.getPrototypeOf(K),Object.getOwnPropertyDescriptors(K))}function I4(K,w,b){Object.defineProperty(K,w,{value:b,writable:!0,enumerable:!0,configurable:!0})}function P4(...K){let w={};for(let b of K){let S=Object.getOwnPropertyDescriptors(b);Object.assign(w,S)}return Object.defineProperties({},w)}function tw(K){return P4(K._zod.def)}function aw(K,w){if(!w)return K;return w.reduce((b,S)=>b?.[S],K)}function sw(K){let w=Object.keys(K),b=w.map((S)=>K[S]);return Promise.all(b).then((S)=>{let W={};for(let I=0;I<w.length;I++)W[w[I]]=S[I];return W})}function K9(K=10){let b="";for(let S=0;S<K;S++)b+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return b}function L6(K){return JSON.stringify(K)}function H8(K){return K.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}var q6="captureStackTrace"in Error?Error.captureStackTrace:(...K)=>{};function R4(K){return typeof K==="object"&&K!==null&&!Array.isArray(K)}var V8=r4(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(K){return!1}});function Y4(K){if(R4(K)===!1)return!1;let w=K.constructor;if(w===void 0)return!0;if(typeof w!=="function")return!0;let b=w.prototype;if(R4(b)===!1)return!1;if(Object.prototype.hasOwnProperty.call(b,"isPrototypeOf")===!1)return!1;return!0}function K5(K){if(Y4(K))return{...K};if(Array.isArray(K))return[...K];return K}function w9(K){let w=0;for(let b in K)if(Object.prototype.hasOwnProperty.call(K,b))w++;return w}var b9=(K)=>{let w=typeof K;switch(w){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(K)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(K))return"array";if(K===null)return"null";if(K.then&&typeof K.then==="function"&&K.catch&&typeof K.catch==="function")return"promise";if(typeof Map<"u"&&K instanceof Map)return"map";if(typeof Set<"u"&&K instanceof Set)return"set";if(typeof Date<"u"&&K instanceof Date)return"date";if(typeof File<"u"&&K instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${w}`)}},L8=new Set(["string","number","symbol"]),w5=new Set(["string","number","bigint","boolean","symbol","undefined"]);function H4(K){return K.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Z2(K,w,b){let S=new K._zod.constr(w??K._zod.def);if(!w||b?.parent)S._zod.parent=K;return S}function T(K){let w=K;if(!w)return{};if(typeof w==="string")return{error:()=>w};if(w?.message!==void 0){if(w?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");w.error=w.message}if(delete w.message,typeof w.error==="string")return{...w,error:()=>w.error};return w}function S9(K){let w;return new Proxy({},{get(b,S,W){return w??(w=K()),Reflect.get(w,S,W)},set(b,S,W,I){return w??(w=K()),Reflect.set(w,S,W,I)},has(b,S){return w??(w=K()),Reflect.has(w,S)},deleteProperty(b,S){return w??(w=K()),Reflect.deleteProperty(w,S)},ownKeys(b){return w??(w=K()),Reflect.ownKeys(w)},getOwnPropertyDescriptor(b,S){return w??(w=K()),Reflect.getOwnPropertyDescriptor(w,S)},defineProperty(b,S,W){return w??(w=K()),Reflect.defineProperty(w,S,W)}})}function h6(K){if(typeof K==="bigint")return K.toString()+"n";if(typeof K==="string")return`"${K}"`;return`${K}`}function q8(K){return Object.keys(K).filter((w)=>{return K[w]._zod.optin==="optional"&&K[w]._zod.optout==="optional"})}var b5={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},S5={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function W9(K,w){let b=K._zod.def,S=P4(K._zod.def,{get shape(){let W={};for(let I in w){if(!(I in b.shape))throw Error(`Unrecognized key: "${I}"`);if(!w[I])continue;W[I]=b.shape[I]}return I4(this,"shape",W),W},checks:[]});return Z2(K,S)}function I9(K,w){let b=K._zod.def,S=P4(K._zod.def,{get shape(){let W={...K._zod.def.shape};for(let I in w){if(!(I in b.shape))throw Error(`Unrecognized key: "${I}"`);if(!w[I])continue;delete W[I]}return I4(this,"shape",W),W},checks:[]});return Z2(K,S)}function P9(K,w){if(!Y4(w))throw Error("Invalid input to extend: expected a plain object");let b=K._zod.def.checks;if(b&&b.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let W=P4(K._zod.def,{get shape(){let I={...K._zod.def.shape,...w};return I4(this,"shape",I),I},checks:[]});return Z2(K,W)}function M9(K,w){if(!Y4(w))throw Error("Invalid input to safeExtend: expected a plain object");let b={...K._zod.def,get shape(){let S={...K._zod.def.shape,...w};return I4(this,"shape",S),S},checks:K._zod.def.checks};return Z2(K,b)}function O9(K,w){let b=P4(K._zod.def,{get shape(){let S={...K._zod.def.shape,...w._zod.def.shape};return I4(this,"shape",S),S},get catchall(){return w._zod.def.catchall},checks:[]});return Z2(K,b)}function J9(K,w,b){let S=P4(w._zod.def,{get shape(){let W=w._zod.def.shape,I={...W};if(b)for(let P in b){if(!(P in W))throw Error(`Unrecognized key: "${P}"`);if(!b[P])continue;I[P]=K?new K({type:"optional",innerType:W[P]}):W[P]}else for(let P in W)I[P]=K?new K({type:"optional",innerType:W[P]}):W[P];return I4(this,"shape",I),I},checks:[]});return Z2(w,S)}function N9(K,w,b){let S=P4(w._zod.def,{get shape(){let W=w._zod.def.shape,I={...W};if(b)for(let P in b){if(!(P in I))throw Error(`Unrecognized key: "${P}"`);if(!b[P])continue;I[P]=new K({type:"nonoptional",innerType:W[P]})}else for(let P in W)I[P]=new K({type:"nonoptional",innerType:W[P]});return I4(this,"shape",I),I},checks:[]});return Z2(w,S)}function M4(K,w=0){if(K.aborted===!0)return!0;for(let b=w;b<K.issues.length;b++)if(K.issues[b]?.continue!==!0)return!0;return!1}function m4(K,w){return w.map((b)=>{var S;return(S=b).path??(S.path=[]),b.path.unshift(K),b})}function x4(K){return typeof K==="string"?K:K?.message}function f2(K,w,b){let S={...K,path:K.path??[]};if(!K.message){let W=x4(K.inst?._zod.def?.error?.(K))??x4(w?.error?.(K))??x4(b.customError?.(K))??x4(b.localeError?.(K))??"Invalid input";S.message=W}if(delete S.inst,delete S.continue,!w?.reportInput)delete S.input;return S}function W5(K){if(K instanceof Set)return"set";if(K instanceof Map)return"map";if(K instanceof File)return"file";return"unknown"}function f4(K){if(Array.isArray(K))return"array";if(typeof K==="string")return"string";return"unknown"}function j4(...K){let[w,b,S]=K;if(typeof w==="string")return{message:w,code:"custom",input:b,inst:S};return{...w}}function D9(K){return Object.entries(K).filter(([w,b])=>{return Number.isNaN(Number.parseInt(w,10))}).map((w)=>w[1])}function I5(K){let w=atob(K),b=new Uint8Array(w.length);for(let S=0;S<w.length;S++)b[S]=w.charCodeAt(S);return b}function P5(K){let w="";for(let b=0;b<K.length;b++)w+=String.fromCharCode(K[b]);return btoa(w)}function $9(K){let w=K.replace(/-/g,"+").replace(/_/g,"/"),b="=".repeat((4-w.length%4)%4);return I5(w+b)}function G9(K){return P5(K).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function B9(K){let w=K.replace(/^0x/,"");if(w.length%2!==0)throw Error("Invalid hex string length");let b=new Uint8Array(w.length/2);for(let S=0;S<w.length;S+=2)b[S/2]=Number.parseInt(w.slice(S,S+2),16);return b}function X9(K){return Array.from(K).map((w)=>w.toString(16).padStart(2,"0")).join("")}class M5{constructor(...K){}}var O5=(K,w)=>{K.name="$ZodError",Object.defineProperty(K,"_zod",{value:K._zod,enumerable:!1}),Object.defineProperty(K,"issues",{value:w,enumerable:!1}),K.message=JSON.stringify(w,g4,2),Object.defineProperty(K,"toString",{value:()=>K.message,enumerable:!1})},F6=R("$ZodError",O5),h8=R("$ZodError",O5,{Parent:Error});function F8(K,w=(b)=>b.message){let b={},S=[];for(let W of K.issues)if(W.path.length>0)b[W.path[0]]=b[W.path[0]]||[],b[W.path[0]].push(w(W));else S.push(w(W));return{formErrors:S,fieldErrors:b}}function v8(K,w=(b)=>b.message){let b={_errors:[]},S=(W)=>{for(let I of W.issues)if(I.code==="invalid_union"&&I.errors.length)I.errors.map((P)=>S({issues:P}));else if(I.code==="invalid_key")S({issues:I.issues});else if(I.code==="invalid_element")S({issues:I.issues});else if(I.path.length===0)b._errors.push(w(I));else{let P=b,M=0;while(M<I.path.length){let O=I.path[M];if(M!==I.path.length-1)P[O]=P[O]||{_errors:[]};else P[O]=P[O]||{_errors:[]},P[O]._errors.push(w(I));P=P[O],M++}}};return S(K),b}var v6=(K)=>(w,b,S,W)=>{let I=S?Object.assign(S,{async:!1}):{async:!1},P=w._zod.run({value:b,issues:[]},I);if(P instanceof Promise)throw new d2;if(P.issues.length){let M=new(W?.Err??K)(P.issues.map((O)=>f2(O,I,k2())));throw q6(M,W?.callee),M}return P.value};var E6=(K)=>async(w,b,S,W)=>{let I=S?Object.assign(S,{async:!0}):{async:!0},P=w._zod.run({value:b,issues:[]},I);if(P instanceof Promise)P=await P;if(P.issues.length){let M=new(W?.Err??K)(P.issues.map((O)=>f2(O,I,k2())));throw q6(M,W?.callee),M}return P.value};var T4=(K)=>(w,b,S)=>{let W=S?{...S,async:!1}:{async:!1},I=w._zod.run({value:b,issues:[]},W);if(I instanceof Promise)throw new d2;return I.issues.length?{success:!1,error:new(K??F6)(I.issues.map((P)=>f2(P,W,k2())))}:{success:!0,data:I.value}},J5=T4(h8),l4=(K)=>async(w,b,S)=>{let W=S?Object.assign(S,{async:!0}):{async:!0},I=w._zod.run({value:b,issues:[]},W);if(I instanceof Promise)I=await I;return I.issues.length?{success:!1,error:new K(I.issues.map((P)=>f2(P,W,k2())))}:{success:!0,data:I.value}},N5=l4(h8),D5=(K)=>(w,b,S)=>{let W=S?Object.assign(S,{direction:"backward"}):{direction:"backward"};return v6(K)(w,b,W)};var $5=(K)=>(w,b,S)=>{return v6(K)(w,b,S)};var G5=(K)=>async(w,b,S)=>{let W=S?Object.assign(S,{direction:"backward"}):{direction:"backward"};return E6(K)(w,b,W)};var B5=(K)=>async(w,b,S)=>{return E6(K)(w,b,S)};var X5=(K)=>(w,b,S)=>{let W=S?Object.assign(S,{direction:"backward"}):{direction:"backward"};return T4(K)(w,b,W)};var z5=(K)=>(w,b,S)=>{return T4(K)(w,b,S)};var U5=(K)=>async(w,b,S)=>{let W=S?Object.assign(S,{direction:"backward"}):{direction:"backward"};return l4(K)(w,b,W)};var Q5=(K)=>async(w,b,S)=>{return l4(K)(w,b,S)};var Y5=/^[cC][^\s-]{8,}$/,H5=/^[0-9a-z]+$/,V5=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,L5=/^[0-9a-vA-V]{20}$/,q5=/^[A-Za-z0-9]{27}$/,h5=/^[a-zA-Z0-9_-]{21}$/,F5=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/;var v5=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,E8=(K)=>{if(!K)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${K}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)};var E5=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;var U9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function R5(){return new RegExp(U9,"u")}var g5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,j5=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/;var k5=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Z5=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,A5=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,R8=/^[A-Za-z0-9_-]*$/;var c5=/^\+(?:[0-9]){6,14}[0-9]$/,u5="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",C5=new RegExp(`^${u5}$`);function x5(K){return typeof K.precision==="number"?K.precision===-1?"(?:[01]\\d|2[0-3]):[0-5]\\d":K.precision===0?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${K.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function o5(K){return new RegExp(`^${x5(K)}$`)}function r5(K){let w=x5({precision:K.precision}),b=["Z"];if(K.local)b.push("");if(K.offset)b.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let S=`${w}(?:${b.join("|")})`;return new RegExp(`^${u5}T(?:${S})$`)}var y5=(K)=>{let w=K?`[\\s\\S]{${K?.minimum??0},${K?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${w}$`)};var _5=/^[^A-Z]*$/,m5=/^[^a-z]*$/;var v2=R("$ZodCheck",(K,w)=>{var b;K._zod??(K._zod={}),K._zod.def=w,(b=K._zod).onattach??(b.onattach=[])});var f5=R("$ZodCheckMaxLength",(K,w)=>{var b;v2.init(K,w),(b=K._zod.def).when??(b.when=(S)=>{let W=S.value;return!y4(W)&&W.length!==void 0}),K._zod.onattach.push((S)=>{let W=S._zod.bag.maximum??Number.POSITIVE_INFINITY;if(w.maximum<W)S._zod.bag.maximum=w.maximum}),K._zod.check=(S)=>{let W=S.value;if(W.length<=w.maximum)return;let P=f4(W);S.issues.push({origin:P,code:"too_big",maximum:w.maximum,inclusive:!0,input:W,inst:K,continue:!w.abort})}}),T5=R("$ZodCheckMinLength",(K,w)=>{var b;v2.init(K,w),(b=K._zod.def).when??(b.when=(S)=>{let W=S.value;return!y4(W)&&W.length!==void 0}),K._zod.onattach.push((S)=>{let W=S._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(w.minimum>W)S._zod.bag.minimum=w.minimum}),K._zod.check=(S)=>{let W=S.value;if(W.length>=w.minimum)return;let P=f4(W);S.issues.push({origin:P,code:"too_small",minimum:w.minimum,inclusive:!0,input:W,inst:K,continue:!w.abort})}}),l5=R("$ZodCheckLengthEquals",(K,w)=>{var b;v2.init(K,w),(b=K._zod.def).when??(b.when=(S)=>{let W=S.value;return!y4(W)&&W.length!==void 0}),K._zod.onattach.push((S)=>{let W=S._zod.bag;W.minimum=w.length,W.maximum=w.length,W.length=w.length}),K._zod.check=(S)=>{let W=S.value,I=W.length;if(I===w.length)return;let P=f4(W),M=I>w.length;S.issues.push({origin:P,...M?{code:"too_big",maximum:w.length}:{code:"too_small",minimum:w.length},inclusive:!0,exact:!0,input:S.value,inst:K,continue:!w.abort})}}),i4=R("$ZodCheckStringFormat",(K,w)=>{var b,S;if(v2.init(K,w),K._zod.onattach.push((W)=>{let I=W._zod.bag;if(I.format=w.format,w.pattern)I.patterns??(I.patterns=new Set),I.patterns.add(w.pattern)}),w.pattern)(b=K._zod).check??(b.check=(W)=>{if(w.pattern.lastIndex=0,w.pattern.test(W.value))return;W.issues.push({origin:"string",code:"invalid_format",format:w.format,input:W.value,...w.pattern?{pattern:w.pattern.toString()}:{},inst:K,continue:!w.abort})});else(S=K._zod).check??(S.check=()=>{})}),p5=R("$ZodCheckRegex",(K,w)=>{i4.init(K,w),K._zod.check=(b)=>{if(w.pattern.lastIndex=0,w.pattern.test(b.value))return;b.issues.push({origin:"string",code:"invalid_format",format:"regex",input:b.value,pattern:w.pattern.toString(),inst:K,continue:!w.abort})}}),i5=R("$ZodCheckLowerCase",(K,w)=>{w.pattern??(w.pattern=_5),i4.init(K,w)}),e5=R("$ZodCheckUpperCase",(K,w)=>{w.pattern??(w.pattern=m5),i4.init(K,w)}),n5=R("$ZodCheckIncludes",(K,w)=>{v2.init(K,w);let b=H4(w.includes),S=new RegExp(typeof w.position==="number"?`^.{${w.position}}${b}`:b);w.pattern=S,K._zod.onattach.push((W)=>{let I=W._zod.bag;I.patterns??(I.patterns=new Set),I.patterns.add(S)}),K._zod.check=(W)=>{if(W.value.includes(w.includes,w.position))return;W.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:w.includes,input:W.value,inst:K,continue:!w.abort})}}),d5=R("$ZodCheckStartsWith",(K,w)=>{v2.init(K,w);let b=new RegExp(`^${H4(w.prefix)}.*`);w.pattern??(w.pattern=b),K._zod.onattach.push((S)=>{let W=S._zod.bag;W.patterns??(W.patterns=new Set),W.patterns.add(b)}),K._zod.check=(S)=>{if(S.value.startsWith(w.prefix))return;S.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:w.prefix,input:S.value,inst:K,continue:!w.abort})}}),t5=R("$ZodCheckEndsWith",(K,w)=>{v2.init(K,w);let b=new RegExp(`.*${H4(w.suffix)}$`);w.pattern??(w.pattern=b),K._zod.onattach.push((S)=>{let W=S._zod.bag;W.patterns??(W.patterns=new Set),W.patterns.add(b)}),K._zod.check=(S)=>{if(S.value.endsWith(w.suffix))return;S.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:w.suffix,input:S.value,inst:K,continue:!w.abort})}});var a5=R("$ZodCheckOverwrite",(K,w)=>{v2.init(K,w),K._zod.check=(b)=>{b.value=w.tx(b.value)}});class g8{constructor(K=[]){if(this.content=[],this.indent=0,this)this.args=K}indented(K){this.indent+=1,K(this),this.indent-=1}write(K){if(typeof K==="function"){K(this,{execution:"sync"}),K(this,{execution:"async"});return}let b=K.split(`
`).filter((I)=>I),S=Math.min(...b.map((I)=>I.length-I.trimStart().length)),W=b.map((I)=>I.slice(S)).map((I)=>" ".repeat(this.indent*2)+I);for(let I of W)this.content.push(I)}compile(){let K=Function,w=this?.args,S=[...(this?.content??[""]).map((W)=>`  ${W}`)];return new K(...w,S.join(`
`))}}var K3={major:4,minor:2,patch:1};var N2=R("$ZodType",(K,w)=>{var b;K??(K={}),K._zod.def=w,K._zod.bag=K._zod.bag||{},K._zod.version=K3;let S=[...K._zod.def.checks??[]];if(K._zod.traits.has("$ZodCheck"))S.unshift(K);for(let W of S)for(let I of W._zod.onattach)I(K);if(S.length===0)(b=K._zod).deferred??(b.deferred=[]),K._zod.deferred?.push(()=>{K._zod.run=K._zod.parse});else{let W=(P,M,O)=>{let J=M4(P),$;for(let H of M){if(H._zod.def.when){if(!H._zod.def.when(P))continue}else if(J)continue;let X=P.issues.length,F=H._zod.check(P);if(F instanceof Promise&&O?.async===!1)throw new d2;if($||F instanceof Promise)$=($??Promise.resolve()).then(async()=>{if(await F,P.issues.length===X)return;if(!J)J=M4(P,X)});else{if(P.issues.length===X)continue;if(!J)J=M4(P,X)}}if($)return $.then(()=>{return P});return P},I=(P,M,O)=>{if(M4(P))return P.aborted=!0,P;let J=W(M,S,O);if(J instanceof Promise){if(O.async===!1)throw new d2;return J.then(($)=>K._zod.parse($,O))}return K._zod.parse(J,O)};K._zod.run=(P,M)=>{if(M.skipChecks)return K._zod.parse(P,M);if(M.direction==="backward"){let J=K._zod.parse({value:P.value,issues:[]},{...M,skipChecks:!0});if(J instanceof Promise)return J.then(($)=>{return I($,P,M)});return I(J,P,M)}let O=K._zod.parse(P,M);if(O instanceof Promise){if(M.async===!1)throw new d2;return O.then((J)=>W(J,S,M))}return W(O,S,M)}}K["~standard"]={validate:(W)=>{try{let I=J5(K,W);return I.success?{value:I.data}:{issues:I.error?.issues}}catch(I){return N5(K,W).then((P)=>P.success?{value:P.data}:{issues:P.error?.issues})}},vendor:"zod",version:1}}),j6=R("$ZodString",(K,w)=>{N2.init(K,w),K._zod.pattern=[...K?._zod.bag?.patterns??[]].pop()??y5(K._zod.bag),K._zod.parse=(b,S)=>{if(w.coerce)try{b.value=String(b.value)}catch(W){}if(typeof b.value==="string")return b;return b.issues.push({expected:"string",code:"invalid_type",input:b.value,inst:K}),b}}),W2=R("$ZodStringFormat",(K,w)=>{i4.init(K,w),j6.init(K,w)}),J3=R("$ZodGUID",(K,w)=>{w.pattern??(w.pattern=v5),W2.init(K,w)}),N3=R("$ZodUUID",(K,w)=>{if(w.version){let S={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[w.version];if(S===void 0)throw Error(`Invalid UUID version: "${w.version}"`);w.pattern??(w.pattern=E8(S))}else w.pattern??(w.pattern=E8());W2.init(K,w)}),D3=R("$ZodEmail",(K,w)=>{w.pattern??(w.pattern=E5),W2.init(K,w)}),$3=R("$ZodURL",(K,w)=>{W2.init(K,w),K._zod.check=(b)=>{try{let S=b.value.trim(),W=new URL(S);if(w.hostname){if(w.hostname.lastIndex=0,!w.hostname.test(W.hostname))b.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:w.hostname.source,input:b.value,inst:K,continue:!w.abort})}if(w.protocol){if(w.protocol.lastIndex=0,!w.protocol.test(W.protocol.endsWith(":")?W.protocol.slice(0,-1):W.protocol))b.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:w.protocol.source,input:b.value,inst:K,continue:!w.abort})}if(w.normalize)b.value=W.href;else b.value=S;return}catch(S){b.issues.push({code:"invalid_format",format:"url",input:b.value,inst:K,continue:!w.abort})}}}),G3=R("$ZodEmoji",(K,w)=>{w.pattern??(w.pattern=R5()),W2.init(K,w)}),B3=R("$ZodNanoID",(K,w)=>{w.pattern??(w.pattern=h5),W2.init(K,w)}),X3=R("$ZodCUID",(K,w)=>{w.pattern??(w.pattern=Y5),W2.init(K,w)}),z3=R("$ZodCUID2",(K,w)=>{w.pattern??(w.pattern=H5),W2.init(K,w)}),U3=R("$ZodULID",(K,w)=>{w.pattern??(w.pattern=V5),W2.init(K,w)}),Q3=R("$ZodXID",(K,w)=>{w.pattern??(w.pattern=L5),W2.init(K,w)}),Y3=R("$ZodKSUID",(K,w)=>{w.pattern??(w.pattern=q5),W2.init(K,w)}),H3=R("$ZodISODateTime",(K,w)=>{w.pattern??(w.pattern=r5(w)),W2.init(K,w)}),V3=R("$ZodISODate",(K,w)=>{w.pattern??(w.pattern=C5),W2.init(K,w)}),L3=R("$ZodISOTime",(K,w)=>{w.pattern??(w.pattern=o5(w)),W2.init(K,w)}),q3=R("$ZodISODuration",(K,w)=>{w.pattern??(w.pattern=F5),W2.init(K,w)}),h3=R("$ZodIPv4",(K,w)=>{w.pattern??(w.pattern=g5),W2.init(K,w),K._zod.bag.format="ipv4"}),F3=R("$ZodIPv6",(K,w)=>{w.pattern??(w.pattern=j5),W2.init(K,w),K._zod.bag.format="ipv6",K._zod.check=(b)=>{try{new URL(`http://[${b.value}]`)}catch{b.issues.push({code:"invalid_format",format:"ipv6",input:b.value,inst:K,continue:!w.abort})}}});var v3=R("$ZodCIDRv4",(K,w)=>{w.pattern??(w.pattern=k5),W2.init(K,w)}),E3=R("$ZodCIDRv6",(K,w)=>{w.pattern??(w.pattern=Z5),W2.init(K,w),K._zod.check=(b)=>{let S=b.value.split("/");try{if(S.length!==2)throw Error();let[W,I]=S;if(!I)throw Error();let P=Number(I);if(`${P}`!==I)throw Error();if(P<0||P>128)throw Error();new URL(`http://[${W}]`)}catch{b.issues.push({code:"invalid_format",format:"cidrv6",input:b.value,inst:K,continue:!w.abort})}}});function R3(K){if(K==="")return!0;if(K.length%4!==0)return!1;try{return atob(K),!0}catch{return!1}}var g3=R("$ZodBase64",(K,w)=>{w.pattern??(w.pattern=A5),W2.init(K,w),K._zod.bag.contentEncoding="base64",K._zod.check=(b)=>{if(R3(b.value))return;b.issues.push({code:"invalid_format",format:"base64",input:b.value,inst:K,continue:!w.abort})}});function Q9(K){if(!R8.test(K))return!1;let w=K.replace(/[-_]/g,(S)=>S==="-"?"+":"/"),b=w.padEnd(Math.ceil(w.length/4)*4,"=");return R3(b)}var j3=R("$ZodBase64URL",(K,w)=>{w.pattern??(w.pattern=R8),W2.init(K,w),K._zod.bag.contentEncoding="base64url",K._zod.check=(b)=>{if(Q9(b.value))return;b.issues.push({code:"invalid_format",format:"base64url",input:b.value,inst:K,continue:!w.abort})}}),k3=R("$ZodE164",(K,w)=>{w.pattern??(w.pattern=c5),W2.init(K,w)});function Y9(K,w=null){try{let b=K.split(".");if(b.length!==3)return!1;let[S]=b;if(!S)return!1;let W=JSON.parse(atob(S));if("typ"in W&&W?.typ!=="JWT")return!1;if(!W.alg)return!1;if(w&&(!("alg"in W)||W.alg!==w))return!1;return!0}catch{return!1}}var Z3=R("$ZodJWT",(K,w)=>{W2.init(K,w),K._zod.check=(b)=>{if(Y9(b.value,w.alg))return;b.issues.push({code:"invalid_format",format:"jwt",input:b.value,inst:K,continue:!w.abort})}});var A3=R("$ZodUnknown",(K,w)=>{N2.init(K,w),K._zod.parse=(b)=>b}),c3=R("$ZodNever",(K,w)=>{N2.init(K,w),K._zod.parse=(b,S)=>{return b.issues.push({expected:"never",code:"invalid_type",input:b.value,inst:K}),b}});function w3(K,w,b){if(K.issues.length)w.issues.push(...m4(b,K.issues));w.value[b]=K.value}var u3=R("$ZodArray",(K,w)=>{N2.init(K,w),K._zod.parse=(b,S)=>{let W=b.value;if(!Array.isArray(W))return b.issues.push({expected:"array",code:"invalid_type",input:W,inst:K}),b;b.value=Array(W.length);let I=[];for(let P=0;P<W.length;P++){let M=W[P],O=w.element._zod.run({value:M,issues:[]},S);if(O instanceof Promise)I.push(O.then((J)=>w3(J,b,P)));else w3(O,b,P)}if(I.length)return Promise.all(I).then(()=>b);return b}});function g6(K,w,b,S){if(K.issues.length)w.issues.push(...m4(b,K.issues));if(K.value===void 0){if(b in S)w.value[b]=void 0}else w.value[b]=K.value}function C3(K){let w=Object.keys(K.shape);for(let S of w)if(!K.shape?.[S]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${S}": expected a Zod schema`);let b=q8(K.shape);return{...K,keys:w,keySet:new Set(w),numKeys:w.length,optionalKeys:new Set(b)}}function x3(K,w,b,S,W,I){let P=[],M=W.keySet,O=W.catchall._zod,J=O.def.type;for(let $ in w){if(M.has($))continue;if(J==="never"){P.push($);continue}let H=O.run({value:w[$],issues:[]},S);if(H instanceof Promise)K.push(H.then((X)=>g6(X,b,$,w)));else g6(H,b,$,w)}if(P.length)b.issues.push({code:"unrecognized_keys",keys:P,input:w,inst:I});if(!K.length)return b;return Promise.all(K).then(()=>{return b})}var H9=R("$ZodObject",(K,w)=>{if(N2.init(K,w),!Object.getOwnPropertyDescriptor(w,"shape")?.get){let M=w.shape;Object.defineProperty(w,"shape",{get:()=>{let O={...M};return Object.defineProperty(w,"shape",{value:O}),O}})}let S=r4(()=>C3(w));w2(K._zod,"propValues",()=>{let M=w.shape,O={};for(let J in M){let $=M[J]._zod;if($.values){O[J]??(O[J]=new Set);for(let H of $.values)O[J].add(H)}}return O});let W=R4,I=w.catchall,P;K._zod.parse=(M,O)=>{P??(P=S.value);let J=M.value;if(!W(J))return M.issues.push({expected:"object",code:"invalid_type",input:J,inst:K}),M;M.value={};let $=[],H=P.shape;for(let X of P.keys){let D=H[X]._zod.run({value:J[X],issues:[]},O);if(D instanceof Promise)$.push(D.then((Y)=>g6(Y,M,X,J)));else g6(D,M,X,J)}if(!I)return $.length?Promise.all($).then(()=>M):M;return x3($,J,M,O,S.value,K)}}),o3=R("$ZodObjectJIT",(K,w)=>{H9.init(K,w);let b=K._zod.parse,S=r4(()=>C3(w)),W=(X)=>{let F=new g8(["shape","payload","ctx"]),D=S.value,Y=(Q)=>{let G=L6(Q);return`shape[${G}]._zod.run({ value: input[${G}], issues: [] }, ctx)`};F.write("const input = payload.value;");let v=Object.create(null),N=0;for(let Q of D.keys)v[Q]=`key_${N++}`;F.write("const newResult = {};");for(let Q of D.keys){let G=v[Q],h=L6(Q);F.write(`const ${G} = ${Y(Q)};`),F.write(`
        if (${G}.issues.length) {
          payload.issues = payload.issues.concat(${G}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${h}, ...iss.path] : [${h}]
          })));
        }
        
        
        if (${G}.value === undefined) {
          if (${h} in input) {
            newResult[${h}] = undefined;
          }
        } else {
          newResult[${h}] = ${G}.value;
        }
        
      `)}F.write("payload.value = newResult;"),F.write("return payload;");let q=F.compile();return(Q,G)=>q(X,Q,G)},I,P=R4,M=!H6.jitless,J=M&&V8.value,$=w.catchall,H;K._zod.parse=(X,F)=>{H??(H=S.value);let D=X.value;if(!P(D))return X.issues.push({expected:"object",code:"invalid_type",input:D,inst:K}),X;if(M&&J&&F?.async===!1&&F.jitless!==!0){if(!I)I=W(w.shape);if(X=I(X,F),!$)return X;return x3([],D,X,F,H,K)}return b(X,F)}});function b3(K,w,b,S){for(let I of K)if(I.issues.length===0)return w.value=I.value,w;let W=K.filter((I)=>!M4(I));if(W.length===1)return w.value=W[0].value,W[0];return w.issues.push({code:"invalid_union",input:w.value,inst:b,errors:K.map((I)=>I.issues.map((P)=>f2(P,S,k2())))}),w}var r3=R("$ZodUnion",(K,w)=>{N2.init(K,w),w2(K._zod,"optin",()=>w.options.some((W)=>W._zod.optin==="optional")?"optional":void 0),w2(K._zod,"optout",()=>w.options.some((W)=>W._zod.optout==="optional")?"optional":void 0),w2(K._zod,"values",()=>{if(w.options.every((W)=>W._zod.values))return new Set(w.options.flatMap((W)=>Array.from(W._zod.values)));return}),w2(K._zod,"pattern",()=>{if(w.options.every((W)=>W._zod.pattern)){let W=w.options.map((I)=>I._zod.pattern);return new RegExp(`^(${W.map((I)=>_4(I.source)).join("|")})$`)}return});let b=w.options.length===1,S=w.options[0]._zod.run;K._zod.parse=(W,I)=>{if(b)return S(W,I);let P=!1,M=[];for(let O of w.options){let J=O._zod.run({value:W.value,issues:[]},I);if(J instanceof Promise)M.push(J),P=!0;else{if(J.issues.length===0)return J;M.push(J)}}if(!P)return b3(M,W,K,I);return Promise.all(M).then((O)=>{return b3(O,W,K,I)})}});var y3=R("$ZodIntersection",(K,w)=>{N2.init(K,w),K._zod.parse=(b,S)=>{let W=b.value,I=w.left._zod.run({value:W,issues:[]},S),P=w.right._zod.run({value:W,issues:[]},S);if(I instanceof Promise||P instanceof Promise)return Promise.all([I,P]).then(([O,J])=>{return S3(b,O,J)});return S3(b,I,P)}});function j8(K,w){if(K===w)return{valid:!0,data:K};if(K instanceof Date&&w instanceof Date&&+K===+w)return{valid:!0,data:K};if(Y4(K)&&Y4(w)){let b=Object.keys(w),S=Object.keys(K).filter((I)=>b.indexOf(I)!==-1),W={...K,...w};for(let I of S){let P=j8(K[I],w[I]);if(!P.valid)return{valid:!1,mergeErrorPath:[I,...P.mergeErrorPath]};W[I]=P.data}return{valid:!0,data:W}}if(Array.isArray(K)&&Array.isArray(w)){if(K.length!==w.length)return{valid:!1,mergeErrorPath:[]};let b=[];for(let S=0;S<K.length;S++){let W=K[S],I=w[S],P=j8(W,I);if(!P.valid)return{valid:!1,mergeErrorPath:[S,...P.mergeErrorPath]};b.push(P.data)}return{valid:!0,data:b}}return{valid:!1,mergeErrorPath:[]}}function S3(K,w,b){if(w.issues.length)K.issues.push(...w.issues);if(b.issues.length)K.issues.push(...b.issues);if(M4(K))return K;let S=j8(w.value,b.value);if(!S.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(S.mergeErrorPath)}`);return K.value=S.data,K}var _3=R("$ZodEnum",(K,w)=>{N2.init(K,w);let b=o4(w.entries),S=new Set(b);K._zod.values=S,K._zod.pattern=new RegExp(`^(${b.filter((W)=>L8.has(typeof W)).map((W)=>typeof W==="string"?H4(W):W.toString()).join("|")})$`),K._zod.parse=(W,I)=>{let P=W.value;if(S.has(P))return W;return W.issues.push({code:"invalid_value",values:b,input:P,inst:K}),W}});var m3=R("$ZodTransform",(K,w)=>{N2.init(K,w),K._zod.parse=(b,S)=>{if(S.direction==="backward")throw new C4(K.constructor.name);let W=w.transform(b.value,b);if(S.async)return(W instanceof Promise?W:Promise.resolve(W)).then((P)=>{return b.value=P,b});if(W instanceof Promise)throw new d2;return b.value=W,b}});function W3(K,w){if(K.issues.length&&w===void 0)return{issues:[],value:void 0};return K}var f3=R("$ZodOptional",(K,w)=>{N2.init(K,w),K._zod.optin="optional",K._zod.optout="optional",w2(K._zod,"values",()=>{return w.innerType._zod.values?new Set([...w.innerType._zod.values,void 0]):void 0}),w2(K._zod,"pattern",()=>{let b=w.innerType._zod.pattern;return b?new RegExp(`^(${_4(b.source)})?$`):void 0}),K._zod.parse=(b,S)=>{if(w.innerType._zod.optin==="optional"){let W=w.innerType._zod.run(b,S);if(W instanceof Promise)return W.then((I)=>W3(I,b.value));return W3(W,b.value)}if(b.value===void 0)return b;return w.innerType._zod.run(b,S)}}),T3=R("$ZodNullable",(K,w)=>{N2.init(K,w),w2(K._zod,"optin",()=>w.innerType._zod.optin),w2(K._zod,"optout",()=>w.innerType._zod.optout),w2(K._zod,"pattern",()=>{let b=w.innerType._zod.pattern;return b?new RegExp(`^(${_4(b.source)}|null)$`):void 0}),w2(K._zod,"values",()=>{return w.innerType._zod.values?new Set([...w.innerType._zod.values,null]):void 0}),K._zod.parse=(b,S)=>{if(b.value===null)return b;return w.innerType._zod.run(b,S)}}),l3=R("$ZodDefault",(K,w)=>{N2.init(K,w),K._zod.optin="optional",w2(K._zod,"values",()=>w.innerType._zod.values),K._zod.parse=(b,S)=>{if(S.direction==="backward")return w.innerType._zod.run(b,S);if(b.value===void 0)return b.value=w.defaultValue,b;let W=w.innerType._zod.run(b,S);if(W instanceof Promise)return W.then((I)=>I3(I,w));return I3(W,w)}});function I3(K,w){if(K.value===void 0)K.value=w.defaultValue;return K}var p3=R("$ZodPrefault",(K,w)=>{N2.init(K,w),K._zod.optin="optional",w2(K._zod,"values",()=>w.innerType._zod.values),K._zod.parse=(b,S)=>{if(S.direction==="backward")return w.innerType._zod.run(b,S);if(b.value===void 0)b.value=w.defaultValue;return w.innerType._zod.run(b,S)}}),i3=R("$ZodNonOptional",(K,w)=>{N2.init(K,w),w2(K._zod,"values",()=>{let b=w.innerType._zod.values;return b?new Set([...b].filter((S)=>S!==void 0)):void 0}),K._zod.parse=(b,S)=>{let W=w.innerType._zod.run(b,S);if(W instanceof Promise)return W.then((I)=>P3(I,K));return P3(W,K)}});function P3(K,w){if(!K.issues.length&&K.value===void 0)K.issues.push({code:"invalid_type",expected:"nonoptional",input:K.value,inst:w});return K}var e3=R("$ZodCatch",(K,w)=>{N2.init(K,w),w2(K._zod,"optin",()=>w.innerType._zod.optin),w2(K._zod,"optout",()=>w.innerType._zod.optout),w2(K._zod,"values",()=>w.innerType._zod.values),K._zod.parse=(b,S)=>{if(S.direction==="backward")return w.innerType._zod.run(b,S);let W=w.innerType._zod.run(b,S);if(W instanceof Promise)return W.then((I)=>{if(b.value=I.value,I.issues.length)b.value=w.catchValue({...b,error:{issues:I.issues.map((P)=>f2(P,S,k2()))},input:b.value}),b.issues=[];return b});if(b.value=W.value,W.issues.length)b.value=w.catchValue({...b,error:{issues:W.issues.map((I)=>f2(I,S,k2()))},input:b.value}),b.issues=[];return b}});var n3=R("$ZodPipe",(K,w)=>{N2.init(K,w),w2(K._zod,"values",()=>w.in._zod.values),w2(K._zod,"optin",()=>w.in._zod.optin),w2(K._zod,"optout",()=>w.out._zod.optout),w2(K._zod,"propValues",()=>w.in._zod.propValues),K._zod.parse=(b,S)=>{if(S.direction==="backward"){let I=w.out._zod.run(b,S);if(I instanceof Promise)return I.then((P)=>R6(P,w.in,S));return R6(I,w.in,S)}let W=w.in._zod.run(b,S);if(W instanceof Promise)return W.then((I)=>R6(I,w.out,S));return R6(W,w.out,S)}});function R6(K,w,b){if(K.issues.length)return K.aborted=!0,K;return w._zod.run({value:K.value,issues:K.issues},b)}var d3=R("$ZodReadonly",(K,w)=>{N2.init(K,w),w2(K._zod,"propValues",()=>w.innerType._zod.propValues),w2(K._zod,"values",()=>w.innerType._zod.values),w2(K._zod,"optin",()=>w.innerType?._zod?.optin),w2(K._zod,"optout",()=>w.innerType?._zod?.optout),K._zod.parse=(b,S)=>{if(S.direction==="backward")return w.innerType._zod.run(b,S);let W=w.innerType._zod.run(b,S);if(W instanceof Promise)return W.then(M3);return M3(W)}});function M3(K){return K.value=Object.freeze(K.value),K}var t3=R("$ZodCustom",(K,w)=>{v2.init(K,w),N2.init(K,w),K._zod.parse=(b,S)=>{return b},K._zod.check=(b)=>{let S=b.value,W=w.fn(S);if(W instanceof Promise)return W.then((I)=>O3(I,b,S,K));O3(W,b,S,K);return}});function O3(K,w,b,S){if(!K){let W={code:"custom",input:b,inst:S,path:[...S._zod.def.path??[]],continue:!S._zod.def.abort};if(S._zod.def.params)W.params=S._zod.def.params;w.issues.push(j4(W))}}var V9=(K)=>{let w=typeof K;switch(w){case"number":return Number.isNaN(K)?"NaN":"number";case"object":{if(Array.isArray(K))return"array";if(K===null)return"null";if(Object.getPrototypeOf(K)!==Object.prototype&&K.constructor)return K.constructor.name}}return w},L9=()=>{let K={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function w(S){return K[S]??null}let b={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return(S)=>{switch(S.code){case"invalid_type":return`Invalid input: expected ${S.expected}, received ${V9(S.input)}`;case"invalid_value":if(S.values.length===1)return`Invalid input: expected ${h6(S.values[0])}`;return`Invalid option: expected one of ${V6(S.values,"|")}`;case"too_big":{let W=S.inclusive?"<=":"<",I=w(S.origin);if(I)return`Too big: expected ${S.origin??"value"} to have ${W}${S.maximum.toString()} ${I.unit??"elements"}`;return`Too big: expected ${S.origin??"value"} to be ${W}${S.maximum.toString()}`}case"too_small":{let W=S.inclusive?">=":">",I=w(S.origin);if(I)return`Too small: expected ${S.origin} to have ${W}${S.minimum.toString()} ${I.unit}`;return`Too small: expected ${S.origin} to be ${W}${S.minimum.toString()}`}case"invalid_format":{let W=S;if(W.format==="starts_with")return`Invalid string: must start with "${W.prefix}"`;if(W.format==="ends_with")return`Invalid string: must end with "${W.suffix}"`;if(W.format==="includes")return`Invalid string: must include "${W.includes}"`;if(W.format==="regex")return`Invalid string: must match pattern ${W.pattern}`;return`Invalid ${b[W.format]??S.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${S.divisor}`;case"unrecognized_keys":return`Unrecognized key${S.keys.length>1?"s":""}: ${V6(S.keys,", ")}`;case"invalid_key":return`Invalid key in ${S.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${S.origin}`;default:return"Invalid input"}}};function k8(){return{localeError:L9()}}var a3,q9=Symbol("ZodOutput"),h9=Symbol("ZodInput");class s3{constructor(){this._map=new WeakMap,this._idmap=new Map}add(K,...w){let b=w[0];if(this._map.set(K,b),b&&typeof b==="object"&&"id"in b){if(this._idmap.has(b.id))throw Error(`ID ${b.id} already exists in the registry`);this._idmap.set(b.id,K)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(K){let w=this._map.get(K);if(w&&typeof w==="object"&&"id"in w)this._idmap.delete(w.id);return this._map.delete(K),this}get(K){let w=K._zod.parent;if(w){let b={...this.get(w)??{}};delete b.id;let S={...b,...this._map.get(K)};return Object.keys(S).length?S:void 0}return this._map.get(K)}has(K){return this._map.has(K)}}function K0(){return new s3}(a3=globalThis).__zod_globalRegistry??(a3.__zod_globalRegistry=K0());var O4=globalThis.__zod_globalRegistry;function w0(K,w){return new K({type:"string",...T(w)})}function Z8(K,w){return new K({type:"string",format:"email",check:"string_format",abort:!1,...T(w)})}function A8(K,w){return new K({type:"string",format:"guid",check:"string_format",abort:!1,...T(w)})}function b0(K,w){return new K({type:"string",format:"uuid",check:"string_format",abort:!1,...T(w)})}function S0(K,w){return new K({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...T(w)})}function W0(K,w){return new K({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...T(w)})}function I0(K,w){return new K({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...T(w)})}function P0(K,w){return new K({type:"string",format:"url",check:"string_format",abort:!1,...T(w)})}function M0(K,w){return new K({type:"string",format:"emoji",check:"string_format",abort:!1,...T(w)})}function O0(K,w){return new K({type:"string",format:"nanoid",check:"string_format",abort:!1,...T(w)})}function J0(K,w){return new K({type:"string",format:"cuid",check:"string_format",abort:!1,...T(w)})}function N0(K,w){return new K({type:"string",format:"cuid2",check:"string_format",abort:!1,...T(w)})}function D0(K,w){return new K({type:"string",format:"ulid",check:"string_format",abort:!1,...T(w)})}function $0(K,w){return new K({type:"string",format:"xid",check:"string_format",abort:!1,...T(w)})}function G0(K,w){return new K({type:"string",format:"ksuid",check:"string_format",abort:!1,...T(w)})}function B0(K,w){return new K({type:"string",format:"ipv4",check:"string_format",abort:!1,...T(w)})}function X0(K,w){return new K({type:"string",format:"ipv6",check:"string_format",abort:!1,...T(w)})}function z0(K,w){return new K({type:"string",format:"cidrv4",check:"string_format",abort:!1,...T(w)})}function U0(K,w){return new K({type:"string",format:"cidrv6",check:"string_format",abort:!1,...T(w)})}function Q0(K,w){return new K({type:"string",format:"base64",check:"string_format",abort:!1,...T(w)})}function Y0(K,w){return new K({type:"string",format:"base64url",check:"string_format",abort:!1,...T(w)})}function H0(K,w){return new K({type:"string",format:"e164",check:"string_format",abort:!1,...T(w)})}function c8(K,w){return new K({type:"string",format:"jwt",check:"string_format",abort:!1,...T(w)})}function V0(K,w){return new K({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...T(w)})}function L0(K,w){return new K({type:"string",format:"date",check:"string_format",...T(w)})}function q0(K,w){return new K({type:"string",format:"time",check:"string_format",precision:null,...T(w)})}function h0(K,w){return new K({type:"string",format:"duration",check:"string_format",...T(w)})}function F0(K){return new K({type:"unknown"})}function v0(K,w){return new K({type:"never",...T(w)})}function k6(K,w){return new f5({check:"max_length",...T(w),maximum:K})}function k4(K,w){return new T5({check:"min_length",...T(w),minimum:K})}function Z6(K,w){return new l5({check:"length_equals",...T(w),length:K})}function u8(K,w){return new p5({check:"string_format",format:"regex",...T(w),pattern:K})}function C8(K){return new i5({check:"string_format",format:"lowercase",...T(K)})}function x8(K){return new e5({check:"string_format",format:"uppercase",...T(K)})}function o8(K,w){return new n5({check:"string_format",format:"includes",...T(w),includes:K})}function r8(K,w){return new d5({check:"string_format",format:"starts_with",...T(w),prefix:K})}function y8(K,w){return new t5({check:"string_format",format:"ends_with",...T(w),suffix:K})}function J4(K){return new a5({check:"overwrite",tx:K})}function _8(K){return J4((w)=>w.normalize(K))}function m8(){return J4((K)=>K.trim())}function f8(){return J4((K)=>K.toLowerCase())}function T8(){return J4((K)=>K.toUpperCase())}function l8(){return J4((K)=>H8(K))}function E0(K,w,b){return new K({type:"array",element:w,...T(b)})}function R0(K,w,b){return new K({type:"custom",check:"custom",fn:w,...T(b)})}function g0(K){let w=F9((b)=>{return b.addIssue=(S)=>{if(typeof S==="string")b.issues.push(j4(S,b.value,w._zod.def));else{let W=S;if(W.fatal)W.continue=!1;W.code??(W.code="custom"),W.input??(W.input=b.value),W.inst??(W.inst=w),W.continue??(W.continue=!w._zod.def.abort),b.issues.push(j4(W))}},K(b.value,b)});return w}function F9(K,w){let b=new v2({check:"custom",...T(w)});return b._zod.check=K,b}function p8(K){let w=K?.target??"draft-2020-12";if(w==="draft-4")w="draft-04";if(w==="draft-7")w="draft-07";return{processors:K.processors??{},metadataRegistry:K?.metadata??O4,target:w,unrepresentable:K?.unrepresentable??"throw",override:K?.override??(()=>{}),io:K?.io??"output",counter:0,seen:new Map,cycles:K?.cycles??"ref",reused:K?.reused??"inline",external:K?.external??void 0}}function G2(K,w,b={path:[],schemaPath:[]}){var S;let W=K._zod.def,I=w.seen.get(K);if(I){if(I.count++,b.schemaPath.includes(K))I.cycle=b.path;return I.schema}let P={schema:{},count:1,cycle:void 0,path:b.path};w.seen.set(K,P);let M=K._zod.toJSONSchema?.();if(M)P.schema=M;else{let $={...b,schemaPath:[...b.schemaPath,K],path:b.path},H=K._zod.parent;if(H)P.ref=H,G2(H,w,$),w.seen.get(H).isParent=!0;else if(K._zod.processJSONSchema)K._zod.processJSONSchema(w,P.schema,$);else{let X=P.schema,F=w.processors[W.type];if(!F)throw Error(`[toJSONSchema]: Non-representable type encountered: ${W.type}`);F(K,w,X,$)}}let O=w.metadataRegistry.get(K);if(O)Object.assign(P.schema,O);if(w.io==="input"&&q2(K))delete P.schema.examples,delete P.schema.default;if(w.io==="input"&&P.schema._prefault)(S=P.schema).default??(S.default=P.schema._prefault);return delete P.schema._prefault,w.seen.get(K).schema}function i8(K,w){let b=K.seen.get(w);if(!b)throw Error("Unprocessed schema. This is a bug in Zod.");let S=(I)=>{let P=K.target==="draft-2020-12"?"$defs":"definitions";if(K.external){let $=K.external.registry.get(I[0])?.id,H=K.external.uri??((F)=>F);if($)return{ref:H($)};let X=I[1].defId??I[1].schema.id??`schema${K.counter++}`;return I[1].defId=X,{defId:X,ref:`${H("__shared")}#/${P}/${X}`}}if(I[1]===b)return{ref:"#"};let O=`${"#"}/${P}/`,J=I[1].schema.id??`__schema${K.counter++}`;return{defId:J,ref:O+J}},W=(I)=>{if(I[1].schema.$ref)return;let P=I[1],{ref:M,defId:O}=S(I);if(P.def={...P.schema},O)P.defId=O;let J=P.schema;for(let $ in J)delete J[$];J.$ref=M};if(K.cycles==="throw")for(let I of K.seen.entries()){let P=I[1];if(P.cycle)throw Error(`Cycle detected: #/${P.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let I of K.seen.entries()){let P=I[1];if(w===I[0]){W(I);continue}if(K.external){let O=K.external.registry.get(I[0])?.id;if(w!==I[0]&&O){W(I);continue}}if(K.metadataRegistry.get(I[0])?.id){W(I);continue}if(P.cycle){W(I);continue}if(P.count>1){if(K.reused==="ref"){W(I);continue}}}}function e8(K,w){let b=K.seen.get(w);if(!b)throw Error("Unprocessed schema. This is a bug in Zod.");let S=(P)=>{let M=K.seen.get(P),O=M.def??M.schema,J={...O};if(M.ref===null)return;let $=M.ref;if(M.ref=null,$){S($);let H=K.seen.get($).schema;if(H.$ref&&(K.target==="draft-07"||K.target==="draft-04"||K.target==="openapi-3.0"))O.allOf=O.allOf??[],O.allOf.push(H);else Object.assign(O,H),Object.assign(O,J)}if(!M.isParent)K.override({zodSchema:P,jsonSchema:O,path:M.path??[]})};for(let P of[...K.seen.entries()].reverse())S(P[0]);let W={};if(K.target==="draft-2020-12")W.$schema="https://json-schema.org/draft/2020-12/schema";else if(K.target==="draft-07")W.$schema="http://json-schema.org/draft-07/schema#";else if(K.target==="draft-04")W.$schema="http://json-schema.org/draft-04/schema#";else if(K.target==="openapi-3.0");if(K.external?.uri){let P=K.external.registry.get(w)?.id;if(!P)throw Error("Schema is missing an `id` property");W.$id=K.external.uri(P)}Object.assign(W,b.def??b.schema);let I=K.external?.defs??{};for(let P of K.seen.entries()){let M=P[1];if(M.def&&M.defId)I[M.defId]=M.def}if(K.external);else if(Object.keys(I).length>0)if(K.target==="draft-2020-12")W.$defs=I;else W.definitions=I;try{let P=JSON.parse(JSON.stringify(W));return Object.defineProperty(P,"~standard",{value:{...w["~standard"],jsonSchema:{input:e4(w,"input"),output:e4(w,"output")}},enumerable:!1,writable:!1}),P}catch(P){throw Error("Error converting schema to JSON.")}}function q2(K,w){let b=w??{seen:new Set};if(b.seen.has(K))return!1;b.seen.add(K);let S=K._zod.def;if(S.type==="transform")return!0;if(S.type==="array")return q2(S.element,b);if(S.type==="set")return q2(S.valueType,b);if(S.type==="lazy")return q2(S.getter(),b);if(S.type==="promise"||S.type==="optional"||S.type==="nonoptional"||S.type==="nullable"||S.type==="readonly"||S.type==="default"||S.type==="prefault")return q2(S.innerType,b);if(S.type==="intersection")return q2(S.left,b)||q2(S.right,b);if(S.type==="record"||S.type==="map")return q2(S.keyType,b)||q2(S.valueType,b);if(S.type==="pipe")return q2(S.in,b)||q2(S.out,b);if(S.type==="object"){for(let W in S.shape)if(q2(S.shape[W],b))return!0;return!1}if(S.type==="union"){for(let W of S.options)if(q2(W,b))return!0;return!1}if(S.type==="tuple"){for(let W of S.items)if(q2(W,b))return!0;if(S.rest&&q2(S.rest,b))return!0;return!1}return!1}var j0=(K,w={})=>(b)=>{let S=p8({...b,processors:w});return G2(K,S),i8(S,K),e8(S,K)},e4=(K,w)=>(b)=>{let{libraryOptions:S,target:W}=b??{},I=p8({...S??{},target:W,io:w,processors:{}});return G2(K,I),i8(I,K),e8(I,K)};var v9={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},k0=(K,w,b,S)=>{let W=b;W.type="string";let{minimum:I,maximum:P,format:M,patterns:O,contentEncoding:J}=K._zod.bag;if(typeof I==="number")W.minLength=I;if(typeof P==="number")W.maxLength=P;if(M){if(W.format=v9[M]??M,W.format==="")delete W.format}if(J)W.contentEncoding=J;if(O&&O.size>0){let $=[...O];if($.length===1)W.pattern=$[0].source;else if($.length>1)W.allOf=[...$.map((H)=>({...w.target==="draft-07"||w.target==="draft-04"||w.target==="openapi-3.0"?{type:"string"}:{},pattern:H.source}))]}};var Z0=(K,w,b,S)=>{b.not={}};var A0=(K,w,b,S)=>{};var c0=(K,w,b,S)=>{let W=K._zod.def,I=o4(W.entries);if(I.every((P)=>typeof P==="number"))b.type="number";if(I.every((P)=>typeof P==="string"))b.type="string";b.enum=I};var u0=(K,w,b,S)=>{if(w.unrepresentable==="throw")throw Error("Custom types cannot be represented in JSON Schema")};var C0=(K,w,b,S)=>{if(w.unrepresentable==="throw")throw Error("Transforms cannot be represented in JSON Schema")};var x0=(K,w,b,S)=>{let W=b,I=K._zod.def,{minimum:P,maximum:M}=K._zod.bag;if(typeof P==="number")W.minItems=P;if(typeof M==="number")W.maxItems=M;W.type="array",W.items=G2(I.element,w,{...S,path:[...S.path,"items"]})},o0=(K,w,b,S)=>{let W=b,I=K._zod.def;W.type="object",W.properties={};let P=I.shape;for(let J in P)W.properties[J]=G2(P[J],w,{...S,path:[...S.path,"properties",J]});let M=new Set(Object.keys(P)),O=new Set([...M].filter((J)=>{let $=I.shape[J]._zod;if(w.io==="input")return $.optin===void 0;else return $.optout===void 0}));if(O.size>0)W.required=Array.from(O);if(I.catchall?._zod.def.type==="never")W.additionalProperties=!1;else if(!I.catchall){if(w.io==="output")W.additionalProperties=!1}else if(I.catchall)W.additionalProperties=G2(I.catchall,w,{...S,path:[...S.path,"additionalProperties"]})},r0=(K,w,b,S)=>{let W=K._zod.def,I=W.inclusive===!1,P=W.options.map((M,O)=>G2(M,w,{...S,path:[...S.path,I?"oneOf":"anyOf",O]}));if(I)b.oneOf=P;else b.anyOf=P},y0=(K,w,b,S)=>{let W=K._zod.def,I=G2(W.left,w,{...S,path:[...S.path,"allOf",0]}),P=G2(W.right,w,{...S,path:[...S.path,"allOf",1]}),M=(J)=>("allOf"in J)&&Object.keys(J).length===1,O=[...M(I)?I.allOf:[I],...M(P)?P.allOf:[P]];b.allOf=O};var _0=(K,w,b,S)=>{let W=K._zod.def,I=G2(W.innerType,w,S),P=w.seen.get(K);if(w.target==="openapi-3.0")P.ref=W.innerType,b.nullable=!0;else b.anyOf=[I,{type:"null"}]},m0=(K,w,b,S)=>{let W=K._zod.def;G2(W.innerType,w,S);let I=w.seen.get(K);I.ref=W.innerType},f0=(K,w,b,S)=>{let W=K._zod.def;G2(W.innerType,w,S);let I=w.seen.get(K);I.ref=W.innerType,b.default=JSON.parse(JSON.stringify(W.defaultValue))},T0=(K,w,b,S)=>{let W=K._zod.def;G2(W.innerType,w,S);let I=w.seen.get(K);if(I.ref=W.innerType,w.io==="input")b._prefault=JSON.parse(JSON.stringify(W.defaultValue))},l0=(K,w,b,S)=>{let W=K._zod.def;G2(W.innerType,w,S);let I=w.seen.get(K);I.ref=W.innerType;let P;try{P=W.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}b.default=P},p0=(K,w,b,S)=>{let W=K._zod.def,I=w.io==="input"?W.in._zod.def.type==="transform"?W.out:W.in:W.out;G2(I,w,S);let P=w.seen.get(K);P.ref=I},i0=(K,w,b,S)=>{let W=K._zod.def;G2(W.innerType,w,S);let I=w.seen.get(K);I.ref=W.innerType,b.readOnly=!0};var e0=(K,w,b,S)=>{let W=K._zod.def;G2(W.innerType,w,S);let I=w.seen.get(K);I.ref=W.innerType};var r9=R("ZodISODateTime",(K,w)=>{H3.init(K,w),P2.init(K,w)});function n0(K){return V0(r9,K)}var y9=R("ZodISODate",(K,w)=>{V3.init(K,w),P2.init(K,w)});function d0(K){return L0(y9,K)}var _9=R("ZodISOTime",(K,w)=>{L3.init(K,w),P2.init(K,w)});function t0(K){return q0(_9,K)}var m9=R("ZodISODuration",(K,w)=>{q3.init(K,w),P2.init(K,w)});function a0(K){return h0(m9,K)}var K1=(K,w)=>{F6.init(K,w),K.name="ZodError",Object.defineProperties(K,{format:{value:(b)=>v8(K,b)},flatten:{value:(b)=>F8(K,b)},addIssue:{value:(b)=>{K.issues.push(b),K.message=JSON.stringify(K.issues,g4,2)}},addIssues:{value:(b)=>{K.issues.push(...b),K.message=JSON.stringify(K.issues,g4,2)}},isEmpty:{get(){return K.issues.length===0}}})},II=R("ZodError",K1),E2=R("ZodError",K1,{Parent:Error});var w1=v6(E2),b1=E6(E2),S1=T4(E2),W1=l4(E2),I1=D5(E2),P1=$5(E2),M1=G5(E2),O1=B5(E2),J1=X5(E2),N1=z5(E2),D1=U5(E2),$1=Q5(E2);var B2=R("ZodType",(K,w)=>{return N2.init(K,w),Object.assign(K["~standard"],{jsonSchema:{input:e4(K,"input"),output:e4(K,"output")}}),K.toJSONSchema=j0(K,{}),K.def=w,K.type=w.type,Object.defineProperty(K,"_def",{value:w}),K.check=(...b)=>{return K.clone(s.mergeDefs(w,{checks:[...w.checks??[],...b.map((S)=>typeof S==="function"?{_zod:{check:S,def:{check:"custom"},onattach:[]}}:S)]}))},K.clone=(b,S)=>Z2(K,b,S),K.brand=()=>K,K.register=(b,S)=>{return b.add(K,S),K},K.parse=(b,S)=>w1(K,b,S,{callee:K.parse}),K.safeParse=(b,S)=>S1(K,b,S),K.parseAsync=async(b,S)=>b1(K,b,S,{callee:K.parseAsync}),K.safeParseAsync=async(b,S)=>W1(K,b,S),K.spa=K.safeParseAsync,K.encode=(b,S)=>I1(K,b,S),K.decode=(b,S)=>P1(K,b,S),K.encodeAsync=async(b,S)=>M1(K,b,S),K.decodeAsync=async(b,S)=>O1(K,b,S),K.safeEncode=(b,S)=>J1(K,b,S),K.safeDecode=(b,S)=>N1(K,b,S),K.safeEncodeAsync=async(b,S)=>D1(K,b,S),K.safeDecodeAsync=async(b,S)=>$1(K,b,S),K.refine=(b,S)=>K.check(Zb(b,S)),K.superRefine=(b)=>K.check(Ab(b)),K.overwrite=(b)=>K.check(J4(b)),K.optional=()=>X1(K),K.nullable=()=>z1(K),K.nullish=()=>X1(z1(K)),K.nonoptional=(b)=>Fb(K,b),K.array=()=>Db(K),K.or=(b)=>Bb([K,b]),K.and=(b)=>zb(K,b),K.transform=(b)=>U1(K,Yb(b)),K.default=(b)=>Lb(K,b),K.prefault=(b)=>hb(K,b),K.catch=(b)=>Eb(K,b),K.pipe=(b)=>U1(K,b),K.readonly=()=>jb(K),K.describe=(b)=>{let S=K.clone();return O4.add(S,{description:b}),S},Object.defineProperty(K,"description",{get(){return O4.get(K)?.description},configurable:!0}),K.meta=(...b)=>{if(b.length===0)return O4.get(K);let S=K.clone();return O4.add(S,b[0]),S},K.isOptional=()=>K.safeParse(void 0).success,K.isNullable=()=>K.safeParse(null).success,K}),Q1=R("_ZodString",(K,w)=>{j6.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(S,W,I)=>k0(K,S,W,I);let b=K._zod.bag;K.format=b.format??null,K.minLength=b.minimum??null,K.maxLength=b.maximum??null,K.regex=(...S)=>K.check(u8(...S)),K.includes=(...S)=>K.check(o8(...S)),K.startsWith=(...S)=>K.check(r8(...S)),K.endsWith=(...S)=>K.check(y8(...S)),K.min=(...S)=>K.check(k4(...S)),K.max=(...S)=>K.check(k6(...S)),K.length=(...S)=>K.check(Z6(...S)),K.nonempty=(...S)=>K.check(k4(1,...S)),K.lowercase=(S)=>K.check(C8(S)),K.uppercase=(S)=>K.check(x8(S)),K.trim=()=>K.check(m8()),K.normalize=(...S)=>K.check(_8(...S)),K.toLowerCase=()=>K.check(f8()),K.toUpperCase=()=>K.check(T8()),K.slugify=()=>K.check(l8())}),l9=R("ZodString",(K,w)=>{j6.init(K,w),Q1.init(K,w),K.email=(b)=>K.check(Z8(H1,b)),K.url=(b)=>K.check(P0(p9,b)),K.jwt=(b)=>K.check(c8(L1,b)),K.emoji=(b)=>K.check(M0(i9,b)),K.guid=(b)=>K.check(A8(G1,b)),K.uuid=(b)=>K.check(b0(A6,b)),K.uuidv4=(b)=>K.check(S0(A6,b)),K.uuidv6=(b)=>K.check(W0(A6,b)),K.uuidv7=(b)=>K.check(I0(A6,b)),K.nanoid=(b)=>K.check(O0(e9,b)),K.guid=(b)=>K.check(A8(G1,b)),K.cuid=(b)=>K.check(J0(n9,b)),K.cuid2=(b)=>K.check(N0(d9,b)),K.ulid=(b)=>K.check(D0(t9,b)),K.base64=(b)=>K.check(Q0(Wb,b)),K.base64url=(b)=>K.check(Y0(Ib,b)),K.xid=(b)=>K.check($0(a9,b)),K.ksuid=(b)=>K.check(G0(s9,b)),K.ipv4=(b)=>K.check(B0(Kb,b)),K.ipv6=(b)=>K.check(X0(wb,b)),K.cidrv4=(b)=>K.check(z0(bb,b)),K.cidrv6=(b)=>K.check(U0(Sb,b)),K.e164=(b)=>K.check(H0(Pb,b)),K.datetime=(b)=>K.check(n0(b)),K.date=(b)=>K.check(d0(b)),K.time=(b)=>K.check(t0(b)),K.duration=(b)=>K.check(a0(b))});function Y1(K){return w0(l9,K)}var P2=R("ZodStringFormat",(K,w)=>{W2.init(K,w),Q1.init(K,w)}),H1=R("ZodEmail",(K,w)=>{D3.init(K,w),P2.init(K,w)});function V1(K){return Z8(H1,K)}var G1=R("ZodGUID",(K,w)=>{J3.init(K,w),P2.init(K,w)});var A6=R("ZodUUID",(K,w)=>{N3.init(K,w),P2.init(K,w)});var p9=R("ZodURL",(K,w)=>{$3.init(K,w),P2.init(K,w)});var i9=R("ZodEmoji",(K,w)=>{G3.init(K,w),P2.init(K,w)});var e9=R("ZodNanoID",(K,w)=>{B3.init(K,w),P2.init(K,w)});var n9=R("ZodCUID",(K,w)=>{X3.init(K,w),P2.init(K,w)});var d9=R("ZodCUID2",(K,w)=>{z3.init(K,w),P2.init(K,w)});var t9=R("ZodULID",(K,w)=>{U3.init(K,w),P2.init(K,w)});var a9=R("ZodXID",(K,w)=>{Q3.init(K,w),P2.init(K,w)});var s9=R("ZodKSUID",(K,w)=>{Y3.init(K,w),P2.init(K,w)});var Kb=R("ZodIPv4",(K,w)=>{h3.init(K,w),P2.init(K,w)});var wb=R("ZodIPv6",(K,w)=>{F3.init(K,w),P2.init(K,w)});var bb=R("ZodCIDRv4",(K,w)=>{v3.init(K,w),P2.init(K,w)});var Sb=R("ZodCIDRv6",(K,w)=>{E3.init(K,w),P2.init(K,w)});var Wb=R("ZodBase64",(K,w)=>{g3.init(K,w),P2.init(K,w)});var Ib=R("ZodBase64URL",(K,w)=>{j3.init(K,w),P2.init(K,w)});var Pb=R("ZodE164",(K,w)=>{k3.init(K,w),P2.init(K,w)});var L1=R("ZodJWT",(K,w)=>{Z3.init(K,w),P2.init(K,w)});function q1(K){return c8(L1,K)}var Mb=R("ZodUnknown",(K,w)=>{A3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,S,W)=>A0(K,b,S,W)});function B1(){return F0(Mb)}var Ob=R("ZodNever",(K,w)=>{c3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,S,W)=>Z0(K,b,S,W)});function Jb(K){return v0(Ob,K)}var Nb=R("ZodArray",(K,w)=>{u3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,S,W)=>x0(K,b,S,W),K.element=w.element,K.min=(b,S)=>K.check(k4(b,S)),K.nonempty=(b)=>K.check(k4(1,b)),K.max=(b,S)=>K.check(k6(b,S)),K.length=(b,S)=>K.check(Z6(b,S)),K.unwrap=()=>K.element});function Db(K,w){return E0(Nb,K,w)}var $b=R("ZodObject",(K,w)=>{o3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,S,W)=>o0(K,b,S,W),s.defineLazy(K,"shape",()=>{return w.shape}),K.keyof=()=>Ub(Object.keys(K._zod.def.shape)),K.catchall=(b)=>K.clone({...K._zod.def,catchall:b}),K.passthrough=()=>K.clone({...K._zod.def,catchall:B1()}),K.loose=()=>K.clone({...K._zod.def,catchall:B1()}),K.strict=()=>K.clone({...K._zod.def,catchall:Jb()}),K.strip=()=>K.clone({...K._zod.def,catchall:void 0}),K.extend=(b)=>{return s.extend(K,b)},K.safeExtend=(b)=>{return s.safeExtend(K,b)},K.merge=(b)=>s.merge(K,b),K.pick=(b)=>s.pick(K,b),K.omit=(b)=>s.omit(K,b),K.partial=(...b)=>s.partial(F1,K,b[0]),K.required=(...b)=>s.required(v1,K,b[0])});function h1(K,w){let b={type:"object",shape:K??{},...s.normalizeParams(w)};return new $b(b)}var Gb=R("ZodUnion",(K,w)=>{r3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,S,W)=>r0(K,b,S,W),K.options=w.options});function Bb(K,w){return new Gb({type:"union",options:K,...s.normalizeParams(w)})}var Xb=R("ZodIntersection",(K,w)=>{y3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,S,W)=>y0(K,b,S,W)});function zb(K,w){return new Xb({type:"intersection",left:K,right:w})}var n8=R("ZodEnum",(K,w)=>{_3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(S,W,I)=>c0(K,S,W,I),K.enum=w.entries,K.options=Object.values(w.entries);let b=new Set(Object.keys(w.entries));K.extract=(S,W)=>{let I={};for(let P of S)if(b.has(P))I[P]=w.entries[P];else throw Error(`Key ${P} not found in enum`);return new n8({...w,checks:[],...s.normalizeParams(W),entries:I})},K.exclude=(S,W)=>{let I={...w.entries};for(let P of S)if(b.has(P))delete I[P];else throw Error(`Key ${P} not found in enum`);return new n8({...w,checks:[],...s.normalizeParams(W),entries:I})}});function Ub(K,w){let b=Array.isArray(K)?Object.fromEntries(K.map((S)=>[S,S])):K;return new n8({type:"enum",entries:b,...s.normalizeParams(w)})}var Qb=R("ZodTransform",(K,w)=>{m3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,S,W)=>C0(K,b,S,W),K._zod.parse=(b,S)=>{if(S.direction==="backward")throw new C4(K.constructor.name);b.addIssue=(I)=>{if(typeof I==="string")b.issues.push(s.issue(I,b.value,w));else{let P=I;if(P.fatal)P.continue=!1;P.code??(P.code="custom"),P.input??(P.input=b.value),P.inst??(P.inst=K),b.issues.push(s.issue(P))}};let W=w.transform(b.value,b);if(W instanceof Promise)return W.then((I)=>{return b.value=I,b});return b.value=W,b}});function Yb(K){return new Qb({type:"transform",transform:K})}var F1=R("ZodOptional",(K,w)=>{f3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,S,W)=>e0(K,b,S,W),K.unwrap=()=>K._zod.def.innerType});function X1(K){return new F1({type:"optional",innerType:K})}var Hb=R("ZodNullable",(K,w)=>{T3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,S,W)=>_0(K,b,S,W),K.unwrap=()=>K._zod.def.innerType});function z1(K){return new Hb({type:"nullable",innerType:K})}var Vb=R("ZodDefault",(K,w)=>{l3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,S,W)=>f0(K,b,S,W),K.unwrap=()=>K._zod.def.innerType,K.removeDefault=K.unwrap});function Lb(K,w){return new Vb({type:"default",innerType:K,get defaultValue(){return typeof w==="function"?w():s.shallowClone(w)}})}var qb=R("ZodPrefault",(K,w)=>{p3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,S,W)=>T0(K,b,S,W),K.unwrap=()=>K._zod.def.innerType});function hb(K,w){return new qb({type:"prefault",innerType:K,get defaultValue(){return typeof w==="function"?w():s.shallowClone(w)}})}var v1=R("ZodNonOptional",(K,w)=>{i3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,S,W)=>m0(K,b,S,W),K.unwrap=()=>K._zod.def.innerType});function Fb(K,w){return new v1({type:"nonoptional",innerType:K,...s.normalizeParams(w)})}var vb=R("ZodCatch",(K,w)=>{e3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,S,W)=>l0(K,b,S,W),K.unwrap=()=>K._zod.def.innerType,K.removeCatch=K.unwrap});function Eb(K,w){return new vb({type:"catch",innerType:K,catchValue:typeof w==="function"?w:()=>w})}var Rb=R("ZodPipe",(K,w)=>{n3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,S,W)=>p0(K,b,S,W),K.in=w.in,K.out=w.out});function U1(K,w){return new Rb({type:"pipe",in:K,out:w})}var gb=R("ZodReadonly",(K,w)=>{d3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,S,W)=>i0(K,b,S,W),K.unwrap=()=>K._zod.def.innerType});function jb(K){return new gb({type:"readonly",innerType:K})}var kb=R("ZodCustom",(K,w)=>{t3.init(K,w),B2.init(K,w),K._zod.processJSONSchema=(b,S,W)=>u0(K,b,S,W)});function Zb(K,w={}){return R0(kb,K,w)}function Ab(K){return g0(K)}k2(k8());class c6{params;#K=A4.ETokenAudiences.SYSTEM;#w=1;token;constructor(K){this.params=K}async signToken(){let{params:{credential:{tenantId:K,appId:w,modeId:b,secretKey:S},options:W}}=this;try{let I=new Uint8Array(Buffer.from(S,"base64")),P=await crypto.subtle.importKey("raw",I,{name:"HMAC",hash:"SHA-512"},!1,["sign","verify"]),M=await new Y6({tenantId:K,appId:w,modeId:b,iss:K,aud:A4.ETokenAudiences.SYSTEM}).setProtectedHeader({alg:"HS512"}).sign(P);return this.token=M,M}catch(I){if(W?.logs)console.error("[BoolGuard] Sign token error:",I);throw I}}async ping(){let{token:K,params:{credential:{tenantId:w,appId:b,modeId:S},options:W}}=this;try{let I=K||await this.signToken(),P=new Headers;P.append("X-Tenant-ID",w),P.append("X-App-ID",b),P.append("X-Mode-ID",S),P.append("Authorization",`Bearer ${I}`);let M=await fetch(`${this.#K}/v${W?.version||this.#w}/tenant-app-modes/ping`,{method:"GET",headers:P});if(!M.ok)throw await M.json();return M.ok}catch(I){if(W?.logs)console.error("[BoolGuard] Ping error:",I);return!1}}async createPlainAccount({identity:K,password:w,metadata:b}){let{token:S,params:{credential:{tenantId:W,appId:I,modeId:P},options:M}}=this;try{let O=S||await this.signToken(),J=new Headers;J.append("X-Tenant-ID",W),J.append("X-App-ID",I),J.append("X-Mode-ID",P),J.append("Authorization",`Bearer ${O}`),J.append("Content-Type","application/json");let $=await fetch(`${this.#K}/v${M?.version||this.#w}/tenant-app-mode-accounts`,{method:"POST",headers:J,body:JSON.stringify({data:Object.freeze({type:"plain",identity:K,password:w,metadata:b})})});if(!$.ok)throw await $.json();let{data:H}=await $.json();return Object.freeze({account:H.account,credential:H.credential})}catch(O){if(M?.logs)console.error("[BoolGuard] Create plain account error:",O);throw O}}async createEmailAccount({identity:K,password:w,metadata:b}){let{token:S,params:{credential:{tenantId:W,appId:I,modeId:P},options:M}}=this;try{let O=S||await this.signToken(),J=new Headers;J.append("X-Tenant-ID",W),J.append("X-App-ID",I),J.append("X-Mode-ID",P),J.append("Authorization",`Bearer ${O}`),J.append("Content-Type","application/json");let $=await fetch(`${this.#K}/v${M?.version||this.#w}/tenant-app-mode-accounts`,{method:"POST",headers:J,body:JSON.stringify({data:Object.freeze({type:"email",identity:K,password:w,metadata:b})})});if(!$.ok)throw await $.json();let{data:H}=await $.json();return Object.freeze({account:H.account,credential:H.credential})}catch(O){if(M?.logs)console.error("[BoolGuard] Create email account error:",O);throw O}}async authenticate({identity:K,password:w}){let{token:b,params:{credential:{tenantId:S,appId:W,modeId:I},options:P}}=this;try{let M=b||await this.signToken(),O=await V1().safeParseAsync(K),J=new Headers;J.append("X-Tenant-ID",S),J.append("X-App-ID",W),J.append("X-Mode-ID",I),J.append("Authorization",`Bearer ${M}`),J.append("Content-Type","application/json");let $=await fetch(`${this.#K}/v${P?.version||this.#w}/tenant-app-mode-accounts/authenticate`,{method:"POST",headers:J,body:JSON.stringify({data:Object.freeze({type:!O.success?"plain":"email",identity:K,password:w})})});if(!$.ok)throw await $.json();let{data:H}=await $.json();return Object.freeze({account:H.account,credential:H.credential,token:H.token})}catch(M){if(P?.logs)console.error("[BoolGuard] Authenticate error:",M);throw M}}async verifyToken({token:K}){let{params:{credential:{tenantId:w,appId:b,modeId:S},options:W}}=this;try{let I=this.token||await this.signToken(),P=new Headers;P.append("X-Tenant-ID",w),P.append("X-App-ID",b),P.append("X-Mode-ID",S),P.append("Authorization",`Bearer ${I}`),P.append("Content-Type","application/json");let M=await fetch(`${this.#K}/v${W?.version||this.#w}/tenant-app-mode-accounts/verify`,{method:"POST",headers:P,body:JSON.stringify({data:Object.freeze({token:K})})});if(!M.ok)throw await M.json();let{data:O}=await M.json();return Object.freeze({account:O.account,credential:O.credential})}catch(I){if(W?.logs)console.error("[BoolGuard] Verify token error:",I);throw I}}}var eP=async({credential:K,definition:w,options:b})=>{let S=new c6({credential:K,definition:w,options:b});if(await S.signToken(),!await S.ping())throw Error("Ping to Bool Guard service failed!");return[$2.guardClient,S]};var cb=h1({authorization:Y1().startsWith("Bearer ").transform((K,w)=>{let[b,S]=K.split(" ");if(!q1().safeParse(S).success)return w.addIssue("Token must be match jsonwebtoken format."),Q8;return Object.freeze({schema:b,token:S})})});class d8{clientInstance;constructor(K){this.clientInstance=K}async start(K,w){let b=await cb.safeParseAsync(w.toJSON());if(!b.success)return K.set($2.authState,void 0);else{let{authorization:{token:S}}=b.data;try{let{account:W,credential:I}=await this.clientInstance.verifyToken({token:S}),P=Object.freeze({account:W,credential:I});return K.set($2.authState,P)}catch(W){return console.error(W),K.set($2.authState,void 0)}}}}q4([D4(0,$6()),D4(1,qK())],d8.prototype,"start",null),d8=q4([EK(),D4(0,vK($2.guardClient))],d8);export{eP as loader,d8 as Middleware,$2 as Keys,I8 as Guard,A4 as Enums,Zw as ControllerGuard,c6 as Client,W8 as AuthState,c1 as ActionGuard};

//# debugId=6527C9404B9E6D4364756E2164756E21
