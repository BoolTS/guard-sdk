// @bun
var p3=Object.defineProperty;var m4=(c,K)=>{for(var w in K)p3(c,w,{get:K[w],enumerable:!0,configurable:!0,set:(P)=>K[w]=()=>P})};var Y2=function(c,K,w,P){var S=arguments.length,h=S<3?K:P===null?P=Object.getOwnPropertyDescriptor(K,w):P,M;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")h=Reflect.decorate(c,K,w,P);else for(var I=c.length-1;I>=0;I--)if(M=c[I])h=(S<3?M(h):S>3?M(K,w,h):M(K,w))||h;return S>3&&h&&Object.defineProperty(K,w,h),h},O2=(c,K)=>(w,P)=>K(w,P,c);var x2={};m4(x2,{ETokenAudiences:()=>_6});var _6;((K)=>K.SYSTEM="https://api-guard.booljs.com")(_6||={});var Nc={};m4(Nc,{service:()=>n3,guardMetadata:()=>T3,guardClient:()=>i3,authState:()=>l3});var l3=Symbol.for("__boolGuard::authState"),T3=Symbol.for("__boolGuard::guardMetadata"),n3=Symbol.for("__boolGuard::authService"),i3=Symbol.for("__boolGuard::guardClient");var t3=()=>(c,K)=>{Reflect.defineMetadata(Nc.guardMetadata,void 0,c,K)};var d3=Object.create,{getPrototypeOf:s3,defineProperty:u4,getOwnPropertyNames:a3}=Object,c0=Object.prototype.hasOwnProperty,h4=(c,K,w)=>{w=c!=null?d3(s3(c)):{};let P=K||!c||!c.__esModule?u4(w,"default",{value:c,enumerable:!0}):w;for(let S of a3(c))if(!c0.call(P,S))u4(P,S,{get:()=>c[S],enumerable:!0});return P},_=(c,K)=>()=>(K||c((K={exports:{}}).exports,K),K.exports),K0=(c,K)=>{for(var w in K)u4(c,w,{get:K[w],enumerable:!0,configurable:!0,set:(P)=>K[w]=()=>P})},w0=import.meta.require,e4=_(()=>{/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var c;(function(K){(function(w){var P=typeof globalThis==="object"?globalThis:typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:G(),S=h(K);if(typeof P.Reflect<"u")S=h(P.Reflect,S);if(w(S,P),typeof P.Reflect>"u")P.Reflect=K;function h(D,B){return function(L,z){if(Object.defineProperty(D,L,{configurable:!0,writable:!0,value:z}),B)B(L,z)}}function M(){try{return Function("return this;")()}catch(D){}}function I(){try{return(0,eval)("(function() { return this; })()")}catch(D){}}function G(){return M()||I()}})(function(w,P){var S=Object.prototype.hasOwnProperty,h=typeof Symbol==="function",M=h&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",I=h&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",G=typeof Object.create==="function",D={__proto__:[]}instanceof Array,B=!G&&!D,L={create:G?function(){return _c(Object.create(null))}:D?function(){return _c({__proto__:null})}:function(){return _c({})},has:B?function(j,U){return S.call(j,U)}:function(j,U){return U in j},get:B?function(j,U){return S.call(j,U)?j[U]:void 0}:function(j,U){return j[U]}},z=Object.getPrototypeOf(Function),V=typeof Map==="function"&&typeof Map.prototype.entries==="function"?Map:R4(),b=typeof Set==="function"&&typeof Set.prototype.entries==="function"?Set:l2(),$=typeof WeakMap==="function"?WeakMap:g4(),q=h?Symbol.for("@reflect-metadata:registry"):void 0,W=dc(),Y=sc(W);function X(j,U,v,Z){if(!y(v)){if(!s(j))throw TypeError();if(!d(U))throw TypeError();if(!d(Z)&&!y(Z)&&!Qc(Z))throw TypeError();if(Qc(Z))Z=void 0;return v=l(v),cc(j,U,v,Z)}else{if(!s(j))throw TypeError();if(!hc(U))throw TypeError();return C(j,U)}}w("decorate",X);function O(j,U){function v(Z,m){if(!d(Z))throw TypeError();if(!y(m)&&!Jc(m))throw TypeError();vc(j,U,Z,m)}return v}w("metadata",O);function H(j,U,v,Z){if(!d(v))throw TypeError();if(!y(Z))Z=l(Z);return vc(j,U,v,Z)}w("defineMetadata",H);function o(j,U,v){if(!d(U))throw TypeError();if(!y(v))v=l(v);return Ic(j,U,v)}w("hasMetadata",o);function Q(j,U,v){if(!d(U))throw TypeError();if(!y(v))v=l(v);return wc(j,U,v)}w("hasOwnMetadata",Q);function r(j,U,v){if(!d(U))throw TypeError();if(!y(v))v=l(v);return Gc(j,U,v)}w("getMetadata",r);function g(j,U,v){if(!d(U))throw TypeError();if(!y(v))v=l(v);return qc(j,U,v)}w("getOwnMetadata",g);function A(j,U){if(!d(j))throw TypeError();if(!y(U))U=l(U);return p(j,U)}w("getMetadataKeys",A);function u(j,U){if(!d(j))throw TypeError();if(!y(U))U=l(U);return jc(j,U)}w("getOwnMetadataKeys",u);function n(j,U,v){if(!d(U))throw TypeError();if(!y(v))v=l(v);if(!d(U))throw TypeError();if(!y(v))v=l(v);var Z=b2(U,v,!1);if(y(Z))return!1;return Z.OrdinaryDeleteMetadata(j,U,v)}w("deleteMetadata",n);function C(j,U){for(var v=j.length-1;v>=0;--v){var Z=j[v],m=Z(U);if(!y(m)&&!Qc(m)){if(!hc(m))throw TypeError();U=m}}return U}function cc(j,U,v,Z){for(var m=j.length-1;m>=0;--m){var Pc=j[m],N=Pc(U,v,Z);if(!y(N)&&!Qc(N)){if(!d(N))throw TypeError();Z=N}}return Z}function Ic(j,U,v){var Z=wc(j,U,v);if(Z)return!0;var m=$c(U);if(!Qc(m))return Ic(j,m,v);return!1}function wc(j,U,v){var Z=b2(U,v,!1);if(y(Z))return!1;return Rc(Z.OrdinaryHasOwnMetadata(j,U,v))}function Gc(j,U,v){var Z=wc(j,U,v);if(Z)return qc(j,U,v);var m=$c(U);if(!Qc(m))return Gc(j,m,v);return}function qc(j,U,v){var Z=b2(U,v,!1);if(y(Z))return;return Z.OrdinaryGetOwnMetadata(j,U,v)}function vc(j,U,v,Z){var m=b2(v,Z,!0);m.OrdinaryDefineOwnMetadata(j,U,v,Z)}function p(j,U){var v=jc(j,U),Z=$c(j);if(Z===null)return v;var m=p(Z,U);if(m.length<=0)return v;if(v.length<=0)return m;var Pc=new b,N=[];for(var J=0,E=v;J<E.length;J++){var k=E[J],x=Pc.has(k);if(!x)Pc.add(k),N.push(k)}for(var R=0,f=m;R<f.length;R++){var k=f[R],x=Pc.has(k);if(!x)Pc.add(k),N.push(k)}return N}function jc(j,U){var v=b2(j,U,!1);if(!v)return[];return v.OrdinaryOwnMetadataKeys(j,U)}function Fc(j){if(j===null)return 1;switch(typeof j){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return j===null?1:6;default:return 6}}function y(j){return j===void 0}function Qc(j){return j===null}function Zc(j){return typeof j==="symbol"}function d(j){return typeof j==="object"?j!==null:typeof j==="function"}function Ec(j,U){switch(Fc(j)){case 0:return j;case 1:return j;case 2:return j;case 3:return j;case 4:return j;case 5:return j}var v=U===3?"string":U===5?"number":"default",Z=Wc(j,M);if(Z!==void 0){var m=Z.call(j,v);if(d(m))throw TypeError();return m}return Yc(j,v==="default"?"number":v)}function Yc(j,U){if(U==="string"){var v=j.toString;if(T(v)){var Z=v.call(j);if(!d(Z))return Z}var m=j.valueOf;if(T(m)){var Z=m.call(j);if(!d(Z))return Z}}else{var m=j.valueOf;if(T(m)){var Z=m.call(j);if(!d(Z))return Z}var Pc=j.toString;if(T(Pc)){var Z=Pc.call(j);if(!d(Z))return Z}}throw TypeError()}function Rc(j){return!!j}function Ac(j){return""+j}function l(j){var U=Ec(j,3);if(Zc(U))return U;return Ac(U)}function s(j){return Array.isArray?Array.isArray(j):j instanceof Object?j instanceof Array:Object.prototype.toString.call(j)==="[object Array]"}function T(j){return typeof j==="function"}function hc(j){return typeof j==="function"}function Jc(j){switch(Fc(j)){case 3:return!0;case 4:return!0;default:return!1}}function Xc(j,U){return j===U||j!==j&&U!==U}function Wc(j,U){var v=j[U];if(v===void 0||v===null)return;if(!T(v))throw TypeError();return v}function yc(j){var U=Wc(j,I);if(!T(U))throw TypeError();var v=U.call(j);if(!d(v))throw TypeError();return v}function Bc(j){return j.value}function zc(j){var U=j.next();return U.done?!1:U}function rc(j){var U=j.return;if(U)U.call(j)}function $c(j){var U=Object.getPrototypeOf(j);if(typeof j!=="function"||j===z)return U;if(U!==z)return U;var v=j.prototype,Z=v&&Object.getPrototypeOf(v);if(Z==null||Z===Object.prototype)return U;var m=Z.constructor;if(typeof m!=="function")return U;if(m===j)return U;return m}function tc(){var j;if(!y(q)&&typeof P.Reflect<"u"&&!(q in P.Reflect)&&typeof P.Reflect.defineMetadata==="function")j=E4(P.Reflect);var U,v,Z,m=new $,Pc={registerProvider:N,getProvider:E,setProvider:x};return Pc;function N(R){if(!Object.isExtensible(Pc))throw Error("Cannot add provider to a frozen registry.");switch(!0){case j===R:break;case y(U):U=R;break;case U===R:break;case y(v):v=R;break;case v===R:break;default:if(Z===void 0)Z=new b;Z.add(R);break}}function J(R,f){if(!y(U)){if(U.isProviderFor(R,f))return U;if(!y(v)){if(v.isProviderFor(R,f))return U;if(!y(Z)){var t=yc(Z);while(!0){var i=zc(t);if(!i)return;var bc=Bc(i);if(bc.isProviderFor(R,f))return rc(t),bc}}}}if(!y(j)&&j.isProviderFor(R,f))return j;return}function E(R,f){var t=m.get(R),i;if(!y(t))i=t.get(f);if(!y(i))return i;if(i=J(R,f),!y(i)){if(y(t))t=new V,m.set(R,t);t.set(f,i)}return i}function k(R){if(y(R))throw TypeError();return U===R||v===R||!y(Z)&&Z.has(R)}function x(R,f,t){if(!k(t))throw Error("Metadata provider not registered.");var i=E(R,f);if(i!==t){if(!y(i))return!1;var bc=m.get(R);if(y(bc))bc=new V,m.set(R,bc);bc.set(f,t)}return!0}}function dc(){var j;if(!y(q)&&d(P.Reflect)&&Object.isExtensible(P.Reflect))j=P.Reflect[q];if(y(j))j=tc();if(!y(q)&&d(P.Reflect)&&Object.isExtensible(P.Reflect))Object.defineProperty(P.Reflect,q,{enumerable:!1,configurable:!1,writable:!1,value:j});return j}function sc(j){var U=new $,v={isProviderFor:function(k,x){var R=U.get(k);if(y(R))return!1;return R.has(x)},OrdinaryDefineOwnMetadata:N,OrdinaryHasOwnMetadata:m,OrdinaryGetOwnMetadata:Pc,OrdinaryOwnMetadataKeys:J,OrdinaryDeleteMetadata:E};return W.registerProvider(v),v;function Z(k,x,R){var f=U.get(k),t=!1;if(y(f)){if(!R)return;f=new V,U.set(k,f),t=!0}var i=f.get(x);if(y(i)){if(!R)return;if(i=new V,f.set(x,i),!j.setProvider(k,x,v)){if(f.delete(x),t)U.delete(k);throw Error("Wrong provider for target.")}}return i}function m(k,x,R){var f=Z(x,R,!1);if(y(f))return!1;return Rc(f.has(k))}function Pc(k,x,R){var f=Z(x,R,!1);if(y(f))return;return f.get(k)}function N(k,x,R,f){var t=Z(R,f,!0);t.set(k,x)}function J(k,x){var R=[],f=Z(k,x,!1);if(y(f))return R;var t=f.keys(),i=yc(t),bc=0;while(!0){var Q2=zc(i);if(!Q2)return R.length=bc,R;var ac=Bc(Q2);try{R[bc]=ac}catch(Hc){try{rc(i)}finally{throw Hc}}bc++}}function E(k,x,R){var f=Z(x,R,!1);if(y(f))return!1;if(!f.delete(k))return!1;if(f.size===0){var t=U.get(x);if(!y(t)){if(t.delete(R),t.size===0)U.delete(t)}}return!0}}function E4(j){var{defineMetadata:U,hasOwnMetadata:v,getOwnMetadata:Z,getOwnMetadataKeys:m,deleteMetadata:Pc}=j,N=new $,J={isProviderFor:function(E,k){var x=N.get(E);if(!y(x)&&x.has(k))return!0;if(m(E,k).length){if(y(x))x=new b,N.set(E,x);return x.add(k),!0}return!1},OrdinaryDefineOwnMetadata:U,OrdinaryHasOwnMetadata:v,OrdinaryGetOwnMetadata:Z,OrdinaryOwnMetadataKeys:m,OrdinaryDeleteMetadata:Pc};return J}function b2(j,U,v){var Z=W.getProvider(j,U);if(!y(Z))return Z;if(v){if(W.setProvider(j,U,Y))return Y;throw Error("Illegal state.")}return}function R4(){var j={},U=[],v=function(){function J(E,k,x){this._index=0,this._keys=E,this._values=k,this._selector=x}return J.prototype["@@iterator"]=function(){return this},J.prototype[I]=function(){return this},J.prototype.next=function(){var E=this._index;if(E>=0&&E<this._keys.length){var k=this._selector(this._keys[E],this._values[E]);if(E+1>=this._keys.length)this._index=-1,this._keys=U,this._values=U;else this._index++;return{value:k,done:!1}}return{value:void 0,done:!0}},J.prototype.throw=function(E){if(this._index>=0)this._index=-1,this._keys=U,this._values=U;throw E},J.prototype.return=function(E){if(this._index>=0)this._index=-1,this._keys=U,this._values=U;return{value:E,done:!0}},J}(),Z=function(){function J(){this._keys=[],this._values=[],this._cacheKey=j,this._cacheIndex=-2}return Object.defineProperty(J.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),J.prototype.has=function(E){return this._find(E,!1)>=0},J.prototype.get=function(E){var k=this._find(E,!1);return k>=0?this._values[k]:void 0},J.prototype.set=function(E,k){var x=this._find(E,!0);return this._values[x]=k,this},J.prototype.delete=function(E){var k=this._find(E,!1);if(k>=0){var x=this._keys.length;for(var R=k+1;R<x;R++)this._keys[R-1]=this._keys[R],this._values[R-1]=this._values[R];if(this._keys.length--,this._values.length--,Xc(E,this._cacheKey))this._cacheKey=j,this._cacheIndex=-2;return!0}return!1},J.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=j,this._cacheIndex=-2},J.prototype.keys=function(){return new v(this._keys,this._values,m)},J.prototype.values=function(){return new v(this._keys,this._values,Pc)},J.prototype.entries=function(){return new v(this._keys,this._values,N)},J.prototype["@@iterator"]=function(){return this.entries()},J.prototype[I]=function(){return this.entries()},J.prototype._find=function(E,k){if(!Xc(this._cacheKey,E)){this._cacheIndex=-1;for(var x=0;x<this._keys.length;x++)if(Xc(this._keys[x],E)){this._cacheIndex=x;break}}if(this._cacheIndex<0&&k)this._cacheIndex=this._keys.length,this._keys.push(E),this._values.push(void 0);return this._cacheIndex},J}();return Z;function m(J,E){return J}function Pc(J,E){return E}function N(J,E){return[J,E]}}function l2(){var j=function(){function U(){this._map=new V}return Object.defineProperty(U.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),U.prototype.has=function(v){return this._map.has(v)},U.prototype.add=function(v){return this._map.set(v,v),this},U.prototype.delete=function(v){return this._map.delete(v)},U.prototype.clear=function(){this._map.clear()},U.prototype.keys=function(){return this._map.keys()},U.prototype.values=function(){return this._map.keys()},U.prototype.entries=function(){return this._map.entries()},U.prototype["@@iterator"]=function(){return this.keys()},U.prototype[I]=function(){return this.keys()},U}();return j}function g4(){var j=16,U=L.create(),v=Z();return function(){function E(){this._key=Z()}return E.prototype.has=function(k){var x=m(k,!1);return x!==void 0?L.has(x,this._key):!1},E.prototype.get=function(k){var x=m(k,!1);return x!==void 0?L.get(x,this._key):void 0},E.prototype.set=function(k,x){var R=m(k,!0);return R[this._key]=x,this},E.prototype.delete=function(k){var x=m(k,!1);return x!==void 0?delete x[this._key]:!1},E.prototype.clear=function(){this._key=Z()},E}();function Z(){var E;do E="@@WeakMap@@"+J();while(L.has(U,E));return U[E]=!0,E}function m(E,k){if(!S.call(E,v)){if(!k)return;Object.defineProperty(E,v,{value:L.create()})}return E[v]}function Pc(E,k){for(var x=0;x<k;++x)E[x]=Math.random()*255|0;return E}function N(E){if(typeof Uint8Array==="function"){var k=new Uint8Array(E);if(typeof crypto<"u")crypto.getRandomValues(k);else if(typeof msCrypto<"u")msCrypto.getRandomValues(k);else Pc(k,E);return k}return Pc(Array(E),E)}function J(){var E=N(j);E[6]=E[6]&79|64,E[8]=E[8]&191|128;var k="";for(var x=0;x<j;++x){var R=E[x];if(x===4||x===6||x===8)k+="-";if(R<16)k+="0";k+=R.toString(16).toLowerCase()}return k}}function _c(j){return j.__=void 0,delete j.__,j}})})(c||(c={}))}),H2=_((c,K)=>{K.exports=TypeError}),P0=_((c,K)=>{K.exports=w0("util").inspect}),M4=_((c,K)=>{var w=typeof Map==="function"&&Map.prototype,P=Object.getOwnPropertyDescriptor&&w?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,S=w&&P&&typeof P.get==="function"?P.get:null,h=w&&Map.prototype.forEach,M=typeof Set==="function"&&Set.prototype,I=Object.getOwnPropertyDescriptor&&M?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,G=M&&I&&typeof I.get==="function"?I.get:null,D=M&&Set.prototype.forEach,B=typeof WeakMap==="function"&&WeakMap.prototype,L=B?WeakMap.prototype.has:null,z=typeof WeakSet==="function"&&WeakSet.prototype,V=z?WeakSet.prototype.has:null,b=typeof WeakRef==="function"&&WeakRef.prototype,$=b?WeakRef.prototype.deref:null,q=Boolean.prototype.valueOf,W=Object.prototype.toString,Y=Function.prototype.toString,X=String.prototype.match,O=String.prototype.slice,H=String.prototype.replace,o=String.prototype.toUpperCase,Q=String.prototype.toLowerCase,r=RegExp.prototype.test,g=Array.prototype.concat,A=Array.prototype.join,u=Array.prototype.slice,n=Math.floor,C=typeof BigInt==="function"?BigInt.prototype.valueOf:null,cc=Object.getOwnPropertySymbols,Ic=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?Symbol.prototype.toString:null,wc=typeof Symbol==="function"&&typeof Symbol.iterator==="object",Gc=typeof Symbol==="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===wc?"object":"symbol")?Symbol.toStringTag:null,qc=Object.prototype.propertyIsEnumerable,vc=(typeof Reflect==="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(N){return N.__proto__}:null);function p(N,J){if(N===1/0||N===-1/0||N!==N||N&&N>-1000&&N<1000||r.call(/e/,J))return J;var E=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof N==="number"){var k=N<0?-n(-N):n(N);if(k!==N){var x=String(k),R=O.call(J,x.length+1);return H.call(x,E,"$&_")+"."+H.call(H.call(R,/([0-9]{3})/g,"$&_"),/_$/,"")}}return H.call(J,E,"$&_")}var jc=P0(),Fc=jc.custom,y=Xc(Fc)?Fc:null,Qc={__proto__:null,double:'"',single:"'"},Zc={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};K.exports=function N(J,E,k,x){var R=E||{};if(Bc(R,"quoteStyle")&&!Bc(Qc,R.quoteStyle))throw TypeError('option "quoteStyle" must be "single" or "double"');if(Bc(R,"maxStringLength")&&(typeof R.maxStringLength==="number"?R.maxStringLength<0&&R.maxStringLength!==1/0:R.maxStringLength!==null))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var f=Bc(R,"customInspect")?R.customInspect:!0;if(typeof f!=="boolean"&&f!=="symbol")throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Bc(R,"indent")&&R.indent!==null&&R.indent!=="\t"&&!(parseInt(R.indent,10)===R.indent&&R.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Bc(R,"numericSeparator")&&typeof R.numericSeparator!=="boolean")throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var t=R.numericSeparator;if(typeof J>"u")return"undefined";if(J===null)return"null";if(typeof J==="boolean")return J?"true":"false";if(typeof J==="string")return l2(J,R);if(typeof J==="number"){if(J===0)return 1/0/J>0?"0":"-0";var i=String(J);return t?p(J,i):i}if(typeof J==="bigint"){var bc=String(J)+"n";return t?p(J,bc):bc}var Q2=typeof R.depth>"u"?5:R.depth;if(typeof k>"u")k=0;if(k>=Q2&&Q2>0&&typeof J==="object")return Rc(J)?"[Array]":"[Object]";var ac=Z(R,k);if(typeof x>"u")x=[];else if($c(x,J)>=0)return"[Circular]";function Hc(U2,n2,e3){if(n2)x=u.call(x),x.push(n2);if(e3){var y6={depth:R.depth};if(Bc(R,"quoteStyle"))y6.quoteStyle=R.quoteStyle;return N(U2,y6,k+1,x)}return N(U2,R,k+1,x)}if(typeof J==="function"&&!l(J)){var Z6=rc(J),A6=Pc(J,Hc);return"[Function"+(Z6?": "+Z6:" (anonymous)")+"]"+(A6.length>0?" { "+A.call(A6,", ")+" }":"")}if(Xc(J)){var r6=wc?H.call(String(J),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ic.call(J);return typeof J==="object"&&!wc?_c(r6):r6}if(R4(J)){var k2="<"+Q.call(String(J.nodeName)),k4=J.attributes||[];for(var T2=0;T2<k4.length;T2++)k2+=" "+k4[T2].name+"="+d(Ec(k4[T2].value),"double",R);if(k2+=">",J.childNodes&&J.childNodes.length)k2+="...";return k2+="</"+Q.call(String(J.nodeName))+">",k2}if(Rc(J)){if(J.length===0)return"[]";var x4=Pc(J,Hc);if(ac&&!v(x4))return"["+m(x4,ac)+"]";return"[ "+A.call(x4,", ")+" ]"}if(s(J)){var Z4=Pc(J,Hc);if(!("cause"in Error.prototype)&&"cause"in J&&!qc.call(J,"cause"))return"{ ["+String(J)+"] "+A.call(g.call("[cause]: "+Hc(J.cause),Z4),", ")+" }";if(Z4.length===0)return"["+String(J)+"]";return"{ ["+String(J)+"] "+A.call(Z4,", ")+" }"}if(typeof J==="object"&&f){if(y&&typeof J[y]==="function"&&jc)return jc(J,{depth:Q2-k});else if(f!=="symbol"&&typeof J.inspect==="function")return J.inspect()}if(tc(J)){var o6=[];if(h)h.call(J,function(U2,n2){o6.push(Hc(n2,J,!0)+" => "+Hc(U2,J))});return U("Map",S.call(J),o6,ac)}if(E4(J)){var m6=[];if(D)D.call(J,function(U2){m6.push(Hc(U2,J))});return U("Set",G.call(J),m6,ac)}if(dc(J))return j("WeakMap");if(b2(J))return j("WeakSet");if(sc(J))return j("WeakRef");if(hc(J))return _c(Hc(Number(J)));if(Wc(J))return _c(Hc(C.call(J)));if(Jc(J))return _c(q.call(J));if(T(J))return _c(Hc(String(J)));if(typeof window<"u"&&J===window)return"{ [object Window] }";if(typeof globalThis<"u"&&J===globalThis||typeof global<"u"&&J===global)return"{ [object globalThis] }";if(!Ac(J)&&!l(J)){var A4=Pc(J,Hc),u6=vc?vc(J)===Object.prototype:J instanceof Object||J.constructor===Object,r4=J instanceof Object?"":"null prototype",C6=!u6&&Gc&&Object(J)===J&&Gc in J?O.call(zc(J),8,-1):r4?"Object":"",f3=u6||typeof J.constructor!=="function"?"":J.constructor.name?J.constructor.name+" ":"",o4=f3+(C6||r4?"["+A.call(g.call([],C6||[],r4||[]),": ")+"] ":"");if(A4.length===0)return o4+"{}";if(ac)return o4+"{"+m(A4,ac)+"}";return o4+"{ "+A.call(A4,", ")+" }"}return String(J)};function d(N,J,E){var k=E.quoteStyle||J,x=Qc[k];return x+N+x}function Ec(N){return H.call(String(N),/"/g,"&quot;")}function Yc(N){return!Gc||!(typeof N==="object"&&((Gc in N)||typeof N[Gc]<"u"))}function Rc(N){return zc(N)==="[object Array]"&&Yc(N)}function Ac(N){return zc(N)==="[object Date]"&&Yc(N)}function l(N){return zc(N)==="[object RegExp]"&&Yc(N)}function s(N){return zc(N)==="[object Error]"&&Yc(N)}function T(N){return zc(N)==="[object String]"&&Yc(N)}function hc(N){return zc(N)==="[object Number]"&&Yc(N)}function Jc(N){return zc(N)==="[object Boolean]"&&Yc(N)}function Xc(N){if(wc)return N&&typeof N==="object"&&N instanceof Symbol;if(typeof N==="symbol")return!0;if(!N||typeof N!=="object"||!Ic)return!1;try{return Ic.call(N),!0}catch(J){}return!1}function Wc(N){if(!N||typeof N!=="object"||!C)return!1;try{return C.call(N),!0}catch(J){}return!1}var yc=Object.prototype.hasOwnProperty||function(N){return N in this};function Bc(N,J){return yc.call(N,J)}function zc(N){return W.call(N)}function rc(N){if(N.name)return N.name;var J=X.call(Y.call(N),/^function\s*([\w$]+)/);if(J)return J[1];return null}function $c(N,J){if(N.indexOf)return N.indexOf(J);for(var E=0,k=N.length;E<k;E++)if(N[E]===J)return E;return-1}function tc(N){if(!S||!N||typeof N!=="object")return!1;try{S.call(N);try{G.call(N)}catch(J){return!0}return N instanceof Map}catch(J){}return!1}function dc(N){if(!L||!N||typeof N!=="object")return!1;try{L.call(N,L);try{V.call(N,V)}catch(J){return!0}return N instanceof WeakMap}catch(J){}return!1}function sc(N){if(!$||!N||typeof N!=="object")return!1;try{return $.call(N),!0}catch(J){}return!1}function E4(N){if(!G||!N||typeof N!=="object")return!1;try{G.call(N);try{S.call(N)}catch(J){return!0}return N instanceof Set}catch(J){}return!1}function b2(N){if(!V||!N||typeof N!=="object")return!1;try{V.call(N,V);try{L.call(N,L)}catch(J){return!0}return N instanceof WeakSet}catch(J){}return!1}function R4(N){if(!N||typeof N!=="object")return!1;if(typeof HTMLElement<"u"&&N instanceof HTMLElement)return!0;return typeof N.nodeName==="string"&&typeof N.getAttribute==="function"}function l2(N,J){if(N.length>J.maxStringLength){var E=N.length-J.maxStringLength,k="... "+E+" more character"+(E>1?"s":"");return l2(O.call(N,0,J.maxStringLength),J)+k}var x=Zc[J.quoteStyle||"single"];x.lastIndex=0;var R=H.call(H.call(N,x,"\\$1"),/[\x00-\x1f]/g,g4);return d(R,"single",J)}function g4(N){var J=N.charCodeAt(0),E={8:"b",9:"t",10:"n",12:"f",13:"r"}[J];if(E)return"\\"+E;return"\\x"+(J<16?"0":"")+o.call(J.toString(16))}function _c(N){return"Object("+N+")"}function j(N){return N+" { ? }"}function U(N,J,E,k){var x=k?m(E,k):A.call(E,", ");return N+" ("+J+") {"+x+"}"}function v(N){for(var J=0;J<N.length;J++)if($c(N[J],`
`)>=0)return!1;return!0}function Z(N,J){var E;if(N.indent==="\t")E="\t";else if(typeof N.indent==="number"&&N.indent>0)E=A.call(Array(N.indent+1)," ");else return null;return{base:E,prev:A.call(Array(J+1),E)}}function m(N,J){if(N.length===0)return"";var E=`
`+J.prev+J.base;return E+A.call(N,","+E)+`
`+J.prev}function Pc(N,J){var E=Rc(N),k=[];if(E){k.length=N.length;for(var x=0;x<N.length;x++)k[x]=Bc(N,x)?J(N[x],N):""}var R=typeof cc==="function"?cc(N):[],f;if(wc){f={};for(var t=0;t<R.length;t++)f["$"+R[t]]=R[t]}for(var i in N){if(!Bc(N,i))continue;if(E&&String(Number(i))===i&&i<N.length)continue;if(wc&&f["$"+i]instanceof Symbol)continue;else if(r.call(/[^\w$]/,i))k.push(J(i,N)+": "+J(N[i],N));else k.push(i+": "+J(N[i],N))}if(typeof cc==="function"){for(var bc=0;bc<R.length;bc++)if(qc.call(N,R[bc]))k.push("["+J(R[bc])+"]: "+J(N[R[bc]],N))}return k}}),S0=_((c,K)=>{var w=M4(),P=H2(),S=function(D,B,L){var z=D,V;for(;(V=z.next)!=null;z=V)if(V.key===B){if(z.next=V.next,!L)V.next=D.next,D.next=V;return V}},h=function(D,B){if(!D)return;var L=S(D,B);return L&&L.value},M=function(D,B,L){var z=S(D,B);if(z)z.value=L;else D.next={key:B,next:D.next,value:L}},I=function(D,B){if(!D)return!1;return!!S(D,B)},G=function(D,B){if(D)return S(D,B,!0)};K.exports=function(){var D,B={assert:function(L){if(!B.has(L))throw new P("Side channel does not contain "+w(L))},delete:function(L){var z=D&&D.next,V=G(D,L);if(V&&z&&z===V)D=void 0;return!!V},get:function(L){return h(D,L)},has:function(L){return I(D,L)},set:function(L,z){if(!D)D={next:void 0};M(D,L,z)}};return B}}),p6=_((c,K)=>{K.exports=Object}),h0=_((c,K)=>{K.exports=Error}),M0=_((c,K)=>{K.exports=EvalError}),W0=_((c,K)=>{K.exports=RangeError}),I0=_((c,K)=>{K.exports=ReferenceError}),b0=_((c,K)=>{K.exports=SyntaxError}),O0=_((c,K)=>{K.exports=URIError}),J0=_((c,K)=>{K.exports=Math.abs}),N0=_((c,K)=>{K.exports=Math.floor}),D0=_((c,K)=>{K.exports=Math.max}),G0=_((c,K)=>{K.exports=Math.min}),j0=_((c,K)=>{K.exports=Math.pow}),X0=_((c,K)=>{K.exports=Math.round}),B0=_((c,K)=>{K.exports=Number.isNaN||function(w){return w!==w}}),z0=_((c,K)=>{var w=B0();K.exports=function(P){if(w(P)||P===0)return P;return P<0?-1:1}}),$0=_((c,K)=>{K.exports=Object.getOwnPropertyDescriptor}),l6=_((c,K)=>{var w=$0();if(w)try{w([],"length")}catch(P){w=null}K.exports=w}),Q0=_((c,K)=>{var w=Object.defineProperty||!1;if(w)try{w({},"a",{value:1})}catch(P){w=!1}K.exports=w}),U0=_((c,K)=>{K.exports=function(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function")return!1;if(typeof Symbol.iterator==="symbol")return!0;var w={},P=Symbol("test"),S=Object(P);if(typeof P==="string")return!1;if(Object.prototype.toString.call(P)!=="[object Symbol]")return!1;if(Object.prototype.toString.call(S)!=="[object Symbol]")return!1;var h=42;w[P]=h;for(var M in w)return!1;if(typeof Object.keys==="function"&&Object.keys(w).length!==0)return!1;if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(w).length!==0)return!1;var I=Object.getOwnPropertySymbols(w);if(I.length!==1||I[0]!==P)return!1;if(!Object.prototype.propertyIsEnumerable.call(w,P))return!1;if(typeof Object.getOwnPropertyDescriptor==="function"){var G=Object.getOwnPropertyDescriptor(w,P);if(G.value!==h||G.enumerable!==!0)return!1}return!0}}),Y0=_((c,K)=>{var w=typeof Symbol<"u"&&Symbol,P=U0();K.exports=function(){if(typeof w!=="function")return!1;if(typeof Symbol!=="function")return!1;if(typeof w("foo")!=="symbol")return!1;if(typeof Symbol("bar")!=="symbol")return!1;return P()}}),T6=_((c,K)=>{K.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null}),n6=_((c,K)=>{var w=p6();K.exports=w.getPrototypeOf||null}),H0=_((c,K)=>{var w="Function.prototype.bind called on incompatible ",P=Object.prototype.toString,S=Math.max,h="[object Function]",M=function(D,B){var L=[];for(var z=0;z<D.length;z+=1)L[z]=D[z];for(var V=0;V<B.length;V+=1)L[V+D.length]=B[V];return L},I=function(D,B){var L=[];for(var z=B||0,V=0;z<D.length;z+=1,V+=1)L[V]=D[z];return L},G=function(D,B){var L="";for(var z=0;z<D.length;z+=1)if(L+=D[z],z+1<D.length)L+=B;return L};K.exports=function(D){var B=this;if(typeof B!=="function"||P.apply(B)!==h)throw TypeError(w+B);var L=I(arguments,1),z,V=function(){if(this instanceof z){var Y=B.apply(this,M(L,arguments));if(Object(Y)===Y)return Y;return this}return B.apply(D,M(L,arguments))},b=S(0,B.length-L.length),$=[];for(var q=0;q<b;q++)$[q]="$"+q;if(z=Function("binder","return function ("+G($,",")+"){ return binder.apply(this,arguments); }")(V),B.prototype){var W=function(){};W.prototype=B.prototype,z.prototype=new W,W.prototype=null}return z}}),W4=_((c,K)=>{var w=H0();K.exports=Function.prototype.bind||w}),p4=_((c,K)=>{K.exports=Function.prototype.call}),i6=_((c,K)=>{K.exports=Function.prototype.apply}),V0=_((c,K)=>{K.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply}),L0=_((c,K)=>{var w=W4(),P=i6(),S=p4(),h=V0();K.exports=h||w.call(S,P)}),t6=_((c,K)=>{var w=W4(),P=H2(),S=p4(),h=L0();K.exports=function(M){if(M.length<1||typeof M[0]!=="function")throw new P("a function is required");return h(w,S,M)}}),q0=_((c,K)=>{var w=t6(),P=l6(),S;try{S=[].__proto__===Array.prototype}catch(G){if(!G||typeof G!=="object"||!("code"in G)||G.code!=="ERR_PROTO_ACCESS")throw G}var h=!!S&&P&&P(Object.prototype,"__proto__"),M=Object,I=M.getPrototypeOf;K.exports=h&&typeof h.get==="function"?w([h.get]):typeof I==="function"?function(G){return I(G==null?G:M(G))}:!1}),v0=_((c,K)=>{var w=T6(),P=n6(),S=q0();K.exports=w?function(h){return w(h)}:P?function(h){if(!h||typeof h!=="object"&&typeof h!=="function")throw TypeError("getProto: not an object");return P(h)}:S?function(h){return S(h)}:null}),F0=_((c,K)=>{var w=Function.prototype.call,P=Object.prototype.hasOwnProperty,S=W4();K.exports=S.call(w,P)}),l4=_((c,K)=>{var w,P=p6(),S=h0(),h=M0(),M=W0(),I=I0(),G=b0(),D=H2(),B=O0(),L=J0(),z=N0(),V=D0(),b=G0(),$=j0(),q=X0(),W=z0(),Y=Function,X=function(l){try{return Y('"use strict"; return ('+l+").constructor;")()}catch(s){}},O=l6(),H=Q0(),o=function(){throw new D},Q=O?function(){try{return arguments.callee,o}catch(l){try{return O(arguments,"callee").get}catch(s){return o}}}():o,r=Y0()(),g=v0(),A=n6(),u=T6(),n=i6(),C=p4(),cc={},Ic=typeof Uint8Array>"u"||!g?w:g(Uint8Array),wc={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?w:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?w:ArrayBuffer,"%ArrayIteratorPrototype%":r&&g?g([][Symbol.iterator]()):w,"%AsyncFromSyncIteratorPrototype%":w,"%AsyncFunction%":cc,"%AsyncGenerator%":cc,"%AsyncGeneratorFunction%":cc,"%AsyncIteratorPrototype%":cc,"%Atomics%":typeof Atomics>"u"?w:Atomics,"%BigInt%":typeof BigInt>"u"?w:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?w:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?w:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?w:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":S,"%eval%":eval,"%EvalError%":h,"%Float16Array%":typeof Float16Array>"u"?w:Float16Array,"%Float32Array%":typeof Float32Array>"u"?w:Float32Array,"%Float64Array%":typeof Float64Array>"u"?w:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?w:FinalizationRegistry,"%Function%":Y,"%GeneratorFunction%":cc,"%Int8Array%":typeof Int8Array>"u"?w:Int8Array,"%Int16Array%":typeof Int16Array>"u"?w:Int16Array,"%Int32Array%":typeof Int32Array>"u"?w:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":r&&g?g(g([][Symbol.iterator]())):w,"%JSON%":typeof JSON==="object"?JSON:w,"%Map%":typeof Map>"u"?w:Map,"%MapIteratorPrototype%":typeof Map>"u"||!r||!g?w:g(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":P,"%Object.getOwnPropertyDescriptor%":O,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?w:Promise,"%Proxy%":typeof Proxy>"u"?w:Proxy,"%RangeError%":M,"%ReferenceError%":I,"%Reflect%":typeof Reflect>"u"?w:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?w:Set,"%SetIteratorPrototype%":typeof Set>"u"||!r||!g?w:g(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?w:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":r&&g?g(""[Symbol.iterator]()):w,"%Symbol%":r?Symbol:w,"%SyntaxError%":G,"%ThrowTypeError%":Q,"%TypedArray%":Ic,"%TypeError%":D,"%Uint8Array%":typeof Uint8Array>"u"?w:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?w:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?w:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?w:Uint32Array,"%URIError%":B,"%WeakMap%":typeof WeakMap>"u"?w:WeakMap,"%WeakRef%":typeof WeakRef>"u"?w:WeakRef,"%WeakSet%":typeof WeakSet>"u"?w:WeakSet,"%Function.prototype.call%":C,"%Function.prototype.apply%":n,"%Object.defineProperty%":H,"%Object.getPrototypeOf%":A,"%Math.abs%":L,"%Math.floor%":z,"%Math.max%":V,"%Math.min%":b,"%Math.pow%":$,"%Math.round%":q,"%Math.sign%":W,"%Reflect.getPrototypeOf%":u};if(g)try{null.error}catch(l){Gc=g(g(l)),wc["%Error.prototype%"]=Gc}var Gc,qc=function l(s){var T;if(s==="%AsyncFunction%")T=X("async function () {}");else if(s==="%GeneratorFunction%")T=X("function* () {}");else if(s==="%AsyncGeneratorFunction%")T=X("async function* () {}");else if(s==="%AsyncGenerator%"){var hc=l("%AsyncGeneratorFunction%");if(hc)T=hc.prototype}else if(s==="%AsyncIteratorPrototype%"){var Jc=l("%AsyncGenerator%");if(Jc&&g)T=g(Jc.prototype)}return wc[s]=T,T},vc={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},p=W4(),jc=F0(),Fc=p.call(C,Array.prototype.concat),y=p.call(n,Array.prototype.splice),Qc=p.call(C,String.prototype.replace),Zc=p.call(C,String.prototype.slice),d=p.call(C,RegExp.prototype.exec),Ec=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Yc=/\\(\\)?/g,Rc=function(l){var s=Zc(l,0,1),T=Zc(l,-1);if(s==="%"&&T!=="%")throw new G("invalid intrinsic syntax, expected closing `%`");else if(T==="%"&&s!=="%")throw new G("invalid intrinsic syntax, expected opening `%`");var hc=[];return Qc(l,Ec,function(Jc,Xc,Wc,yc){hc[hc.length]=Wc?Qc(yc,Yc,"$1"):Xc||Jc}),hc},Ac=function(l,s){var T=l,hc;if(jc(vc,T))hc=vc[T],T="%"+hc[0]+"%";if(jc(wc,T)){var Jc=wc[T];if(Jc===cc)Jc=qc(T);if(typeof Jc>"u"&&!s)throw new D("intrinsic "+l+" exists, but is not available. Please file an issue!");return{alias:hc,name:T,value:Jc}}throw new G("intrinsic "+l+" does not exist!")};K.exports=function(l,s){if(typeof l!=="string"||l.length===0)throw new D("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof s!=="boolean")throw new D('"allowMissing" argument must be a boolean');if(d(/^%?[^%]*%?$/,l)===null)throw new G("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var T=Rc(l),hc=T.length>0?T[0]:"",Jc=Ac("%"+hc+"%",s),Xc=Jc.name,Wc=Jc.value,yc=!1,Bc=Jc.alias;if(Bc)hc=Bc[0],y(T,Fc([0,1],Bc));for(var zc=1,rc=!0;zc<T.length;zc+=1){var $c=T[zc],tc=Zc($c,0,1),dc=Zc($c,-1);if((tc==='"'||tc==="'"||tc==="`"||(dc==='"'||dc==="'"||dc==="`"))&&tc!==dc)throw new G("property names with quotes must have matching quotes");if($c==="constructor"||!rc)yc=!0;if(hc+="."+$c,Xc="%"+hc+"%",jc(wc,Xc))Wc=wc[Xc];else if(Wc!=null){if(!($c in Wc)){if(!s)throw new D("base intrinsic for "+l+" exists, but the property is not available.");return}if(O&&zc+1>=T.length){var sc=O(Wc,$c);if(rc=!!sc,rc&&"get"in sc&&!("originalValue"in sc.get))Wc=sc.get;else Wc=Wc[$c]}else rc=jc(Wc,$c),Wc=Wc[$c];if(rc&&!yc)wc[Xc]=Wc}}return Wc}}),d6=_((c,K)=>{var w=l4(),P=t6(),S=P([w("%String.prototype.indexOf%")]);K.exports=function(h,M){var I=w(h,!!M);if(typeof I==="function"&&S(h,".prototype.")>-1)return P([I]);return I}}),s6=_((c,K)=>{var w=l4(),P=d6(),S=M4(),h=H2(),M=w("%Map%",!0),I=P("Map.prototype.get",!0),G=P("Map.prototype.set",!0),D=P("Map.prototype.has",!0),B=P("Map.prototype.delete",!0),L=P("Map.prototype.size",!0);K.exports=!!M&&function(){var z,V={assert:function(b){if(!V.has(b))throw new h("Side channel does not contain "+S(b))},delete:function(b){if(z){var $=B(z,b);if(L(z)===0)z=void 0;return $}return!1},get:function(b){if(z)return I(z,b)},has:function(b){if(z)return D(z,b);return!1},set:function(b,$){if(!z)z=new M;G(z,b,$)}};return V}}),E0=_((c,K)=>{var w=l4(),P=d6(),S=M4(),h=s6(),M=H2(),I=w("%WeakMap%",!0),G=P("WeakMap.prototype.get",!0),D=P("WeakMap.prototype.set",!0),B=P("WeakMap.prototype.has",!0),L=P("WeakMap.prototype.delete",!0);K.exports=I?function(){var z,V,b={assert:function($){if(!b.has($))throw new M("Side channel does not contain "+S($))},delete:function($){if(I&&$&&(typeof $==="object"||typeof $==="function")){if(z)return L(z,$)}else if(h){if(V)return V.delete($)}return!1},get:function($){if(I&&$&&(typeof $==="object"||typeof $==="function")){if(z)return G(z,$)}return V&&V.get($)},has:function($){if(I&&$&&(typeof $==="object"||typeof $==="function")){if(z)return B(z,$)}return!!V&&V.has($)},set:function($,q){if(I&&$&&(typeof $==="object"||typeof $==="function")){if(!z)z=new I;D(z,$,q)}else if(h){if(!V)V=h();V.set($,q)}}};return b}:h}),R0=_((c,K)=>{var w=H2(),P=M4(),S=S0(),h=s6(),M=E0(),I=M||h||S;K.exports=function(){var G,D={assert:function(B){if(!D.has(B))throw new w("Side channel does not contain "+P(B))},delete:function(B){return!!G&&G.delete(B)},get:function(B){return G&&G.get(B)},has:function(B){return!!G&&G.has(B)},set:function(B,L){if(!G)G=I();G.set(B,L)}};return D}}),T4=_((c,K)=>{var w=String.prototype.replace,P=/%20/g,S={RFC1738:"RFC1738",RFC3986:"RFC3986"};K.exports={default:S.RFC3986,formatters:{RFC1738:function(h){return w.call(h,P,"+")},RFC3986:function(h){return String(h)}},RFC1738:S.RFC1738,RFC3986:S.RFC3986}}),a6=_((c,K)=>{var w=T4(),P=Object.prototype.hasOwnProperty,S=Array.isArray,h=function(){var Y=[];for(var X=0;X<256;++X)Y.push("%"+((X<16?"0":"")+X.toString(16)).toUpperCase());return Y}(),M=function(Y){while(Y.length>1){var X=Y.pop(),O=X.obj[X.prop];if(S(O)){var H=[];for(var o=0;o<O.length;++o)if(typeof O[o]<"u")H.push(O[o]);X.obj[X.prop]=H}}},I=function(Y,X){var O=X&&X.plainObjects?{__proto__:null}:{};for(var H=0;H<Y.length;++H)if(typeof Y[H]<"u")O[H]=Y[H];return O},G=function Y(X,O,H){if(!O)return X;if(typeof O!=="object"&&typeof O!=="function"){if(S(X))X.push(O);else if(X&&typeof X==="object"){if(H&&(H.plainObjects||H.allowPrototypes)||!P.call(Object.prototype,O))X[O]=!0}else return[X,O];return X}if(!X||typeof X!=="object")return[X].concat(O);var o=X;if(S(X)&&!S(O))o=I(X,H);if(S(X)&&S(O))return O.forEach(function(Q,r){if(P.call(X,r)){var g=X[r];if(g&&typeof g==="object"&&Q&&typeof Q==="object")X[r]=Y(g,Q,H);else X.push(Q)}else X[r]=Q}),X;return Object.keys(O).reduce(function(Q,r){var g=O[r];if(P.call(Q,r))Q[r]=Y(Q[r],g,H);else Q[r]=g;return Q},o)},D=function(Y,X){return Object.keys(X).reduce(function(O,H){return O[H]=X[H],O},Y)},B=function(Y,X,O){var H=Y.replace(/\+/g," ");if(O==="iso-8859-1")return H.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(H)}catch(o){return H}},L=1024,z=function(Y,X,O,H,o){if(Y.length===0)return Y;var Q=Y;if(typeof Y==="symbol")Q=Symbol.prototype.toString.call(Y);else if(typeof Y!=="string")Q=String(Y);if(O==="iso-8859-1")return escape(Q).replace(/%u[0-9a-f]{4}/gi,function(cc){return"%26%23"+parseInt(cc.slice(2),16)+"%3B"});var r="";for(var g=0;g<Q.length;g+=L){var A=Q.length>=L?Q.slice(g,g+L):Q,u=[];for(var n=0;n<A.length;++n){var C=A.charCodeAt(n);if(C===45||C===46||C===95||C===126||C>=48&&C<=57||C>=65&&C<=90||C>=97&&C<=122||o===w.RFC1738&&(C===40||C===41)){u[u.length]=A.charAt(n);continue}if(C<128){u[u.length]=h[C];continue}if(C<2048){u[u.length]=h[192|C>>6]+h[128|C&63];continue}if(C<55296||C>=57344){u[u.length]=h[224|C>>12]+h[128|C>>6&63]+h[128|C&63];continue}n+=1,C=65536+((C&1023)<<10|A.charCodeAt(n)&1023),u[u.length]=h[240|C>>18]+h[128|C>>12&63]+h[128|C>>6&63]+h[128|C&63]}r+=u.join("")}return r},V=function(Y){var X=[{obj:{o:Y},prop:"o"}],O=[];for(var H=0;H<X.length;++H){var o=X[H],Q=o.obj[o.prop],r=Object.keys(Q);for(var g=0;g<r.length;++g){var A=r[g],u=Q[A];if(typeof u==="object"&&u!==null&&O.indexOf(u)===-1)X.push({obj:Q,prop:A}),O.push(u)}}return M(X),Y},b=function(Y){return Object.prototype.toString.call(Y)==="[object RegExp]"},$=function(Y){if(!Y||typeof Y!=="object")return!1;return!!(Y.constructor&&Y.constructor.isBuffer&&Y.constructor.isBuffer(Y))},q=function(Y,X){return[].concat(Y,X)},W=function(Y,X){if(S(Y)){var O=[];for(var H=0;H<Y.length;H+=1)O.push(X(Y[H]));return O}return X(Y)};K.exports={arrayToObject:I,assign:D,combine:q,compact:V,decode:B,encode:z,isBuffer:$,isRegExp:b,maybeMap:W,merge:G}}),g0=_((c,K)=>{var w=R0(),P=a6(),S=T4(),h=Object.prototype.hasOwnProperty,M={brackets:function(W){return W+"[]"},comma:"comma",indices:function(W,Y){return W+"["+Y+"]"},repeat:function(W){return W}},I=Array.isArray,G=Array.prototype.push,D=function(W,Y){G.apply(W,I(Y)?Y:[Y])},B=Date.prototype.toISOString,L=S.default,z={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:P.encode,encodeValuesOnly:!1,filter:void 0,format:L,formatter:S.formatters[L],indices:!1,serializeDate:function(W){return B.call(W)},skipNulls:!1,strictNullHandling:!1},V=function(W){return typeof W==="string"||typeof W==="number"||typeof W==="boolean"||typeof W==="symbol"||typeof W==="bigint"},b={},$=function W(Y,X,O,H,o,Q,r,g,A,u,n,C,cc,Ic,wc,Gc,qc,vc){var p=Y,jc=vc,Fc=0,y=!1;while((jc=jc.get(b))!==void 0&&!y){var Qc=jc.get(Y);if(Fc+=1,typeof Qc<"u")if(Qc===Fc)throw RangeError("Cyclic object value");else y=!0;if(typeof jc.get(b)>"u")Fc=0}if(typeof u==="function")p=u(X,p);else if(p instanceof Date)p=cc(p);else if(O==="comma"&&I(p))p=P.maybeMap(p,function(Wc){if(Wc instanceof Date)return cc(Wc);return Wc});if(p===null){if(Q)return A&&!Gc?A(X,z.encoder,qc,"key",Ic):X;p=""}if(V(p)||P.isBuffer(p)){if(A){var Zc=Gc?X:A(X,z.encoder,qc,"key",Ic);return[wc(Zc)+"="+wc(A(p,z.encoder,qc,"value",Ic))]}return[wc(X)+"="+wc(String(p))]}var d=[];if(typeof p>"u")return d;var Ec;if(O==="comma"&&I(p)){if(Gc&&A)p=P.maybeMap(p,A);Ec=[{value:p.length>0?p.join(",")||null:void 0}]}else if(I(u))Ec=u;else{var Yc=Object.keys(p);Ec=n?Yc.sort(n):Yc}var Rc=g?String(X).replace(/\./g,"%2E"):String(X),Ac=H&&I(p)&&p.length===1?Rc+"[]":Rc;if(o&&I(p)&&p.length===0)return Ac+"[]";for(var l=0;l<Ec.length;++l){var s=Ec[l],T=typeof s==="object"&&s&&typeof s.value<"u"?s.value:p[s];if(r&&T===null)continue;var hc=C&&g?String(s).replace(/\./g,"%2E"):String(s),Jc=I(p)?typeof O==="function"?O(Ac,hc):Ac:Ac+(C?"."+hc:"["+hc+"]");vc.set(Y,Fc);var Xc=w();Xc.set(b,vc),D(d,W(T,Jc,O,H,o,Q,r,g,O==="comma"&&Gc&&I(p)?null:A,u,n,C,cc,Ic,wc,Gc,qc,Xc))}return d},q=function(W){if(!W)return z;if(typeof W.allowEmptyArrays<"u"&&typeof W.allowEmptyArrays!=="boolean")throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof W.encodeDotInKeys<"u"&&typeof W.encodeDotInKeys!=="boolean")throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(W.encoder!==null&&typeof W.encoder<"u"&&typeof W.encoder!=="function")throw TypeError("Encoder has to be a function.");var Y=W.charset||z.charset;if(typeof W.charset<"u"&&W.charset!=="utf-8"&&W.charset!=="iso-8859-1")throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var X=S.default;if(typeof W.format<"u"){if(!h.call(S.formatters,W.format))throw TypeError("Unknown format option provided.");X=W.format}var O=S.formatters[X],H=z.filter;if(typeof W.filter==="function"||I(W.filter))H=W.filter;var o;if(W.arrayFormat in M)o=W.arrayFormat;else if("indices"in W)o=W.indices?"indices":"repeat";else o=z.arrayFormat;if("commaRoundTrip"in W&&typeof W.commaRoundTrip!=="boolean")throw TypeError("`commaRoundTrip` must be a boolean, or absent");var Q=typeof W.allowDots>"u"?W.encodeDotInKeys===!0?!0:z.allowDots:!!W.allowDots;return{addQueryPrefix:typeof W.addQueryPrefix==="boolean"?W.addQueryPrefix:z.addQueryPrefix,allowDots:Q,allowEmptyArrays:typeof W.allowEmptyArrays==="boolean"?!!W.allowEmptyArrays:z.allowEmptyArrays,arrayFormat:o,charset:Y,charsetSentinel:typeof W.charsetSentinel==="boolean"?W.charsetSentinel:z.charsetSentinel,commaRoundTrip:!!W.commaRoundTrip,delimiter:typeof W.delimiter>"u"?z.delimiter:W.delimiter,encode:typeof W.encode==="boolean"?W.encode:z.encode,encodeDotInKeys:typeof W.encodeDotInKeys==="boolean"?W.encodeDotInKeys:z.encodeDotInKeys,encoder:typeof W.encoder==="function"?W.encoder:z.encoder,encodeValuesOnly:typeof W.encodeValuesOnly==="boolean"?W.encodeValuesOnly:z.encodeValuesOnly,filter:H,format:X,formatter:O,serializeDate:typeof W.serializeDate==="function"?W.serializeDate:z.serializeDate,skipNulls:typeof W.skipNulls==="boolean"?W.skipNulls:z.skipNulls,sort:typeof W.sort==="function"?W.sort:null,strictNullHandling:typeof W.strictNullHandling==="boolean"?W.strictNullHandling:z.strictNullHandling}};K.exports=function(W,Y){var X=W,O=q(Y),H,o;if(typeof O.filter==="function")o=O.filter,X=o("",X);else if(I(O.filter))o=O.filter,H=o;var Q=[];if(typeof X!=="object"||X===null)return"";var r=M[O.arrayFormat],g=r==="comma"&&O.commaRoundTrip;if(!H)H=Object.keys(X);if(O.sort)H.sort(O.sort);var A=w();for(var u=0;u<H.length;++u){var n=H[u],C=X[n];if(O.skipNulls&&C===null)continue;D(Q,$(C,n,r,g,O.allowEmptyArrays,O.strictNullHandling,O.skipNulls,O.encodeDotInKeys,O.encode?O.encoder:null,O.filter,O.sort,O.allowDots,O.serializeDate,O.format,O.formatter,O.encodeValuesOnly,O.charset,A))}var cc=Q.join(O.delimiter),Ic=O.addQueryPrefix===!0?"?":"";if(O.charsetSentinel)if(O.charset==="iso-8859-1")Ic+="utf8=%26%2310003%3B&";else Ic+="utf8=%E2%9C%93&";return cc.length>0?Ic+cc:""}}),k0=_((c,K)=>{var w=a6(),P=Object.prototype.hasOwnProperty,S=Array.isArray,h={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:w.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1000,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},M=function(b){return b.replace(/&#(\d+);/g,function($,q){return String.fromCharCode(parseInt(q,10))})},I=function(b,$,q){if(b&&typeof b==="string"&&$.comma&&b.indexOf(",")>-1)return b.split(",");if($.throwOnLimitExceeded&&q>=$.arrayLimit)throw RangeError("Array limit exceeded. Only "+$.arrayLimit+" element"+($.arrayLimit===1?"":"s")+" allowed in an array.");return b},G="utf8=%26%2310003%3B",D="utf8=%E2%9C%93",B=function(b,$){var q={__proto__:null},W=$.ignoreQueryPrefix?b.replace(/^\?/,""):b;W=W.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var Y=$.parameterLimit===1/0?void 0:$.parameterLimit,X=W.split($.delimiter,$.throwOnLimitExceeded?Y+1:Y);if($.throwOnLimitExceeded&&X.length>Y)throw RangeError("Parameter limit exceeded. Only "+Y+" parameter"+(Y===1?"":"s")+" allowed.");var O=-1,H,o=$.charset;if($.charsetSentinel){for(H=0;H<X.length;++H)if(X[H].indexOf("utf8=")===0){if(X[H]===D)o="utf-8";else if(X[H]===G)o="iso-8859-1";O=H,H=X.length}}for(H=0;H<X.length;++H){if(H===O)continue;var Q=X[H],r=Q.indexOf("]="),g=r===-1?Q.indexOf("="):r+1,A,u;if(g===-1)A=$.decoder(Q,h.decoder,o,"key"),u=$.strictNullHandling?null:"";else A=$.decoder(Q.slice(0,g),h.decoder,o,"key"),u=w.maybeMap(I(Q.slice(g+1),$,S(q[A])?q[A].length:0),function(C){return $.decoder(C,h.decoder,o,"value")});if(u&&$.interpretNumericEntities&&o==="iso-8859-1")u=M(String(u));if(Q.indexOf("[]=")>-1)u=S(u)?[u]:u;var n=P.call(q,A);if(n&&$.duplicates==="combine")q[A]=w.combine(q[A],u);else if(!n||$.duplicates==="last")q[A]=u}return q},L=function(b,$,q,W){var Y=0;if(b.length>0&&b[b.length-1]==="[]"){var X=b.slice(0,-1).join("");Y=Array.isArray($)&&$[X]?$[X].length:0}var O=W?$:I($,q,Y);for(var H=b.length-1;H>=0;--H){var o,Q=b[H];if(Q==="[]"&&q.parseArrays)o=q.allowEmptyArrays&&(O===""||q.strictNullHandling&&O===null)?[]:w.combine([],O);else{o=q.plainObjects?{__proto__:null}:{};var r=Q.charAt(0)==="["&&Q.charAt(Q.length-1)==="]"?Q.slice(1,-1):Q,g=q.decodeDotInKeys?r.replace(/%2E/g,"."):r,A=parseInt(g,10);if(!q.parseArrays&&g==="")o={0:O};else if(!isNaN(A)&&Q!==g&&String(A)===g&&A>=0&&(q.parseArrays&&A<=q.arrayLimit))o=[],o[A]=O;else if(g!=="__proto__")o[g]=O}O=o}return O},z=function(b,$,q,W){if(!b)return;var Y=q.allowDots?b.replace(/\.([^.[]+)/g,"[$1]"):b,X=/(\[[^[\]]*])/,O=/(\[[^[\]]*])/g,H=q.depth>0&&X.exec(Y),o=H?Y.slice(0,H.index):Y,Q=[];if(o){if(!q.plainObjects&&P.call(Object.prototype,o)){if(!q.allowPrototypes)return}Q.push(o)}var r=0;while(q.depth>0&&(H=O.exec(Y))!==null&&r<q.depth){if(r+=1,!q.plainObjects&&P.call(Object.prototype,H[1].slice(1,-1))){if(!q.allowPrototypes)return}Q.push(H[1])}if(H){if(q.strictDepth===!0)throw RangeError("Input depth exceeded depth option of "+q.depth+" and strictDepth is true");Q.push("["+Y.slice(H.index)+"]")}return L(Q,$,q,W)},V=function(b){if(!b)return h;if(typeof b.allowEmptyArrays<"u"&&typeof b.allowEmptyArrays!=="boolean")throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof b.decodeDotInKeys<"u"&&typeof b.decodeDotInKeys!=="boolean")throw TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(b.decoder!==null&&typeof b.decoder<"u"&&typeof b.decoder!=="function")throw TypeError("Decoder has to be a function.");if(typeof b.charset<"u"&&b.charset!=="utf-8"&&b.charset!=="iso-8859-1")throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof b.throwOnLimitExceeded<"u"&&typeof b.throwOnLimitExceeded!=="boolean")throw TypeError("`throwOnLimitExceeded` option must be a boolean");var $=typeof b.charset>"u"?h.charset:b.charset,q=typeof b.duplicates>"u"?h.duplicates:b.duplicates;if(q!=="combine"&&q!=="first"&&q!=="last")throw TypeError("The duplicates option must be either combine, first, or last");var W=typeof b.allowDots>"u"?b.decodeDotInKeys===!0?!0:h.allowDots:!!b.allowDots;return{allowDots:W,allowEmptyArrays:typeof b.allowEmptyArrays==="boolean"?!!b.allowEmptyArrays:h.allowEmptyArrays,allowPrototypes:typeof b.allowPrototypes==="boolean"?b.allowPrototypes:h.allowPrototypes,allowSparse:typeof b.allowSparse==="boolean"?b.allowSparse:h.allowSparse,arrayLimit:typeof b.arrayLimit==="number"?b.arrayLimit:h.arrayLimit,charset:$,charsetSentinel:typeof b.charsetSentinel==="boolean"?b.charsetSentinel:h.charsetSentinel,comma:typeof b.comma==="boolean"?b.comma:h.comma,decodeDotInKeys:typeof b.decodeDotInKeys==="boolean"?b.decodeDotInKeys:h.decodeDotInKeys,decoder:typeof b.decoder==="function"?b.decoder:h.decoder,delimiter:typeof b.delimiter==="string"||w.isRegExp(b.delimiter)?b.delimiter:h.delimiter,depth:typeof b.depth==="number"||b.depth===!1?+b.depth:h.depth,duplicates:q,ignoreQueryPrefix:b.ignoreQueryPrefix===!0,interpretNumericEntities:typeof b.interpretNumericEntities==="boolean"?b.interpretNumericEntities:h.interpretNumericEntities,parameterLimit:typeof b.parameterLimit==="number"?b.parameterLimit:h.parameterLimit,parseArrays:b.parseArrays!==!1,plainObjects:typeof b.plainObjects==="boolean"?b.plainObjects:h.plainObjects,strictDepth:typeof b.strictDepth==="boolean"?!!b.strictDepth:h.strictDepth,strictNullHandling:typeof b.strictNullHandling==="boolean"?b.strictNullHandling:h.strictNullHandling,throwOnLimitExceeded:typeof b.throwOnLimitExceeded==="boolean"?b.throwOnLimitExceeded:!1}};K.exports=function(b,$){var q=V($);if(b===""||b===null||typeof b>"u")return q.plainObjects?{__proto__:null}:{};var W=typeof b==="string"?B(b,q):b,Y=q.plainObjects?{__proto__:null}:{},X=Object.keys(W);for(var O=0;O<X.length;++O){var H=X[O],o=z(H,W[H],q,typeof b==="string");Y=w.merge(Y,o,q)}if(q.allowSparse===!0)return Y;return w.compact(Y)}}),x0=_((c,K)=>{var w=g0(),P=k0(),S=T4();K.exports={formats:S,parse:P,stringify:w}}),t9=h4(e4(),1),Z0={};K0(Z0,{zodSchemaKey:()=>o0,webSocketServerArgsKey:()=>N2,webSocketMessageArgsKey:()=>t2,webSocketKey:()=>P4,webSocketEventKey:()=>m0,webSocketEventArgumentsKey:()=>A0,webSocketConnectionArgsKey:()=>D2,webSocketCloseReasonArgsKey:()=>P8,webSocketCloseCodeArgsKey:()=>w8,routeModelArgsKey:()=>mc,responseStatusTextArgsKey:()=>h8,responseStatusArgsKey:()=>s2,responseHeadersArgsKey:()=>oc,responseBodyArgsKey:()=>d2,requestHeadersArgsKey:()=>K2,requestHeaderArgsKey:()=>ec,requestBodyArgsKey:()=>G2,requestArgsKey:()=>pc,queryArgsKey:()=>S8,paramsArgsKey:()=>y4,paramArgsKey:()=>j2,moduleKey:()=>i2,middlewareKey:()=>i4,interceptorKey:()=>n4,injectableKey:()=>K8,injectKey:()=>w4,httpServerArgsKey:()=>fc,guardKey:()=>c8,controllerKey:()=>K4,controllerHttpKey:()=>r0,contextArgsKey:()=>w2,containerKey:()=>J2,configKey:()=>C4,argumentsKey:()=>Uc});var Uc=Symbol.for("____boolTypescriptCore:arguments__"),A0=Symbol.for("____boolTypescriptCore:webSocketEventArguments__"),C4=Symbol.for("____boolTypescriptCore:config__"),K4=Symbol.for("____boolTypescriptCore:controller__"),n4=Symbol.for("____boolTypescriptCore:interceptor__"),c8=Symbol.for("____boolTypescriptCore:guard__"),r0=Symbol.for("____boolTypescriptCore:controller.http__"),w4=Symbol.for("____boolTypescriptCore:inject__"),K8=Symbol.for("____boolTypescriptCore:injectable__"),i4=Symbol.for("____boolTypescriptCore:middleware__"),i2=Symbol.for("____boolTypescriptCore:module__"),J2=Symbol.for("____boolTypescriptCore:container__"),o0=Symbol.for("____boolTypescriptCore:zodSchema__"),P4=Symbol.for("____boolTypescriptCore:webSocket__"),m0=Symbol.for("____boolTypescriptCore:webSocket:event__"),N2=Symbol.for("____boolTypescriptCore:webSocketArguments:server__"),D2=Symbol.for("____boolTypescriptCore:webSocketArguments:connection__"),t2=Symbol.for("____boolTypescriptCore:webSocketArguments:message__"),w8=Symbol.for("____boolTypescriptCore:webSocketArguments:closeCode__"),P8=Symbol.for("____boolTypescriptCore:webSocketArguments:closeReason__"),fc=Symbol.for("____boolTypescriptCore:httpArguments:server__"),K2=Symbol.for("____boolTypescriptCore:httpArguments:requestHeaders__"),ec=Symbol.for("____boolTypescriptCore:httpArguments:requestHeader__"),G2=Symbol.for("____boolTypescriptCore:httpArguments:requestBody__"),y4=Symbol.for("____boolTypescriptCore:httpArguments:params__"),j2=Symbol.for("____boolTypescriptCore:httpArguments:param__"),S8=Symbol.for("____boolTypescriptCore:httpArguments:query__"),pc=Symbol.for("____boolTypescriptCore:httpArguments:request__"),oc=Symbol.for("____boolTypescriptCore:httpArguments:responseHeaders__"),w2=Symbol.for("____boolTypescriptCore:httpArguments:context__"),mc=Symbol.for("____boolTypescriptCore:httpArguments:routeModel__"),d2=Symbol.for("____boolTypescriptCore:httpArguments:responseBody__"),s2=Symbol.for("____boolTypescriptCore:httpArguments:responseStatus__"),h8=Symbol.for("____boolTypescriptCore:httpArguments:responseStatusText__"),M8=(c)=>(K,w,P)=>{if(!w)return;let S=Reflect.getOwnMetadata(Uc,K.constructor,w)||{};S[`argumentIndexes.${P}`]={index:P,type:K2,validationSchema:c},Reflect.defineMetadata(Uc,S,K.constructor,w)};var I4=(c)=>(K,w,P)=>{if(!w)return;let S=Reflect.getOwnMetadata(Uc,K.constructor,w)||{};S[`argumentIndexes.${P}`]={index:P,type:w2,key:c},Reflect.defineMetadata(Uc,S,K.constructor,w)},W8=()=>(c,K,w)=>{if(!K)return;let P=Reflect.getOwnMetadata(Uc,c.constructor,K)||{};P[`argumentIndexes.${w}`]={index:w,type:mc},Reflect.defineMetadata(Uc,P,c.constructor,K)};var I8=(c)=>(K,w,P)=>{let S=Reflect.getMetadata(w4,K)||[];S[P]=c,Reflect.defineMetadata(w4,S,K)};var b8=()=>(c)=>{Reflect.defineMetadata(n4,void 0,c)},O8=()=>(c)=>{Reflect.defineMetadata(i4,void 0,c)};var d9=Symbol("__bool:webSocket.upgrade__");var u0=Object.freeze({400:"BAD_REQUEST",401:"UNAUTHORIZED",402:"PAYMENT_REQUIRED",403:"FORBIDDEN",404:"NOT_FOUND",405:"METHOD_NOT_ALLOWED",406:"NOT_ACCEPTABLE",407:"PROXY_AUTHENCATION_REQUIRED",408:"REQUEST_TIMEOUT",409:"CONFLICT",410:"GONE",411:"LENGTH_REQUIRED",412:"PRECONDITION_FAILED",413:"PAYLOAD_TOO_LARGE",414:"URI_TOO_LONG",415:"UNSUPPORTED_MEDIA_TYPE",416:"RANGE_NOT_SATISFIABLE",417:"EXPECTATION_FAILED",418:"IM_A_TEAPOT",421:"MISDIRECTED_REQUEST",422:"UNPROCESSABLE_ENTITY",423:"LOCKED",424:"FAILED_DEPENDENCY",425:"TOO_EARLY_",426:"UPGRAGE_REQUIRED",428:"PRECONDITION_REQUIRED",429:"TOO_MANY_REQUESTS",431:"REQUEST_HEADER_FIELDS_TOO_LARGE",451:"UNAVAILABLE_FOR_LEGAL_REASONS"});class P2 extends Error{httpCode;message;data;constructor({httpCode:c,data:K,message:w}){super();this.httpCode=c,this.message=!w?.trim()?u0[c]:w.trim(),this.data=K}}var C0=Object.freeze({500:"INTERNAL_SERVER_ERROR",501:"NOT_IMPLEMENTED",502:"BAD_GATEWAY",503:"SERVICE_UNAVAILABLE",504:"GATEWAY_TIMEOUT",505:"HTTP_VERSION_NOT_SUPPORTED",506:"VARIANT_ALSO_NEGOTIATES",507:"INSUFFICIENT_STORAGE",508:"LOOP_DETECTED",510:"NOT_EXTENDED",511:"NETWORK_AUTHENTICATION_REQUIRED"});class t4 extends Error{httpCode;message;data;constructor({httpCode:c,data:K,message:w}){super();this.httpCode=c,this.message=!w?.trim()?C0[c]:w.trim(),this.data=K}}var y0=(c,K=new Headers)=>{if(K.set("Content-Type","application/json"),c instanceof P2||c instanceof t4)return new Response(JSON.stringify(c),{status:c.httpCode,statusText:c.message,headers:K});return new Response(JSON.stringify((()=>{switch(typeof c){case"object":return!(c instanceof Error)?c:{message:c.message,code:c.name,cause:c.cause};case"string":return{message:c};case"number":return{code:c};default:return}})()),{status:500,statusText:"INTERNAL SERVER ERROR",headers:K})},gc;(function(c){c.year="year",c.month="month",c.day="day",c.hours="hours",c.minutes="minutes",c.seconds="seconds",c.miliseconds="miliseconds"})(gc||(gc={}));var _0=(c,K,w=gc.day)=>{let P=c instanceof Date?c:new Date(c);switch(w){case gc.year:P.setFullYear(P.getFullYear()+K);break;case gc.month:P.setMonth(P.getMonth()+K);break;case gc.day:P.setDate(P.getDate()+K);break;case gc.hours:P.setHours(P.getHours()+K);break;case gc.minutes:P.setMinutes(P.getMinutes()+K);break;case gc.seconds:P.setSeconds(P.getSeconds()+K);break;case gc.miliseconds:P.setMilliseconds(P.getMilliseconds()+K);break}return P},f0=h4(x0(),1),s9=async function(){}.constructor,f6=Object.freeze({black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,gray:90}),e6=Object.freeze({black:40,red:41,green:42,yellow:43,blue:44,magenta:45,cyan:46,white:47,gray:100}),c2=(c,K={})=>{let{color:w,backgroundColor:P,bold:S,underline:h}=K,M="";if(S)M+="\x1B[1m";if(h)M+="\x1B[4m";if(w&&f6[w])M+=`\x1B[${f6[w]}m`;if(P&&e6[P])M+=`\x1B[${e6[P]}m`;return`${M}${c}\x1B[0m`},e0=(c)=>{let{headers:K,method:w}=c,P=K.get("upgrade")?.toLowerCase()||"",S=K.get("connection")?.toLowerCase()||"";return w==="GET"&&P?.toLowerCase()==="websocket"&&S?.toLowerCase().includes("upgrade")};class a2{_staticMap=new Map;_dynamicMap=new Map;_options=void 0;constructor(...c){c.forEach((K)=>{K.staticEntries.forEach(([w,P])=>this.set(w,P,{isStatic:!0,isPassthrough:!0})),K.dynamicEntries.forEach(([w,P])=>this.set(w,P,{isStatic:!1}))})}get(c,K){return!(K||this._options)?.isStatic?this._dynamicMap.get(c):this._staticMap.get(c)}has(c,K){return!(K||this._options)?.isStatic?this._dynamicMap.has(c):this._staticMap.has(c)}set(c,K,w){let P=w||this._options;if(!P?.isStatic)this._dynamicMap.set(c,K);else if(!this._staticMap.has(c))this._staticMap.set(c,K);else if(!P.isPassthrough)throw Error(`${String(c)} already exists in context static collection.`);return this}setOptions(c){return this._options=c,this}get staticEntries(){return[...this._staticMap.entries()]}get dynamicEntries(){return[...this._dynamicMap.entries()]}}class lc{static rootPattern=":([a-z0-9A-Z_-]{1,})";static innerRootPattern="([a-z0-9A-Z_-]{1,})";alias;_map=new Map;constructor(c){this.alias=this._thinAlias(c)}test(c,K){try{let w=this._map.get(K),P=this.alias.split("/"),S=this._thinAlias(c).split("/");if(!w)return;if(P.length!==S.length)return;let h=Object(),M=this.alias.replace(new RegExp(lc.rootPattern,"g"),lc.innerRootPattern);if(!new RegExp(M).test(this._thinAlias(c)))return;for(let I=0;I<P.length;I++){let G=P[I],D=S[I];if(!new RegExp(lc.rootPattern,"g").test(G)){if(G!==D)return}else{let B=!1;if(G.replace(new RegExp(lc.rootPattern,"g"),(L,z,V)=>{if(V===0)D.replace(new RegExp(lc.innerRootPattern,"g"),(b,$,q)=>{if(q===0)Object.assign(h,{[z]:b});return b});return L}),B)return}continue}return Object.freeze({parameters:h,model:w})}catch(w){return console.error(w),!1}}isMatch(c,K){try{if(!this._map.get(K))return;let w=this.alias.split("/"),P=this._thinAlias(c).split("/");if(w.length!==P.length)return!1;let S=Object();for(let h=0;h<w.length;h++){let M=w[h],I=P[h];if(!new RegExp(lc.rootPattern,"g").test(M)){if(M!==I)return!1}else{let G=!1;if(M.replace(new RegExp(lc.rootPattern,"g"),(D,B,L)=>{if(!new RegExp(L,"g").test(I))G=!0;else Object.assign(S,{[B]:I});return""}),G)return!1}continue}return!0}catch(w){console.error(w);return}}get(c){if(!this._map.get("GET"))this._map.set("GET",c);return this}post(c){if(!this._map.get("POST"))this._map.set("POST",c);return this}put(c){if(!this._map.get("PUT"))this._map.set("PUT",c);return this}delete(c){if(!this._map.get("DELETE"))this._map.set("DELETE",c);return this}connect(c){if(!this._map.get("CONNECT"))return this._map.set("CONNECT",c);return this}options(c){if(!this._map.get("OPTIONS"))return this._map.set("OPTIONS",c);return this}trace(c){if(!this._map.get("TRACE"))return this._map.set("TRACE",c);return this}patch(c){if(!this._map.get("PATCH"))return this._map.set("PATCH",c);return this}_thinAlias(c){return c.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}get _fullPath(){return this.alias.split("/").map((c,K)=>{let w=new RegExp(":([a-z0-9A-Z_.-]{1,})(\\(.*?\\))","g");if(!w.test(c)){if(w=new RegExp(":([a-z0-9A-Z_.-]{1,})","g"),!w.test(c))return c;return c.replace(w,(P,S)=>`${P}(.*?)`)}return c}).join("/")}get _filteredPath(){return this.alias.split("/").map((c,K)=>{let w=new RegExp(":([a-z0-9A-Z_.-]{1,})((.*?))","g");if(!w.test(c)){if(w=new RegExp(":([a-z0-9A-Z_.-]{1,})","g"),!w.test(c))return c;return c.replace(w,(P,S)=>"(.*?)")}return c.replace(w,(P,S,h)=>h)}).join("/")}}var p0=lc;class _4{alias;_routes=new Map;constructor(c){this.alias=this._thinAlias(c)}route(c){let K=this._thinAlias(`${this.alias}/${c}`),w=this._routes.get(K),P=!w?new p0(`${this.alias}/${c}`):w;if(!w)this._routes.set(K,P);return P}_thinAlias(c){return c.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}get routes(){return this._routes}}class f4{_routers=new Map;add(...c){for(let K of c){if(this._routers.has(K.alias))continue;this._routers.set(K.alias,K)}return this}find(c,K){for(let w of this._routers.values())for(let P of w.routes.values()){let S=P.test(c,K);if(!S)continue;return S}return}}var a9=h4(e4(),1);class c4{_mapper=new Map;constructor(...c){c.forEach((K)=>{K.entries.forEach(([w,P])=>{this._mapper.set(w,P)})})}get(c){if(this._mapper.has(c))return this._mapper.get(c);if(typeof c!=="function")return;let K=Reflect.getMetadataKeys(c);if(![K8,K4,i4,c8,n4,P4].some((S)=>K.includes(S)))throw Error("Missing dependency declaration, please check @Injectable() used on dependency(ies).");let w=(Reflect.getOwnMetadata(w4,c)||[]).map((S)=>this.get(S)),P=new c(...w);return this._mapper.set(c,P),P}set(c,K){if(this._mapper.has(c))throw Error(`${String(c)} already exists in injector collection.`);this._mapper.set(c,K)}get entries(){return[...this._mapper.entries()]}}class J8{error;constructor(c){this.error=c}}var l0=J8;class N8{eventName;metadata;_context=void 0;constructor({eventName:c,metadata:K}){this.eventName=c,this.metadata=K}bind(c){return this._context=c,this}execute(){if(this._context&&typeof this.metadata.descriptor.value==="function")this.metadata.descriptor.value=this.metadata.descriptor.value.bind(this._context);return Object.freeze({methodName:this.metadata.methodName,descriptor:this.metadata.descriptor,arguments:this.metadata.arguments})}}class d4{rawAlias;alias;routes=[];constructor(c="/"){this.rawAlias=c,this.alias=d4.thinAlias(c)}addRoutes(...c){for(let K of c)if(!this.routes.includes(K))this.routes.push(K);return this}bind(c){for(let K of this.routes)K.bind(c);return this}execute(){let c=new Map;for(let K of this.routes)c.set(`${this.alias}:::${K.eventName}`,K.execute());return c}static thinAlias(c){return c.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}}class S4{rawPrefix;prefix;routers=[];constructor(c="/"){this.rawPrefix=c,this.prefix=S4.thinPrefix(c)}addRouters(...c){for(let K=0;K<c.length;K++)if(!this.routers.includes(c[K]))this.routers.push(c[K]);for(let K of c)if(!this.routers.includes(K))this.routers.push(K);return this}execute(){let c=new Map;for(let K of this.routers){let w=K.execute();for(let[P,S]of w.entries())c.set(`/${S4.thinPrefix(`${this.prefix}/${P}`)}`,S)}return c}static thinPrefix(c){return c.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}}class T0{classConstructor;options;#c;#K;#w=new c4;#P=new Map;#h;#M=900;#S;constructor(c,K){if(this.classConstructor=c,this.options=K,this.#K=Reflect.getOwnMetadataKeys(c),!this.#K.includes(J2)&&!this.#K.includes(i2))throw Error(`Can not detect! ${c.name} class is not a container or module.`);this.#M=typeof K.static?.cacheTimeInSeconds!=="number"?900:K.static.cacheTimeInSeconds,this.#h=Object.freeze({allowLogsMethods:this.options?.log?.methods||[],staticOption:this.options.static,allowOrigins:!this.options.cors?.origins?["*"]:typeof this.options.cors.origins!=="string"?this.options.cors.origins.includes("*")||this.options.cors.origins.length<1?["*"]:this.options.cors.origins:[this.options.cors.origins!=="*"?this.options.cors.origins:"*"],allowMethods:this.options.cors?.methods||["GET","POST","PUT","PATCH","DELETE","OPTIONS"],allowCredentials:!this.options.cors?.credentials?!1:!0,allowHeaders:!this.options.cors?.headers||this.options.cors.headers.includes("*")?["*"]:this.options.cors.headers})}useValidator(c){this.#S=c}async preLaunch(){if(this.#c)return this.#c;let c=!this.#K.includes(J2)?void 0:Reflect.getOwnMetadata(J2,this.classConstructor),K=!this.#K.includes(J2)?[this.classConstructor]:c?.modules||[],w=!c?void 0:await this.containerResolution({containerClass:this.classConstructor,options:this.options,extendInjector:this.#w}),P=await Promise.all(K.map((M)=>this.moduleResolution({moduleClass:M,options:this.options,extendInjector:!w?this.#w:w.injector})));if([...new Set(P.map((M)=>M.prefix))].length!==P.length)throw Error("Module prefix should be unique.");let S=new Map;for(let M of P){let I=M.webSocketRouterGroup.execute();for(let[G,D]of I.entries())S.set(G,D)}let h=Object.freeze({containerMetadata:c,modulesConverted:K,resolutedContainer:w,resolutedModules:P,webSocketsMap:S});return this.#c=h,h}async listen(){let{allowLogsMethods:c,allowOrigins:K,allowMethods:w,allowHeaders:P,allowCredentials:S,staticOption:h}=this.#h,{resolutedContainer:M,resolutedModules:I,webSocketsMap:G}=await this.preLaunch(),D=Bun.serve({port:this.options.port,fetch:async(B,L)=>{let z=performance.now(),V=new URL(B.url),b=f0.parse(V.searchParams.toString(),this.options.queryParser),$=B.headers.get("origin")||"*",q=B.method.toUpperCase(),W=new Headers,Y=new a2().setOptions({isStatic:!0}).set(fc,L).set(pc,B).set(ec,B.headers).set(oc,W).set(S8,b);try{let X=e0(B),O;if(X){for(let A of I){let u=A.webSocketHttpRouterGroup.find(V.pathname,B.method);if(u){O=Object.freeze({route:u,resolution:A});break}}if(!O)return this.finalizeResponse(new Response(JSON.stringify({httpCode:404,message:"Route not found",data:void 0}),{status:404,statusText:"Not found.",headers:W}));let g=await this.webSocketFetcher({request:B,server:L},{query:b,responseHeaders:W,route:O.route,moduleResolution:O.resolution});return g instanceof Response?g:void 0}if([...!S?[]:[{key:"Access-Control-Allow-Credentials",value:"true"}],{key:"Access-Control-Allow-Origin",value:K.includes("*")?"*":!K.includes($)?K[0]:$},{key:"Access-Control-Allow-Methods",value:w.join(", ")},{key:"Access-Control-Allow-Headers",value:P.join(", ")}].forEach(({key:g,value:A})=>W.set(g,A)),!w.includes(q))return this.finalizeResponse(new Response(void 0,{status:405,statusText:"Method Not Allowed.",headers:W}));if(B.method.toUpperCase()==="OPTIONS")return this.finalizeResponse(K.includes("*")||K.includes($)?new Response(void 0,{status:204,statusText:"No Content.",headers:W}):new Response(void 0,{status:417,statusText:"Expectation Failed.",headers:W}));if(h){let{path:g,headers:A}=h,u=`${g}/${V.pathname}`,n=this.#P.get(u);if(!n){let C=Bun.file(u);if(await C.exists()){if(A)for(let[cc,Ic]of Object.entries(A))W.set(cc,Ic);return W.set("Content-Type",C.type),this.finalizeResponse(new Response(await C.arrayBuffer(),{status:200,statusText:"SUCCESS",headers:W}))}}else{let C=new Date>n.expiredAt;if(C)this.#P.delete(u);let cc=!C?n.file:Bun.file(u);if(await cc.exists()){if(this.#P.set(u,Object.freeze({expiredAt:_0(new Date,this.#M,gc.seconds),file:cc})),A)for(let[Ic,wc]of Object.entries(A))W.set(Ic,wc);return W.set("Content-Type",cc.type),this.finalizeResponse(new Response(await cc.arrayBuffer(),{status:200,statusText:"SUCCESS",headers:W}))}}}if(M){let{context:g}=await this.httpFetcher({context:Y,resolutedMap:{injector:M.injector,startMiddlewareGroup:M.startMiddlewareGroup,guardGroup:M.guardGroup},options:{isContainer:!0}});Y=g}for(let g of I){let A=g.controllerRouterGroup.find(V.pathname,q);if(A){O=Object.freeze({route:A,resolution:g});break}}if(!O)Y.setOptions({isStatic:!1}).set(s2,404).set(h8,"Not found.").set(d2,{httpCode:404,message:"Route not found",data:void 0});else{let{context:g}=await this.httpFetcher({context:Y,route:O.route,resolutedMap:O.resolution});Y=g}if(M){let{context:g}=await this.httpFetcher({context:Y,resolutedMap:{injector:M.injector,endMiddlewareGroup:M.endMiddlewareGroup},options:{isContainer:!0}});Y=g}let H=Y.get(oc,{isStatic:!0})||new Headers,o=Y.get(d2,{isStatic:!1})||void 0,Q=Y.get(s2,{isStatic:!1}),r=Y.get(s2,{isStatic:!1});return this.serializeResponse({status:typeof Q!=="number"?void 0:Q,statusText:typeof r!=="string"?void 0:r,headers:H,data:o})}catch(X){return this.options.debug&&console.error(X),this.finalizeResponse(y0(X,W))}finally{if(c){let X=performance.now(),O=c2(V.pathname,{color:"blue"}),H=`${Bun.color("yellow","ansi")}${process.pid}`,o=c2(B.method,{color:"yellow",backgroundColor:"blue"}),Q=c2(`${B.headers.get("x-forwarded-for")||B.headers.get("x-real-ip")||L.requestIP(B)?.address||"<Unknown>"}`,{color:"yellow"}),r=c2(`${Math.round((X-z+Number.EPSILON)*100)/100}ms`,{color:"yellow",backgroundColor:"blue"});c.includes(B.method.toUpperCase())&&console.info(`PID: ${H} - Method: ${o} - IP: ${Q} - ${O} - Time: ${r}`)}}},websocket:{open:(B)=>{let L=`${B.data.pathname}:::open`,z=G.get(L);if(!z)return;let V=z.arguments||{},b=[];for(let[$,q]of Object.entries(V))switch(q.type){case D2:b[q.index]=B;break;case N2:b[q.index]=D;break}z.descriptor.value(...b)},close:(B,L,z)=>{let V=`${B.data.pathname}:::close`,b=G.get(V);if(!b)return;let $=b.arguments||{},q=[];for(let[W,Y]of Object.entries($))switch(Y.type){case D2:q[Y.index]=B;break;case N2:q[Y.index]=D;break;case w8:q[Y.index]=L;break;case P8:q[Y.index]=z;break}b.descriptor.value(...q)},message:(B,L)=>{let z=`${B.data.pathname}:::message`,V=G.get(z);if(!V)return;let b=V.arguments||{},$=[];for(let[q,W]of Object.entries(b))switch(W.type){case D2:$[W.index]=B;break;case t2:$[W.index]=L;break;case N2:$[W.index]=D;break}V.descriptor.value(...$)},drain:(B)=>{let L=`${B.data.pathname}:::drain`,z=G.get(L);if(!z)return;let V=z.arguments||{},b=[];for(let[$,q]of Object.entries(V))switch(q.type){case D2:b[q.index]=B;break;case N2:b[q.index]=D;break}z.descriptor.value(...b)},ping:(B,L)=>{let z=`${B.data.pathname}:::ping`,V=G.get(z);if(!V)return;let b=V.arguments||{},$=[];for(let[q,W]of Object.entries(b))switch(W.type){case D2:$[W.index]=B;break;case N2:$[W.index]=D;break;case t2:$[W.index]=L;break}V.descriptor.value(...$)},pong:(B,L)=>{let z=`${B.data.pathname}:::pong`,V=G.get(z);if(!V)return;let b=V.arguments||{},$=[];for(let[q,W]of Object.entries(b))switch(W.type){case D2:$[W.index]=B;break;case N2:$[W.index]=D;break;case t2:$[W.index]=L;break}V.descriptor.value(...$)}}})}async containerResolution({containerClass:c,options:K,extendInjector:w}){if(!Reflect.getOwnMetadataKeys(c).includes(J2))throw Error(`${c.name} is not a container.`);let P=new c4(w),S=Reflect.getOwnMetadata(J2,c),{loaders:h,middlewares:M,guards:I,dependencies:G,config:D}=S||{},{config:B}=Object.freeze({config:{...typeof K.config!=="function"?K.config:await K.config(),...typeof D!=="function"?typeof D!=="object"?void 0:("key"in D)&&("value"in D)&&typeof D.key==="symbol"?typeof D.value!=="function"?D.value:await D.value():D:await D()}});if(P.set(D&&"key"in D&&"value"in D&&typeof D.key==="symbol"?D.key:C4,B),h){let b=[];for(let[q,W]of Object.entries(h))b.push(async()=>{try{let Y=await W({config:B});return console.info(`${c2(" INFO ",{color:"white",backgroundColor:"blue",bold:!0})} Loader [${q}] initialized successfully.`),Y}catch(Y){throw console.error(`${c2(" WARN ",{color:"yellow",backgroundColor:"red",bold:!0})} Loader [${q}] initialization failed.`),K.debug&&console.error(Y),Y}});let $=await Promise.all(b.map((q)=>q()));for(let[q,W]of $)P.set(q,W)}!G||G.map((b)=>P.get(b));let L=[],z=[];!M||M.forEach((b)=>{let $=P.get(b);if($.start&&typeof $.start==="function"){let q=Reflect.getOwnMetadata(Uc,b,"start")||{};L.push(Object.freeze({class:b,funcName:"start",func:$.start.bind($),argumentsMetadata:q}))}if($.end&&typeof $.end==="function"){let q=Reflect.getOwnMetadata(Uc,b,"end")||{};z.push(Object.freeze({class:b,funcName:"end",func:$.end.bind($),argumentsMetadata:q}))}});let V=!I?[]:I.map((b)=>{let $=P.get(b),q=Reflect.getOwnMetadata(Uc,b,"enforce")||{};return Object.freeze({class:b,funcName:"enforce",func:$.enforce.bind($),argumentsMetadata:q})});return Object.freeze({injector:P,startMiddlewareGroup:L,endMiddlewareGroup:z,guardGroup:V})}async moduleResolution({moduleClass:c,options:K,extendInjector:w}){if(!Reflect.getOwnMetadataKeys(c).includes(i2))throw Error(`${c.name} is not a module.`);let P=new c4(w),S=Reflect.getOwnMetadata(i2,c),{loaders:h,middlewares:M,guards:I,interceptors:G,controllers:D,dependencies:B,webSockets:L,prefix:z,config:V}=S||{},b=`${K.prefix||""}/${z||""}`,{config:$}=Object.freeze({config:{...typeof K.config!=="function"?K.config:await K.config(),...typeof V!=="function"?typeof V!=="object"?void 0:("key"in V)&&("value"in V)&&typeof V.key==="symbol"?typeof V.value!=="function"?V.value:await V.value():V:await V()}});if(P.set(V&&"key"in V&&"value"in V&&typeof V.key==="symbol"?V.key:C4,$),h){let r=[];for(let[A,u]of Object.entries(h))r.push(async()=>{try{let n=await u({config:$});return console.info(`${c2(" INFO ",{color:"white",backgroundColor:"blue",bold:!0})} Loader [${A}] initialized successfully.`),n}catch(n){throw console.error(`${c2(" WARN ",{color:"yellow",backgroundColor:"red",bold:!0})} Loader [${A}] initialization failed.`),K.debug&&console.error(n),n}});let g=await Promise.all(r.map((A)=>A()));for(let A=0;A<g.length;A++){let[u,n]=g[A];P.set(u,n)}}!B||B.map((r)=>P.get(r));let q=[],W=[];!M||M.forEach((r)=>{let g=P.get(r);if(g.start&&typeof g.start==="function"){let A=Reflect.getOwnMetadata(Uc,r,"start")||{};q.push(Object.freeze({class:r,funcName:"start",func:g.start.bind(g),argumentsMetadata:A}))}if(g.end&&typeof g.end==="function"){let A=Reflect.getOwnMetadata(Uc,r,"end")||{};W.push(Object.freeze({class:r,funcName:"end",func:g.end.bind(g),argumentsMetadata:A}))}});let Y=!I?[]:I.map((r)=>{let g=P.get(r),A=Reflect.getOwnMetadata(Uc,r,"enforce")||{};return Object.freeze({class:r,funcName:"enforce",func:g.enforce.bind(g),argumentsMetadata:A})}),X=[],O=[];!G||G.forEach((r)=>{let g=P.get(r);if(g.open&&typeof g.open==="function"){let A=Reflect.getOwnMetadata(Uc,r,"open")||{};X.push(Object.freeze({class:r,funcName:"open",func:g.open.bind(g),argumentsMetadata:A}))}if(g.close&&typeof g.close==="function"){let A=Reflect.getOwnMetadata(Uc,r,"close")||{};O.push(Object.freeze({class:r,funcName:"close",func:g.close.bind(g),argumentsMetadata:A}))}});let H=new f4;!D||D.forEach((r)=>this.initControllerInstance({controllerConstructor:r,httpRouterGroup:H,injector:P,prefix:b}));let o=new f4,Q=new S4;return L&&L.forEach((r)=>this.initWebSocketInstance({webSocketConstructor:r,httpRouterGroup:o,webSocketRouterGroup:Q,injector:P,prefix:b})),Object.freeze({prefix:z||"",injector:P,startMiddlewareGroup:q,endMiddlewareGroup:W,guardGroup:Y,openInterceptorGroup:X,closeInterceptorGroup:O,controllerRouterGroup:H,webSocketHttpRouterGroup:o,webSocketRouterGroup:Q})}async argumentsResolution(c,K,w,P){if(!this.#S)return c;try{let S=await this.#S.validate(c,K,w,P);if(!(S instanceof l0))return S;throw new P2({httpCode:400,message:`Validation at the [${P.toString()}] method fails at positional argument [${w}].`,data:S.error})}catch(S){if(S instanceof P2)throw S;throw new t4({httpCode:500,message:`Validation at the [${P.toString()}] method error at positional argument [${w}].`,data:!(S instanceof Error)?S:[{message:S.message,code:S.name,cause:S.cause}]})}}initControllerInstance({controllerConstructor:c,httpRouterGroup:K,injector:w,prefix:P}){if(!Reflect.getOwnMetadataKeys(c).includes(K4))throw Error(`${c.name} is not a controller.`);let S=w.get(c);if(!S)throw Error("Can not initialize controller.");let h=Reflect.getOwnMetadata(K4,c)||{prefix:"/",httpMetadata:[]},M=new _4(`/${P||""}/${h.prefix}`);return h.httpMetadata.forEach((I)=>{if(typeof I.descriptor.value!=="function")return;let G=M.route(I.path),D=I.descriptor.value.bind(S),B=Object.freeze({class:c,funcName:I.methodName,func:D,argumentsMetadata:I.argumentsMetadata});switch(I.httpMethod){case"GET":return G.get(B);case"POST":return G.post(B);case"PUT":return G.put(B);case"PATCH":return G.patch(B);case"DELETE":return G.delete(B);case"OPTIONS":return G.options(B)}}),K.add(M)}initWebSocketInstance({injector:c,httpRouterGroup:K,prefix:w,webSocketRouterGroup:P,webSocketConstructor:S}){if(!Reflect.getOwnMetadataKeys(S).includes(P4))throw Error(`${S.name} is not a websocket route.`);let h=c.get(S);if(!h)throw Error("Can not initialize webSocket.");let M=Reflect.getOwnMetadata(P4,S)||{prefix:"/",events:[],http:[]},I=`/${w||""}/${M.prefix}`,G=new _4(I);for(let[B,L]of Object.entries(M.http)){if(typeof L.descriptor?.value!=="function")continue;let z=G.route(L.path),V=L.descriptor.value.bind(h),b=Object.freeze({class:S,funcName:L.methodName,func:V,argumentsMetadata:L.argumentsMetadata});switch(L.httpMethod){case"GET":z.get(b);break;case"POST":z.post(b);break}}K.add(G);let D=new d4(I);for(let[B,L]of Object.entries(M.events)){let z=new N8({eventName:B,metadata:L});D.addRoutes(z)}return D.bind(h),P.addRouters(D),Object.freeze({httpRouterGroup:K,webSocketRouterGroup:P})}serializeResponse({status:c,statusText:K,headers:w,data:P}){let S=w.get("Content-Type")||"text/plain";if(S.includes("application/json"))return this.finalizeResponse(new Response(P instanceof ReadableStream?P:JSON.stringify(P),{status:c,statusText:K,headers:w}));if(S.includes("text/plain")||S.includes("text/html"))return this.finalizeResponse(new Response(P instanceof ReadableStream?P:String(P),{status:c,statusText:K,headers:w}));if(S.includes("application/octet-stream")){if(P instanceof Uint8Array||P instanceof ArrayBuffer||P instanceof Blob||P instanceof ReadableStream)return this.finalizeResponse(new Response(P instanceof Uint8Array?String.fromCharCode(...new Uint8Array(P)):P,{status:c,statusText:K,headers:w}));throw Error("Invalid data type for application/octet-stream")}if(S.includes("multipart/form-data")){if(P instanceof FormData)return this.finalizeResponse(new Response(P,{status:c,statusText:K,headers:w}));throw Error("multipart/form-data requires FormData object")}return this.finalizeResponse(new Response(String(P),{status:c,statusText:K,headers:w}))}finalizeResponse(c){return c.headers.set("X-Powered-By","Bool Typescript"),c}async httpFetcher({context:c,route:K,options:w,resolutedMap:P}){let S={isStatic:!0},h=(!c?new a2:new a2(c)).setOptions(S);if(K)h.set(y4,K.parameters).set(mc,K.model);let M=h.get(fc,S)||void 0,I=h.get(pc,S)||void 0,G=h.get(ec,S)||void 0,D=h.get(oc,S)||void 0,B=h.get(y4,S)||void 0,L=h.get(mc,S)||void 0;if(P){let{startMiddlewareGroup:z,guardGroup:V}=P;if(z)for(let b=0;b<z.length;b++){let $=[],{func:q,funcName:W,argumentsMetadata:Y}=z[b];for(let[X,O]of Object.entries(Y))switch(O.type){case w2:$[O.index]=!O.key?h:h.get(O.key,S);break;case pc:$[O.index]=!O.validationSchema?I:await this.argumentsResolution(I,O.validationSchema,O.index,W);break;case G2:$[O.index]=!O.validationSchema?await I?.[O.parser||"json"]():await this.argumentsResolution(await I?.[O.parser||"json"](),O.validationSchema,O.index,W);break;case K2:$[O.index]=!O.validationSchema?G:await this.argumentsResolution(G?.toJSON(),O.validationSchema,O.index,W);break;case ec:$[O.index]=!O.validationSchema?G?.get(O.key)||void 0:await this.argumentsResolution(G?.get(O.key)||void 0,O.validationSchema,O.index,W);break;case j2:$[O.index]=!O.validationSchema?B?.[O.key]||void 0:await this.argumentsResolution(B?.[O.key]||void 0,O.validationSchema,O.index,W);break;case mc:$[O.index]=L;break;case oc:$[O.index]=D;break;case fc:$[O.index]=M;break;default:$[O.index]=!O.validationSchema?!h.has(O.type,S)?void 0:h.get(O.type,S):await this.argumentsResolution(!(O.type in h)?void 0:h.get(O.type,S),O.validationSchema,O.index,W);break}await q(...$)}if(V)for(let b=0;b<V.length;b++){let $=[],{func:q,funcName:W,argumentsMetadata:Y}=V[b];for(let[O,H]of Object.entries(Y))switch(H.type){case pc:$[H.index]=!H.validationSchema?I:await this.argumentsResolution(I,H.validationSchema,H.index,W);break;case G2:$[H.index]=!H.validationSchema?await I?.[H.parser||"json"]():await this.argumentsResolution(await I?.[H.parser||"json"](),H.validationSchema,H.index,W);break;case w2:$[H.index]=!H.key?h:h.get(H.key);break;case K2:$[H.index]=!H.validationSchema?G:await this.argumentsResolution(G?.toJSON(),H.validationSchema,H.index,W);break;case oc:$[H.index]=D;break;case ec:$[H.index]=!H.validationSchema?G?.get(H.key)||void 0:await this.argumentsResolution(G?.get(H.key)||void 0,H.validationSchema,H.index,W);break;case j2:$[H.index]=!H.validationSchema?B?.[H.key]||void 0:await this.argumentsResolution(B?.[H.key],H.validationSchema,H.index,W);break;case mc:$[H.index]=L;break;case fc:$[H.index]=M;break;default:$[H.index]=!H.validationSchema?!h.has(H.type)?void 0:h.get(H.type):await this.argumentsResolution(h.get(H.type),H.validationSchema,H.index,W);break}let X=await q(...$);if(typeof X!=="boolean"||!X)throw new P2({httpCode:401,message:"Unauthorization.",data:void 0})}}if(L&&!w?.isContainer){if(P&&"openInterceptorGroup"in P&&P.openInterceptorGroup){let{openInterceptorGroup:q}=P;for(let W=0;W<q.length;W++){let Y=[],{func:X,funcName:O,argumentsMetadata:H}=q[W];for(let[o,Q]of Object.entries(H))switch(Q.type){case pc:Y[Q.index]=!Q.validationSchema?I:await this.argumentsResolution(I,Q.validationSchema,Q.index,O);break;case G2:Y[Q.index]=!Q.validationSchema?await I?.[Q.parser||"json"]():await this.argumentsResolution(await I?.[Q.parser||"json"](),Q.validationSchema,Q.index,O);break;case w2:Y[Q.index]=!Q.key?h:h.get(Q.key);break;case K2:Y[Q.index]=!Q.validationSchema?G:await this.argumentsResolution(G?.toJSON(),Q.validationSchema,Q.index,O);break;case ec:Y[Q.index]=!Q.validationSchema?G?.get(Q.key)||void 0:await this.argumentsResolution(G?.get(Q.key)||void 0,Q.validationSchema,Q.index,O);break;case oc:Y[Q.index]=D;break;case j2:Y[Q.index]=!Q.validationSchema?B?.[Q.key]||void 0:await this.argumentsResolution(B?.[Q.key]||void 0,Q.validationSchema,Q.index,O);break;case mc:Y[Q.index]=L;break;case fc:Y[Q.index]=M;break;default:Y[Q.index]=!Q.validationSchema?!h.has(Q.type)?void 0:h.get(Q.type):await this.argumentsResolution(h.get(Q.type),Q.validationSchema,Q.index,O);break}await X(...Y)}}let z=[],{func:V,funcName:b,argumentsMetadata:$}=L;for(let[q,W]of Object.entries($))switch(W.type){case pc:z[W.index]=!W.validationSchema?I:await this.argumentsResolution(I,W.validationSchema,W.index,b);break;case G2:z[W.index]=!W.validationSchema?await I?.[W.parser||"json"]():await this.argumentsResolution(await I?.[W.parser||"json"](),W.validationSchema,W.index,b);break;case w2:z[W.index]=!W.key?h:h.get(W.key);break;case K2:z[W.index]=!W.validationSchema?G:await this.argumentsResolution(G?.toJSON(),W.validationSchema,W.index,b);break;case ec:z[W.index]=!W.validationSchema?G?.get(W.key)||void 0:await this.argumentsResolution(G?.get(W.key)||void 0,W.validationSchema,W.index,b);break;case oc:z[W.index]=D;break;case j2:z[W.index]=!W.validationSchema?B?.[W.key]||void 0:await this.argumentsResolution(B?.[W.key]||void 0,W.validationSchema,W.index,b);break;case mc:z[W.index]=L;break;case fc:z[W.index]=M;break;default:z[W.index]=!W.validationSchema?!h.has(W.type)?void 0:h.get(W.type):await this.argumentsResolution(h.get(W.type),W.validationSchema,W.index,b);break}if(h.set(d2,await V(...z),{isStatic:!1}),P&&"closeInterceptorGroup"in P&&P.closeInterceptorGroup){let{closeInterceptorGroup:q}=P;for(let W=0;W<q.length;W++){let Y=[],{func:X,funcName:O,argumentsMetadata:H}=q[W];for(let[o,Q]of Object.entries(H))switch(Q.type){case pc:Y[Q.index]=!Q.validationSchema?I:await this.argumentsResolution(I,Q.validationSchema,Q.index,O);break;case G2:Y[Q.index]=!Q.validationSchema?await I?.[Q.parser||"json"]():await this.argumentsResolution(await I?.[Q.parser||"json"](),Q.validationSchema,Q.index,O);break;case w2:Y[Q.index]=!Q.key?h:h.get(Q.key);break;case K2:Y[Q.index]=!Q.validationSchema?G:await this.argumentsResolution(G?.toJSON(),Q.validationSchema,Q.index,O);break;case oc:Y[Q.index]=h.get(Q.type);break;case ec:Y[Q.index]=!Q.validationSchema?G?.get(Q.key)||void 0:await this.argumentsResolution(G?.get(Q.key)||void 0,Q.validationSchema,Q.index,O);break;case j2:Y[Q.index]=!Q.validationSchema?B?.[Q.key]||void 0:await this.argumentsResolution(B?.[Q.key]||void 0,Q.validationSchema,Q.index,O);break;case mc:Y[Q.index]=L;break;case fc:Y[Q.index]=M;break;default:Y[Q.index]=!Q.validationSchema?!h.has(Q.type)?void 0:h.get(Q.type):await this.argumentsResolution(h.get(Q.type),Q.validationSchema,Q.index,O);break}await X(...Y)}}}if(P){let{endMiddlewareGroup:z}=P;if(z)for(let V=0;V<z.length;V++){let b=[],{func:$,funcName:q,argumentsMetadata:W}=z[V];for(let[Y,X]of Object.entries(W))switch(X.type){case pc:b[X.index]=!X.validationSchema?I:await this.argumentsResolution(I,X.validationSchema,X.index,q);break;case G2:b[X.index]=!X.validationSchema?await I?.[X.parser||"json"]():await this.argumentsResolution(await I?.[X.parser||"json"](),X.validationSchema,X.index,q);break;case w2:b[X.index]=!X.key?h:h.get(X.key);break;case K2:b[X.index]=!X.validationSchema?G:await this.argumentsResolution(G?.toJSON(),X.validationSchema,X.index,q);break;case oc:b[X.index]=h.get(X.type);break;case ec:b[X.index]=!X.validationSchema?G?.get(X.key)||void 0:await this.argumentsResolution(G?.get(X.key)||void 0,X.validationSchema,X.index,q);break;case j2:b[X.index]=!X.validationSchema?B?.[X.key]||void 0:await this.argumentsResolution(B?.[X.key]||void 0,X.validationSchema,X.index,q);break;case mc:b[X.index]=L;break;case fc:b[X.index]=M;break;default:b[X.index]=!X.validationSchema?!h.has(X.type)?void 0:h.get(X.type):await this.argumentsResolution(!(X.type in h)?void 0:h.get(X.type),X.validationSchema,X.index,q);break}await $(...b)}}return Object.freeze({context:h})}async webSocketFetcher(c,K){let{request:w,server:P}=c,{query:S,responseHeaders:h,route:{model:M}}=K,I=await M.func(...[P,w,S]);if(typeof I!=="boolean")return this.finalizeResponse(new Response(JSON.stringify({httpCode:500,message:"Can not detect webSocket upgrade result.",data:void 0}),{status:500,statusText:"Internal server error.",headers:h}));if(!I)return this.finalizeResponse(new Response(JSON.stringify({httpCode:500,message:"Can not upgrade.",data:void 0}),{status:500,statusText:"Internal server error.",headers:h}));return I}}var cw=h4(e4(),1);var s4=()=>I4(Nc.authState);var n0=()=>(c)=>{Reflect.defineMetadata(Nc.guardMetadata,void 0,c)};class a4{open(c,K){if(Reflect.getOwnMetadataKeys(c.class.prototype,c.funcName).includes(Nc.authState)){if(!K)throw new P2({httpCode:401,message:"Unauthorized",data:void 0});return}if(Reflect.getOwnMetadataKeys(c.class).includes(Nc.authState)){if(!K)throw new P2({httpCode:401,message:"Unauthorized",data:void 0});return}}}Y2([O2(0,W8()),O2(1,s4())],a4.prototype,"open",null),a4=Y2([b8()],a4);var Tc=new TextEncoder,V2=new TextDecoder;function D8(...c){let K=c.reduce((S,{length:h})=>S+h,0),w=new Uint8Array(K),P=0;for(let S of c)w.set(S,P),P+=S.length;return w}function G8(c){if(Uint8Array.prototype.toBase64)return c.toBase64();let K=32768,w=[];for(let P=0;P<c.length;P+=K)w.push(String.fromCharCode.apply(null,c.subarray(P,P+K)));return btoa(w.join(""))}function j8(c){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(c);let K=atob(c),w=new Uint8Array(K.length);for(let P=0;P<K.length;P++)w[P]=K.charCodeAt(P);return w}function X8(c){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof c==="string"?c:V2.decode(c),{alphabet:"base64url"});let K=c;if(K instanceof Uint8Array)K=V2.decode(K);K=K.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return j8(K)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function b4(c){let K=c;if(typeof K==="string")K=Tc.encode(K);if(Uint8Array.prototype.toBase64)return K.toBase64({alphabet:"base64url",omitPadding:!0});return G8(K).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class O4 extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(c,K){super(c,K);this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class kc extends O4{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class S2 extends O4{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class c6 extends O4{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}function uc(c,K="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${K} must be ${c}`)}function L2(c,K){return c.name===K}function K6(c){return parseInt(c.name.slice(4),10)}function d0(c){switch(c){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}function s0(c,K){if(K&&!c.usages.includes(K))throw TypeError(`CryptoKey does not support this operation, its usages must include ${K}.`)}function B8(c,K,w){switch(K){case"HS256":case"HS384":case"HS512":{if(!L2(c.algorithm,"HMAC"))throw uc("HMAC");let P=parseInt(K.slice(2),10);if(K6(c.algorithm.hash)!==P)throw uc(`SHA-${P}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!L2(c.algorithm,"RSASSA-PKCS1-v1_5"))throw uc("RSASSA-PKCS1-v1_5");let P=parseInt(K.slice(2),10);if(K6(c.algorithm.hash)!==P)throw uc(`SHA-${P}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!L2(c.algorithm,"RSA-PSS"))throw uc("RSA-PSS");let P=parseInt(K.slice(2),10);if(K6(c.algorithm.hash)!==P)throw uc(`SHA-${P}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!L2(c.algorithm,"Ed25519"))throw uc("Ed25519");break}case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":{if(!L2(c.algorithm,K))throw uc(K);break}case"ES256":case"ES384":case"ES512":{if(!L2(c.algorithm,"ECDSA"))throw uc("ECDSA");let P=d0(K);if(c.algorithm.namedCurve!==P)throw uc(P,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}s0(c,w)}function z8(c,K,...w){if(w=w.filter(Boolean),w.length>2){let P=w.pop();c+=`one of type ${w.join(", ")}, or ${P}.`}else if(w.length===2)c+=`one of type ${w[0]} or ${w[1]}.`;else c+=`of type ${w[0]}.`;if(K==null)c+=` Received ${K}`;else if(typeof K==="function"&&K.name)c+=` Received function ${K.name}`;else if(typeof K==="object"&&K!=null){if(K.constructor?.name)c+=` Received an instance of ${K.constructor.name}`}return c}var $8=(c,...K)=>{return z8("Key must be ",c,...K)};function w6(c,K,...w){return z8(`Key for the ${c} algorithm must be `,K,...w)}function P6(c){return c?.[Symbol.toStringTag]==="CryptoKey"}function S6(c){return c?.[Symbol.toStringTag]==="KeyObject"}var h6=(c)=>{return P6(c)||S6(c)};var Q8=(...c)=>{let K=c.filter(Boolean);if(K.length===0||K.length===1)return!0;let w;for(let P of K){let S=Object.keys(P);if(!w||w.size===0){w=new Set(S);continue}for(let h of S){if(w.has(h))return!1;w.add(h)}}return!0};function a0(c){return typeof c==="object"&&c!==null}var J4=(c)=>{if(!a0(c)||Object.prototype.toString.call(c)!=="[object Object]")return!1;if(Object.getPrototypeOf(c)===null)return!0;let K=c;while(Object.getPrototypeOf(K)!==null)K=Object.getPrototypeOf(K);return Object.getPrototypeOf(c)===K};var U8=(c,K)=>{if(c.startsWith("RS")||c.startsWith("PS")){let{modulusLength:w}=K.algorithm;if(typeof w!=="number"||w<2048)throw TypeError(`${c} requires key modulusLength to be 2048 bits or larger`)}};function c1(c){let K,w;switch(c.kty){case"AKP":{switch(c.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":K={name:c.alg},w=c.priv?["sign"]:["verify"];break;default:throw new kc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(c.alg){case"PS256":case"PS384":case"PS512":K={name:"RSA-PSS",hash:`SHA-${c.alg.slice(-3)}`},w=c.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":K={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${c.alg.slice(-3)}`},w=c.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":K={name:"RSA-OAEP",hash:`SHA-${parseInt(c.alg.slice(-3),10)||1}`},w=c.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new kc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(c.alg){case"ES256":K={name:"ECDSA",namedCurve:"P-256"},w=c.d?["sign"]:["verify"];break;case"ES384":K={name:"ECDSA",namedCurve:"P-384"},w=c.d?["sign"]:["verify"];break;case"ES512":K={name:"ECDSA",namedCurve:"P-521"},w=c.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":K={name:"ECDH",namedCurve:c.crv},w=c.d?["deriveBits"]:[];break;default:throw new kc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(c.alg){case"Ed25519":case"EdDSA":K={name:"Ed25519"},w=c.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":K={name:c.crv},w=c.d?["deriveBits"]:[];break;default:throw new kc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new kc('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:K,keyUsages:w}}var Y8=async(c)=>{if(!c.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:K,keyUsages:w}=c1(c),P={...c};if(P.kty!=="AKP")delete P.alg;return delete P.use,crypto.subtle.importKey("jwk",P,K,c.ext??(c.d||c.priv?!1:!0),c.key_ops??w)};var H8=(c,K,w,P,S)=>{if(S.crit!==void 0&&P?.crit===void 0)throw new c('"crit" (Critical) Header Parameter MUST be integrity protected');if(!P||P.crit===void 0)return new Set;if(!Array.isArray(P.crit)||P.crit.length===0||P.crit.some((M)=>typeof M!=="string"||M.length===0))throw new c('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let h;if(w!==void 0)h=new Map([...Object.entries(w),...K.entries()]);else h=K;for(let M of P.crit){if(!h.has(M))throw new kc(`Extension Header Parameter "${M}" is not recognized`);if(S[M]===void 0)throw new c(`Extension Header Parameter "${M}" is missing`);if(h.get(M)&&P[M]===void 0)throw new c(`Extension Header Parameter "${M}" MUST be integrity protected`)}return new Set(P.crit)};function Z2(c){return J4(c)&&typeof c.kty==="string"}function V8(c){return c.kty!=="oct"&&(c.kty==="AKP"&&typeof c.priv==="string"||typeof c.d==="string")}function L8(c){return c.kty!=="oct"&&typeof c.d>"u"&&typeof c.priv>"u"}function q8(c){return c.kty==="oct"&&typeof c.k==="string"}var q2,v8=async(c,K,w,P=!1)=>{q2||=new WeakMap;let S=q2.get(c);if(S?.[w])return S[w];let h=await Y8({...K,alg:w});if(P)Object.freeze(c);if(!S)q2.set(c,{[w]:h});else S[w]=h;return h},w1=(c,K)=>{q2||=new WeakMap;let w=q2.get(c);if(w?.[K])return w[K];let P=c.type==="public",S=P?!0:!1,h;if(c.asymmetricKeyType==="x25519"){switch(K){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}h=c.toCryptoKey(c.asymmetricKeyType,S,P?[]:["deriveBits"])}if(c.asymmetricKeyType==="ed25519"){if(K!=="EdDSA"&&K!=="Ed25519")throw TypeError("given KeyObject instance cannot be used for this algorithm");h=c.toCryptoKey(c.asymmetricKeyType,S,[P?"verify":"sign"])}switch(c.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":{if(K!==c.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");h=c.toCryptoKey(c.asymmetricKeyType,S,[P?"verify":"sign"])}}if(c.asymmetricKeyType==="rsa"){let M;switch(K){case"RSA-OAEP":M="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":M="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":M="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":M="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(K.startsWith("RSA-OAEP"))return c.toCryptoKey({name:"RSA-OAEP",hash:M},S,P?["encrypt"]:["decrypt"]);h=c.toCryptoKey({name:K.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:M},S,[P?"verify":"sign"])}if(c.asymmetricKeyType==="ec"){let I=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(c.asymmetricKeyDetails?.namedCurve);if(!I)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(K==="ES256"&&I==="P-256")h=c.toCryptoKey({name:"ECDSA",namedCurve:I},S,[P?"verify":"sign"]);if(K==="ES384"&&I==="P-384")h=c.toCryptoKey({name:"ECDSA",namedCurve:I},S,[P?"verify":"sign"]);if(K==="ES512"&&I==="P-521")h=c.toCryptoKey({name:"ECDSA",namedCurve:I},S,[P?"verify":"sign"]);if(K.startsWith("ECDH-ES"))h=c.toCryptoKey({name:"ECDH",namedCurve:I},S,P?[]:["deriveBits"])}if(!h)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(!w)q2.set(c,{[K]:h});else w[K]=h;return h},F8=async(c,K)=>{if(c instanceof Uint8Array)return c;if(P6(c))return c;if(S6(c)){if(c.type==="secret")return c.export();if("toCryptoKey"in c&&typeof c.toCryptoKey==="function")try{return w1(c,K)}catch(P){if(P instanceof TypeError)throw P}let w=c.export({format:"jwk"});return v8(c,w,K)}if(Z2(c)){if(c.k)return X8(c.k);return v8(c,c,K,!0)}throw Error("unreachable")};var v2=(c)=>c?.[Symbol.toStringTag],M6=(c,K,w)=>{if(K.use!==void 0){let P;switch(w){case"sign":case"verify":P="sig";break;case"encrypt":case"decrypt":P="enc";break}if(K.use!==P)throw TypeError(`Invalid key for this operation, its "use" must be "${P}" when present`)}if(K.alg!==void 0&&K.alg!==c)throw TypeError(`Invalid key for this operation, its "alg" must be "${c}" when present`);if(Array.isArray(K.key_ops)){let P;switch(!0){case(w==="sign"||w==="verify"):case c==="dir":case c.includes("CBC-HS"):P=w;break;case c.startsWith("PBES2"):P="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(c):if(!c.includes("GCM")&&c.endsWith("KW"))P=w==="encrypt"?"wrapKey":"unwrapKey";else P=w;break;case(w==="encrypt"&&c.startsWith("RSA")):P="wrapKey";break;case w==="decrypt":P=c.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(P&&K.key_ops?.includes?.(P)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${P}" when present`)}return!0},P1=(c,K,w)=>{if(K instanceof Uint8Array)return;if(Z2(K)){if(q8(K)&&M6(c,K,w))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!h6(K))throw TypeError(w6(c,K,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(K.type!=="secret")throw TypeError(`${v2(K)} instances for symmetric algorithms must be of type "secret"`)},S1=(c,K,w)=>{if(Z2(K))switch(w){case"decrypt":case"sign":if(V8(K)&&M6(c,K,w))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(L8(K)&&M6(c,K,w))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!h6(K))throw TypeError(w6(c,K,"CryptoKey","KeyObject","JSON Web Key"));if(K.type==="secret")throw TypeError(`${v2(K)} instances for asymmetric algorithms must not be of type "secret"`);if(K.type==="public")switch(w){case"sign":throw TypeError(`${v2(K)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${v2(K)} instances for asymmetric algorithm decryption must be of type "private"`);default:break}if(K.type==="private")switch(w){case"verify":throw TypeError(`${v2(K)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${v2(K)} instances for asymmetric algorithm encryption must be of type "public"`);default:break}},E8=(c,K,w)=>{if(c.startsWith("HS")||c==="dir"||c.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(c)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(c))P1(c,K,w);else S1(c,K,w)};var R8=(c,K)=>{let w=`SHA-${c.slice(-3)}`;switch(c){case"HS256":case"HS384":case"HS512":return{hash:w,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:w,name:"RSA-PSS",saltLength:parseInt(c.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:w,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:w,name:"ECDSA",namedCurve:K.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:c};default:throw new kc(`alg ${c} is not supported either by JOSE or your javascript runtime`)}};var g8=async(c,K,w)=>{if(K instanceof Uint8Array){if(!c.startsWith("HS"))throw TypeError($8(K,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",K,{hash:`SHA-${c.slice(-3)}`,name:"HMAC"},!1,[w])}return B8(K,c,w),K};var h2=(c)=>Math.floor(c.getTime()/1000);var h1=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,N4=(c)=>{let K=h1.exec(c);if(!K||K[4]&&K[1])throw TypeError("Invalid time period format");let w=parseFloat(K[2]),P=K[3].toLowerCase(),S;switch(P){case"sec":case"secs":case"second":case"seconds":case"s":S=Math.round(w);break;case"minute":case"minutes":case"min":case"mins":case"m":S=Math.round(w*60);break;case"hour":case"hours":case"hr":case"hrs":case"h":S=Math.round(w*3600);break;case"day":case"days":case"d":S=Math.round(w*86400);break;case"week":case"weeks":case"w":S=Math.round(w*604800);break;default:S=Math.round(w*31557600);break}if(K[1]==="-"||K[4]==="ago")return-S;return S};function X2(c,K){if(!Number.isFinite(K))throw TypeError(`Invalid ${c} input`);return K}class W6{#c;constructor(c){if(!J4(c))throw TypeError("JWT Claims Set MUST be an object");this.#c=structuredClone(c)}data(){return Tc.encode(JSON.stringify(this.#c))}get iss(){return this.#c.iss}set iss(c){this.#c.iss=c}get sub(){return this.#c.sub}set sub(c){this.#c.sub=c}get aud(){return this.#c.aud}set aud(c){this.#c.aud=c}set jti(c){this.#c.jti=c}set nbf(c){if(typeof c==="number")this.#c.nbf=X2("setNotBefore",c);else if(c instanceof Date)this.#c.nbf=X2("setNotBefore",h2(c));else this.#c.nbf=h2(new Date)+N4(c)}set exp(c){if(typeof c==="number")this.#c.exp=X2("setExpirationTime",c);else if(c instanceof Date)this.#c.exp=X2("setExpirationTime",h2(c));else this.#c.exp=h2(new Date)+N4(c)}set iat(c){if(typeof c>"u")this.#c.iat=h2(new Date);else if(c instanceof Date)this.#c.iat=X2("setIssuedAt",h2(c));else if(typeof c==="string")this.#c.iat=X2("setIssuedAt",h2(new Date)+N4(c));else this.#c.iat=X2("setIssuedAt",c)}}var k8=async(c,K,w)=>{let P=await g8(c,K,"sign");U8(c,P);let S=await crypto.subtle.sign(R8(c,P.algorithm),P,w);return new Uint8Array(S)};class I6{#c;#K;#w;constructor(c){if(!(c instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#c=c}setProtectedHeader(c){if(this.#K)throw TypeError("setProtectedHeader can only be called once");return this.#K=c,this}setUnprotectedHeader(c){if(this.#w)throw TypeError("setUnprotectedHeader can only be called once");return this.#w=c,this}async sign(c,K){if(!this.#K&&!this.#w)throw new S2("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Q8(this.#K,this.#w))throw new S2("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let w={...this.#K,...this.#w},P=H8(S2,new Map([["b64",!0]]),K?.crit,this.#K,w),S=!0;if(P.has("b64")){if(S=this.#K.b64,typeof S!=="boolean")throw new S2('The "b64" (base64url-encode payload) Header Parameter must be a boolean')}let{alg:h}=w;if(typeof h!=="string"||!h)throw new S2('JWS "alg" (Algorithm) Header Parameter missing or invalid');E8(h,c,"sign");let M=this.#c;if(S)M=Tc.encode(b4(M));let I;if(this.#K)I=Tc.encode(b4(JSON.stringify(this.#K)));else I=Tc.encode("");let G=D8(I,Tc.encode("."),M),D=await F8(c,h),B=await k8(h,D,G),L={signature:b4(B),payload:""};if(S)L.payload=V2.decode(M);if(this.#w)L.header=this.#w;if(this.#K)L.protected=V2.decode(I);return L}}class b6{#c;constructor(c){this.#c=new I6(c)}setProtectedHeader(c){return this.#c.setProtectedHeader(c),this}async sign(c,K){let w=await this.#c.sign(c,K);if(w.payload===void 0)throw TypeError("use the flattened module for creating JWS with b64: false");return`${w.protected}.${w.payload}.${w.signature}`}}class D4{#c;#K;constructor(c={}){this.#K=new W6(c)}setIssuer(c){return this.#K.iss=c,this}setSubject(c){return this.#K.sub=c,this}setAudience(c){return this.#K.aud=c,this}setJti(c){return this.#K.jti=c,this}setNotBefore(c){return this.#K.nbf=c,this}setExpirationTime(c){return this.#K.exp=c,this}setIssuedAt(c){return this.#K.iat=c,this}setProtectedHeader(c){return this.#c=c,this}async sign(c,K){let w=new b6(this.#K.data());if(w.setProtectedHeader(this.#c),Array.isArray(this.#c?.crit)&&this.#c.crit.includes("b64")&&this.#c.b64===!1)throw new c6("JWTs MUST NOT use unencoded payload");return w.sign(c,K)}}var $P=Object.freeze({status:"aborted"});function F(c,K,w){function P(I,G){var D;Object.defineProperty(I,"_zod",{value:I._zod??{},enumerable:!1}),(D=I._zod).traits??(D.traits=new Set),I._zod.traits.add(c),K(I,G);for(let B in M.prototype)if(!(B in I))Object.defineProperty(I,B,{value:M.prototype[B].bind(I)});I._zod.constr=M,I._zod.def=G}let S=w?.Parent??Object;class h extends S{}Object.defineProperty(h,"name",{value:c});function M(I){var G;let D=w?.Parent?new h:this;P(D,I),(G=D._zod).deferred??(G.deferred=[]);for(let B of D._zod.deferred)B();return D}return Object.defineProperty(M,"init",{value:P}),Object.defineProperty(M,Symbol.hasInstance,{value:(I)=>{if(w?.Parent&&I instanceof w.Parent)return!0;return I?._zod?.traits?.has(c)}}),Object.defineProperty(M,"name",{value:c}),M}var QP=Symbol("zod_brand");class nc extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class A2 extends Error{constructor(c){super(`Encountered unidirectional transform during encode: ${c}`);this.name="ZodEncodeError"}}var G4={};function ic(c){if(c)Object.assign(G4,c);return G4}var a={};m4(a,{unwrapMessage:()=>r2,uint8ArrayToHex:()=>g1,uint8ArrayToBase64url:()=>E1,uint8ArrayToBase64:()=>_8,stringifyPrimitive:()=>o8,shallowClone:()=>A8,safeExtend:()=>H1,required:()=>q1,randomString:()=>X1,propertyKeyTypes:()=>D6,promiseAllObject:()=>j1,primitiveTypes:()=>r8,prefixIssues:()=>C2,pick:()=>Q1,partial:()=>L1,optionalKeys:()=>G6,omit:()=>U1,objectClone:()=>N1,numKeys:()=>B1,nullish:()=>m2,normalizeParams:()=>e,mergeDefs:()=>W2,merge:()=>V1,jsonStringifyReplacer:()=>E2,joinValues:()=>J1,issue:()=>R2,isPlainObject:()=>B2,isObject:()=>F2,hexToUint8Array:()=>R1,getSizableOrigin:()=>C8,getParsedType:()=>z1,getLengthableOrigin:()=>y2,getEnumValues:()=>J6,getElementAtPath:()=>G1,floatSafeRemainder:()=>Z8,finalizeIssue:()=>Cc,extend:()=>Y1,escapeRegex:()=>z2,esc:()=>j4,defineLazy:()=>Kc,createTransparentProxy:()=>$1,cloneDef:()=>D1,clone:()=>xc,cleanRegex:()=>u2,cleanEnum:()=>v1,captureStackTrace:()=>X4,cached:()=>o2,base64urlToUint8Array:()=>F1,base64ToUint8Array:()=>y8,assignProp:()=>M2,assertNotEqual:()=>W1,assertNever:()=>b1,assertIs:()=>I1,assertEqual:()=>M1,assert:()=>O1,allowsEval:()=>N6,aborted:()=>I2,NUMBER_FORMAT_RANGES:()=>m8,Class:()=>f8,BIGINT_FORMAT_RANGES:()=>u8});function M1(c){return c}function W1(c){return c}function I1(c){}function b1(c){throw Error()}function O1(c){}function J6(c){let K=Object.values(c).filter((P)=>typeof P==="number");return Object.entries(c).filter(([P,S])=>K.indexOf(+P)===-1).map(([P,S])=>S)}function J1(c,K="|"){return c.map((w)=>o8(w)).join(K)}function E2(c,K){if(typeof K==="bigint")return K.toString();return K}function o2(c){return{get value(){{let w=c();return Object.defineProperty(this,"value",{value:w}),w}throw Error("cached value already set")}}}function m2(c){return c===null||c===void 0}function u2(c){let K=c.startsWith("^")?1:0,w=c.endsWith("$")?c.length-1:c.length;return c.slice(K,w)}function Z8(c,K){let w=(c.toString().split(".")[1]||"").length,P=K.toString(),S=(P.split(".")[1]||"").length;if(S===0&&/\d?e-\d?/.test(P)){let G=P.match(/\d?e-(\d?)/);if(G?.[1])S=Number.parseInt(G[1])}let h=w>S?w:S,M=Number.parseInt(c.toFixed(h).replace(".","")),I=Number.parseInt(K.toFixed(h).replace(".",""));return M%I/10**h}var x8=Symbol("evaluating");function Kc(c,K,w){let P=void 0;Object.defineProperty(c,K,{get(){if(P===x8)return;if(P===void 0)P=x8,P=w();return P},set(S){Object.defineProperty(c,K,{value:S})},configurable:!0})}function N1(c){return Object.create(Object.getPrototypeOf(c),Object.getOwnPropertyDescriptors(c))}function M2(c,K,w){Object.defineProperty(c,K,{value:w,writable:!0,enumerable:!0,configurable:!0})}function W2(...c){let K={};for(let w of c){let P=Object.getOwnPropertyDescriptors(w);Object.assign(K,P)}return Object.defineProperties({},K)}function D1(c){return W2(c._zod.def)}function G1(c,K){if(!K)return c;return K.reduce((w,P)=>w?.[P],c)}function j1(c){let K=Object.keys(c),w=K.map((P)=>c[P]);return Promise.all(w).then((P)=>{let S={};for(let h=0;h<K.length;h++)S[K[h]]=P[h];return S})}function X1(c=10){let w="";for(let P=0;P<c;P++)w+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return w}function j4(c){return JSON.stringify(c)}var X4="captureStackTrace"in Error?Error.captureStackTrace:(...c)=>{};function F2(c){return typeof c==="object"&&c!==null&&!Array.isArray(c)}var N6=o2(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(c){return!1}});function B2(c){if(F2(c)===!1)return!1;let K=c.constructor;if(K===void 0)return!0;let w=K.prototype;if(F2(w)===!1)return!1;if(Object.prototype.hasOwnProperty.call(w,"isPrototypeOf")===!1)return!1;return!0}function A8(c){if(B2(c))return{...c};if(Array.isArray(c))return[...c];return c}function B1(c){let K=0;for(let w in c)if(Object.prototype.hasOwnProperty.call(c,w))K++;return K}var z1=(c)=>{let K=typeof c;switch(K){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(c)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(c))return"array";if(c===null)return"null";if(c.then&&typeof c.then==="function"&&c.catch&&typeof c.catch==="function")return"promise";if(typeof Map<"u"&&c instanceof Map)return"map";if(typeof Set<"u"&&c instanceof Set)return"set";if(typeof Date<"u"&&c instanceof Date)return"date";if(typeof File<"u"&&c instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${K}`)}},D6=new Set(["string","number","symbol"]),r8=new Set(["string","number","bigint","boolean","symbol","undefined"]);function z2(c){return c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function xc(c,K,w){let P=new c._zod.constr(K??c._zod.def);if(!K||w?.parent)P._zod.parent=c;return P}function e(c){let K=c;if(!K)return{};if(typeof K==="string")return{error:()=>K};if(K?.message!==void 0){if(K?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");K.error=K.message}if(delete K.message,typeof K.error==="string")return{...K,error:()=>K.error};return K}function $1(c){let K;return new Proxy({},{get(w,P,S){return K??(K=c()),Reflect.get(K,P,S)},set(w,P,S,h){return K??(K=c()),Reflect.set(K,P,S,h)},has(w,P){return K??(K=c()),Reflect.has(K,P)},deleteProperty(w,P){return K??(K=c()),Reflect.deleteProperty(K,P)},ownKeys(w){return K??(K=c()),Reflect.ownKeys(K)},getOwnPropertyDescriptor(w,P){return K??(K=c()),Reflect.getOwnPropertyDescriptor(K,P)},defineProperty(w,P,S){return K??(K=c()),Reflect.defineProperty(K,P,S)}})}function o8(c){if(typeof c==="bigint")return c.toString()+"n";if(typeof c==="string")return`"${c}"`;return`${c}`}function G6(c){return Object.keys(c).filter((K)=>{return c[K]._zod.optin==="optional"&&c[K]._zod.optout==="optional"})}var m8={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},u8={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function Q1(c,K){let w=c._zod.def,P=W2(c._zod.def,{get shape(){let S={};for(let h in K){if(!(h in w.shape))throw Error(`Unrecognized key: "${h}"`);if(!K[h])continue;S[h]=w.shape[h]}return M2(this,"shape",S),S},checks:[]});return xc(c,P)}function U1(c,K){let w=c._zod.def,P=W2(c._zod.def,{get shape(){let S={...c._zod.def.shape};for(let h in K){if(!(h in w.shape))throw Error(`Unrecognized key: "${h}"`);if(!K[h])continue;delete S[h]}return M2(this,"shape",S),S},checks:[]});return xc(c,P)}function Y1(c,K){if(!B2(K))throw Error("Invalid input to extend: expected a plain object");let w=c._zod.def.checks;if(w&&w.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let S=W2(c._zod.def,{get shape(){let h={...c._zod.def.shape,...K};return M2(this,"shape",h),h},checks:[]});return xc(c,S)}function H1(c,K){if(!B2(K))throw Error("Invalid input to safeExtend: expected a plain object");let w={...c._zod.def,get shape(){let P={...c._zod.def.shape,...K};return M2(this,"shape",P),P},checks:c._zod.def.checks};return xc(c,w)}function V1(c,K){let w=W2(c._zod.def,{get shape(){let P={...c._zod.def.shape,...K._zod.def.shape};return M2(this,"shape",P),P},get catchall(){return K._zod.def.catchall},checks:[]});return xc(c,w)}function L1(c,K,w){let P=W2(K._zod.def,{get shape(){let S=K._zod.def.shape,h={...S};if(w)for(let M in w){if(!(M in S))throw Error(`Unrecognized key: "${M}"`);if(!w[M])continue;h[M]=c?new c({type:"optional",innerType:S[M]}):S[M]}else for(let M in S)h[M]=c?new c({type:"optional",innerType:S[M]}):S[M];return M2(this,"shape",h),h},checks:[]});return xc(K,P)}function q1(c,K,w){let P=W2(K._zod.def,{get shape(){let S=K._zod.def.shape,h={...S};if(w)for(let M in w){if(!(M in h))throw Error(`Unrecognized key: "${M}"`);if(!w[M])continue;h[M]=new c({type:"nonoptional",innerType:S[M]})}else for(let M in S)h[M]=new c({type:"nonoptional",innerType:S[M]});return M2(this,"shape",h),h},checks:[]});return xc(K,P)}function I2(c,K=0){if(c.aborted===!0)return!0;for(let w=K;w<c.issues.length;w++)if(c.issues[w]?.continue!==!0)return!0;return!1}function C2(c,K){return K.map((w)=>{var P;return(P=w).path??(P.path=[]),w.path.unshift(c),w})}function r2(c){return typeof c==="string"?c:c?.message}function Cc(c,K,w){let P={...c,path:c.path??[]};if(!c.message){let S=r2(c.inst?._zod.def?.error?.(c))??r2(K?.error?.(c))??r2(w.customError?.(c))??r2(w.localeError?.(c))??"Invalid input";P.message=S}if(delete P.inst,delete P.continue,!K?.reportInput)delete P.input;return P}function C8(c){if(c instanceof Set)return"set";if(c instanceof Map)return"map";if(c instanceof File)return"file";return"unknown"}function y2(c){if(Array.isArray(c))return"array";if(typeof c==="string")return"string";return"unknown"}function R2(...c){let[K,w,P]=c;if(typeof K==="string")return{message:K,code:"custom",input:w,inst:P};return{...K}}function v1(c){return Object.entries(c).filter(([K,w])=>{return Number.isNaN(Number.parseInt(K,10))}).map((K)=>K[1])}function y8(c){let K=atob(c),w=new Uint8Array(K.length);for(let P=0;P<K.length;P++)w[P]=K.charCodeAt(P);return w}function _8(c){let K="";for(let w=0;w<c.length;w++)K+=String.fromCharCode(c[w]);return btoa(K)}function F1(c){let K=c.replace(/-/g,"+").replace(/_/g,"/"),w="=".repeat((4-K.length%4)%4);return y8(K+w)}function E1(c){return _8(c).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function R1(c){let K=c.replace(/^0x/,"");if(K.length%2!==0)throw Error("Invalid hex string length");let w=new Uint8Array(K.length/2);for(let P=0;P<K.length;P+=2)w[P/2]=Number.parseInt(K.slice(P,P+2),16);return w}function g1(c){return Array.from(c).map((K)=>K.toString(16).padStart(2,"0")).join("")}class f8{constructor(...c){}}var e8=(c,K)=>{c.name="$ZodError",Object.defineProperty(c,"_zod",{value:c._zod,enumerable:!1}),Object.defineProperty(c,"issues",{value:K,enumerable:!1}),c.message=JSON.stringify(K,E2,2),Object.defineProperty(c,"toString",{value:()=>c.message,enumerable:!1})},B4=F("$ZodError",e8),j6=F("$ZodError",e8,{Parent:Error});function p8(c,K=(w)=>w.message){let w={},P=[];for(let S of c.issues)if(S.path.length>0)w[S.path[0]]=w[S.path[0]]||[],w[S.path[0]].push(K(S));else P.push(K(S));return{formErrors:P,fieldErrors:w}}function l8(c,K){let w=K||function(h){return h.message},P={_errors:[]},S=(h)=>{for(let M of h.issues)if(M.code==="invalid_union"&&M.errors.length)M.errors.map((I)=>S({issues:I}));else if(M.code==="invalid_key")S({issues:M.issues});else if(M.code==="invalid_element")S({issues:M.issues});else if(M.path.length===0)P._errors.push(w(M));else{let I=P,G=0;while(G<M.path.length){let D=M.path[G];if(G!==M.path.length-1)I[D]=I[D]||{_errors:[]};else I[D]=I[D]||{_errors:[]},I[D]._errors.push(w(M));I=I[D],G++}}};return S(c),P}var z4=(c)=>(K,w,P,S)=>{let h=P?Object.assign(P,{async:!1}):{async:!1},M=K._zod.run({value:w,issues:[]},h);if(M instanceof Promise)throw new nc;if(M.issues.length){let I=new(S?.Err??c)(M.issues.map((G)=>Cc(G,h,ic())));throw X4(I,S?.callee),I}return M.value};var $4=(c)=>async(K,w,P,S)=>{let h=P?Object.assign(P,{async:!0}):{async:!0},M=K._zod.run({value:w,issues:[]},h);if(M instanceof Promise)M=await M;if(M.issues.length){let I=new(S?.Err??c)(M.issues.map((G)=>Cc(G,h,ic())));throw X4(I,S?.callee),I}return M.value};var _2=(c)=>(K,w,P)=>{let S=P?{...P,async:!1}:{async:!1},h=K._zod.run({value:w,issues:[]},S);if(h instanceof Promise)throw new nc;return h.issues.length?{success:!1,error:new(c??B4)(h.issues.map((M)=>Cc(M,S,ic())))}:{success:!0,data:h.value}},T8=_2(j6),f2=(c)=>async(K,w,P)=>{let S=P?Object.assign(P,{async:!0}):{async:!0},h=K._zod.run({value:w,issues:[]},S);if(h instanceof Promise)h=await h;return h.issues.length?{success:!1,error:new c(h.issues.map((M)=>Cc(M,S,ic())))}:{success:!0,data:h.value}},n8=f2(j6),i8=(c)=>(K,w,P)=>{let S=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return z4(c)(K,w,S)};var t8=(c)=>(K,w,P)=>{return z4(c)(K,w,P)};var d8=(c)=>async(K,w,P)=>{let S=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return $4(c)(K,w,S)};var s8=(c)=>async(K,w,P)=>{return $4(c)(K,w,P)};var a8=(c)=>(K,w,P)=>{let S=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return _2(c)(K,w,S)};var cK=(c)=>(K,w,P)=>{return _2(c)(K,w,P)};var KK=(c)=>async(K,w,P)=>{let S=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return f2(c)(K,w,S)};var wK=(c)=>async(K,w,P)=>{return f2(c)(K,w,P)};var PK=/^[cC][^\s-]{8,}$/,SK=/^[0-9a-z]+$/,hK=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,MK=/^[0-9a-vA-V]{20}$/,WK=/^[A-Za-z0-9]{27}$/,IK=/^[a-zA-Z0-9_-]{21}$/,bK=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/;var OK=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,X6=(c)=>{if(!c)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${c}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)};var JK=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;function NK(){return new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}var DK=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,GK=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,jK=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,XK=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,BK=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,B6=/^[A-Za-z0-9_-]*$/,zK=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/;var $K=/^\+(?:[0-9]){6,14}[0-9]$/,QK="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",UK=new RegExp(`^${QK}$`);function YK(c){return typeof c.precision==="number"?c.precision===-1?"(?:[01]\\d|2[0-3]):[0-5]\\d":c.precision===0?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${c.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function HK(c){return new RegExp(`^${YK(c)}$`)}function VK(c){let K=YK({precision:c.precision}),w=["Z"];if(c.local)w.push("");if(c.offset)w.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let P=`${K}(?:${w.join("|")})`;return new RegExp(`^${QK}T(?:${P})$`)}var LK=(c)=>{let K=c?`[\\s\\S]{${c?.minimum??0},${c?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${K}$`)};var qK=/^[^A-Z]*$/,vK=/^[^a-z]*$/;var Vc=F("$ZodCheck",(c,K)=>{var w;c._zod??(c._zod={}),c._zod.def=K,(w=c._zod).onattach??(w.onattach=[])});var FK=F("$ZodCheckMaxLength",(c,K)=>{var w;Vc.init(c,K),(w=c._zod.def).when??(w.when=(P)=>{let S=P.value;return!m2(S)&&S.length!==void 0}),c._zod.onattach.push((P)=>{let S=P._zod.bag.maximum??Number.POSITIVE_INFINITY;if(K.maximum<S)P._zod.bag.maximum=K.maximum}),c._zod.check=(P)=>{let S=P.value;if(S.length<=K.maximum)return;let M=y2(S);P.issues.push({origin:M,code:"too_big",maximum:K.maximum,inclusive:!0,input:S,inst:c,continue:!K.abort})}}),EK=F("$ZodCheckMinLength",(c,K)=>{var w;Vc.init(c,K),(w=c._zod.def).when??(w.when=(P)=>{let S=P.value;return!m2(S)&&S.length!==void 0}),c._zod.onattach.push((P)=>{let S=P._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(K.minimum>S)P._zod.bag.minimum=K.minimum}),c._zod.check=(P)=>{let S=P.value;if(S.length>=K.minimum)return;let M=y2(S);P.issues.push({origin:M,code:"too_small",minimum:K.minimum,inclusive:!0,input:S,inst:c,continue:!K.abort})}}),RK=F("$ZodCheckLengthEquals",(c,K)=>{var w;Vc.init(c,K),(w=c._zod.def).when??(w.when=(P)=>{let S=P.value;return!m2(S)&&S.length!==void 0}),c._zod.onattach.push((P)=>{let S=P._zod.bag;S.minimum=K.length,S.maximum=K.length,S.length=K.length}),c._zod.check=(P)=>{let S=P.value,h=S.length;if(h===K.length)return;let M=y2(S),I=h>K.length;P.issues.push({origin:M,...I?{code:"too_big",maximum:K.length}:{code:"too_small",minimum:K.length},inclusive:!0,exact:!0,input:P.value,inst:c,continue:!K.abort})}}),e2=F("$ZodCheckStringFormat",(c,K)=>{var w,P;if(Vc.init(c,K),c._zod.onattach.push((S)=>{let h=S._zod.bag;if(h.format=K.format,K.pattern)h.patterns??(h.patterns=new Set),h.patterns.add(K.pattern)}),K.pattern)(w=c._zod).check??(w.check=(S)=>{if(K.pattern.lastIndex=0,K.pattern.test(S.value))return;S.issues.push({origin:"string",code:"invalid_format",format:K.format,input:S.value,...K.pattern?{pattern:K.pattern.toString()}:{},inst:c,continue:!K.abort})});else(P=c._zod).check??(P.check=()=>{})}),gK=F("$ZodCheckRegex",(c,K)=>{e2.init(c,K),c._zod.check=(w)=>{if(K.pattern.lastIndex=0,K.pattern.test(w.value))return;w.issues.push({origin:"string",code:"invalid_format",format:"regex",input:w.value,pattern:K.pattern.toString(),inst:c,continue:!K.abort})}}),kK=F("$ZodCheckLowerCase",(c,K)=>{K.pattern??(K.pattern=qK),e2.init(c,K)}),xK=F("$ZodCheckUpperCase",(c,K)=>{K.pattern??(K.pattern=vK),e2.init(c,K)}),ZK=F("$ZodCheckIncludes",(c,K)=>{Vc.init(c,K);let w=z2(K.includes),P=new RegExp(typeof K.position==="number"?`^.{${K.position}}${w}`:w);K.pattern=P,c._zod.onattach.push((S)=>{let h=S._zod.bag;h.patterns??(h.patterns=new Set),h.patterns.add(P)}),c._zod.check=(S)=>{if(S.value.includes(K.includes,K.position))return;S.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:K.includes,input:S.value,inst:c,continue:!K.abort})}}),AK=F("$ZodCheckStartsWith",(c,K)=>{Vc.init(c,K);let w=new RegExp(`^${z2(K.prefix)}.*`);K.pattern??(K.pattern=w),c._zod.onattach.push((P)=>{let S=P._zod.bag;S.patterns??(S.patterns=new Set),S.patterns.add(w)}),c._zod.check=(P)=>{if(P.value.startsWith(K.prefix))return;P.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:K.prefix,input:P.value,inst:c,continue:!K.abort})}}),rK=F("$ZodCheckEndsWith",(c,K)=>{Vc.init(c,K);let w=new RegExp(`.*${z2(K.suffix)}$`);K.pattern??(K.pattern=w),c._zod.onattach.push((P)=>{let S=P._zod.bag;S.patterns??(S.patterns=new Set),S.patterns.add(w)}),c._zod.check=(P)=>{if(P.value.endsWith(K.suffix))return;P.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:K.suffix,input:P.value,inst:c,continue:!K.abort})}});var oK=F("$ZodCheckOverwrite",(c,K)=>{Vc.init(c,K),c._zod.check=(w)=>{w.value=K.tx(w.value)}});class z6{constructor(c=[]){if(this.content=[],this.indent=0,this)this.args=c}indented(c){this.indent+=1,c(this),this.indent-=1}write(c){if(typeof c==="function"){c(this,{execution:"sync"}),c(this,{execution:"async"});return}let w=c.split(`
`).filter((h)=>h),P=Math.min(...w.map((h)=>h.length-h.trimStart().length)),S=w.map((h)=>h.slice(P)).map((h)=>" ".repeat(this.indent*2)+h);for(let h of S)this.content.push(h)}compile(){let c=Function,K=this?.args,P=[...(this?.content??[""]).map((S)=>`  ${S}`)];return new c(...K,P.join(`
`))}}var uK={major:4,minor:1,patch:9};var Oc=F("$ZodType",(c,K)=>{var w;c??(c={}),c._zod.def=K,c._zod.bag=c._zod.bag||{},c._zod.version=uK;let P=[...c._zod.def.checks??[]];if(c._zod.traits.has("$ZodCheck"))P.unshift(c);for(let S of P)for(let h of S._zod.onattach)h(c);if(P.length===0)(w=c._zod).deferred??(w.deferred=[]),c._zod.deferred?.push(()=>{c._zod.run=c._zod.parse});else{let S=(M,I,G)=>{let D=I2(M),B;for(let L of I){if(L._zod.def.when){if(!L._zod.def.when(M))continue}else if(D)continue;let z=M.issues.length,V=L._zod.check(M);if(V instanceof Promise&&G?.async===!1)throw new nc;if(B||V instanceof Promise)B=(B??Promise.resolve()).then(async()=>{if(await V,M.issues.length===z)return;if(!D)D=I2(M,z)});else{if(M.issues.length===z)continue;if(!D)D=I2(M,z)}}if(B)return B.then(()=>{return M});return M},h=(M,I,G)=>{if(I2(M))return M.aborted=!0,M;let D=S(I,P,G);if(D instanceof Promise){if(G.async===!1)throw new nc;return D.then((B)=>c._zod.parse(B,G))}return c._zod.parse(D,G)};c._zod.run=(M,I)=>{if(I.skipChecks)return c._zod.parse(M,I);if(I.direction==="backward"){let D=c._zod.parse({value:M.value,issues:[]},{...I,skipChecks:!0});if(D instanceof Promise)return D.then((B)=>{return h(B,M,I)});return h(D,M,I)}let G=c._zod.parse(M,I);if(G instanceof Promise){if(I.async===!1)throw new nc;return G.then((D)=>S(D,P,I))}return S(G,P,I)}}c["~standard"]={validate:(S)=>{try{let h=T8(c,S);return h.success?{value:h.data}:{issues:h.error?.issues}}catch(h){return n8(c,S).then((M)=>M.success?{value:M.data}:{issues:M.error?.issues})}},vendor:"zod",version:1}}),H4=F("$ZodString",(c,K)=>{Oc.init(c,K),c._zod.pattern=[...c?._zod.bag?.patterns??[]].pop()??LK(c._zod.bag),c._zod.parse=(w,P)=>{if(K.coerce)try{w.value=String(w.value)}catch(S){}if(typeof w.value==="string")return w;return w.issues.push({expected:"string",code:"invalid_type",input:w.value,inst:c}),w}}),Sc=F("$ZodStringFormat",(c,K)=>{e2.init(c,K),H4.init(c,K)}),nK=F("$ZodGUID",(c,K)=>{K.pattern??(K.pattern=OK),Sc.init(c,K)}),iK=F("$ZodUUID",(c,K)=>{if(K.version){let P={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[K.version];if(P===void 0)throw Error(`Invalid UUID version: "${K.version}"`);K.pattern??(K.pattern=X6(P))}else K.pattern??(K.pattern=X6());Sc.init(c,K)}),tK=F("$ZodEmail",(c,K)=>{K.pattern??(K.pattern=JK),Sc.init(c,K)}),dK=F("$ZodURL",(c,K)=>{Sc.init(c,K),c._zod.check=(w)=>{try{let P=w.value.trim(),S=new URL(P);if(K.hostname){if(K.hostname.lastIndex=0,!K.hostname.test(S.hostname))w.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:zK.source,input:w.value,inst:c,continue:!K.abort})}if(K.protocol){if(K.protocol.lastIndex=0,!K.protocol.test(S.protocol.endsWith(":")?S.protocol.slice(0,-1):S.protocol))w.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:K.protocol.source,input:w.value,inst:c,continue:!K.abort})}if(K.normalize)w.value=S.href;else w.value=P;return}catch(P){w.issues.push({code:"invalid_format",format:"url",input:w.value,inst:c,continue:!K.abort})}}}),sK=F("$ZodEmoji",(c,K)=>{K.pattern??(K.pattern=NK()),Sc.init(c,K)}),aK=F("$ZodNanoID",(c,K)=>{K.pattern??(K.pattern=IK),Sc.init(c,K)}),c5=F("$ZodCUID",(c,K)=>{K.pattern??(K.pattern=PK),Sc.init(c,K)}),K5=F("$ZodCUID2",(c,K)=>{K.pattern??(K.pattern=SK),Sc.init(c,K)}),w5=F("$ZodULID",(c,K)=>{K.pattern??(K.pattern=hK),Sc.init(c,K)}),P5=F("$ZodXID",(c,K)=>{K.pattern??(K.pattern=MK),Sc.init(c,K)}),S5=F("$ZodKSUID",(c,K)=>{K.pattern??(K.pattern=WK),Sc.init(c,K)}),h5=F("$ZodISODateTime",(c,K)=>{K.pattern??(K.pattern=VK(K)),Sc.init(c,K)}),M5=F("$ZodISODate",(c,K)=>{K.pattern??(K.pattern=UK),Sc.init(c,K)}),W5=F("$ZodISOTime",(c,K)=>{K.pattern??(K.pattern=HK(K)),Sc.init(c,K)}),I5=F("$ZodISODuration",(c,K)=>{K.pattern??(K.pattern=bK),Sc.init(c,K)}),b5=F("$ZodIPv4",(c,K)=>{K.pattern??(K.pattern=DK),Sc.init(c,K),c._zod.onattach.push((w)=>{let P=w._zod.bag;P.format="ipv4"})}),O5=F("$ZodIPv6",(c,K)=>{K.pattern??(K.pattern=GK),Sc.init(c,K),c._zod.onattach.push((w)=>{let P=w._zod.bag;P.format="ipv6"}),c._zod.check=(w)=>{try{new URL(`http://[${w.value}]`)}catch{w.issues.push({code:"invalid_format",format:"ipv6",input:w.value,inst:c,continue:!K.abort})}}}),J5=F("$ZodCIDRv4",(c,K)=>{K.pattern??(K.pattern=jK),Sc.init(c,K)}),N5=F("$ZodCIDRv6",(c,K)=>{K.pattern??(K.pattern=XK),Sc.init(c,K),c._zod.check=(w)=>{let P=w.value.split("/");try{if(P.length!==2)throw Error();let[S,h]=P;if(!h)throw Error();let M=Number(h);if(`${M}`!==h)throw Error();if(M<0||M>128)throw Error();new URL(`http://[${S}]`)}catch{w.issues.push({code:"invalid_format",format:"cidrv6",input:w.value,inst:c,continue:!K.abort})}}});function D5(c){if(c==="")return!0;if(c.length%4!==0)return!1;try{return atob(c),!0}catch{return!1}}var G5=F("$ZodBase64",(c,K)=>{K.pattern??(K.pattern=BK),Sc.init(c,K),c._zod.onattach.push((w)=>{w._zod.bag.contentEncoding="base64"}),c._zod.check=(w)=>{if(D5(w.value))return;w.issues.push({code:"invalid_format",format:"base64",input:w.value,inst:c,continue:!K.abort})}});function x1(c){if(!B6.test(c))return!1;let K=c.replace(/[-_]/g,(P)=>P==="-"?"+":"/"),w=K.padEnd(Math.ceil(K.length/4)*4,"=");return D5(w)}var j5=F("$ZodBase64URL",(c,K)=>{K.pattern??(K.pattern=B6),Sc.init(c,K),c._zod.onattach.push((w)=>{w._zod.bag.contentEncoding="base64url"}),c._zod.check=(w)=>{if(x1(w.value))return;w.issues.push({code:"invalid_format",format:"base64url",input:w.value,inst:c,continue:!K.abort})}}),X5=F("$ZodE164",(c,K)=>{K.pattern??(K.pattern=$K),Sc.init(c,K)});function Z1(c,K=null){try{let w=c.split(".");if(w.length!==3)return!1;let[P]=w;if(!P)return!1;let S=JSON.parse(atob(P));if("typ"in S&&S?.typ!=="JWT")return!1;if(!S.alg)return!1;if(K&&(!("alg"in S)||S.alg!==K))return!1;return!0}catch{return!1}}var B5=F("$ZodJWT",(c,K)=>{Sc.init(c,K),c._zod.check=(w)=>{if(Z1(w.value,K.alg))return;w.issues.push({code:"invalid_format",format:"jwt",input:w.value,inst:c,continue:!K.abort})}});var z5=F("$ZodUnknown",(c,K)=>{Oc.init(c,K),c._zod.parse=(w)=>w}),$5=F("$ZodNever",(c,K)=>{Oc.init(c,K),c._zod.parse=(w,P)=>{return w.issues.push({expected:"never",code:"invalid_type",input:w.value,inst:c}),w}});function CK(c,K,w){if(c.issues.length)K.issues.push(...C2(w,c.issues));K.value[w]=c.value}var Q5=F("$ZodArray",(c,K)=>{Oc.init(c,K),c._zod.parse=(w,P)=>{let S=w.value;if(!Array.isArray(S))return w.issues.push({expected:"array",code:"invalid_type",input:S,inst:c}),w;w.value=Array(S.length);let h=[];for(let M=0;M<S.length;M++){let I=S[M],G=K.element._zod.run({value:I,issues:[]},P);if(G instanceof Promise)h.push(G.then((D)=>CK(D,w,M)));else CK(G,w,M)}if(h.length)return Promise.all(h).then(()=>w);return w}});function Y4(c,K,w,P){if(c.issues.length)K.issues.push(...C2(w,c.issues));if(c.value===void 0){if(w in P)K.value[w]=void 0}else K.value[w]=c.value}function U5(c){let K=Object.keys(c.shape);for(let P of K)if(!c.shape?.[P]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${P}": expected a Zod schema`);let w=G6(c.shape);return{...c,keys:K,keySet:new Set(K),numKeys:K.length,optionalKeys:new Set(w)}}function Y5(c,K,w,P,S,h){let M=[],I=S.keySet,G=S.catchall._zod,D=G.def.type;for(let B of Object.keys(K)){if(I.has(B))continue;if(D==="never"){M.push(B);continue}let L=G.run({value:K[B],issues:[]},P);if(L instanceof Promise)c.push(L.then((z)=>Y4(z,w,B,K)));else Y4(L,w,B,K)}if(M.length)w.issues.push({code:"unrecognized_keys",keys:M,input:K,inst:h});if(!c.length)return w;return Promise.all(c).then(()=>{return w})}var A1=F("$ZodObject",(c,K)=>{Oc.init(c,K);let w=o2(()=>U5(K));Kc(c._zod,"propValues",()=>{let M=K.shape,I={};for(let G in M){let D=M[G]._zod;if(D.values){I[G]??(I[G]=new Set);for(let B of D.values)I[G].add(B)}}return I});let P=F2,S=K.catchall,h;c._zod.parse=(M,I)=>{h??(h=w.value);let G=M.value;if(!P(G))return M.issues.push({expected:"object",code:"invalid_type",input:G,inst:c}),M;M.value={};let D=[],B=h.shape;for(let L of h.keys){let V=B[L]._zod.run({value:G[L],issues:[]},I);if(V instanceof Promise)D.push(V.then((b)=>Y4(b,M,L,G)));else Y4(V,M,L,G)}if(!S)return D.length?Promise.all(D).then(()=>M):M;return Y5(D,G,M,I,w.value,c)}}),H5=F("$ZodObjectJIT",(c,K)=>{A1.init(c,K);let w=c._zod.parse,P=o2(()=>U5(K)),S=(z)=>{let V=new z6(["shape","payload","ctx"]),b=P.value,$=(X)=>{let O=j4(X);return`shape[${O}]._zod.run({ value: input[${O}], issues: [] }, ctx)`};V.write("const input = payload.value;");let q=Object.create(null),W=0;for(let X of b.keys)q[X]=`key_${W++}`;V.write("const newResult = {};");for(let X of b.keys){let O=q[X],H=j4(X);V.write(`const ${O} = ${$(X)};`),V.write(`
        if (${O}.issues.length) {
          payload.issues = payload.issues.concat(${O}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${H}, ...iss.path] : [${H}]
          })));
        }
        
        
        if (${O}.value === undefined) {
          if (${H} in input) {
            newResult[${H}] = undefined;
          }
        } else {
          newResult[${H}] = ${O}.value;
        }
        
      `)}V.write("payload.value = newResult;"),V.write("return payload;");let Y=V.compile();return(X,O)=>Y(z,X,O)},h,M=F2,I=!G4.jitless,D=I&&N6.value,B=K.catchall,L;c._zod.parse=(z,V)=>{L??(L=P.value);let b=z.value;if(!M(b))return z.issues.push({expected:"object",code:"invalid_type",input:b,inst:c}),z;if(I&&D&&V?.async===!1&&V.jitless!==!0){if(!h)h=S(K.shape);if(z=h(z,V),!B)return z;return Y5([],b,z,V,L,c)}return w(z,V)}});function yK(c,K,w,P){for(let h of c)if(h.issues.length===0)return K.value=h.value,K;let S=c.filter((h)=>!I2(h));if(S.length===1)return K.value=S[0].value,S[0];return K.issues.push({code:"invalid_union",input:K.value,inst:w,errors:c.map((h)=>h.issues.map((M)=>Cc(M,P,ic())))}),K}var V5=F("$ZodUnion",(c,K)=>{Oc.init(c,K),Kc(c._zod,"optin",()=>K.options.some((S)=>S._zod.optin==="optional")?"optional":void 0),Kc(c._zod,"optout",()=>K.options.some((S)=>S._zod.optout==="optional")?"optional":void 0),Kc(c._zod,"values",()=>{if(K.options.every((S)=>S._zod.values))return new Set(K.options.flatMap((S)=>Array.from(S._zod.values)));return}),Kc(c._zod,"pattern",()=>{if(K.options.every((S)=>S._zod.pattern)){let S=K.options.map((h)=>h._zod.pattern);return new RegExp(`^(${S.map((h)=>u2(h.source)).join("|")})$`)}return});let w=K.options.length===1,P=K.options[0]._zod.run;c._zod.parse=(S,h)=>{if(w)return P(S,h);let M=!1,I=[];for(let G of K.options){let D=G._zod.run({value:S.value,issues:[]},h);if(D instanceof Promise)I.push(D),M=!0;else{if(D.issues.length===0)return D;I.push(D)}}if(!M)return yK(I,S,c,h);return Promise.all(I).then((G)=>{return yK(G,S,c,h)})}});var L5=F("$ZodIntersection",(c,K)=>{Oc.init(c,K),c._zod.parse=(w,P)=>{let S=w.value,h=K.left._zod.run({value:S,issues:[]},P),M=K.right._zod.run({value:S,issues:[]},P);if(h instanceof Promise||M instanceof Promise)return Promise.all([h,M]).then(([G,D])=>{return _K(w,G,D)});return _K(w,h,M)}});function $6(c,K){if(c===K)return{valid:!0,data:c};if(c instanceof Date&&K instanceof Date&&+c===+K)return{valid:!0,data:c};if(B2(c)&&B2(K)){let w=Object.keys(K),P=Object.keys(c).filter((h)=>w.indexOf(h)!==-1),S={...c,...K};for(let h of P){let M=$6(c[h],K[h]);if(!M.valid)return{valid:!1,mergeErrorPath:[h,...M.mergeErrorPath]};S[h]=M.data}return{valid:!0,data:S}}if(Array.isArray(c)&&Array.isArray(K)){if(c.length!==K.length)return{valid:!1,mergeErrorPath:[]};let w=[];for(let P=0;P<c.length;P++){let S=c[P],h=K[P],M=$6(S,h);if(!M.valid)return{valid:!1,mergeErrorPath:[P,...M.mergeErrorPath]};w.push(M.data)}return{valid:!0,data:w}}return{valid:!1,mergeErrorPath:[]}}function _K(c,K,w){if(K.issues.length)c.issues.push(...K.issues);if(w.issues.length)c.issues.push(...w.issues);if(I2(c))return c;let P=$6(K.value,w.value);if(!P.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(P.mergeErrorPath)}`);return c.value=P.data,c}var q5=F("$ZodEnum",(c,K)=>{Oc.init(c,K);let w=J6(K.entries),P=new Set(w);c._zod.values=P,c._zod.pattern=new RegExp(`^(${w.filter((S)=>D6.has(typeof S)).map((S)=>typeof S==="string"?z2(S):S.toString()).join("|")})$`),c._zod.parse=(S,h)=>{let M=S.value;if(P.has(M))return S;return S.issues.push({code:"invalid_value",values:w,input:M,inst:c}),S}});var v5=F("$ZodTransform",(c,K)=>{Oc.init(c,K),c._zod.parse=(w,P)=>{if(P.direction==="backward")throw new A2(c.constructor.name);let S=K.transform(w.value,w);if(P.async)return(S instanceof Promise?S:Promise.resolve(S)).then((M)=>{return w.value=M,w});if(S instanceof Promise)throw new nc;return w.value=S,w}});function fK(c,K){if(c.issues.length&&K===void 0)return{issues:[],value:void 0};return c}var F5=F("$ZodOptional",(c,K)=>{Oc.init(c,K),c._zod.optin="optional",c._zod.optout="optional",Kc(c._zod,"values",()=>{return K.innerType._zod.values?new Set([...K.innerType._zod.values,void 0]):void 0}),Kc(c._zod,"pattern",()=>{let w=K.innerType._zod.pattern;return w?new RegExp(`^(${u2(w.source)})?$`):void 0}),c._zod.parse=(w,P)=>{if(K.innerType._zod.optin==="optional"){let S=K.innerType._zod.run(w,P);if(S instanceof Promise)return S.then((h)=>fK(h,w.value));return fK(S,w.value)}if(w.value===void 0)return w;return K.innerType._zod.run(w,P)}}),E5=F("$ZodNullable",(c,K)=>{Oc.init(c,K),Kc(c._zod,"optin",()=>K.innerType._zod.optin),Kc(c._zod,"optout",()=>K.innerType._zod.optout),Kc(c._zod,"pattern",()=>{let w=K.innerType._zod.pattern;return w?new RegExp(`^(${u2(w.source)}|null)$`):void 0}),Kc(c._zod,"values",()=>{return K.innerType._zod.values?new Set([...K.innerType._zod.values,null]):void 0}),c._zod.parse=(w,P)=>{if(w.value===null)return w;return K.innerType._zod.run(w,P)}}),R5=F("$ZodDefault",(c,K)=>{Oc.init(c,K),c._zod.optin="optional",Kc(c._zod,"values",()=>K.innerType._zod.values),c._zod.parse=(w,P)=>{if(P.direction==="backward")return K.innerType._zod.run(w,P);if(w.value===void 0)return w.value=K.defaultValue,w;let S=K.innerType._zod.run(w,P);if(S instanceof Promise)return S.then((h)=>eK(h,K));return eK(S,K)}});function eK(c,K){if(c.value===void 0)c.value=K.defaultValue;return c}var g5=F("$ZodPrefault",(c,K)=>{Oc.init(c,K),c._zod.optin="optional",Kc(c._zod,"values",()=>K.innerType._zod.values),c._zod.parse=(w,P)=>{if(P.direction==="backward")return K.innerType._zod.run(w,P);if(w.value===void 0)w.value=K.defaultValue;return K.innerType._zod.run(w,P)}}),k5=F("$ZodNonOptional",(c,K)=>{Oc.init(c,K),Kc(c._zod,"values",()=>{let w=K.innerType._zod.values;return w?new Set([...w].filter((P)=>P!==void 0)):void 0}),c._zod.parse=(w,P)=>{let S=K.innerType._zod.run(w,P);if(S instanceof Promise)return S.then((h)=>pK(h,c));return pK(S,c)}});function pK(c,K){if(!c.issues.length&&c.value===void 0)c.issues.push({code:"invalid_type",expected:"nonoptional",input:c.value,inst:K});return c}var x5=F("$ZodCatch",(c,K)=>{Oc.init(c,K),Kc(c._zod,"optin",()=>K.innerType._zod.optin),Kc(c._zod,"optout",()=>K.innerType._zod.optout),Kc(c._zod,"values",()=>K.innerType._zod.values),c._zod.parse=(w,P)=>{if(P.direction==="backward")return K.innerType._zod.run(w,P);let S=K.innerType._zod.run(w,P);if(S instanceof Promise)return S.then((h)=>{if(w.value=h.value,h.issues.length)w.value=K.catchValue({...w,error:{issues:h.issues.map((M)=>Cc(M,P,ic()))},input:w.value}),w.issues=[];return w});if(w.value=S.value,S.issues.length)w.value=K.catchValue({...w,error:{issues:S.issues.map((h)=>Cc(h,P,ic()))},input:w.value}),w.issues=[];return w}});var Z5=F("$ZodPipe",(c,K)=>{Oc.init(c,K),Kc(c._zod,"values",()=>K.in._zod.values),Kc(c._zod,"optin",()=>K.in._zod.optin),Kc(c._zod,"optout",()=>K.out._zod.optout),Kc(c._zod,"propValues",()=>K.in._zod.propValues),c._zod.parse=(w,P)=>{if(P.direction==="backward"){let h=K.out._zod.run(w,P);if(h instanceof Promise)return h.then((M)=>U4(M,K.in,P));return U4(h,K.in,P)}let S=K.in._zod.run(w,P);if(S instanceof Promise)return S.then((h)=>U4(h,K.out,P));return U4(S,K.out,P)}});function U4(c,K,w){if(c.issues.length)return c.aborted=!0,c;return K._zod.run({value:c.value,issues:c.issues},w)}var A5=F("$ZodReadonly",(c,K)=>{Oc.init(c,K),Kc(c._zod,"propValues",()=>K.innerType._zod.propValues),Kc(c._zod,"values",()=>K.innerType._zod.values),Kc(c._zod,"optin",()=>K.innerType._zod.optin),Kc(c._zod,"optout",()=>K.innerType._zod.optout),c._zod.parse=(w,P)=>{if(P.direction==="backward")return K.innerType._zod.run(w,P);let S=K.innerType._zod.run(w,P);if(S instanceof Promise)return S.then(lK);return lK(S)}});function lK(c){return c.value=Object.freeze(c.value),c}var r5=F("$ZodCustom",(c,K)=>{Vc.init(c,K),Oc.init(c,K),c._zod.parse=(w,P)=>{return w},c._zod.check=(w)=>{let P=w.value,S=K.fn(P);if(S instanceof Promise)return S.then((h)=>TK(h,w,P,c));TK(S,w,P,c);return}});function TK(c,K,w,P){if(!c){let S={code:"custom",input:w,inst:P,path:[...P._zod.def.path??[]],continue:!P._zod.def.abort};if(P._zod.def.params)S.params=P._zod.def.params;K.issues.push(R2(S))}}var CP=Symbol("ZodOutput"),yP=Symbol("ZodInput");class o5{constructor(){this._map=new WeakMap,this._idmap=new Map}add(c,...K){let w=K[0];if(this._map.set(c,w),w&&typeof w==="object"&&"id"in w){if(this._idmap.has(w.id))throw Error(`ID ${w.id} already exists in the registry`);this._idmap.set(w.id,c)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(c){let K=this._map.get(c);if(K&&typeof K==="object"&&"id"in K)this._idmap.delete(K.id);return this._map.delete(c),this}get(c){let K=c._zod.parent;if(K){let w={...this.get(K)??{}};delete w.id;let P={...w,...this._map.get(c)};return Object.keys(P).length?P:void 0}return this._map.get(c)}has(c){return this._map.has(c)}}function r1(){return new o5}var p2=r1();function m5(c,K){return new c({type:"string",...e(K)})}function Q6(c,K){return new c({type:"string",format:"email",check:"string_format",abort:!1,...e(K)})}function U6(c,K){return new c({type:"string",format:"guid",check:"string_format",abort:!1,...e(K)})}function u5(c,K){return new c({type:"string",format:"uuid",check:"string_format",abort:!1,...e(K)})}function C5(c,K){return new c({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...e(K)})}function y5(c,K){return new c({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...e(K)})}function _5(c,K){return new c({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...e(K)})}function f5(c,K){return new c({type:"string",format:"url",check:"string_format",abort:!1,...e(K)})}function e5(c,K){return new c({type:"string",format:"emoji",check:"string_format",abort:!1,...e(K)})}function p5(c,K){return new c({type:"string",format:"nanoid",check:"string_format",abort:!1,...e(K)})}function l5(c,K){return new c({type:"string",format:"cuid",check:"string_format",abort:!1,...e(K)})}function T5(c,K){return new c({type:"string",format:"cuid2",check:"string_format",abort:!1,...e(K)})}function n5(c,K){return new c({type:"string",format:"ulid",check:"string_format",abort:!1,...e(K)})}function i5(c,K){return new c({type:"string",format:"xid",check:"string_format",abort:!1,...e(K)})}function t5(c,K){return new c({type:"string",format:"ksuid",check:"string_format",abort:!1,...e(K)})}function d5(c,K){return new c({type:"string",format:"ipv4",check:"string_format",abort:!1,...e(K)})}function s5(c,K){return new c({type:"string",format:"ipv6",check:"string_format",abort:!1,...e(K)})}function a5(c,K){return new c({type:"string",format:"cidrv4",check:"string_format",abort:!1,...e(K)})}function c3(c,K){return new c({type:"string",format:"cidrv6",check:"string_format",abort:!1,...e(K)})}function K3(c,K){return new c({type:"string",format:"base64",check:"string_format",abort:!1,...e(K)})}function w3(c,K){return new c({type:"string",format:"base64url",check:"string_format",abort:!1,...e(K)})}function P3(c,K){return new c({type:"string",format:"e164",check:"string_format",abort:!1,...e(K)})}function S3(c,K){return new c({type:"string",format:"jwt",check:"string_format",abort:!1,...e(K)})}function h3(c,K){return new c({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...e(K)})}function M3(c,K){return new c({type:"string",format:"date",check:"string_format",...e(K)})}function W3(c,K){return new c({type:"string",format:"time",check:"string_format",precision:null,...e(K)})}function I3(c,K){return new c({type:"string",format:"duration",check:"string_format",...e(K)})}function b3(c){return new c({type:"unknown"})}function O3(c,K){return new c({type:"never",...e(K)})}function V4(c,K){return new FK({check:"max_length",...e(K),maximum:c})}function g2(c,K){return new EK({check:"min_length",...e(K),minimum:c})}function L4(c,K){return new RK({check:"length_equals",...e(K),length:c})}function Y6(c,K){return new gK({check:"string_format",format:"regex",...e(K),pattern:c})}function H6(c){return new kK({check:"string_format",format:"lowercase",...e(c)})}function V6(c){return new xK({check:"string_format",format:"uppercase",...e(c)})}function L6(c,K){return new ZK({check:"string_format",format:"includes",...e(K),includes:c})}function q6(c,K){return new AK({check:"string_format",format:"starts_with",...e(K),prefix:c})}function v6(c,K){return new rK({check:"string_format",format:"ends_with",...e(K),suffix:c})}function $2(c){return new oK({check:"overwrite",tx:c})}function F6(c){return $2((K)=>K.normalize(c))}function E6(){return $2((c)=>c.trim())}function R6(){return $2((c)=>c.toLowerCase())}function g6(){return $2((c)=>c.toUpperCase())}function J3(c,K,w){return new c({type:"array",element:K,...e(w)})}function N3(c,K,w){return new c({type:"custom",check:"custom",fn:K,...e(w)})}function D3(c){let K=o1((w)=>{return w.addIssue=(P)=>{if(typeof P==="string")w.issues.push(R2(P,w.value,K._zod.def));else{let S=P;if(S.fatal)S.continue=!1;S.code??(S.code="custom"),S.input??(S.input=w.value),S.inst??(S.inst=K),S.continue??(S.continue=!K._zod.def.abort),w.issues.push(R2(S))}},c(w.value,w)});return K}function o1(c,K){let w=new Vc({check:"custom",...e(K)});return w._zod.check=c,w}var n1=F("ZodISODateTime",(c,K)=>{h5.init(c,K),Mc.init(c,K)});function G3(c){return h3(n1,c)}var i1=F("ZodISODate",(c,K)=>{M5.init(c,K),Mc.init(c,K)});function j3(c){return M3(i1,c)}var t1=F("ZodISOTime",(c,K)=>{W5.init(c,K),Mc.init(c,K)});function X3(c){return W3(t1,c)}var d1=F("ZodISODuration",(c,K)=>{I5.init(c,K),Mc.init(c,K)});function B3(c){return I3(d1,c)}var z3=(c,K)=>{B4.init(c,K),c.name="ZodError",Object.defineProperties(c,{format:{value:(w)=>l8(c,w)},flatten:{value:(w)=>p8(c,w)},addIssue:{value:(w)=>{c.issues.push(w),c.message=JSON.stringify(c.issues,E2,2)}},addIssues:{value:(w)=>{c.issues.push(...w),c.message=JSON.stringify(c.issues,E2,2)}},isEmpty:{get(){return c.issues.length===0}}})},BS=F("ZodError",z3),Lc=F("ZodError",z3,{Parent:Error});var $3=z4(Lc),Q3=$4(Lc),U3=_2(Lc),Y3=f2(Lc),H3=i8(Lc),V3=t8(Lc),L3=d8(Lc),q3=s8(Lc),v3=a8(Lc),F3=cK(Lc),E3=KK(Lc),R3=wK(Lc);var Dc=F("ZodType",(c,K)=>{return Oc.init(c,K),c.def=K,c.type=K.type,Object.defineProperty(c,"_def",{value:K}),c.check=(...w)=>{return c.clone({...K,checks:[...K.checks??[],...w.map((P)=>typeof P==="function"?{_zod:{check:P,def:{check:"custom"},onattach:[]}}:P)]})},c.clone=(w,P)=>xc(c,w,P),c.brand=()=>c,c.register=(w,P)=>{return w.add(c,P),c},c.parse=(w,P)=>$3(c,w,P,{callee:c.parse}),c.safeParse=(w,P)=>U3(c,w,P),c.parseAsync=async(w,P)=>Q3(c,w,P,{callee:c.parseAsync}),c.safeParseAsync=async(w,P)=>Y3(c,w,P),c.spa=c.safeParseAsync,c.encode=(w,P)=>H3(c,w,P),c.decode=(w,P)=>V3(c,w,P),c.encodeAsync=async(w,P)=>L3(c,w,P),c.decodeAsync=async(w,P)=>q3(c,w,P),c.safeEncode=(w,P)=>v3(c,w,P),c.safeDecode=(w,P)=>F3(c,w,P),c.safeEncodeAsync=async(w,P)=>E3(c,w,P),c.safeDecodeAsync=async(w,P)=>R3(c,w,P),c.refine=(w,P)=>c.check(f9(w,P)),c.superRefine=(w)=>c.check(e9(w)),c.overwrite=(w)=>c.check($2(w)),c.optional=()=>x3(c),c.nullable=()=>Z3(c),c.nullish=()=>x3(Z3(c)),c.nonoptional=(w)=>r9(c,w),c.array=()=>Y9(c),c.or=(w)=>L9([c,w]),c.and=(w)=>v9(c,w),c.transform=(w)=>A3(c,R9(w)),c.default=(w)=>x9(c,w),c.prefault=(w)=>A9(c,w),c.catch=(w)=>m9(c,w),c.pipe=(w)=>A3(c,w),c.readonly=()=>y9(c),c.describe=(w)=>{let P=c.clone();return p2.add(P,{description:w}),P},Object.defineProperty(c,"description",{get(){return p2.get(c)?.description},configurable:!0}),c.meta=(...w)=>{if(w.length===0)return p2.get(c);let P=c.clone();return p2.add(P,w[0]),P},c.isOptional=()=>c.safeParse(void 0).success,c.isNullable=()=>c.safeParse(null).success,c}),r3=F("_ZodString",(c,K)=>{H4.init(c,K),Dc.init(c,K);let w=c._zod.bag;c.format=w.format??null,c.minLength=w.minimum??null,c.maxLength=w.maximum??null,c.regex=(...P)=>c.check(Y6(...P)),c.includes=(...P)=>c.check(L6(...P)),c.startsWith=(...P)=>c.check(q6(...P)),c.endsWith=(...P)=>c.check(v6(...P)),c.min=(...P)=>c.check(g2(...P)),c.max=(...P)=>c.check(V4(...P)),c.length=(...P)=>c.check(L4(...P)),c.nonempty=(...P)=>c.check(g2(1,...P)),c.lowercase=(P)=>c.check(H6(P)),c.uppercase=(P)=>c.check(V6(P)),c.trim=()=>c.check(E6()),c.normalize=(...P)=>c.check(F6(...P)),c.toLowerCase=()=>c.check(R6()),c.toUpperCase=()=>c.check(g6())}),K9=F("ZodString",(c,K)=>{H4.init(c,K),r3.init(c,K),c.email=(w)=>c.check(Q6(m3,w)),c.url=(w)=>c.check(f5(w9,w)),c.jwt=(w)=>c.check(S3(B9,w)),c.emoji=(w)=>c.check(e5(P9,w)),c.guid=(w)=>c.check(U6(g3,w)),c.uuid=(w)=>c.check(u5(v4,w)),c.uuidv4=(w)=>c.check(C5(v4,w)),c.uuidv6=(w)=>c.check(y5(v4,w)),c.uuidv7=(w)=>c.check(_5(v4,w)),c.nanoid=(w)=>c.check(p5(S9,w)),c.guid=(w)=>c.check(U6(g3,w)),c.cuid=(w)=>c.check(l5(h9,w)),c.cuid2=(w)=>c.check(T5(M9,w)),c.ulid=(w)=>c.check(n5(W9,w)),c.base64=(w)=>c.check(K3(G9,w)),c.base64url=(w)=>c.check(w3(j9,w)),c.xid=(w)=>c.check(i5(I9,w)),c.ksuid=(w)=>c.check(t5(b9,w)),c.ipv4=(w)=>c.check(d5(O9,w)),c.ipv6=(w)=>c.check(s5(J9,w)),c.cidrv4=(w)=>c.check(a5(N9,w)),c.cidrv6=(w)=>c.check(c3(D9,w)),c.e164=(w)=>c.check(P3(X9,w)),c.datetime=(w)=>c.check(G3(w)),c.date=(w)=>c.check(j3(w)),c.time=(w)=>c.check(X3(w)),c.duration=(w)=>c.check(B3(w))});function o3(c){return m5(K9,c)}var Mc=F("ZodStringFormat",(c,K)=>{Sc.init(c,K),r3.init(c,K)}),m3=F("ZodEmail",(c,K)=>{tK.init(c,K),Mc.init(c,K)});function u3(c){return Q6(m3,c)}var g3=F("ZodGUID",(c,K)=>{nK.init(c,K),Mc.init(c,K)});var v4=F("ZodUUID",(c,K)=>{iK.init(c,K),Mc.init(c,K)});var w9=F("ZodURL",(c,K)=>{dK.init(c,K),Mc.init(c,K)});var P9=F("ZodEmoji",(c,K)=>{sK.init(c,K),Mc.init(c,K)});var S9=F("ZodNanoID",(c,K)=>{aK.init(c,K),Mc.init(c,K)});var h9=F("ZodCUID",(c,K)=>{c5.init(c,K),Mc.init(c,K)});var M9=F("ZodCUID2",(c,K)=>{K5.init(c,K),Mc.init(c,K)});var W9=F("ZodULID",(c,K)=>{w5.init(c,K),Mc.init(c,K)});var I9=F("ZodXID",(c,K)=>{P5.init(c,K),Mc.init(c,K)});var b9=F("ZodKSUID",(c,K)=>{S5.init(c,K),Mc.init(c,K)});var O9=F("ZodIPv4",(c,K)=>{b5.init(c,K),Mc.init(c,K)});var J9=F("ZodIPv6",(c,K)=>{O5.init(c,K),Mc.init(c,K)});var N9=F("ZodCIDRv4",(c,K)=>{J5.init(c,K),Mc.init(c,K)});var D9=F("ZodCIDRv6",(c,K)=>{N5.init(c,K),Mc.init(c,K)});var G9=F("ZodBase64",(c,K)=>{G5.init(c,K),Mc.init(c,K)});var j9=F("ZodBase64URL",(c,K)=>{j5.init(c,K),Mc.init(c,K)});var X9=F("ZodE164",(c,K)=>{X5.init(c,K),Mc.init(c,K)});var B9=F("ZodJWT",(c,K)=>{B5.init(c,K),Mc.init(c,K)});var z9=F("ZodUnknown",(c,K)=>{z5.init(c,K),Dc.init(c,K)});function k3(){return b3(z9)}var $9=F("ZodNever",(c,K)=>{$5.init(c,K),Dc.init(c,K)});function Q9(c){return O3($9,c)}var U9=F("ZodArray",(c,K)=>{Q5.init(c,K),Dc.init(c,K),c.element=K.element,c.min=(w,P)=>c.check(g2(w,P)),c.nonempty=(w)=>c.check(g2(1,w)),c.max=(w,P)=>c.check(V4(w,P)),c.length=(w,P)=>c.check(L4(w,P)),c.unwrap=()=>c.element});function Y9(c,K){return J3(U9,c,K)}var H9=F("ZodObject",(c,K)=>{H5.init(c,K),Dc.init(c,K),a.defineLazy(c,"shape",()=>K.shape),c.keyof=()=>F9(Object.keys(c._zod.def.shape)),c.catchall=(w)=>c.clone({...c._zod.def,catchall:w}),c.passthrough=()=>c.clone({...c._zod.def,catchall:k3()}),c.loose=()=>c.clone({...c._zod.def,catchall:k3()}),c.strict=()=>c.clone({...c._zod.def,catchall:Q9()}),c.strip=()=>c.clone({...c._zod.def,catchall:void 0}),c.extend=(w)=>{return a.extend(c,w)},c.safeExtend=(w)=>{return a.safeExtend(c,w)},c.merge=(w)=>a.merge(c,w),c.pick=(w)=>a.pick(c,w),c.omit=(w)=>a.omit(c,w),c.partial=(...w)=>a.partial(y3,c,w[0]),c.required=(...w)=>a.required(_3,c,w[0])});function C3(c,K){let w={type:"object",get shape(){return a.assignProp(this,"shape",c?a.objectClone(c):{}),this.shape},...a.normalizeParams(K)};return new H9(w)}var V9=F("ZodUnion",(c,K)=>{V5.init(c,K),Dc.init(c,K),c.options=K.options});function L9(c,K){return new V9({type:"union",options:c,...a.normalizeParams(K)})}var q9=F("ZodIntersection",(c,K)=>{L5.init(c,K),Dc.init(c,K)});function v9(c,K){return new q9({type:"intersection",left:c,right:K})}var k6=F("ZodEnum",(c,K)=>{q5.init(c,K),Dc.init(c,K),c.enum=K.entries,c.options=Object.values(K.entries);let w=new Set(Object.keys(K.entries));c.extract=(P,S)=>{let h={};for(let M of P)if(w.has(M))h[M]=K.entries[M];else throw Error(`Key ${M} not found in enum`);return new k6({...K,checks:[],...a.normalizeParams(S),entries:h})},c.exclude=(P,S)=>{let h={...K.entries};for(let M of P)if(w.has(M))delete h[M];else throw Error(`Key ${M} not found in enum`);return new k6({...K,checks:[],...a.normalizeParams(S),entries:h})}});function F9(c,K){let w=Array.isArray(c)?Object.fromEntries(c.map((P)=>[P,P])):c;return new k6({type:"enum",entries:w,...a.normalizeParams(K)})}var E9=F("ZodTransform",(c,K)=>{v5.init(c,K),Dc.init(c,K),c._zod.parse=(w,P)=>{if(P.direction==="backward")throw new A2(c.constructor.name);w.addIssue=(h)=>{if(typeof h==="string")w.issues.push(a.issue(h,w.value,K));else{let M=h;if(M.fatal)M.continue=!1;M.code??(M.code="custom"),M.input??(M.input=w.value),M.inst??(M.inst=c),w.issues.push(a.issue(M))}};let S=K.transform(w.value,w);if(S instanceof Promise)return S.then((h)=>{return w.value=h,w});return w.value=S,w}});function R9(c){return new E9({type:"transform",transform:c})}var y3=F("ZodOptional",(c,K)=>{F5.init(c,K),Dc.init(c,K),c.unwrap=()=>c._zod.def.innerType});function x3(c){return new y3({type:"optional",innerType:c})}var g9=F("ZodNullable",(c,K)=>{E5.init(c,K),Dc.init(c,K),c.unwrap=()=>c._zod.def.innerType});function Z3(c){return new g9({type:"nullable",innerType:c})}var k9=F("ZodDefault",(c,K)=>{R5.init(c,K),Dc.init(c,K),c.unwrap=()=>c._zod.def.innerType,c.removeDefault=c.unwrap});function x9(c,K){return new k9({type:"default",innerType:c,get defaultValue(){return typeof K==="function"?K():a.shallowClone(K)}})}var Z9=F("ZodPrefault",(c,K)=>{g5.init(c,K),Dc.init(c,K),c.unwrap=()=>c._zod.def.innerType});function A9(c,K){return new Z9({type:"prefault",innerType:c,get defaultValue(){return typeof K==="function"?K():a.shallowClone(K)}})}var _3=F("ZodNonOptional",(c,K)=>{k5.init(c,K),Dc.init(c,K),c.unwrap=()=>c._zod.def.innerType});function r9(c,K){return new _3({type:"nonoptional",innerType:c,...a.normalizeParams(K)})}var o9=F("ZodCatch",(c,K)=>{x5.init(c,K),Dc.init(c,K),c.unwrap=()=>c._zod.def.innerType,c.removeCatch=c.unwrap});function m9(c,K){return new o9({type:"catch",innerType:c,catchValue:typeof K==="function"?K:()=>K})}var u9=F("ZodPipe",(c,K)=>{Z5.init(c,K),Dc.init(c,K),c.in=K.in,c.out=K.out});function A3(c,K){return new u9({type:"pipe",in:c,out:K})}var C9=F("ZodReadonly",(c,K)=>{A5.init(c,K),Dc.init(c,K),c.unwrap=()=>c._zod.def.innerType});function y9(c){return new C9({type:"readonly",innerType:c})}var _9=F("ZodCustom",(c,K)=>{r5.init(c,K),Dc.init(c,K)});function f9(c,K={}){return N3(_9,c,K)}function e9(c){return D3(c)}class F4{configs;options;#c=x2.ETokenAudiences.SYSTEM;token;constructor(c,K){this.configs=c;this.options=K}async signToken(){try{let c=new Uint8Array(Buffer.from(this.configs.secretKey,"base64")),K=await crypto.subtle.importKey("raw",c,{name:"HMAC",hash:"SHA-512"},!1,["sign","verify"]),w=await new D4({tenantId:this.configs.tenantId,appId:this.configs.appId,modeId:this.configs.modeId,iss:this.configs.tenantId,aud:x2.ETokenAudiences.SYSTEM}).setProtectedHeader({alg:"HS512"}).sign(K);return this.token=w,w}catch(c){if(this.options?.logs)console.error("[BoolGuard] Sign token error:",c);throw c}}async ping(){try{let c=this.token||await this.signToken(),K=new Headers;K.append("X-Tenant-ID",this.configs.tenantId),K.append("X-App-ID",this.configs.appId),K.append("X-Mode-ID",this.configs.modeId),K.append("Authorization",`Bearer ${c}`);let w=await fetch(`${this.#c}/v${this.options?.version}/tenant-app-modes/ping`,{method:"GET",headers:K});if(!w.ok)throw await w.json();return w.ok}catch(c){if(this.options?.logs)console.error("[BoolGuard] Ping error:",c);return!1}}async createPlainAccount({identity:c,password:K,metadata:w}){try{let P=this.token||await this.signToken(),S=new Headers;S.append("X-Tenant-ID",this.configs.tenantId),S.append("X-App-ID",this.configs.appId),S.append("X-Mode-ID",this.configs.modeId),S.append("Authorization",`Bearer ${P}`),S.append("Content-Type","application/json");let h=await fetch(`${this.#c}/v${this.options?.version}/tenant-app-mode-accounts`,{method:"POST",headers:S,body:JSON.stringify({data:{type:"plain",identity:c,password:K,metadata:w}})});if(!h.ok)throw await h.json();let{data:M}=await h.json();return Object.freeze({account:M.account,credential:M.credential})}catch(P){if(this.options?.logs)console.error("[BoolGuard] Create plain account error:",P);throw P}}async createEmailAccount({identity:c,password:K,metadata:w}){try{let P=this.token||await this.signToken(),S=new Headers;S.append("X-Tenant-ID",this.configs.tenantId),S.append("X-App-ID",this.configs.appId),S.append("X-Mode-ID",this.configs.modeId),S.append("Authorization",`Bearer ${P}`),S.append("Content-Type","application/json");let h=await fetch(`${this.#c}/v${this.options?.version}/tenant-app-mode-accounts`,{method:"POST",headers:S,body:JSON.stringify({data:{type:"email",identity:c,password:K,metadata:w}})});if(!h.ok)throw await h.json();let{data:M}=await h.json();return Object.freeze({account:M.account,credential:M.credential})}catch(P){if(this.options?.logs)console.error("[BoolGuard] Create email account error:",P);throw P}}async authenticate({identity:c,password:K}){try{let w=this.token||await this.signToken(),P=await u3().safeParseAsync(c),S=new Headers;S.append("X-Tenant-ID",this.configs.tenantId),S.append("X-App-ID",this.configs.appId),S.append("X-Mode-ID",this.configs.modeId),S.append("Authorization",`Bearer ${w}`),S.append("Content-Type","application/json");let h=await fetch(`${this.#c}/v${this.options?.version}/tenant-app-mode-accounts/authenticate`,{method:"POST",headers:S,body:JSON.stringify({data:{type:!P.success?"plain":"email",identity:c,password:K}})});if(!h.ok)throw await h.json();let{data:M}=await h.json();return Object.freeze({account:M.account,credential:M.credential,token:M.token})}catch(w){if(this.options?.logs)console.error("[BoolGuard] Authenticate error:",w);throw w}}async verifyToken({token:c}){try{let K=this.token||await this.signToken(),w=new Headers;w.append("X-Tenant-ID",this.configs.tenantId),w.append("X-App-ID",this.configs.appId),w.append("X-Mode-ID",this.configs.modeId),w.append("Authorization",`Bearer ${K}`),w.append("Content-Type","application/json");let P=await fetch(`${this.#c}/v${this.options?.version}/tenant-app-mode-accounts/verify`,{method:"POST",headers:w,body:JSON.stringify({data:{token:c}})});if(!P.ok)throw await P.json();let{data:S}=await P.json();return Object.freeze({account:S.account,credential:S.credential})}catch(K){if(this.options?.logs)console.error("[BoolGuard] Verify token error:",K);throw K}}}var Qh=async(c,K)=>{let w=new F4(c,K);if(await w.signToken(),!await w.ping())throw Error("Ping to Bool Guard service failed!");return[Nc.guardClient,w]};var p9=C3({authorization:o3().startsWith("Bearer ").min(24).transform((c)=>{let[K,w]=c.split(" ");return Object.freeze({schema:K,token:w})})});class x6{clientInstance;constructor(c){this.clientInstance=c}async start(c,K){let w=await p9.safeParseAsync(K.toJSON());if(!w.success)return c.set(Nc.authState,void 0);else{let{authorization:{token:P}}=w.data;try{let{account:S,credential:h}=await this.clientInstance.verifyToken({token:P}),M=Object.freeze({account:S,credential:h});return c.set(Nc.authState,M)}catch(S){return console.error(S),c.set(Nc.authState,void 0)}}}}Y2([O2(0,I4()),O2(1,M8())],x6.prototype,"start",null),x6=Y2([O8(),O2(0,I8(Nc.guardClient))],x6);export{Qh as loader,x6 as Middleware,Nc as Keys,a4 as Interceptor,x2 as Enums,n0 as ControllerGuard,F4 as Client,s4 as AuthState,t3 as ActionGuard};

//# debugId=45F168FE1775F6E764756E2164756E21
